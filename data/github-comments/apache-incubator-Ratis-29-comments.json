[{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421216694","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421216694","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421216694,"node_id":"IC_kwDOBMxbGc6QUNW2","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T03:19:35Z","updated_at":"2024-10-18T03:19:35Z","author_association":"CONTRIBUTOR","body":"- Version 1\r\n```java\r\nsynchronized (server) {\r\n    future = state.shutdown();\r\n    while (!future.isDone()) {\r\n        server.wait();\r\n    }\r\n}\r\n```\r\n```java\r\ntry {\r\n    run();\r\n} finally {\r\n    stopped.complete();\r\n    synchronized (server) {\r\n        server.notify();\r\n    }\r\n}\r\n```\r\n- Version 2\r\n```java\r\nsynchronized (server) {\r\n    future = state.shutdown();\r\n}\r\nfuture.join()\r\n```\r\n```java\r\ntry {\r\n    run();\r\n} finally {\r\n    stopped.complete();\r\n}\r\n```\r\n\r\nVersion 1 and Version 2 seem to be the same.  Could you point out when they will be different?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421216694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421229837","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421229837","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421229837,"node_id":"IC_kwDOBMxbGc6QUQkN","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T03:32:56Z","updated_at":"2024-10-18T03:32:56Z","author_association":"CONTRIBUTOR","body":"> * Version 1\r\n> \r\n> ```java\r\n> synchronized (server) {\r\n>     future = state.shutdown();\r\n>     while (!future.isDone()) {\r\n>         server.wait();\r\n>     }\r\n> }\r\n> ```\r\n> \r\n> ```java\r\n> try {\r\n>     run();\r\n> } finally {\r\n>     stopped.complete();\r\n>     synchronized (server) {\r\n>         server.notify();\r\n>     }\r\n> }\r\n> ```\r\n> \r\n> * Version 2\r\n> \r\n> ```java\r\n> synchronized (server) {\r\n>     future = state.shutdown();\r\n> }\r\n> future.join()\r\n> ```\r\n> \r\n> ```java\r\n> try {\r\n>     run();\r\n> } finally {\r\n>     stopped.complete();\r\n> }\r\n> ```\r\n> \r\n> Version 1 and Version 2 seem to be the same. Could you point out when they will be different?\r\n\r\nFor version 1, we need to wait for another thread to wake up before continuing execution.\r\n\r\nFor version 2, the current thread and the thread that needs to be shut down may execute in parallel.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421229837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421232260","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421232260","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421232260,"node_id":"IC_kwDOBMxbGc6QURKE","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T03:35:44Z","updated_at":"2024-10-18T03:35:44Z","author_association":"CONTRIBUTOR","body":"> For version 2, the current thread and the thread that needs to be shut down may execute in parallel.\r\n\r\nNo.  `future.join()` means that it is waiting for `stopped` to complete.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421232260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421278550","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421278550","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421278550,"node_id":"IC_kwDOBMxbGc6QUcdW","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T03:52:01Z","updated_at":"2024-10-18T03:52:01Z","author_association":"CONTRIBUTOR","body":"> > For version 2, the current thread and the thread that needs to be shut down may execute in parallel.\r\n> \r\n> No. `future.join()` means that it is waiting for `stopped` to complete.\r\n\r\n\r\n\r\n> > * Version 1\r\n> > \r\n> > ```java\r\n> > synchronized (server) {\r\n> >     future = state.shutdown();\r\n> >     while (!future.isDone()) {\r\n> >         server.wait();\r\n> >     }\r\n> > }\r\n> > ```\r\n> > \r\n> > \r\n> >     \r\n> >       \r\n> >     \r\n> > \r\n> >       \r\n> >     \r\n> > \r\n> >     \r\n> >   \r\n> > ```java\r\n> > try {\r\n> >     run();\r\n> > } finally {\r\n> >     stopped.complete();\r\n> >     synchronized (server) {\r\n> >         server.notify();\r\n> >     }\r\n> > }\r\n> > ```\r\n> > \r\n> > \r\n> >     \r\n> >       \r\n> >     \r\n> > \r\n> >       \r\n> >     \r\n> > \r\n> >     \r\n> >   \r\n> > \r\n> > * Version 2\r\n> > \r\n> > ```java\r\n> > synchronized (server) {\r\n> >     future = state.shutdown();\r\n> > }\r\n> > future.join()\r\n> > ```\r\n> > \r\n> > \r\n> >     \r\n> >       \r\n> >     \r\n> > \r\n> >       \r\n> >     \r\n> > \r\n> >     \r\n> >   \r\n> > ```java\r\n> > try {\r\n> >     run();\r\n> > } finally {\r\n> >     stopped.complete();\r\n> > }\r\n> > ```\r\n> > \r\n> > \r\n> >     \r\n> >       \r\n> >     \r\n> > \r\n> >       \r\n> >     \r\n> > \r\n> >     \r\n> >   \r\n> > Version 1 and Version 2 seem to be the same. Could you point out when they will be different?\r\n> \r\n> For version 1, we need to wait for another thread to wake up before continuing execution.\r\n> \r\n> For version 2, the current thread and the thread that needs to be shut down may execute in parallel.\r\n\r\n\r\n\r\n> > For version 2, the current thread and the thread that needs to be shut down may execute in parallel.\r\n> \r\n> No. `future.join()` means that it is waiting for `stopped` to complete.\r\n\r\nI seem to know!\r\n\r\nOnly when thread a enters future.join can the state thread execute.\r\n\r\nSo, is it possible to modify the content of the server when the state thread executes?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421278550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421296617","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421296617","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421296617,"node_id":"IC_kwDOBMxbGc6QUg3p","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T04:11:24Z","updated_at":"2024-10-18T04:16:46Z","author_association":"CONTRIBUTOR","body":"Consider a real-world scenario:\r\n\r\nThe leader, while executing **synchronized changeToFollower(...)**, calls future.join() to wait for all logAppender tasks to complete. However, at that moment, the logAppender might already be blocked, waiting to acquire the lock held by changeToFollower. This situation leads to a deadlock.\r\n\r\nPreviously, we made a change to return a future from the shutdown method (it didn't have a return value before), but we overlooked an important aspect: the fact that synchronized is reentrant. Even if we release the lock held at the changeToFollower level, the upper-layer locks are still in place. Therefore, we need to ensure that all upper-layer locks are fully released before executing future.join.\r\n\r\nThis is why, in the current commit, I use CompletableFuture.runAsync(future::join) when the function returns midway or encounters an exception.\r\n\r\nOf course, if the function returns midway or encounters an exception, we could simply ignore the future.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421296617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421357042","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421357042","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421357042,"node_id":"IC_kwDOBMxbGc6QUvny","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T04:45:47Z","updated_at":"2024-10-18T04:45:47Z","author_association":"CONTRIBUTOR","body":"> ... . Even if we release the lock held at the changeToFollower level, the upper-layer locks are still in place.  ...\r\n\r\nThis is a good.  We need to make sure that it is not holding the server lock at all.  Have you found any cases that  https://issues.apache.org/jira/secure/attachment/13072253/1168_review.patch is still hold the server lock when calling join()?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421357042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421359132","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421359132","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421359132,"node_id":"IC_kwDOBMxbGc6QUwIc","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T04:47:40Z","updated_at":"2024-10-18T04:47:40Z","author_association":"CONTRIBUTOR","body":"One easy way checking it is to add the following `Preconditions`.\r\n```java\r\n        Preconditions.assertTrue(!Thread.holdsLock(server));\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421359132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421362741","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421362741","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421362741,"node_id":"IC_kwDOBMxbGc6QUxA1","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T04:51:24Z","updated_at":"2024-10-18T04:51:24Z","author_association":"CONTRIBUTOR","body":"> > ... . Even if we release the lock held at the changeToFollower level, the upper-layer locks are still in place.  ...\r\n> \r\n> This is a good. We need to make sure that it is not holding the server lock at all. Have you found any cases that https://issues.apache.org/jira/secure/attachment/13072253/1168_review.patch is still hold the server lock when calling join()?\r\n\r\nExcept for the last future.thenApply(dummy -> reply), it seems that the other instances are joining within the lock.\r\n\r\n```\r\n  private CompletableFuture<InstallSnapshotReplyProto> notifyStateMachineToInstallSnapshot(\r\n       InstallSnapshotRequestProto request, RaftPeerId leaderId) throws IOException {\r\n     final long currentTerm;\r\n     final long leaderTerm = request.getLeaderTerm();\r\n     final TermIndex firstAvailableLogTermIndex = TermIndex.valueOf(\r\n         request.getNotification().getFirstAvailableTermIndex());\r\n     final long firstAvailableLogIndex = firstAvailableLogTermIndex.getIndex();\r\n+    final CompletableFuture<Void> future;\r\n     synchronized (server) {\r\n       final boolean recognized = state.recognizeLeader(\"notifyInstallSnapshot\", leaderId, leaderTerm);\r\n       currentTerm = state.getCurrentTerm();\r\n       if (!recognized) {\r\n-        return toInstallSnapshotReplyProto(leaderId, getMemberId(),\r\n-            currentTerm, InstallSnapshotResult.NOT_LEADER);\r\n+        return CompletableFuture.completedFuture(toInstallSnapshotReplyProto(\r\n+            leaderId, getMemberId(), currentTerm, InstallSnapshotResult.NOT_LEADER));\r\n       }\r\n-      server.changeToFollowerAndPersistMetadata(leaderTerm, true, \"installSnapshot\");\r\n+      future = server.changeToFollowerAndPersistMetadata(leaderTerm, true, \"installSnapshot\");\r\n       state.setLeader(leaderId, \"installSnapshot\");\r\n       server.updateLastRpcTime(FollowerState.UpdateType.INSTALL_SNAPSHOT_NOTIFICATION);\r\n \r\n@@ -245,8 +250,9 @@ class SnapshotInstallationHandler {\r\n           inProgressInstallSnapshotIndex.compareAndSet(firstAvailableLogIndex, INVALID_LOG_INDEX);\r\n           LOG.info(\"{}: InstallSnapshot notification result: {}, current snapshot index: {}\", getMemberId(),\r\n               InstallSnapshotResult.ALREADY_INSTALLED, snapshotIndex);\r\n-          return toInstallSnapshotReplyProto(leaderId, getMemberId(), currentTerm,\r\n+          final InstallSnapshotReplyProto reply = toInstallSnapshotReplyProto(leaderId, getMemberId(), currentTerm,\r\n               InstallSnapshotResult.ALREADY_INSTALLED, snapshotIndex);\r\n+          return future.thenApply(dummy -> reply);\r\n         }\r\n \r\n         final RaftPeerProto leaderProto;\r\n@@ -323,8 +329,9 @@ class SnapshotInstallationHandler {\r\n         inProgressInstallSnapshotIndex.set(INVALID_LOG_INDEX);\r\n         server.getStateMachine().event().notifySnapshotInstalled(\r\n             InstallSnapshotResult.SNAPSHOT_UNAVAILABLE, INVALID_LOG_INDEX, server.getPeer());\r\n-        return toInstallSnapshotReplyProto(leaderId, getMemberId(),\r\n+        final InstallSnapshotReplyProto reply = toInstallSnapshotReplyProto(leaderId, getMemberId(),\r\n             currentTerm, InstallSnapshotResult.SNAPSHOT_UNAVAILABLE);\r\n+        return future.thenApply(dummy -> reply);\r\n       }\r\n \r\n       // If a snapshot has been installed, return SNAPSHOT_INSTALLED with the installed snapshot index and reset\r\n@@ -341,8 +348,9 @@ class SnapshotInstallationHandler {\r\n         server.getStateMachine().event().notifySnapshotInstalled(\r\n             InstallSnapshotResult.SNAPSHOT_INSTALLED, latestInstalledIndex, server.getPeer());\r\n         installedIndex.set(latestInstalledIndex);\r\n-        return toInstallSnapshotReplyProto(leaderId, getMemberId(),\r\n+        final InstallSnapshotReplyProto reply = toInstallSnapshotReplyProto(leaderId, getMemberId(),\r\n             currentTerm, InstallSnapshotResult.SNAPSHOT_INSTALLED, latestInstalledSnapshotTermIndex.getIndex());\r\n+        return future.thenApply(dummy -> reply);\r\n       }\r\n \r\n       // Otherwise, Snapshot installation is in progress.\r\n@@ -350,8 +358,9 @@ class SnapshotInstallationHandler {\r\n         LOG.debug(\"{}: InstallSnapshot notification result: {}\", getMemberId(),\r\n             InstallSnapshotResult.IN_PROGRESS);\r\n       }\r\n-      return toInstallSnapshotReplyProto(leaderId, getMemberId(),\r\n+      final InstallSnapshotReplyProto reply = toInstallSnapshotReplyProto(leaderId, getMemberId(),\r\n           currentTerm, InstallSnapshotResult.IN_PROGRESS);\r\n+      return future.thenApply(dummy -> reply);\r\n     }\r\n```\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421362741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421363812","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421363812","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421363812,"node_id":"IC_kwDOBMxbGc6QUxRk","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T04:52:24Z","updated_at":"2024-10-18T04:52:24Z","author_association":"CONTRIBUTOR","body":"> One easy way checking it is to add the following `Preconditions`.\r\n> \r\n> ```java\r\n>         Preconditions.assertTrue(!Thread.holdsLock(server));\r\n> ```\r\n\r\nyes, we can do this check before call future.join()","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421363812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421366120","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421366120","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421366120,"node_id":"IC_kwDOBMxbGc6QUx1o","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T04:54:41Z","updated_at":"2024-10-18T04:54:41Z","author_association":"CONTRIBUTOR","body":"Sorry, I don't understand this [comment](https://github.com/apache/ratis/pull/1168#issuecomment-2421362741).  In the code you posted, there is no `join()` calls at all.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421366120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421367490","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421367490","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421367490,"node_id":"IC_kwDOBMxbGc6QUyLC","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T04:56:04Z","updated_at":"2024-10-18T04:56:04Z","author_association":"CONTRIBUTOR","body":"BTW, `future.thenApply(..)` is not the same as `join()`.  It still returns a un-joined future.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421367490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421369662","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421369662","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421369662,"node_id":"IC_kwDOBMxbGc6QUys-","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T04:58:28Z","updated_at":"2024-10-18T04:58:28Z","author_association":"CONTRIBUTOR","body":"> Sorry, I don't understand this [comment](https://github.com/apache/ratis/pull/1168#issuecomment-2421362741). In the code you posted, there is no `join()` calls at all.\r\n\r\n\r\n\r\n> Sorry, I don't understand this [comment](https://github.com/apache/ratis/pull/1168#issuecomment-2421362741). In the code you posted, there is no `join()` calls at all.\r\n\r\nThat's good! I'm sorry for misunderstanding the use of thenApply. With that clarification, there shouldn't be any issues.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421369662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421371159","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2421371159","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2421371159,"node_id":"IC_kwDOBMxbGc6QUzEX","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T05:00:14Z","updated_at":"2024-10-18T05:00:14Z","author_association":"CONTRIBUTOR","body":"> BTW, `future.thenApply(..)` is not the same as `join()`. It still returns a un-joined future.\r\n\r\nThank you very much for your explanation.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421371159/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421534464","html_url":"https://github.com/apache/ratis/pull/1167#issuecomment-2421534464","issue_url":"https://api.github.com/repos/apache/ratis/issues/1167","id":2421534464,"node_id":"IC_kwDOBMxbGc6QVa8A","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T06:30:38Z","updated_at":"2024-10-18T06:30:38Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , in https://github.com/apache/ratis/actions/runs/11389343669/job/31704203350?pr=1167 , there were no test failures but the build failed.  Do you know why?  I see it serval times.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421534464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421547491","html_url":"https://github.com/apache/ratis/pull/1167#issuecomment-2421547491","issue_url":"https://api.github.com/repos/apache/ratis/issues/1167","id":2421547491,"node_id":"IC_kwDOBMxbGc6QVeHj","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T06:39:31Z","updated_at":"2024-10-18T06:39:31Z","author_association":"CONTRIBUTOR","body":"> there were no test failures but the build failed. Do you know why?\r\n\r\nCan happen if the test does not complete:\r\n\r\n```\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  17:01 min\r\n[INFO] Finished at: 2024-10-17T23:08:41Z\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test (default-test) on project ratis-test: There was a timeout or other error in the fork -> [Help 1]\r\n```\r\n\r\nhttps://github.com/apache/ratis/actions/runs/11389343669/job/31704203350?pr=1167#step:5:909","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2421547491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2422727409","html_url":"https://github.com/apache/ratis/pull/1167#issuecomment-2422727409","issue_url":"https://api.github.com/repos/apache/ratis/issues/1167","id":2422727409,"node_id":"IC_kwDOBMxbGc6QZ-Lx","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T15:25:31Z","updated_at":"2024-10-18T15:25:31Z","author_association":"CONTRIBUTOR","body":"```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test (default-test) on project ratis-test: There was a timeout or other error in the fork -> [Help 1]\r\n```\r\nI saw this error but somehow there were no test timeout errors.  Not sure why.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2422727409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2422753660","html_url":"https://github.com/apache/ratis/pull/1167#issuecomment-2422753660","issue_url":"https://api.github.com/repos/apache/ratis/issues/1167","id":2422753660,"node_id":"IC_kwDOBMxbGc6QaEl8","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T15:39:34Z","updated_at":"2024-10-18T15:39:34Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , could you review this?  I will continue debugging zero-copy after this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2422753660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2423567884","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2423567884","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2423567884,"node_id":"IC_kwDOBMxbGc6QdLYM","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-19T04:45:12Z","updated_at":"2024-10-19T04:45:12Z","author_association":"CONTRIBUTOR","body":"Remove join in FollowerState and LeaderElection.\r\n\r\nFor FollowerState, changing to Candidate will close FollowerState and then return to FollowerState.stopped, which is equivalent to waiting for oneself to close.\r\n\r\nLeaderElection is similar to FollowerState. When changed to Leader, LeaderElection will be closed and then returned to LeaderElection.stop.\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2423567884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2423652146","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2423652146","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2423652146,"node_id":"IC_kwDOBMxbGc6Qdf8y","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-19T07:21:44Z","updated_at":"2024-10-19T07:21:44Z","author_association":"CONTRIBUTOR","body":"There seems to be a strange error: the address has already been used","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2423652146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2424153148","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2424153148","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2424153148,"node_id":"IC_kwDOBMxbGc6QfaQ8","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-19T19:18:09Z","updated_at":"2024-10-19T19:18:09Z","author_association":"CONTRIBUTOR","body":"> There seems to be a strange error: the address has already been used\r\n\r\nIt happens occasionally.  It may be a test problem (or library, OS bugs.)  Not sure if there is a way to prevent it.\r\n\r\nLet's simply rerun the tests for now.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2424153148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2424828033","html_url":"https://github.com/apache/ratis/pull/1167#issuecomment-2424828033","issue_url":"https://api.github.com/repos/apache/ratis/issues/1167","id":2424828033,"node_id":"IC_kwDOBMxbGc6Qh_CB","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-20T10:31:36Z","updated_at":"2024-10-20T10:31:36Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the patch, @133tosakarin for the review.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2424828033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2425105920","html_url":"https://github.com/apache/ratis/pull/1167#issuecomment-2425105920","issue_url":"https://api.github.com/repos/apache/ratis/issues/1167","id":2425105920,"node_id":"IC_kwDOBMxbGc6QjC4A","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-20T16:34:27Z","updated_at":"2024-10-20T16:34:27Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for reviewing the merging this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2425105920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2426140392","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2426140392","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2426140392,"node_id":"IC_kwDOBMxbGc6Qm_bo","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-21T09:38:12Z","updated_at":"2024-10-21T09:38:12Z","author_association":"CONTRIBUTOR","body":"#[d0cd3de]","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2426140392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2426180067","html_url":"https://github.com/apache/ratis/pull/1168#issuecomment-2426180067","issue_url":"https://api.github.com/repos/apache/ratis/issues/1168","id":2426180067,"node_id":"IC_kwDOBMxbGc6QnJHj","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-21T09:50:12Z","updated_at":"2024-10-21T16:51:49Z","author_association":"CONTRIBUTOR","body":"In this commit [d0cd3de ] , the following modifications are mainly made\r\n\r\n1. Since Follower and Candidate close themselves, calling future.join at this time will deadlock, so cancel the corresponding return or ignore it.\r\n2. There are still some tests with LeakSize > 0, I'm not sure if this is related to the current modification.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2426180067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2436772108","html_url":"https://github.com/apache/ratis/pull/1171#issuecomment-2436772108","issue_url":"https://api.github.com/repos/apache/ratis/issues/1171","id":2436772108,"node_id":"IC_kwDOBMxbGc6RPjEM","user":{"login":"SteNicholas","id":10048174,"node_id":"MDQ6VXNlcjEwMDQ4MTc0","avatar_url":"https://avatars.githubusercontent.com/u/10048174?v=4","gravatar_id":"","url":"https://api.github.com/users/SteNicholas","html_url":"https://github.com/SteNicholas","followers_url":"https://api.github.com/users/SteNicholas/followers","following_url":"https://api.github.com/users/SteNicholas/following{/other_user}","gists_url":"https://api.github.com/users/SteNicholas/gists{/gist_id}","starred_url":"https://api.github.com/users/SteNicholas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SteNicholas/subscriptions","organizations_url":"https://api.github.com/users/SteNicholas/orgs","repos_url":"https://api.github.com/users/SteNicholas/repos","events_url":"https://api.github.com/users/SteNicholas/events{/privacy}","received_events_url":"https://api.github.com/users/SteNicholas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-25T04:00:39Z","updated_at":"2024-10-25T04:00:39Z","author_association":"MEMBER","body":"@szetszwo, I have bumped ratis version to v3.1.1 and found the `NullPointerException` in Celeborn CI. PTAL.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2436772108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2437097636","html_url":"https://github.com/apache/ratis/pull/1171#issuecomment-2437097636","issue_url":"https://api.github.com/repos/apache/ratis/issues/1171","id":2437097636,"node_id":"IC_kwDOBMxbGc6RQyik","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-25T07:33:54Z","updated_at":"2024-10-25T07:33:54Z","author_association":"CONTRIBUTOR","body":"@OneSizeFitsQuorum , thanks for reviewing this!\r\n\r\n@adoroszlai , thanks for updating the title!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2437097636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2440501569","html_url":"https://github.com/apache/ratis/pull/1170#issuecomment-2440501569","issue_url":"https://api.github.com/repos/apache/ratis/issues/1170","id":2440501569,"node_id":"IC_kwDOBMxbGc6RdxlB","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-28T04:00:33Z","updated_at":"2024-10-28T04:00:33Z","author_association":"CONTRIBUTOR","body":"@OneSizeFitsQuorum , thanks a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2440501569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2446776020","html_url":"https://github.com/apache/ratis/pull/1172#issuecomment-2446776020","issue_url":"https://api.github.com/repos/apache/ratis/issues/1172","id":2446776020,"node_id":"IC_kwDOBMxbGc6R1tbU","user":{"login":"jianghuazhu","id":6416939,"node_id":"MDQ6VXNlcjY0MTY5Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/6416939?v=4","gravatar_id":"","url":"https://api.github.com/users/jianghuazhu","html_url":"https://github.com/jianghuazhu","followers_url":"https://api.github.com/users/jianghuazhu/followers","following_url":"https://api.github.com/users/jianghuazhu/following{/other_user}","gists_url":"https://api.github.com/users/jianghuazhu/gists{/gist_id}","starred_url":"https://api.github.com/users/jianghuazhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jianghuazhu/subscriptions","organizations_url":"https://api.github.com/users/jianghuazhu/orgs","repos_url":"https://api.github.com/users/jianghuazhu/repos","events_url":"https://api.github.com/users/jianghuazhu/events{/privacy}","received_events_url":"https://api.github.com/users/jianghuazhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T11:39:16Z","updated_at":"2024-10-30T11:39:16Z","author_association":"CONTRIBUTOR","body":"@szetszwo , can you help review this PR?\r\nThanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2446776020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2447905414","html_url":"https://github.com/apache/ratis/pull/1172#issuecomment-2447905414","issue_url":"https://api.github.com/repos/apache/ratis/issues/1172","id":2447905414,"node_id":"IC_kwDOBMxbGc6R6BKG","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T17:38:17Z","updated_at":"2024-10-31T03:16:09Z","author_association":"CONTRIBUTOR","body":"@jianghuazhu , thanks a lot for working on this!  \r\n\r\n`TestRaftWithGrpc` failed in the previous run.  Let's rerun it.\r\n\r\nBTW, please see if you have time to fix the remaining zero-copy bugs.  We may enable advanced tracing as below and run the test until it fails.  Then, check the retain-release trace to see why an object is NOT released properly.\r\n\r\n```diff\r\n+++ b/ratis-grpc/src/test/java/org/apache/ratis/grpc/MiniRaftClusterWithGrpc.java\r\n@@ -52,7 +52,7 @@ public class MiniRaftClusterWithGrpc extends MiniRaftCluster.RpcBase {\r\n \r\n   static {\r\n     // TODO move it to MiniRaftCluster for detecting non-gRPC cases\r\n-    ReferenceCountedLeakDetector.enable(false);\r\n+    ReferenceCountedLeakDetector.enable(true);\r\n   }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2447905414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2447930304","html_url":"https://github.com/apache/ratis/pull/1173#issuecomment-2447930304","issue_url":"https://api.github.com/repos/apache/ratis/issues/1173","id":2447930304,"node_id":"IC_kwDOBMxbGc6R6HPA","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T17:50:16Z","updated_at":"2024-10-30T17:50:16Z","author_association":"CONTRIBUTOR","body":"@133tosakarin , we already have \r\n- `callId` in https://github.com/apache/ratis/blob/bf15765a58ac1476a13239d812df0c0b172acb22/ratis-proto/src/main/proto/Raft.proto#L221 \r\nand \r\n\r\n- `termIndex` in https://github.com/apache/ratis/blob/bf15765a58ac1476a13239d812df0c0b172acb22/ratis-proto/src/main/proto/Raft.proto#L211\r\n\r\nFor new and old snapshotRequest detection, could we reuse them instead of adding a new timestamp?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2447930304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2448906875","html_url":"https://github.com/apache/ratis/pull/1172#issuecomment-2448906875","issue_url":"https://api.github.com/repos/apache/ratis/issues/1172","id":2448906875,"node_id":"IC_kwDOBMxbGc6R91p7","user":{"login":"jianghuazhu","id":6416939,"node_id":"MDQ6VXNlcjY0MTY5Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/6416939?v=4","gravatar_id":"","url":"https://api.github.com/users/jianghuazhu","html_url":"https://github.com/jianghuazhu","followers_url":"https://api.github.com/users/jianghuazhu/followers","following_url":"https://api.github.com/users/jianghuazhu/following{/other_user}","gists_url":"https://api.github.com/users/jianghuazhu/gists{/gist_id}","starred_url":"https://api.github.com/users/jianghuazhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jianghuazhu/subscriptions","organizations_url":"https://api.github.com/users/jianghuazhu/orgs","repos_url":"https://api.github.com/users/jianghuazhu/repos","events_url":"https://api.github.com/users/jianghuazhu/events{/privacy}","received_events_url":"https://api.github.com/users/jianghuazhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-31T02:41:36Z","updated_at":"2024-10-31T02:41:36Z","author_association":"CONTRIBUTOR","body":"> @jianghuazhu , thanks a lot for working on this!\r\n> \r\n> `TestRaftWithGrpc` failed in the previous run. Let's rerun it.\r\n> \r\n> BTW, please see if you have time to fix the remaining zero-copy bugs. We may enable advanced tracing as below and rerun the test until it fails. Then, check the retain-release trace to see why an object is released properly.\r\n> \r\n> ```diff\r\n> +++ b/ratis-grpc/src/test/java/org/apache/ratis/grpc/MiniRaftClusterWithGrpc.java\r\n> @@ -52,7 +52,7 @@ public class MiniRaftClusterWithGrpc extends MiniRaftCluster.RpcBase {\r\n>  \r\n>    static {\r\n>      // TODO move it to MiniRaftCluster for detecting non-gRPC cases\r\n> -    ReferenceCountedLeakDetector.enable(false);\r\n> +    ReferenceCountedLeakDetector.enable(true);\r\n>    }\r\n> ```\r\n\r\nThanks @szetszwo  for the comment and review.\r\nI will try to fix the `TestRaftWithGrpc` test failure and I will create a new jira later.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2448906875/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2449019741","html_url":"https://github.com/apache/ratis/pull/1173#issuecomment-2449019741","issue_url":"https://api.github.com/repos/apache/ratis/issues/1173","id":2449019741,"node_id":"IC_kwDOBMxbGc6R-RNd","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-31T05:07:56Z","updated_at":"2024-10-31T05:07:56Z","author_association":"CONTRIBUTOR","body":"> @133tosakarin , we already have\r\n> \r\n> * `callId` in https://github.com/apache/ratis/blob/bf15765a58ac1476a13239d812df0c0b172acb22/ratis-proto/src/main/proto/Raft.proto#L221\r\n>   \r\n>   and\r\n> * `termIndex` in https://github.com/apache/ratis/blob/bf15765a58ac1476a13239d812df0c0b172acb22/ratis-proto/src/main/proto/Raft.proto#L211\r\n> \r\n> For new and old snapshotRequest detection, could we reuse them instead of adding a new timestamp?\r\n\r\nThanks for the reminder, just use callId.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2449019741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2452075583","html_url":"https://github.com/apache/ratis/pull/1173#issuecomment-2452075583","issue_url":"https://api.github.com/repos/apache/ratis/issues/1173","id":2452075583,"node_id":"IC_kwDOBMxbGc6SJ7Q_","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-01T15:30:41Z","updated_at":"2024-11-01T15:30:41Z","author_association":"CONTRIBUTOR","body":"@133tosakarin , thanks for working on this!\r\n\r\n@OneSizeFitsQuorum , thanks also for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2452075583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2464836501","html_url":"https://github.com/apache/ratis/pull/1174#issuecomment-2464836501","issue_url":"https://api.github.com/repos/apache/ratis/issues/1174","id":2464836501,"node_id":"IC_kwDOBMxbGc6S6muV","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-08T13:59:31Z","updated_at":"2024-11-08T13:59:31Z","author_association":"CONTRIBUTOR","body":"> <img alt=\"image\" width=\"1247\" src=\"https://private-user-images.githubusercontent.com/32640567/384348847-10f9022a-6b9a-4e22-bae4-812440f592d3.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzEwNjk2OTksIm5iZiI6MTczMTA2OTM5OSwicGF0aCI6Ii8zMjY0MDU2Ny8zODQzNDg4NDctMTBmOTAyMmEtNmI5YS00ZTIyLWJhZTQtODEyNDQwZjU5MmQzLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMDglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTA4VDEyMzYzOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTgwMDE1MGYwZjFjMzU2ZjcyZmQ1OGViYjVmZWY1YzIzNmU2YWFjMzMyMTI5NTExMzEwMzA3OTIwNzgzZTM5YzMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.dyNzrqLY7MNJHGrQJOAc4cHzD9X4rR4H9Hni2O2g8ds\"> Maybe \r\nwe need to adjust the order here and delete them in order from smallest to largest to avoid bugs altogether?\r\n\r\nthese segments that will be deleted  are sorted at constructing TruncateSegment, so we may not need to adjust the order here. \r\n\r\nBTW, segments are sorted in descending order  in TruncateSegments.\r\n\r\nSo, in this PR, I use reverse order traversal to delete segments","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2464836501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2466640145","html_url":"https://github.com/apache/ratis/pull/1175#issuecomment-2466640145","issue_url":"https://api.github.com/repos/apache/ratis/issues/1175","id":2466640145,"node_id":"IC_kwDOBMxbGc6TBfER","user":{"login":"ivandika3","id":36403683,"node_id":"MDQ6VXNlcjM2NDAzNjgz","avatar_url":"https://avatars.githubusercontent.com/u/36403683?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandika3","html_url":"https://github.com/ivandika3","followers_url":"https://api.github.com/users/ivandika3/followers","following_url":"https://api.github.com/users/ivandika3/following{/other_user}","gists_url":"https://api.github.com/users/ivandika3/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandika3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandika3/subscriptions","organizations_url":"https://api.github.com/users/ivandika3/orgs","repos_url":"https://api.github.com/users/ivandika3/repos","events_url":"https://api.github.com/users/ivandika3/events{/privacy}","received_events_url":"https://api.github.com/users/ivandika3/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-10T08:32:44Z","updated_at":"2024-11-10T08:32:44Z","author_association":"CONTRIBUTOR","body":"cc: @szetszwo @SzyWilliam ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2466640145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2467094018","html_url":"https://github.com/apache/ratis/pull/1176#issuecomment-2467094018","issue_url":"https://api.github.com/repos/apache/ratis/issues/1176","id":2467094018,"node_id":"IC_kwDOBMxbGc6TDN4C","user":{"login":"OneSizeFitsQuorum","id":32640567,"node_id":"MDQ6VXNlcjMyNjQwNTY3","avatar_url":"https://avatars.githubusercontent.com/u/32640567?v=4","gravatar_id":"","url":"https://api.github.com/users/OneSizeFitsQuorum","html_url":"https://github.com/OneSizeFitsQuorum","followers_url":"https://api.github.com/users/OneSizeFitsQuorum/followers","following_url":"https://api.github.com/users/OneSizeFitsQuorum/following{/other_user}","gists_url":"https://api.github.com/users/OneSizeFitsQuorum/gists{/gist_id}","starred_url":"https://api.github.com/users/OneSizeFitsQuorum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OneSizeFitsQuorum/subscriptions","organizations_url":"https://api.github.com/users/OneSizeFitsQuorum/orgs","repos_url":"https://api.github.com/users/OneSizeFitsQuorum/repos","events_url":"https://api.github.com/users/OneSizeFitsQuorum/events{/privacy}","received_events_url":"https://api.github.com/users/OneSizeFitsQuorum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-11T02:08:55Z","updated_at":"2024-11-11T02:08:55Z","author_association":"CONTRIBUTOR","body":"@szetszwo PTAL","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2467094018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2469414516","html_url":"https://github.com/apache/ratis/pull/1175#issuecomment-2469414516","issue_url":"https://api.github.com/repos/apache/ratis/issues/1175","id":2469414516,"node_id":"IC_kwDOBMxbGc6TMEZ0","user":{"login":"ivandika3","id":36403683,"node_id":"MDQ6VXNlcjM2NDAzNjgz","avatar_url":"https://avatars.githubusercontent.com/u/36403683?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandika3","html_url":"https://github.com/ivandika3","followers_url":"https://api.github.com/users/ivandika3/followers","following_url":"https://api.github.com/users/ivandika3/following{/other_user}","gists_url":"https://api.github.com/users/ivandika3/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandika3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandika3/subscriptions","organizations_url":"https://api.github.com/users/ivandika3/orgs","repos_url":"https://api.github.com/users/ivandika3/repos","events_url":"https://api.github.com/users/ivandika3/events{/privacy}","received_events_url":"https://api.github.com/users/ivandika3/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-12T01:35:48Z","updated_at":"2024-11-12T01:35:55Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for the review and the suggestions. I have updated them accordingly.\r\n\r\n> Let's also change SegmentedRaftLogCache to handle the -1 case, which is the same as the toDelete list being empty.\r\n\r\nThis is a good idea to prevent similar issue when calling `SegmentedRaftLogCache#purge`","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2469414516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2469833077","html_url":"https://github.com/apache/ratis/pull/1177#issuecomment-2469833077","issue_url":"https://api.github.com/repos/apache/ratis/issues/1177","id":2469833077,"node_id":"IC_kwDOBMxbGc6TNql1","user":{"login":"jianghuazhu","id":6416939,"node_id":"MDQ6VXNlcjY0MTY5Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/6416939?v=4","gravatar_id":"","url":"https://api.github.com/users/jianghuazhu","html_url":"https://github.com/jianghuazhu","followers_url":"https://api.github.com/users/jianghuazhu/followers","following_url":"https://api.github.com/users/jianghuazhu/following{/other_user}","gists_url":"https://api.github.com/users/jianghuazhu/gists{/gist_id}","starred_url":"https://api.github.com/users/jianghuazhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jianghuazhu/subscriptions","organizations_url":"https://api.github.com/users/jianghuazhu/orgs","repos_url":"https://api.github.com/users/jianghuazhu/repos","events_url":"https://api.github.com/users/jianghuazhu/events{/privacy}","received_events_url":"https://api.github.com/users/jianghuazhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-12T07:59:57Z","updated_at":"2024-11-12T07:59:57Z","author_association":"CONTRIBUTOR","body":"@szetszwo  @duongkame , can you help take it a look?\r\nThanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2469833077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2470979136","html_url":"https://github.com/apache/ratis/pull/1175#issuecomment-2470979136","issue_url":"https://api.github.com/repos/apache/ratis/issues/1175","id":2470979136,"node_id":"IC_kwDOBMxbGc6TSCZA","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-12T16:23:33Z","updated_at":"2024-11-12T16:23:33Z","author_association":"CONTRIBUTOR","body":"@ivandika3 , thanks a lot for working on this!\r\n\r\n@OneSizeFitsQuorum , thanks for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2470979136/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2472305337","html_url":"https://github.com/apache/ratis/pull/1175#issuecomment-2472305337","issue_url":"https://api.github.com/repos/apache/ratis/issues/1175","id":2472305337,"node_id":"IC_kwDOBMxbGc6TXGK5","user":{"login":"ivandika3","id":36403683,"node_id":"MDQ6VXNlcjM2NDAzNjgz","avatar_url":"https://avatars.githubusercontent.com/u/36403683?v=4","gravatar_id":"","url":"https://api.github.com/users/ivandika3","html_url":"https://github.com/ivandika3","followers_url":"https://api.github.com/users/ivandika3/followers","following_url":"https://api.github.com/users/ivandika3/following{/other_user}","gists_url":"https://api.github.com/users/ivandika3/gists{/gist_id}","starred_url":"https://api.github.com/users/ivandika3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivandika3/subscriptions","organizations_url":"https://api.github.com/users/ivandika3/orgs","repos_url":"https://api.github.com/users/ivandika3/repos","events_url":"https://api.github.com/users/ivandika3/events{/privacy}","received_events_url":"https://api.github.com/users/ivandika3/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-13T03:38:06Z","updated_at":"2024-11-13T03:38:06Z","author_association":"CONTRIBUTOR","body":"@szetszwo @OneSizeFitsQuorum Thanks for the reviews and suggestions.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2472305337/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2473093367","html_url":"https://github.com/apache/ratis/pull/1176#issuecomment-2473093367","issue_url":"https://api.github.com/repos/apache/ratis/issues/1176","id":2473093367,"node_id":"IC_kwDOBMxbGc6TaGj3","user":{"login":"OneSizeFitsQuorum","id":32640567,"node_id":"MDQ6VXNlcjMyNjQwNTY3","avatar_url":"https://avatars.githubusercontent.com/u/32640567?v=4","gravatar_id":"","url":"https://api.github.com/users/OneSizeFitsQuorum","html_url":"https://github.com/OneSizeFitsQuorum","followers_url":"https://api.github.com/users/OneSizeFitsQuorum/followers","following_url":"https://api.github.com/users/OneSizeFitsQuorum/following{/other_user}","gists_url":"https://api.github.com/users/OneSizeFitsQuorum/gists{/gist_id}","starred_url":"https://api.github.com/users/OneSizeFitsQuorum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OneSizeFitsQuorum/subscriptions","organizations_url":"https://api.github.com/users/OneSizeFitsQuorum/orgs","repos_url":"https://api.github.com/users/OneSizeFitsQuorum/repos","events_url":"https://api.github.com/users/OneSizeFitsQuorum/events{/privacy}","received_events_url":"https://api.github.com/users/OneSizeFitsQuorum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-13T10:19:23Z","updated_at":"2024-11-13T10:19:23Z","author_association":"CONTRIBUTOR","body":"@adoroszlai Thanks a lot for reviewing this! Have fixed releated issues!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2473093367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2473105494","html_url":"https://github.com/apache/ratis/pull/1176#issuecomment-2473105494","issue_url":"https://api.github.com/repos/apache/ratis/issues/1176","id":2473105494,"node_id":"IC_kwDOBMxbGc6TaJhW","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-13T10:24:35Z","updated_at":"2024-11-13T10:24:35Z","author_association":"CONTRIBUTOR","body":"Thanks @OneSizeFitsQuorum for updating the patch.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2473105494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2474143979","html_url":"https://github.com/apache/ratis/pull/1176#issuecomment-2474143979","issue_url":"https://api.github.com/repos/apache/ratis/issues/1176","id":2474143979,"node_id":"IC_kwDOBMxbGc6TeHDr","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-13T16:36:39Z","updated_at":"2024-11-13T16:36:39Z","author_association":"CONTRIBUTOR","body":"@OneSizeFitsQuorum , thanks a lot for working on this!\r\n\r\n@adoroszlai , thanks for reviewing and merging this!  Also, thanks for moving the release artifacts in svn!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2474143979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2475156367","html_url":"https://github.com/apache/ratis/pull/1176#issuecomment-2475156367","issue_url":"https://api.github.com/repos/apache/ratis/issues/1176","id":2475156367,"node_id":"IC_kwDOBMxbGc6Th-OP","user":{"login":"OneSizeFitsQuorum","id":32640567,"node_id":"MDQ6VXNlcjMyNjQwNTY3","avatar_url":"https://avatars.githubusercontent.com/u/32640567?v=4","gravatar_id":"","url":"https://api.github.com/users/OneSizeFitsQuorum","html_url":"https://github.com/OneSizeFitsQuorum","followers_url":"https://api.github.com/users/OneSizeFitsQuorum/followers","following_url":"https://api.github.com/users/OneSizeFitsQuorum/following{/other_user}","gists_url":"https://api.github.com/users/OneSizeFitsQuorum/gists{/gist_id}","starred_url":"https://api.github.com/users/OneSizeFitsQuorum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OneSizeFitsQuorum/subscriptions","organizations_url":"https://api.github.com/users/OneSizeFitsQuorum/orgs","repos_url":"https://api.github.com/users/OneSizeFitsQuorum/repos","events_url":"https://api.github.com/users/OneSizeFitsQuorum/events{/privacy}","received_events_url":"https://api.github.com/users/OneSizeFitsQuorum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-14T01:23:18Z","updated_at":"2024-11-14T01:23:18Z","author_association":"CONTRIBUTOR","body":"@adoroszlai @szetszwo Thanks a lot for reviewing this pr!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2475156367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2482894848","html_url":"https://github.com/apache/ratis/pull/1177#issuecomment-2482894848","issue_url":"https://api.github.com/repos/apache/ratis/issues/1177","id":2482894848,"node_id":"IC_kwDOBMxbGc6T_fgA","user":{"login":"jianghuazhu","id":6416939,"node_id":"MDQ6VXNlcjY0MTY5Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/6416939?v=4","gravatar_id":"","url":"https://api.github.com/users/jianghuazhu","html_url":"https://github.com/jianghuazhu","followers_url":"https://api.github.com/users/jianghuazhu/followers","following_url":"https://api.github.com/users/jianghuazhu/following{/other_user}","gists_url":"https://api.github.com/users/jianghuazhu/gists{/gist_id}","starred_url":"https://api.github.com/users/jianghuazhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jianghuazhu/subscriptions","organizations_url":"https://api.github.com/users/jianghuazhu/orgs","repos_url":"https://api.github.com/users/jianghuazhu/repos","events_url":"https://api.github.com/users/jianghuazhu/events{/privacy}","received_events_url":"https://api.github.com/users/jianghuazhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-18T12:24:12Z","updated_at":"2024-11-18T12:24:12Z","author_association":"CONTRIBUTOR","body":"@szetszwo , I updated some comments. In RATIS-2184.\r\nHope you can give some advice.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2482894848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2495387678","html_url":"https://github.com/apache/ratis/pull/1181#issuecomment-2495387678","issue_url":"https://api.github.com/repos/apache/ratis/issues/1181","id":2495387678,"node_id":"IC_kwDOBMxbGc6UvJge","user":{"login":"jojochuang","id":2691807,"node_id":"MDQ6VXNlcjI2OTE4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/2691807?v=4","gravatar_id":"","url":"https://api.github.com/users/jojochuang","html_url":"https://github.com/jojochuang","followers_url":"https://api.github.com/users/jojochuang/followers","following_url":"https://api.github.com/users/jojochuang/following{/other_user}","gists_url":"https://api.github.com/users/jojochuang/gists{/gist_id}","starred_url":"https://api.github.com/users/jojochuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jojochuang/subscriptions","organizations_url":"https://api.github.com/users/jojochuang/orgs","repos_url":"https://api.github.com/users/jojochuang/repos","events_url":"https://api.github.com/users/jojochuang/events{/privacy}","received_events_url":"https://api.github.com/users/jojochuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-23T07:49:18Z","updated_at":"2024-11-23T07:50:41Z","author_association":"CONTRIBUTOR","body":"The failed test is unrelated.\r\nIt was reported and supposedly fixed by https://issues.apache.org/jira/browse/RATIS-2098","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2495387678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2495453447","html_url":"https://github.com/apache/ratis/pull/1179#issuecomment-2495453447","issue_url":"https://api.github.com/repos/apache/ratis/issues/1179","id":2495453447,"node_id":"IC_kwDOBMxbGc6UvZkH","user":{"login":"symious","id":14933944,"node_id":"MDQ6VXNlcjE0OTMzOTQ0","avatar_url":"https://avatars.githubusercontent.com/u/14933944?v=4","gravatar_id":"","url":"https://api.github.com/users/symious","html_url":"https://github.com/symious","followers_url":"https://api.github.com/users/symious/followers","following_url":"https://api.github.com/users/symious/following{/other_user}","gists_url":"https://api.github.com/users/symious/gists{/gist_id}","starred_url":"https://api.github.com/users/symious/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/symious/subscriptions","organizations_url":"https://api.github.com/users/symious/orgs","repos_url":"https://api.github.com/users/symious/repos","events_url":"https://api.github.com/users/symious/events{/privacy}","received_events_url":"https://api.github.com/users/symious/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-23T11:53:00Z","updated_at":"2024-11-23T11:53:00Z","author_association":"CONTRIBUTOR","body":"Handle close for local stream specifically to resolve the following error.\r\n```\r\n2024-11-22 16:58:34,074 [a07093ab-6bbb-48c7-ae8d-2c67b5270e69-ChunkWriter-3-0] WARN org.apache.ratis.netty.server.DataStreamManagement: Failed to process DataStreamRequestByteBuf:clientId=client-C97A2E634E73,type=STREAM_DATA,id=568891,offset=78643200,length=0,timeoutMs=1732265937487\r\njava.util.concurrent.CompletionException: Failed to close org.apache.hadoop.ozone.container.common.transport.server.ratis.LocalStream@78fa8311\r\n        at org.apache.ratis.netty.server.DataStreamManagement.close(DataStreamManagement.java:342)\r\n        at org.apache.ratis.netty.server.DataStreamManagement.writeTo(DataStreamManagement.java:333)\r\n        at org.apache.ratis.netty.server.DataStreamManagement.lambda$writeToAsync$5(DataStreamManagement.java:307)\r\n        at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.io.IOException: Failed to readPutBlockRequest from ReadOnlyByteBuf(ridx: 0, widx: 1048576, cap: 1048576, unwrapped: CompositeByteBuf(ridx: 0, widx: 1048576, cap: 1048576, components=17)): readerIndex=0, protoIndex=-1111115338, protoLength=1112163910, lengthIndex=1048572\r\n        at org.apache.hadoop.ozone.container.keyvalue.impl.KeyValueStreamDataChannel.readPutBlockRequest(KeyValueStreamDataChannel.java:273)\r\n        at org.apache.hadoop.ozone.container.keyvalue.impl.KeyValueStreamDataChannel.closeBuffers(KeyValueStreamDataChannel.java:236)\r\n        at org.apache.hadoop.ozone.container.keyvalue.impl.KeyValueStreamDataChannel.close(KeyValueStreamDataChannel.java:215)\r\n        at org.apache.ratis.netty.server.DataStreamManagement.close(DataStreamManagement.java:340)\r\n        ... 6 more\r\nCaused by: java.lang.IndexOutOfBoundsException: CompositeByteBuf(ridx: 0, widx: 1048576, cap: 1048576, components=17).slice(-1111115338, 1112163910)\r\n        at org.apache.ratis.thirdparty.io.netty.buffer.AbstractUnpooledSlicedByteBuf.checkSliceOutOfBounds(AbstractUnpooledSlicedByteBuf.java:474)\r\n        at org.apache.ratis.thirdparty.io.netty.buffer.AbstractUnpooledSlicedByteBuf.<init>(AbstractUnpooledSlicedByteBuf.java:38)\r\n        at org.apache.ratis.thirdparty.io.netty.buffer.UnpooledSlicedByteBuf.<init>(UnpooledSlicedByteBuf.java:24)\r\n        at org.apache.ratis.thirdparty.io.netty.buffer.AbstractByteBuf.slice(AbstractByteBuf.java:1221)\r\n        at org.apache.ratis.thirdparty.io.netty.buffer.ReadOnlyByteBuf.slice(ReadOnlyByteBuf.java:298)\r\n        at org.apache.hadoop.ozone.container.keyvalue.impl.KeyValueStreamDataChannel.readPutBlockRequest(KeyValueStreamDataChannel.java:270)\r\n        ... 9 more\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2495453447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2496593559","html_url":"https://github.com/apache/ratis/pull/1182#issuecomment-2496593559","issue_url":"https://api.github.com/repos/apache/ratis/issues/1182","id":2496593559,"node_id":"IC_kwDOBMxbGc6Uzv6X","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-25T03:17:55Z","updated_at":"2024-11-25T03:17:55Z","author_association":"CONTRIBUTOR","body":"@symious , in `DataStreamRequestByteBuf.release()`, it make sure that the underlying `buf` is released only once.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2496593559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2499157999","html_url":"https://github.com/apache/ratis/pull/1179#issuecomment-2499157999","issue_url":"https://api.github.com/repos/apache/ratis/issues/1179","id":2499157999,"node_id":"IC_kwDOBMxbGc6U9h_v","user":{"login":"symious","id":14933944,"node_id":"MDQ6VXNlcjE0OTMzOTQ0","avatar_url":"https://avatars.githubusercontent.com/u/14933944?v=4","gravatar_id":"","url":"https://api.github.com/users/symious","html_url":"https://github.com/symious","followers_url":"https://api.github.com/users/symious/followers","following_url":"https://api.github.com/users/symious/following{/other_user}","gists_url":"https://api.github.com/users/symious/gists{/gist_id}","starred_url":"https://api.github.com/users/symious/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/symious/subscriptions","organizations_url":"https://api.github.com/users/symious/orgs","repos_url":"https://api.github.com/users/symious/repos","events_url":"https://api.github.com/users/symious/events{/privacy}","received_events_url":"https://api.github.com/users/symious/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-25T22:23:02Z","updated_at":"2024-11-25T22:23:02Z","author_association":"CONTRIBUTOR","body":"@szetszwo Updated the patch, PTAL.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2499157999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2502329564","html_url":"https://github.com/apache/ratis/pull/1184#issuecomment-2502329564","issue_url":"https://api.github.com/repos/apache/ratis/issues/1184","id":2502329564,"node_id":"IC_kwDOBMxbGc6VJoTc","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-27T00:22:07Z","updated_at":"2024-11-27T00:22:07Z","author_association":"CONTRIBUTOR","body":"@jojochuang , the `StatusRuntimeException` stack trace often is useless since the `StatusRuntimeException` is received from the `StreamObserver.onError` method.  The stack trace contains only the gRPC internal code.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2502329564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2504395509","html_url":"https://github.com/apache/ratis/pull/1184#issuecomment-2504395509","issue_url":"https://api.github.com/repos/apache/ratis/issues/1184","id":2504395509,"node_id":"IC_kwDOBMxbGc6VRgr1","user":{"login":"jojochuang","id":2691807,"node_id":"MDQ6VXNlcjI2OTE4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/2691807?v=4","gravatar_id":"","url":"https://api.github.com/users/jojochuang","html_url":"https://github.com/jojochuang","followers_url":"https://api.github.com/users/jojochuang/followers","following_url":"https://api.github.com/users/jojochuang/following{/other_user}","gists_url":"https://api.github.com/users/jojochuang/gists{/gist_id}","starred_url":"https://api.github.com/users/jojochuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jojochuang/subscriptions","organizations_url":"https://api.github.com/users/jojochuang/orgs","repos_url":"https://api.github.com/users/jojochuang/repos","events_url":"https://api.github.com/users/jojochuang/events{/privacy}","received_events_url":"https://api.github.com/users/jojochuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-27T17:12:26Z","updated_at":"2024-11-27T17:12:26Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo.\r\nWill the java utility logger to slf4j adapter solve the problem for me (it redirects stderr to role log)? like this one: https://github.com/apache/ozone/pull/7494/files\r\nwill it shed more info about an error that way?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2504395509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2504684660","html_url":"https://github.com/apache/ratis/pull/1184#issuecomment-2504684660","issue_url":"https://api.github.com/repos/apache/ratis/issues/1184","id":2504684660,"node_id":"IC_kwDOBMxbGc6VSnR0","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-27T20:02:04Z","updated_at":"2024-11-27T20:03:55Z","author_association":"CONTRIBUTOR","body":"> Will the java utility logger to slf4j adapter solve the problem for me (it redirects stderr to role log)?  ...\r\n\r\nDo you mean that printing the stack trace in stderr?\r\n\r\nI really think that the stack trace is not useful since it will contain the gRPC and Netty internal code.  The long stack trace also makes it harder to read the log.  That's why we changed the code to not printing it in RATIS-230.  Get a taste below (copied from https://discuss.daml.com/t/extractor-issue-io-grpc-statusruntimeexception-unavailable-io-exception/517)\r\n```\r\n15:08:29.970 [default-akka.actor.default-dispatcher-166] WARN  a.s.s.RestartWithBackoffSource - Restarting graph due to failure. stack_trace: \r\nio.grpc.StatusRuntimeException: UNAVAILABLE: io exception\r\n\tat io.grpc.Status.asRuntimeException(Status.java:533)\r\n\tat io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:442)\r\n\tat io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)\r\n\tat io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)\r\n\tat io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)\r\n\tat io.grpc.internal.CensusStatsModule$StatsClientInterceptor$1$1.onClose(CensusStatsModule.java:700)\r\n\tat io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39)\r\n\tat io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23)\r\n\tat io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40)\r\n\tat io.grpc.internal.CensusTracingModule$TracingClientInterceptor$1$1.onClose(CensusTracingModule.java:399)\r\n\tat io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:507)\r\n\tat io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:66)\r\n\tat io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.close(ClientCallImpl.java:627)\r\n\tat io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.access$700(ClientCallImpl.java:515)\r\n\tat io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:686)\r\n\tat io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:675)\r\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\r\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: java.io.IOException: Connection reset by peer\r\n\tat sun.nio.ch.FileDispatcherImpl.read0(Native Method)\r\n\tat sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)\r\n\tat sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)\r\n\tat sun.nio.ch.IOUtil.read(IOUtil.java:192)\r\n\tat sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)\r\n\tat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:247)\r\n\tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1140)\r\n\tat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:347)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:148)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:697)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:632)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:549)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:511)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 more\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2504684660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2505068460","html_url":"https://github.com/apache/ratis/pull/1184#issuecomment-2505068460","issue_url":"https://api.github.com/repos/apache/ratis/issues/1184","id":2505068460,"node_id":"IC_kwDOBMxbGc6VUE-s","user":{"login":"jojochuang","id":2691807,"node_id":"MDQ6VXNlcjI2OTE4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/2691807?v=4","gravatar_id":"","url":"https://api.github.com/users/jojochuang","html_url":"https://github.com/jojochuang","followers_url":"https://api.github.com/users/jojochuang/followers","following_url":"https://api.github.com/users/jojochuang/following{/other_user}","gists_url":"https://api.github.com/users/jojochuang/gists{/gist_id}","starred_url":"https://api.github.com/users/jojochuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jojochuang/subscriptions","organizations_url":"https://api.github.com/users/jojochuang/orgs","repos_url":"https://api.github.com/users/jojochuang/repos","events_url":"https://api.github.com/users/jojochuang/events{/privacy}","received_events_url":"https://api.github.com/users/jojochuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-28T00:59:06Z","updated_at":"2024-11-28T00:59:06Z","author_association":"CONTRIBUTOR","body":"Ok I'll close the PR.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2505068460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2505209172","html_url":"https://github.com/apache/ratis/pull/1185#issuecomment-2505209172","issue_url":"https://api.github.com/repos/apache/ratis/issues/1185","id":2505209172,"node_id":"IC_kwDOBMxbGc6VUnVU","user":{"login":"OneSizeFitsQuorum","id":32640567,"node_id":"MDQ6VXNlcjMyNjQwNTY3","avatar_url":"https://avatars.githubusercontent.com/u/32640567?v=4","gravatar_id":"","url":"https://api.github.com/users/OneSizeFitsQuorum","html_url":"https://github.com/OneSizeFitsQuorum","followers_url":"https://api.github.com/users/OneSizeFitsQuorum/followers","following_url":"https://api.github.com/users/OneSizeFitsQuorum/following{/other_user}","gists_url":"https://api.github.com/users/OneSizeFitsQuorum/gists{/gist_id}","starred_url":"https://api.github.com/users/OneSizeFitsQuorum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OneSizeFitsQuorum/subscriptions","organizations_url":"https://api.github.com/users/OneSizeFitsQuorum/orgs","repos_url":"https://api.github.com/users/OneSizeFitsQuorum/repos","events_url":"https://api.github.com/users/OneSizeFitsQuorum/events{/privacy}","received_events_url":"https://api.github.com/users/OneSizeFitsQuorum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-28T03:47:58Z","updated_at":"2024-11-28T03:47:58Z","author_association":"CONTRIBUTOR","body":"@szetszwo @adoroszlai PTAL","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2505209172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2506574683","html_url":"https://github.com/apache/ratis/pull/1184#issuecomment-2506574683","issue_url":"https://api.github.com/repos/apache/ratis/issues/1184","id":2506574683,"node_id":"IC_kwDOBMxbGc6VZ0tb","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-28T17:38:33Z","updated_at":"2024-11-28T17:38:33Z","author_association":"CONTRIBUTOR","body":"@jojochuang , thanks for your understanding.  I can see two options:\r\n\r\n1. Make the stack trace configurable, or\r\n2. Print only once -- detect if the exception (with the same stack) is repeated and not printing the stack trace again.\r\n\r\nWhat do you think?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2506574683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2506578393","html_url":"https://github.com/apache/ratis/pull/1184#issuecomment-2506578393","issue_url":"https://api.github.com/repos/apache/ratis/issues/1184","id":2506578393,"node_id":"IC_kwDOBMxbGc6VZ1nZ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-28T17:41:08Z","updated_at":"2024-11-28T17:41:08Z","author_association":"CONTRIBUTOR","body":"One more option. \r\n\r\n3. Print also the cause exception (but not the stack trace), e.g. the above exception will be printed as below:\r\n```\r\n15:08:29.970 [default-akka.actor.default-dispatcher-166] WARN  a.s.s.RestartWithBackoffSource - Restarting graph due to failure. stack_trace: \r\nio.grpc.StatusRuntimeException: UNAVAILABLE: io exception\r\nCaused by: java.io.IOException: Connection reset by peer\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2506578393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2508716045","html_url":"https://github.com/apache/ratis/pull/1184#issuecomment-2508716045","issue_url":"https://api.github.com/repos/apache/ratis/issues/1184","id":2508716045,"node_id":"IC_kwDOBMxbGc6Vh_gN","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-29T22:43:57Z","updated_at":"2024-11-29T22:44:51Z","author_association":"CONTRIBUTOR","body":"@jojochuang , let's do option 3 first since it is easy.\r\n\r\nBTW, found that some exceptions are not printed in `GrpcAdminProtocolService`; see https://github.com/apache/ratis/pull/1186","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2508716045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2511747993","html_url":"https://github.com/apache/ratis/pull/1182#issuecomment-2511747993","issue_url":"https://api.github.com/repos/apache/ratis/issues/1182","id":2511747993,"node_id":"IC_kwDOBMxbGc6VtjuZ","user":{"login":"symious","id":14933944,"node_id":"MDQ6VXNlcjE0OTMzOTQ0","avatar_url":"https://avatars.githubusercontent.com/u/14933944?v=4","gravatar_id":"","url":"https://api.github.com/users/symious","html_url":"https://github.com/symious","followers_url":"https://api.github.com/users/symious/followers","following_url":"https://api.github.com/users/symious/following{/other_user}","gists_url":"https://api.github.com/users/symious/gists{/gist_id}","starred_url":"https://api.github.com/users/symious/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/symious/subscriptions","organizations_url":"https://api.github.com/users/symious/orgs","repos_url":"https://api.github.com/users/symious/repos","events_url":"https://api.github.com/users/symious/events{/privacy}","received_events_url":"https://api.github.com/users/symious/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-02T14:50:21Z","updated_at":"2024-12-02T14:50:21Z","author_association":"CONTRIBUTOR","body":"> @symious , in `DataStreamRequestByteBuf.release()`, it make sure that the underlying `buf` is released only once.\r\n\r\n@szetszwo Thanks for your reminder.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2511747993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2512166417","html_url":"https://github.com/apache/ratis/pull/1186#issuecomment-2512166417","issue_url":"https://api.github.com/repos/apache/ratis/issues/1186","id":2512166417,"node_id":"IC_kwDOBMxbGc6VvJ4R","user":{"login":"jojochuang","id":2691807,"node_id":"MDQ6VXNlcjI2OTE4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/2691807?v=4","gravatar_id":"","url":"https://api.github.com/users/jojochuang","html_url":"https://github.com/jojochuang","followers_url":"https://api.github.com/users/jojochuang/followers","following_url":"https://api.github.com/users/jojochuang/following{/other_user}","gists_url":"https://api.github.com/users/jojochuang/gists{/gist_id}","starred_url":"https://api.github.com/users/jojochuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jojochuang/subscriptions","organizations_url":"https://api.github.com/users/jojochuang/orgs","repos_url":"https://api.github.com/users/jojochuang/repos","events_url":"https://api.github.com/users/jojochuang/events{/privacy}","received_events_url":"https://api.github.com/users/jojochuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-02T17:01:05Z","updated_at":"2024-12-02T17:01:05Z","author_association":"CONTRIBUTOR","body":"Thanks this is going to be useful","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2512166417/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2513332238","html_url":"https://github.com/apache/ratis/pull/1181#issuecomment-2513332238","issue_url":"https://api.github.com/repos/apache/ratis/issues/1181","id":2513332238,"node_id":"IC_kwDOBMxbGc6VzmgO","user":{"login":"jojochuang","id":2691807,"node_id":"MDQ6VXNlcjI2OTE4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/2691807?v=4","gravatar_id":"","url":"https://api.github.com/users/jojochuang","html_url":"https://github.com/jojochuang","followers_url":"https://api.github.com/users/jojochuang/followers","following_url":"https://api.github.com/users/jojochuang/following{/other_user}","gists_url":"https://api.github.com/users/jojochuang/gists{/gist_id}","starred_url":"https://api.github.com/users/jojochuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jojochuang/subscriptions","organizations_url":"https://api.github.com/users/jojochuang/orgs","repos_url":"https://api.github.com/users/jojochuang/repos","events_url":"https://api.github.com/users/jojochuang/events{/privacy}","received_events_url":"https://api.github.com/users/jojochuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-03T01:20:05Z","updated_at":"2024-12-03T01:20:05Z","author_association":"CONTRIBUTOR","body":"Actually, just updating the doc is not sufficient.\r\n\r\nGrpcLogAppender.StreamObservers.onNext() calls sleep for waitForReady, but internally it uses Thread.sleep() so it is never going to be less than one millisecond.\r\n\r\nI'm looking at an Ozone cluster where follower DataNode completes the append follower_append_entry_latency just 0.66ms, but the leader's log_appender_latency is 1.36ms. Clearly, the one millisecond sleep granulaity is the problem for the append latency.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2513332238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2536607037","html_url":"https://github.com/apache/ratis/pull/1187#issuecomment-2536607037","issue_url":"https://api.github.com/repos/apache/ratis/issues/1187","id":2536607037,"node_id":"IC_kwDOBMxbGc6XMY09","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-11T17:20:38Z","updated_at":"2024-12-11T17:20:38Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the review.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2536607037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2543082598","html_url":"https://github.com/apache/ratis/pull/1188#issuecomment-2543082598","issue_url":"https://api.github.com/repos/apache/ratis/issues/1188","id":2543082598,"node_id":"IC_kwDOBMxbGc6XlFxm","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-14T12:16:35Z","updated_at":"2024-12-14T12:16:35Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the review.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2543082598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2547662014","html_url":"https://github.com/apache/ratis/pull/1190#issuecomment-2547662014","issue_url":"https://api.github.com/repos/apache/ratis/issues/1190","id":2547662014,"node_id":"IC_kwDOBMxbGc6X2jy-","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-17T07:10:10Z","updated_at":"2024-12-17T07:10:10Z","author_association":"CONTRIBUTOR","body":"Thanks @OneSizeFitsQuorum, @szetszwo for the review.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2547662014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2550888995","html_url":"https://github.com/apache/ratis/pull/1177#issuecomment-2550888995","issue_url":"https://api.github.com/repos/apache/ratis/issues/1177","id":2550888995,"node_id":"IC_kwDOBMxbGc6YC3oj","user":{"login":"jianghuazhu","id":6416939,"node_id":"MDQ6VXNlcjY0MTY5Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/6416939?v=4","gravatar_id":"","url":"https://api.github.com/users/jianghuazhu","html_url":"https://github.com/jianghuazhu","followers_url":"https://api.github.com/users/jianghuazhu/followers","following_url":"https://api.github.com/users/jianghuazhu/following{/other_user}","gists_url":"https://api.github.com/users/jianghuazhu/gists{/gist_id}","starred_url":"https://api.github.com/users/jianghuazhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jianghuazhu/subscriptions","organizations_url":"https://api.github.com/users/jianghuazhu/orgs","repos_url":"https://api.github.com/users/jianghuazhu/repos","events_url":"https://api.github.com/users/jianghuazhu/events{/privacy}","received_events_url":"https://api.github.com/users/jianghuazhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-18T09:59:58Z","updated_at":"2024-12-18T10:00:22Z","author_association":"CONTRIBUTOR","body":"@szetszwo , I updated it.\r\nFrom running the test, I found some problems. Here are some:\r\n1. When cluster#shutdown() is called, there is no guarantee that RaftServerProxy will release all resources in advance.\r\n2. The stack shows that LogSegment#readSegmentFile() is a very important entry.\r\n\r\nTherefore, I improved a few points:\r\n1. When cluster#shutdown() is called, try to release all resources as much as possible.\r\n2. Where necessary, add some captures and call ReferenceCountedObject#release().\r\nAfter many tests, no problems were found when running TestRaftWithGrpc.\r\nci : https://github.com/jianghuazhu/ratis/actions/runs/12390154687","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2550888995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2551962459","html_url":"https://github.com/apache/ratis/pull/1177#issuecomment-2551962459","issue_url":"https://api.github.com/repos/apache/ratis/issues/1177","id":2551962459,"node_id":"IC_kwDOBMxbGc6YG9tb","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-18T18:05:09Z","updated_at":"2024-12-18T18:05:09Z","author_association":"CONTRIBUTOR","body":"> ...  RaftServerProxy will release all resources in advance.\r\n\r\nWhat resources?  We need to fix if it is really the case.\r\n\r\n> After many tests, no problems were found  ...\r\n\r\nThat's great!   Let me start a build to repeating running many times.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2551962459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2551982489","html_url":"https://github.com/apache/ratis/pull/1177#issuecomment-2551982489","issue_url":"https://api.github.com/repos/apache/ratis/issues/1177","id":2551982489,"node_id":"IC_kwDOBMxbGc6YHCmZ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-18T18:16:30Z","updated_at":"2024-12-18T18:16:30Z","author_association":"CONTRIBUTOR","body":"> Let me start a build to repeating running many times.\r\n\r\nStarted https://github.com/szetszwo/ratis/actions/runs/12398883445","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2551982489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2553322631","html_url":"https://github.com/apache/ratis/pull/1177#issuecomment-2553322631","issue_url":"https://api.github.com/repos/apache/ratis/issues/1177","id":2553322631,"node_id":"IC_kwDOBMxbGc6YMJyH","user":{"login":"jianghuazhu","id":6416939,"node_id":"MDQ6VXNlcjY0MTY5Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/6416939?v=4","gravatar_id":"","url":"https://api.github.com/users/jianghuazhu","html_url":"https://github.com/jianghuazhu","followers_url":"https://api.github.com/users/jianghuazhu/followers","following_url":"https://api.github.com/users/jianghuazhu/following{/other_user}","gists_url":"https://api.github.com/users/jianghuazhu/gists{/gist_id}","starred_url":"https://api.github.com/users/jianghuazhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jianghuazhu/subscriptions","organizations_url":"https://api.github.com/users/jianghuazhu/orgs","repos_url":"https://api.github.com/users/jianghuazhu/repos","events_url":"https://api.github.com/users/jianghuazhu/events{/privacy}","received_events_url":"https://api.github.com/users/jianghuazhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-19T10:13:52Z","updated_at":"2024-12-19T10:13:52Z","author_association":"CONTRIBUTOR","body":"> > Let me start a build to repeating running many times.\r\n> \r\n> Started https://github.com/szetszwo/ratis/actions/runs/12398883445\r\n\r\nSorry, there seem to be some errors or omissions that have not been discovered.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2553322631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2554195868","html_url":"https://github.com/apache/ratis/pull/1177#issuecomment-2554195868","issue_url":"https://api.github.com/repos/apache/ratis/issues/1177","id":2554195868,"node_id":"IC_kwDOBMxbGc6YPe-c","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-19T14:08:37Z","updated_at":"2024-12-19T14:08:37Z","author_association":"CONTRIBUTOR","body":"@jianghuazhu , The 10x100 build timed out.  Let's retry with 10x10:\r\nhttps://github.com/szetszwo/ratis/actions/runs/12414246844","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2554195868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2555557428","html_url":"https://github.com/apache/ratis/pull/1177#issuecomment-2555557428","issue_url":"https://api.github.com/repos/apache/ratis/issues/1177","id":2555557428,"node_id":"IC_kwDOBMxbGc6YUrY0","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-19T18:53:31Z","updated_at":"2024-12-19T18:53:31Z","author_association":"CONTRIBUTOR","body":"@jianghuazhu , compared with the master, your branch does have improved the success rate\r\n- master Total failures: 42 ( https://github.com/apache/ratis/actions/runs/12416764228/job/34669317055 )\r\n- your branch failures: 20 ( https://github.com/szetszwo/ratis/actions/runs/12414246844/job/34661434032 )\r\n\r\nCould you clean up the code?  We may merge it first and have some further improvement in a separated JIRA.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2555557428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2556243450","html_url":"https://github.com/apache/ratis/pull/1177#issuecomment-2556243450","issue_url":"https://api.github.com/repos/apache/ratis/issues/1177","id":2556243450,"node_id":"IC_kwDOBMxbGc6YXS36","user":{"login":"jianghuazhu","id":6416939,"node_id":"MDQ6VXNlcjY0MTY5Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/6416939?v=4","gravatar_id":"","url":"https://api.github.com/users/jianghuazhu","html_url":"https://github.com/jianghuazhu","followers_url":"https://api.github.com/users/jianghuazhu/followers","following_url":"https://api.github.com/users/jianghuazhu/following{/other_user}","gists_url":"https://api.github.com/users/jianghuazhu/gists{/gist_id}","starred_url":"https://api.github.com/users/jianghuazhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jianghuazhu/subscriptions","organizations_url":"https://api.github.com/users/jianghuazhu/orgs","repos_url":"https://api.github.com/users/jianghuazhu/repos","events_url":"https://api.github.com/users/jianghuazhu/events{/privacy}","received_events_url":"https://api.github.com/users/jianghuazhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-20T04:04:15Z","updated_at":"2024-12-20T04:04:15Z","author_association":"CONTRIBUTOR","body":"> @jianghuazhu , compared with the master, your branch does have improved the success rate\r\n> \r\n> * master Total failures: 42 ( https://github.com/apache/ratis/actions/runs/12416764228/job/34669317055 )\r\n> * your branch failures: 20 ( https://github.com/szetszwo/ratis/actions/runs/12414246844/job/34661434032 )\r\n> \r\n> Could you clean up the code? We may merge it first and have some further improvement in a separated JIRA.\r\n\r\nThanks @szetszwo .\r\nI have updated it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2556243450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2557599828","html_url":"https://github.com/apache/ratis/pull/1154#issuecomment-2557599828","issue_url":"https://api.github.com/repos/apache/ratis/issues/1154","id":2557599828,"node_id":"IC_kwDOBMxbGc6YceBU","user":{"login":"turboFei","id":6757692,"node_id":"MDQ6VXNlcjY3NTc2OTI=","avatar_url":"https://avatars.githubusercontent.com/u/6757692?v=4","gravatar_id":"","url":"https://api.github.com/users/turboFei","html_url":"https://github.com/turboFei","followers_url":"https://api.github.com/users/turboFei/followers","following_url":"https://api.github.com/users/turboFei/following{/other_user}","gists_url":"https://api.github.com/users/turboFei/gists{/gist_id}","starred_url":"https://api.github.com/users/turboFei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/turboFei/subscriptions","organizations_url":"https://api.github.com/users/turboFei/orgs","repos_url":"https://api.github.com/users/turboFei/repos","events_url":"https://api.github.com/users/turboFei/events{/privacy}","received_events_url":"https://api.github.com/users/turboFei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-20T19:26:11Z","updated_at":"2024-12-20T19:36:24Z","author_association":"MEMBER","body":"Hi @133tosakarin\r\nThanks for fixing this.\r\nI am using ratis-3.1.2, but continue to meet deadlock issue.\r\n\r\nHere is the full jstack: https://issues.apache.org/jira/secure/attachment/13073619/13073619_celeborn_master_jstack.txt\r\n\r\nAnd here is the ticket in celeborn community: https://issues.apache.org/jira/browse/CELEBORN-1795?focusedCommentId=17907470&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17907470 \r\n\r\n\r\nBTW: The ratis rpc type is `netty`.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2557599828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2558072443","html_url":"https://github.com/apache/ratis/pull/1154#issuecomment-2558072443","issue_url":"https://api.github.com/repos/apache/ratis/issues/1154","id":2558072443,"node_id":"IC_kwDOBMxbGc6YeRZ7","user":{"login":"133tosakarin","id":97331129,"node_id":"U_kgDOBc0nuQ","avatar_url":"https://avatars.githubusercontent.com/u/97331129?v=4","gravatar_id":"","url":"https://api.github.com/users/133tosakarin","html_url":"https://github.com/133tosakarin","followers_url":"https://api.github.com/users/133tosakarin/followers","following_url":"https://api.github.com/users/133tosakarin/following{/other_user}","gists_url":"https://api.github.com/users/133tosakarin/gists{/gist_id}","starred_url":"https://api.github.com/users/133tosakarin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/133tosakarin/subscriptions","organizations_url":"https://api.github.com/users/133tosakarin/orgs","repos_url":"https://api.github.com/users/133tosakarin/repos","events_url":"https://api.github.com/users/133tosakarin/events{/privacy}","received_events_url":"https://api.github.com/users/133tosakarin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-21T10:07:23Z","updated_at":"2024-12-21T10:07:23Z","author_association":"CONTRIBUTOR","body":"> Hi @133tosakarin Thanks for fixing this. I am using [ratis-3](https://issues.apache.org/jira/browse/RATIS-3).1.2, but continue to meet deadlock issue.\r\n> \r\n> Here is the full jstack: https://issues.apache.org/jira/secure/attachment/13073619/13073619_celeborn_master_jstack.txt\r\n> \r\n> And here is the ticket in celeborn community: https://issues.apache.org/jira/browse/CELEBORN-1795?focusedCommentId=17907470&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17907470\r\n> \r\n> BTW: The ratis rpc type is `netty`.\r\n\r\nThank you for providing the question. I hope you can post the specific information to Jira, and we will keep following up.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2558072443/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2558138712","html_url":"https://github.com/apache/ratis/pull/1191#issuecomment-2558138712","issue_url":"https://api.github.com/repos/apache/ratis/issues/1191","id":2558138712,"node_id":"IC_kwDOBMxbGc6YehlY","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-21T14:34:09Z","updated_at":"2024-12-21T14:34:09Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the review.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2558138712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2558238435","html_url":"https://github.com/apache/ratis/pull/1192#issuecomment-2558238435","issue_url":"https://api.github.com/repos/apache/ratis/issues/1192","id":2558238435,"node_id":"IC_kwDOBMxbGc6Ye57j","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-21T20:55:00Z","updated_at":"2024-12-21T20:55:00Z","author_association":"CONTRIBUTOR","body":"On a related note, currently only the 3 methods defined in `TestRaftWithGrpc` are parameterized for the config `raft.grpc.server.heartbeat.channel`.  Is this setting relevant for the test cases inherited from parent class?\r\n\r\n```\r\n[INFO] org.apache.ratis.grpc.TestRaftWithGrpc.testStateMachineMetrics  Time elapsed: 2.96 s\r\n[INFO] org.apache.ratis.grpc.TestRaftWithGrpc.testBasicAppendEntries  Time elapsed: 11.725 s\r\n[INFO] org.apache.ratis.grpc.TestRaftWithGrpc.testBasicAppendEntriesKillLeader  Time elapsed: 11.64 s\r\n[INFO] org.apache.ratis.grpc.TestRaftWithGrpc.testOldLeaderCommit  Time elapsed: 5.784 s\r\n[INFO] org.apache.ratis.grpc.TestRaftWithGrpc.testOldLeaderNotCommit  Time elapsed: 5.727 s\r\n```\r\n\r\nShould we also parameterize these?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2558238435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2558243465","html_url":"https://github.com/apache/ratis/pull/1154#issuecomment-2558243465","issue_url":"https://api.github.com/repos/apache/ratis/issues/1154","id":2558243465,"node_id":"IC_kwDOBMxbGc6Ye7KJ","user":{"login":"turboFei","id":6757692,"node_id":"MDQ6VXNlcjY3NTc2OTI=","avatar_url":"https://avatars.githubusercontent.com/u/6757692?v=4","gravatar_id":"","url":"https://api.github.com/users/turboFei","html_url":"https://github.com/turboFei","followers_url":"https://api.github.com/users/turboFei/followers","following_url":"https://api.github.com/users/turboFei/following{/other_user}","gists_url":"https://api.github.com/users/turboFei/gists{/gist_id}","starred_url":"https://api.github.com/users/turboFei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/turboFei/subscriptions","organizations_url":"https://api.github.com/users/turboFei/orgs","repos_url":"https://api.github.com/users/turboFei/repos","events_url":"https://api.github.com/users/turboFei/events{/privacy}","received_events_url":"https://api.github.com/users/turboFei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-21T21:19:45Z","updated_at":"2024-12-21T21:19:45Z","author_association":"MEMBER","body":"> Thank you for providing the question. I hope you can post the specific information to Jira, and we will keep following up.\r\n\r\nThanks for the reminder, I have update the info in RATIS-2162.\r\n\r\nI can create a new RATIS ticket if necessary. Thank you.\r\n\r\n@133tosakarin ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2558243465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2558505632","html_url":"https://github.com/apache/ratis/pull/1194#issuecomment-2558505632","issue_url":"https://api.github.com/repos/apache/ratis/issues/1194","id":2558505632,"node_id":"IC_kwDOBMxbGc6Yf7Kg","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-22T16:11:22Z","updated_at":"2024-12-22T16:11:22Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the review.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2558505632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560115419","html_url":"https://github.com/apache/ratis/pull/1192#issuecomment-2560115419","issue_url":"https://api.github.com/repos/apache/ratis/issues/1192","id":2560115419,"node_id":"IC_kwDOBMxbGc6YmELb","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-23T18:09:00Z","updated_at":"2024-12-23T18:09:00Z","author_association":"CONTRIBUTOR","body":"> On a related note, currently only the 3 methods defined in TestRaftWithGrpc are parameterized for the config raft.grpc.server.heartbeat.channel. Is this setting relevant for the test cases inherited from parent class?\r\n\r\nIt seems okay to skip those test cases.  We should identify test cases for running with parameterized config.  `testWithLoad` and `testUpdateViaHeartbeat` are good candidates.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560115419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560155323","html_url":"https://github.com/apache/ratis/pull/1193#issuecomment-2560155323","issue_url":"https://api.github.com/repos/apache/ratis/issues/1193","id":2560155323,"node_id":"IC_kwDOBMxbGc6YmN67","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-23T18:46:10Z","updated_at":"2024-12-23T18:46:10Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and merging this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560155323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560161043","html_url":"https://github.com/apache/ratis/pull/1192#issuecomment-2560161043","issue_url":"https://api.github.com/repos/apache/ratis/issues/1192","id":2560161043,"node_id":"IC_kwDOBMxbGc6YmPUT","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-23T18:51:44Z","updated_at":"2024-12-23T18:51:44Z","author_association":"CONTRIBUTOR","body":"`TestLeaderInstallSnapshotWithGrpc` does not seem to have the same problem.  The test methods in parent class `InstallSnapshotFromLeaderTests` are not annotated with `@Test`, so they are not executed in themselves, only when called from the parameterized test methods in the child class.\r\n\r\n```\r\n[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 17.515 s - in org.apache.ratis.grpc.TestLeaderInstallSnapshotWithGrpc\r\n[INFO] org.apache.ratis.grpc.TestLeaderInstallSnapshotWithGrpc.testMultiFileInstallSnapshot(Boolean)[1]  Time elapsed: 3.553 s\r\n[INFO] org.apache.ratis.grpc.TestLeaderInstallSnapshotWithGrpc.testMultiFileInstallSnapshot(Boolean)[2]  Time elapsed: 2.1 s\r\n[INFO] org.apache.ratis.grpc.TestLeaderInstallSnapshotWithGrpc.testInstallSnapshotLeaderSwitch(Boolean)[1]  Time elapsed: 3.148 s\r\n[INFO] org.apache.ratis.grpc.TestLeaderInstallSnapshotWithGrpc.testInstallSnapshotLeaderSwitch(Boolean)[2]  Time elapsed: 4.915 s\r\n[INFO] org.apache.ratis.grpc.TestLeaderInstallSnapshotWithGrpc.testSeparateSnapshotInstallPath(Boolean)[1]  Time elapsed: 1.857 s\r\n[INFO] org.apache.ratis.grpc.TestLeaderInstallSnapshotWithGrpc.testSeparateSnapshotInstallPath(Boolean)[2]  Time elapsed: 1.839 s\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560161043/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560191290","html_url":"https://github.com/apache/ratis/pull/1192#issuecomment-2560191290","issue_url":"https://api.github.com/repos/apache/ratis/issues/1192","id":2560191290,"node_id":"IC_kwDOBMxbGc6YmWs6","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-23T19:18:38Z","updated_at":"2024-12-23T19:18:38Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and merging this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560191290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560202854","html_url":"https://github.com/apache/ratis/pull/1198#issuecomment-2560202854","issue_url":"https://api.github.com/repos/apache/ratis/issues/1198","id":2560202854,"node_id":"IC_kwDOBMxbGc6YmZhm","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-23T19:29:59Z","updated_at":"2024-12-23T19:29:59Z","author_association":"CONTRIBUTOR","body":"> Currently [running](https://github.com/adoroszlai/ratis/actions/runs/12471796862) 10x10 test.\r\n\r\nI ran it earlier.  This change cannot completely fix the problem.  We also need RATIS-2184.  Then, it seems very close.\r\n- master: Total failures 42 https://github.com/apache/ratis/actions/runs/12416764228/job/34669317055\r\n- RATIS-2225 only: Total failures 27 https://github.com/szetszwo/ratis/actions/runs/12448409593/job/34753607305\r\n- RATIS-2184 only: Total failures 20 https://github.com/szetszwo/ratis/actions/runs/12414246844/job/34661434032\r\n- RATIS-2225 + RATIS-2184: Total failures 2 https://github.com/szetszwo/ratis/actions/runs/12448873327/job/34754409100\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560202854/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560213900","html_url":"https://github.com/apache/ratis/pull/1198#issuecomment-2560213900","issue_url":"https://api.github.com/repos/apache/ratis/issues/1198","id":2560213900,"node_id":"IC_kwDOBMxbGc6YmcOM","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-23T19:40:56Z","updated_at":"2024-12-23T19:40:56Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for reviewing and merging this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560213900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560232339","html_url":"https://github.com/apache/ratis/pull/1177#issuecomment-2560232339","issue_url":"https://api.github.com/repos/apache/ratis/issues/1177","id":2560232339,"node_id":"IC_kwDOBMxbGc6YmguT","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-23T19:59:39Z","updated_at":"2024-12-23T19:59:39Z","author_association":"CONTRIBUTOR","body":"After this (RATIS-2184) and RATIS-2225, it seems very close to fix all the cases.\r\n- RATIS-2184 + RATIS-2225: Total failures 2 https://github.com/szetszwo/ratis/actions/runs/12448873327/job/34754409100","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560232339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560281787","html_url":"https://github.com/apache/ratis/pull/1198#issuecomment-2560281787","issue_url":"https://api.github.com/repos/apache/ratis/issues/1198","id":2560281787,"node_id":"IC_kwDOBMxbGc6Ymsy7","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-23T20:50:04Z","updated_at":"2024-12-23T20:50:04Z","author_association":"CONTRIBUTOR","body":"Master after merged both RATIS-2225 and RATIS-2184: Total failures 3 https://github.com/apache/ratis/actions/runs/12472282367/job/34811870836","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560281787/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560282117","html_url":"https://github.com/apache/ratis/pull/1177#issuecomment-2560282117","issue_url":"https://api.github.com/repos/apache/ratis/issues/1177","id":2560282117,"node_id":"IC_kwDOBMxbGc6Yms4F","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-23T20:50:25Z","updated_at":"2024-12-23T20:50:25Z","author_association":"CONTRIBUTOR","body":"Master after merged both RATIS-2225 and RATIS-2184: Total failures 3 https://github.com/apache/ratis/actions/runs/12472282367/job/34811870836","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560282117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560546293","html_url":"https://github.com/apache/ratis/pull/1177#issuecomment-2560546293","issue_url":"https://api.github.com/repos/apache/ratis/issues/1177","id":2560546293,"node_id":"IC_kwDOBMxbGc6YntX1","user":{"login":"jianghuazhu","id":6416939,"node_id":"MDQ6VXNlcjY0MTY5Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/6416939?v=4","gravatar_id":"","url":"https://api.github.com/users/jianghuazhu","html_url":"https://github.com/jianghuazhu","followers_url":"https://api.github.com/users/jianghuazhu/followers","following_url":"https://api.github.com/users/jianghuazhu/following{/other_user}","gists_url":"https://api.github.com/users/jianghuazhu/gists{/gist_id}","starred_url":"https://api.github.com/users/jianghuazhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jianghuazhu/subscriptions","organizations_url":"https://api.github.com/users/jianghuazhu/orgs","repos_url":"https://api.github.com/users/jianghuazhu/repos","events_url":"https://api.github.com/users/jianghuazhu/events{/privacy}","received_events_url":"https://api.github.com/users/jianghuazhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-24T02:18:54Z","updated_at":"2024-12-24T02:18:54Z","author_association":"CONTRIBUTOR","body":"> Master after merged both [RATIS-2225](https://issues.apache.org/jira/browse/RATIS-2225) and [RATIS-2184](https://issues.apache.org/jira/browse/RATIS-2184): Total failures 3 https://github.com/apache/ratis/actions/runs/12472282367/job/34811870836\r\n\r\nThanks @szetszwo .\r\nI'm glad to see this, hard work pays off.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2560546293/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2561335361","html_url":"https://github.com/apache/ratis/pull/1195#issuecomment-2561335361","issue_url":"https://api.github.com/repos/apache/ratis/issues/1195","id":2561335361,"node_id":"IC_kwDOBMxbGc6YquBB","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-24T18:22:57Z","updated_at":"2024-12-24T18:22:57Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the review.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2561335361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2561393034","html_url":"https://github.com/apache/ratis/pull/1196#issuecomment-2561393034","issue_url":"https://api.github.com/repos/apache/ratis/issues/1196","id":2561393034,"node_id":"IC_kwDOBMxbGc6Yq8GK","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-24T20:30:38Z","updated_at":"2024-12-24T20:30:38Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the review.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2561393034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2561908940","html_url":"https://github.com/apache/ratis/pull/1199#issuecomment-2561908940","issue_url":"https://api.github.com/repos/apache/ratis/issues/1199","id":2561908940,"node_id":"IC_kwDOBMxbGc6Ys6DM","user":{"login":"jianghuazhu","id":6416939,"node_id":"MDQ6VXNlcjY0MTY5Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/6416939?v=4","gravatar_id":"","url":"https://api.github.com/users/jianghuazhu","html_url":"https://github.com/jianghuazhu","followers_url":"https://api.github.com/users/jianghuazhu/followers","following_url":"https://api.github.com/users/jianghuazhu/following{/other_user}","gists_url":"https://api.github.com/users/jianghuazhu/gists{/gist_id}","starred_url":"https://api.github.com/users/jianghuazhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jianghuazhu/subscriptions","organizations_url":"https://api.github.com/users/jianghuazhu/orgs","repos_url":"https://api.github.com/users/jianghuazhu/repos","events_url":"https://api.github.com/users/jianghuazhu/events{/privacy}","received_events_url":"https://api.github.com/users/jianghuazhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T14:20:14Z","updated_at":"2024-12-25T14:20:14Z","author_association":"CONTRIBUTOR","body":"10x10 Testing:\r\nhttps://github.com/jianghuazhu/ratis/actions/runs/12493106983\r\n\r\nTestRaftWithGrpc looks to be working fine so far.\r\n@szetszwo  @adoroszlai , can you take a look?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2561908940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2561956240","html_url":"https://github.com/apache/ratis/pull/1199#issuecomment-2561956240","issue_url":"https://api.github.com/repos/apache/ratis/issues/1199","id":2561956240,"node_id":"IC_kwDOBMxbGc6YtFmQ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T17:16:36Z","updated_at":"2024-12-25T17:16:36Z","author_association":"CONTRIBUTOR","body":"> TestRaftWithGrpc looks to be working fine so far.\r\n\r\nYes, it looks great!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2561956240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2562256099","html_url":"https://github.com/apache/ratis/pull/1189#issuecomment-2562256099","issue_url":"https://api.github.com/repos/apache/ratis/issues/1189","id":2562256099,"node_id":"IC_kwDOBMxbGc6YuOzj","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-26T07:29:50Z","updated_at":"2024-12-26T07:29:50Z","author_association":"CONTRIBUTOR","body":"Thanks @kiruthiga1793 for updating the patch.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2562256099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2563638334","html_url":"https://github.com/apache/ratis/pull/1201#issuecomment-2563638334","issue_url":"https://api.github.com/repos/apache/ratis/issues/1201","id":2563638334,"node_id":"IC_kwDOBMxbGc6YzgQ-","user":{"login":"jianghuazhu","id":6416939,"node_id":"MDQ6VXNlcjY0MTY5Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/6416939?v=4","gravatar_id":"","url":"https://api.github.com/users/jianghuazhu","html_url":"https://github.com/jianghuazhu","followers_url":"https://api.github.com/users/jianghuazhu/followers","following_url":"https://api.github.com/users/jianghuazhu/following{/other_user}","gists_url":"https://api.github.com/users/jianghuazhu/gists{/gist_id}","starred_url":"https://api.github.com/users/jianghuazhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jianghuazhu/subscriptions","organizations_url":"https://api.github.com/users/jianghuazhu/orgs","repos_url":"https://api.github.com/users/jianghuazhu/repos","events_url":"https://api.github.com/users/jianghuazhu/events{/privacy}","received_events_url":"https://api.github.com/users/jianghuazhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-27T12:07:04Z","updated_at":"2024-12-27T12:07:04Z","author_association":"CONTRIBUTOR","body":"It seems that some unit tests are failing.\r\nhttps://github.com/apache/ratis/actions/runs/12508243503/job/34896052142?pr=1201","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2563638334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2563657965","html_url":"https://github.com/apache/ratis/pull/1202#issuecomment-2563657965","issue_url":"https://api.github.com/repos/apache/ratis/issues/1202","id":2563657965,"node_id":"IC_kwDOBMxbGc6YzlDt","user":{"login":"OneSizeFitsQuorum","id":32640567,"node_id":"MDQ6VXNlcjMyNjQwNTY3","avatar_url":"https://avatars.githubusercontent.com/u/32640567?v=4","gravatar_id":"","url":"https://api.github.com/users/OneSizeFitsQuorum","html_url":"https://github.com/OneSizeFitsQuorum","followers_url":"https://api.github.com/users/OneSizeFitsQuorum/followers","following_url":"https://api.github.com/users/OneSizeFitsQuorum/following{/other_user}","gists_url":"https://api.github.com/users/OneSizeFitsQuorum/gists{/gist_id}","starred_url":"https://api.github.com/users/OneSizeFitsQuorum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OneSizeFitsQuorum/subscriptions","organizations_url":"https://api.github.com/users/OneSizeFitsQuorum/orgs","repos_url":"https://api.github.com/users/OneSizeFitsQuorum/repos","events_url":"https://api.github.com/users/OneSizeFitsQuorum/events{/privacy}","received_events_url":"https://api.github.com/users/OneSizeFitsQuorum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-27T12:31:13Z","updated_at":"2024-12-27T12:31:13Z","author_association":"CONTRIBUTOR","body":"@adoroszlai @szetszwo PTAL","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2563657965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2563906214","html_url":"https://github.com/apache/ratis/pull/1201#issuecomment-2563906214","issue_url":"https://api.github.com/repos/apache/ratis/issues/1201","id":2563906214,"node_id":"IC_kwDOBMxbGc6Y0hqm","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-27T17:45:59Z","updated_at":"2024-12-27T17:45:59Z","author_association":"CONTRIBUTOR","body":"@jianghuazhu , thanks for reviewing this!  Just have fixed the bug.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2563906214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2564369540","html_url":"https://github.com/apache/ratis/pull/1201#issuecomment-2564369540","issue_url":"https://api.github.com/repos/apache/ratis/issues/1201","id":2564369540,"node_id":"IC_kwDOBMxbGc6Y2SyE","user":{"login":"jianghuazhu","id":6416939,"node_id":"MDQ6VXNlcjY0MTY5Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/6416939?v=4","gravatar_id":"","url":"https://api.github.com/users/jianghuazhu","html_url":"https://github.com/jianghuazhu","followers_url":"https://api.github.com/users/jianghuazhu/followers","following_url":"https://api.github.com/users/jianghuazhu/following{/other_user}","gists_url":"https://api.github.com/users/jianghuazhu/gists{/gist_id}","starred_url":"https://api.github.com/users/jianghuazhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jianghuazhu/subscriptions","organizations_url":"https://api.github.com/users/jianghuazhu/orgs","repos_url":"https://api.github.com/users/jianghuazhu/repos","events_url":"https://api.github.com/users/jianghuazhu/events{/privacy}","received_events_url":"https://api.github.com/users/jianghuazhu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-28T16:04:51Z","updated_at":"2024-12-28T16:06:22Z","author_association":"CONTRIBUTOR","body":"@szetszwo , the refactored code looks great.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2564369540/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2568334375","html_url":"https://github.com/apache/ratis/pull/1200#issuecomment-2568334375","issue_url":"https://api.github.com/repos/apache/ratis/issues/1200","id":2568334375,"node_id":"IC_kwDOBMxbGc6ZFawn","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T20:25:25Z","updated_at":"2025-01-02T20:25:25Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for reviewing this!\r\n\r\n> My only concern is that the conf cache is shared in the JVM -- which mostly affects \"mini cluster\" tests.\r\n\r\nWhen the key-value pairs are the same, it is okay to not printing it.\r\n\r\nThis is mainly for the classes like `GrpcLogAppender`.  It will keep printing a long list of conf when it keeps restarting in some failure cases.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2568334375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2569357596","html_url":"https://github.com/apache/ratis/pull/1206#issuecomment-2569357596","issue_url":"https://api.github.com/repos/apache/ratis/issues/1206","id":2569357596,"node_id":"IC_kwDOBMxbGc6ZJUkc","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T14:58:08Z","updated_at":"2025-01-03T14:58:08Z","author_association":"MEMBER","body":"@szetszwo Thanks for reviewing this pr and help with the code. Now I learned how to use zero-copy in async programming, thank you!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2569357596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2569372592","html_url":"https://github.com/apache/ratis/pull/1204#issuecomment-2569372592","issue_url":"https://api.github.com/repos/apache/ratis/issues/1204","id":2569372592,"node_id":"IC_kwDOBMxbGc6ZJYOw","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T15:08:46Z","updated_at":"2025-01-03T15:08:46Z","author_association":"MEMBER","body":"@szetszwo Thanks for reviewing on this! Made changes on code, PTAL.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2569372592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2569606165","html_url":"https://github.com/apache/ratis/pull/1201#issuecomment-2569606165","issue_url":"https://api.github.com/repos/apache/ratis/issues/1201","id":2569606165,"node_id":"IC_kwDOBMxbGc6ZKRQV","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T17:53:00Z","updated_at":"2025-01-03T17:53:00Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks a lot for reviewing and merging this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2569606165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2569941453","html_url":"https://github.com/apache/ratis/pull/1206#issuecomment-2569941453","issue_url":"https://api.github.com/repos/apache/ratis/issues/1206","id":2569941453,"node_id":"IC_kwDOBMxbGc6ZLjHN","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T23:48:25Z","updated_at":"2025-01-03T23:48:25Z","author_association":"CONTRIBUTOR","body":"The test failures seem related.  Not yet sure what is the problem.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/2569941453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]