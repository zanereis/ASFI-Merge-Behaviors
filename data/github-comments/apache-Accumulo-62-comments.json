[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782273941","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-782273941","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":782273941,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjI3Mzk0MQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-19T18:56:47Z","updated_at":"2021-02-19T18:56:47Z","author_association":"MEMBER","body":"Without authentication, I don't think we should de-obfuscate the monitor... and I don't think it's worth baking in authentication to the monitoring service. It'd probably be better to have an authenticated TUI to list the detailed information that the monitor is showing instead.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782273941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782275294","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-782275294","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":782275294,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjI3NTI5NA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-19T18:58:07Z","updated_at":"2021-02-19T18:58:07Z","author_association":"CONTRIBUTOR","body":"> I thought we had a command in the shell to list tablets in a de-obfuscated way, for an authenticated user, so they can cross-reference with the monitor.\r\n\r\nI added a `listtablets` command but that is separate from the monitor and you will have no way to associate it with the information on the monitor.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782275294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782277669","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-782277669","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":782277669,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjI3NzY2OQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-19T19:01:56Z","updated_at":"2021-02-19T19:01:56Z","author_association":"CONTRIBUTOR","body":"> and I don't think it's worth baking in authentication to the monitoring service. \r\n\r\nI agree. This issue wasn't for that.\r\n\r\n> It'd probably be better to have an authenticated TUI to list the detailed information that the monitor is showing instead.\r\n\r\nTUI? Trusted User Interface?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782277669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782299921","html_url":"https://github.com/apache/accumulo/pull/1888#issuecomment-782299921","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1888","id":782299921,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjI5OTkyMQ==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-19T19:44:04Z","updated_at":"2021-02-19T19:44:04Z","author_association":"MEMBER","body":"> Would it be worth adding a custom balancer config to ensure the tserver hosting the metadata is left alone, but that we still shut down the other tservers?\r\n\r\nI tried to look into this a bit however couldn't find a great way to do it. This is the simplest way I could figure out however if it seems like a custom balancer would be a better solution I can try that instead.\r\n\r\n> Or, should we just make sure the suspend time is sufficiently long enough that any metadata tablets that got shut down are reassigned and recovered, before the suspend time expires? So that way, it doesn't matter if the metadata was hosted on a tserver that was shut down?\r\n\r\nWith the current solution, the tserver with the metadata is not shutdown. Are you suggesting we include the tserver with the metadata on it in the list of servers to be shutdown? \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782299921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782321972","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-782321972","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":782321972,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjMyMTk3Mg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-19T20:23:40Z","updated_at":"2021-02-19T20:23:40Z","author_association":"MEMBER","body":"TUI = https://en.wikipedia.org/wiki/Text-based_user_interface","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782321972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782326882","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-782326882","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":782326882,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjMyNjg4Mg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-19T20:32:53Z","updated_at":"2021-02-19T20:32:53Z","author_association":"MEMBER","body":"> > I thought we had a command in the shell to list tablets in a de-obfuscated way, for an authenticated user, so they can cross-reference with the monitor.\r\n> \r\n> I added a `listtablets` command but that is separate from the monitor and you will have no way to associate it with the information on the monitor.\r\n\r\nNo, the `getsplits` command has a verbose option to show the obfuscated form that would appear on the monitor.\r\n\r\nI'm not sure what `listtablets` does exactly, but if it overlaps with `getsplits`, it might be worth consolidating its features into a `getsplits` option, since that command existed already, and it might be somewhat redundant.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782326882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782359653","html_url":"https://github.com/apache/accumulo/pull/1888#issuecomment-782359653","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1888","id":782359653,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjM1OTY1Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-19T21:20:37Z","updated_at":"2021-02-19T21:20:37Z","author_association":"MEMBER","body":"> With the current solution, the tserver with the metadata is not shutdown. Are you suggesting we include the tserver with the metadata on it in the list of servers to be shutdown?\r\n\r\nI'm pointing out that metadata can be split across multiple tservers as well, and is not guaranteed to be only on one server. If you want to enforce that somehow, you'd have to use a balancer, or some other mechanism to prevent the metadata tablets from being on the tserver being shut down, and also guaranteeing that the tserver being shut down actually has tablets for the test table as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782359653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782366827","html_url":"https://github.com/apache/accumulo/pull/1888#issuecomment-782366827","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1888","id":782366827,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjM2NjgyNw==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-19T21:27:56Z","updated_at":"2021-02-19T21:27:56Z","author_association":"MEMBER","body":"> I'm pointing out that metadata can be split across multiple tservers\r\n\r\nI was overlooking this while developing this attempted fix. I now see how this is faulty and will continue looking for a solution to address this issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782366827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782425978","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-782425978","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":782425978,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjQyNTk3OA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-19T22:45:47Z","updated_at":"2021-02-19T22:45:47Z","author_association":"CONTRIBUTOR","body":"This comment may be late in the game - but:\r\n\r\n`Since splits don't have to be sensitive, I think it would be reasonable to have a property to disable the tablet obscuring in the monitor.`\r\n\r\nSplit points can be very sensitive and should only available to admin users.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782425978/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783349210","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-783349210","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":783349210,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzM0OTIxMA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T12:47:05Z","updated_at":"2021-02-22T12:47:05Z","author_association":"CONTRIBUTOR","body":"> Split points can be very sensitive and should only available to admin users.\r\n\r\nI understand they _can_ be very sensitive. My point is that they don't have to be. They can also be mundane. \r\n\r\nDo you think you or anyone would ever use a separate command line utility (like getsplits) to translate the encrypted tablet text on the monitor? It seems like a very cumbersome task and if you are already on the command line, there are probably better ways of finding out if there are issues with a tablet. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783349210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783361268","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-783361268","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":783361268,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzM2MTI2OA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T13:07:49Z","updated_at":"2021-02-22T13:07:49Z","author_association":"CONTRIBUTOR","body":"> No, the getsplits command has a verbose option to show the obfuscated form that would appear on the monitor.\r\n\r\nThis does work. At the very least I think we should put something on the monitor so a user knows that `getsplits -v` will provide the same information.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783361268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783459499","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-783459499","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":783459499,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzQ1OTQ5OQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T15:34:10Z","updated_at":"2021-02-22T15:34:10Z","author_association":"MEMBER","body":"> Do you think you or anyone would ever use a separate command line utility (like getsplits) to translate the encrypted tablet text on the monitor?\r\n\r\nYes, they do.\r\n\r\n> It seems like a very cumbersome task and if you are already on the command line, there are probably better ways of finding out if there are issues with a tablet.\r\n\r\nIt may be cumbersome, but it was done intentionally in order to avoid leaking user data. As far as I can tell, nobody has developed a better way to securely identify tablet issues on the monitor, and for an administrator to associate them with the information they have access to in the server logs. This is the best, and only, way, we have come up with.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783459499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783468184","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-783468184","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":783468184,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzQ2ODE4NA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T15:46:19Z","updated_at":"2021-02-22T15:46:19Z","author_association":"CONTRIBUTOR","body":"What about a simple number sequence? Something generated like `Tablet-1`, `Tablet-2`? It would be the same amount of work to run the getsplits command to translate them but they would be at least human readable. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783468184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783468646","html_url":"https://github.com/apache/accumulo/pull/1944#issuecomment-783468646","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1944","id":783468646,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzQ2ODY0Ng==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T15:46:58Z","updated_at":"2021-02-22T15:46:58Z","author_association":"MEMBER","body":"Another way you might provide early validation of these properties is to add some sort of options validation to samplers, either by adding a validateOptions method or similar to the interface as a default method, and then call it when validating the config.\r\n\r\nOr, the hanging issue could be addressed by ensuring any exception thrown in the sampler's init method will trigger an error in the logs and skip the sampler, rather than trigger a retry behavior that hangs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783468646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783470613","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-783470613","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":783470613,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzQ3MDYxMw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T15:49:35Z","updated_at":"2021-02-22T15:49:35Z","author_association":"MEMBER","body":"You can't associate \"Tablet-1\" with a specific split point, unless you track the entire unique history of split points. That's because splits change over time. It doesn't need to be reader-friendly... it just needs to be uniquely associable to a specific tablet for matching up to server logs.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783470613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783474765","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-783474765","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":783474765,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzQ3NDc2NQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T15:55:36Z","updated_at":"2021-02-22T15:55:36Z","author_association":"CONTRIBUTOR","body":"> You can't associate \"Tablet-1\" with a specific split point, unless you track the entire unique history of split points. That's because splits change over time. \r\n\r\nIt doesn't matter if they change because you can just refresh the page and run the command again. It doesn't need to be a permanent unique association, just a temporary one from the time the user looks at the page and runs the command.\r\n\r\n> It` doesn't need to be reader-friendly... it just needs to be uniquely associable to a specific tablet for matching up to server logs.\r\n\r\nI disagree. The hashes we generate don't get printed in the logs only on the webpage or run from the `getsplits` command. There is currently no way to search for the tablet hash.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783474765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783519860","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-783519860","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":783519860,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzUxOTg2MA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T16:59:43Z","updated_at":"2021-02-22T16:59:43Z","author_association":"CONTRIBUTOR","body":"I think I'm agreeing more with Christopher's characterization? \r\n\r\ntl;dr\r\n\r\nThis is a long way around to expressing that the split info in the monitor seems of marginal utility to me and should never be display directly by our monitor - if someone needs that, then they need to build their own and handle user authentication and authorization to meet their own requirements.\r\n\r\nI'm only relating my recollection of usages - what I have trouble extracting is what could be useful to non-\r\nAccumulo admins. For the most part, if you are dealing with splits, then you are fairly deep into user application implementation and usage details, not something that a typical system admin or operator would find useful. Although in practice, maybe that's not the target audience for these details in the monitor anyway - I'm unsure.\r\n\r\nI do not recall ever using the splits as displayed on the monitor.  If there was an issue or question I would normally be examining the current system state with shell commands.  For general state, I would default to scanning the metadata table because it was generally not the split that I'd be looking for but rather where it was hosted or other info (number of files, file sizes, number of entities...).  I only recall using getsplits when doing things like creating batch operations - say to create compactions or merges that would would work on sections of the table at a time - then it's usually piping getsplits into awk to generate a shell command file to run the actual commands. The only times that I recall the actual split value having any usefulness was translating back to application developers where they should consider spending time to generate better row ids.\r\n\r\nIf the Detailed Tablet Operations tab displayed tablet id and the current assigned server I think I'd have the same info that I needed to start looking deeper - it would still be examining the metadata, but that would be a direct way to locate things, and that would be easier than decoding the hash.  Displaying the server would help with another class of problems when multiple tablets, possibly from different tables are hosted on one server and interact in less than optimal ways.  \r\n\r\nTo answer the question, if displaying the splits would ever be useful?\r\n* Maybe during development to verify an application is actually generating things as you expect directly. If I was using something like uno and just developing a prototype app - Maybe it would save a few steps? But again I would just as likely be using the shell and already have one open...\r\n* Only if the row id were something generic - say shards based on dates, or some other generic bins - that could allow examining hotspots directly - \"say, why is 1970-01-01 00:00 being slammed with ingest,...\"  But this would only matter if operators could then act on that info - otherwise it should be straight forward for Accumulo admins to pull that info out anyway.\r\n\r\nBut, for any \"user\" splits that are based on the data - they should be protected to at least the sensitivity of the assigned column-visibility of the row-id.  In my opinion, that level of authorization is just something that our monitor should not be expected to handle - that specialization would need to be supplied by users to fit their requirements.  \r\n\r\nThis would also apply to my shard example above - say the shard info is generic - but the actual rows ids are something like [shard-id]-[my-sensitive-data] if things work well, the shard never splits - and no harm in displaying that - but if that shard ever split - the resulting split point would no longer qualify as generic - it's now sensitive to the column visibility of the rows picked for the split.  And, even if you tried to use the column visibility, you still have an issue - say 99.999% of your data is labeled \"anyone\" but a few rows are \"jane-bond-only\" - well, my luck is that it would spilt on Jane's row and then only should be displayed if she was the one looking at the monitor. (and maybe Q, but not sure of the structure in the Bond universe ;-) )\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783519860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783650277","html_url":"https://github.com/apache/accumulo/pull/1651#issuecomment-783650277","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1651","id":783650277,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzY1MDI3Nw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T20:22:44Z","updated_at":"2021-02-22T20:22:44Z","author_association":"CONTRIBUTOR","body":"@cradal If you don't have any objections, I will go ahead and finish up the work on this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783650277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783658047","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-783658047","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":783658047,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzY1ODA0Nw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T20:35:51Z","updated_at":"2021-02-22T20:35:51Z","author_association":"MEMBER","body":"> It doesn't need to be a permanent unique association, just a temporary one from the time the user looks at the page and runs the command.\r\n\r\nNo. It needs to be a permanent unique association, because an active table that is constantly splitting can make association nearly impossible, certainly extremely inconvenient. Additionally, admins often need to associate monitor information with historical log information.\r\n\r\n> The hashes we generate don't get printed in the logs only on the webpage or run from the `getsplits` command. There is currently no way to search for the tablet hash.\r\n\r\nThe typical administrator workflow is:\r\n\r\n1. See something funny on monitor page,\r\n2. Identify split using shell,\r\n3. Search logs for activity using split.\r\n\r\nThe list of splits gathered from any of these sources could be disjoint in time. While there might be information gaps if you don't get the information at the right time to cross-reference, there is no risk of confusion, because there's a unique mapping. With a non-unique mapping, you not only have to deal with information gaps while troubleshooting, you also have to deal with red herrings because a tablet identifier might map to multiple different tablets over time.\r\n\r\nOne way we could improve this situation is to use the encoded version in the logs as well, so you can cross-reference with the logs directly, instead of needing to translate using the shell, especially since the shell is limited to showing only the current mapping, and not historical mappings that the logs could contain.\r\n\r\nOne thing we don't want to do though, is use a reversible hash or obfuscation method, or use plain text for the monitor, because we really don't want to leak user data, even if it is safe to do so in some cases. It just doesn't seem to be worth the risk. Also, this data has to be encoded because it could be binary, so the monitor can't even print unencoded/plaint-text split points in the general case anyway.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783658047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783662567","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-783662567","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":783662567,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzY2MjU2Nw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-22T20:44:15Z","updated_at":"2021-02-22T20:44:15Z","author_association":"CONTRIBUTOR","body":"> If the Detailed Tablet Operations tab displayed tablet id and the current assigned server I think I'd have the same info that I needed to start looking deeper\r\n\r\nThe Tablet details are on the page of their current tablet server. Clicking on the tserver address is typically how you get to the page. Every tablet would list the current server of the page you are on so it wouldn't make sense to display the current assigned server.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783662567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783824690","html_url":"https://github.com/apache/accumulo/pull/1651#issuecomment-783824690","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1651","id":783824690,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MzgyNDY5MA==","user":{"login":"cradal","id":20303105,"node_id":"MDQ6VXNlcjIwMzAzMTA1","avatar_url":"https://avatars.githubusercontent.com/u/20303105?v=4","gravatar_id":"","url":"https://api.github.com/users/cradal","html_url":"https://github.com/cradal","followers_url":"https://api.github.com/users/cradal/followers","following_url":"https://api.github.com/users/cradal/following{/other_user}","gists_url":"https://api.github.com/users/cradal/gists{/gist_id}","starred_url":"https://api.github.com/users/cradal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cradal/subscriptions","organizations_url":"https://api.github.com/users/cradal/orgs","repos_url":"https://api.github.com/users/cradal/repos","events_url":"https://api.github.com/users/cradal/events{/privacy}","received_events_url":"https://api.github.com/users/cradal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-23T02:21:40Z","updated_at":"2021-02-23T02:21:40Z","author_association":"CONTRIBUTOR","body":"@milleruntime No objections. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/783824690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/784199344","html_url":"https://github.com/apache/accumulo/pull/1944#issuecomment-784199344","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1944","id":784199344,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NDE5OTM0NA==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-23T13:22:41Z","updated_at":"2021-02-23T13:32:25Z","author_association":"CONTRIBUTOR","body":"> Another way you might provide early validation of these properties is to add some sort of options validation to samplers, either by adding a validateOptions method or similar to the interface as a default method, and then call it when validating the config. Or, the hanging issue could be addressed by ensuring any exception thrown in the sampler's init method will trigger an error in the logs and skip the sampler, rather than trigger a retry behavior that hangs.\r\n\r\nAnything that utilizes the `AbstractHashSampler` does have validity checks already. Which is where the original error came from. Seems the best way to tackle this is to handle the hanging issue. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/784199344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/784265219","html_url":"https://github.com/apache/accumulo/pull/1651#issuecomment-784265219","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1651","id":784265219,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NDI2NTIxOQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-23T15:03:21Z","updated_at":"2021-02-23T15:03:21Z","author_association":"CONTRIBUTOR","body":"Replaced by #1945 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/784265219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/784366475","html_url":"https://github.com/apache/accumulo/issues/1789#issuecomment-784366475","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1789","id":784366475,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NDM2NjQ3NQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-23T17:22:43Z","updated_at":"2021-02-23T18:33:43Z","author_association":"CONTRIBUTOR","body":"I saw this happen during a failure:\r\n\r\n<pre>\r\n[INFO] Running org.apache.accumulo.tserver.memory.LargestFirstMemoryManagerTest\r\n[INFO] Running org.apache.accumulo.tserver.TabletResourceManagerTest\r\n[ERROR] WARNING: An illegal reflective access operation has occurred\r\n[ERROR] WARNING: Illegal reflective access by org.easymock.cglib.core.ReflectUtils$1 (file:/home/runner/.m2/repository/org/easymock/easymock/4.2/easymock-4.2.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)\r\n[ERROR] WARNING: Please consider reporting this to the maintainers of org.easymock.cglib.core.ReflectUtils$1\r\n[ERROR] WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\n[ERROR] WARNING: All illegal access operations will be denied in a future release\r\n[ERROR] WARNING: An illegal reflective access operation has occurred\r\n[ERROR] WARNING: Illegal reflective access by org.easymock.cglib.core.ReflectUtils$1 (file:/home/runner/.m2/repository/org/easymock/easymock/4.2/easymock-4.2.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)\r\n[ERROR] WARNING: Please consider reporting this to the maintainers of org.easymock.cglib.core.ReflectUtils$1\r\n[ERROR] WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\n[ERROR] WARNING: All illegal access operations will be denied in a future release\r\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.674 s - in org.apache.accumulo.tserver.TabletResourceManagerTest\r\n[ERROR] Tests run: 2, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 2.007 s <<< FAILURE! - in org.apache.accumulo.tserver.memory.LargestFirstMemoryManagerTest\r\n[ERROR] org.apache.accumulo.tserver.memory.LargestFirstMemoryManagerTest.test  Time elapsed: 1.721 s  <<< FAILURE!\r\njava.lang.AssertionError: expected:<1;f<> but was:<1;e<>\r\n\tat org.apache.accumulo.tserver.memory.LargestFirstMemoryManagerTest.test(LargestFirstMemoryManagerTest.java:118)\r\n</pre>\r\n\r\nI don't know what is going on but it appears that multiple tests are running at the same time and the other test completes before the LargestFirstMemoryManagerTest. [Link](https://github.com/milleruntime/accumulo/runs/1963087985?check_suite_focus=true)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/784366475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/784482418","html_url":"https://github.com/apache/accumulo/issues/1789#issuecomment-784482418","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1789","id":784482418,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NDQ4MjQxOA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-23T20:17:08Z","updated_at":"2021-02-23T20:17:08Z","author_association":"MEMBER","body":"Multiple tests are running by default (1C), but they shouldn't be using the same JVM. So, they should be independent, at least with respect to Java VM resources (they might still compete with OS/environment resources).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/784482418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/785050818","html_url":"https://github.com/apache/accumulo/pull/1944#issuecomment-785050818","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1944","id":785050818,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NTA1MDgxOA==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-24T12:46:29Z","updated_at":"2021-02-24T12:46:29Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I went ahead and added the validateOptions in the sampler interface. With what I have now, it will log an error message, and the sampler returns `null` so the rest of the compaction can complete as normal. The shell thread now returns and does not hang.  However, the shell still doesn't see the error so the user will have to realize that their sampler options didn't go through and make those corrections by looking at the monitor/logs. I marked this as a draft since I am still working on some things to hopefully improve functionality but I wanted to get the base idea out there for you to look at when you get the chance. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/785050818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/785226596","html_url":"https://github.com/apache/accumulo/issues/1789#issuecomment-785226596","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1789","id":785226596,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NTIyNjU5Ng==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-24T17:05:12Z","updated_at":"2021-02-24T17:05:12Z","author_association":"CONTRIBUTOR","body":"After some experimenting with the ZERO_TIME value of the test and printing different values coming out of the `LargestFirstMemoryManager`, I think I have figured out how the test occasionally fails. As to exactly how all the numbers at play come to cause it to fail, is another story. Here are the strange circumstances I created to lead to the failure.\r\n\r\nI modified the ZERO_TIME of the test to be _exactly_ 4 minutes less than the `LargestFirstMemoryManager`:\r\n<pre>\r\npublic class LargestFirstMemoryManagerTest {\r\n\r\n  private static final long ZERO = LargestFirstMemoryManager.ZERO_TIME - (4 * 60 * 1000);\r\n</pre>\r\n\r\nThis will cause the test to always fail on my machine at the same spot we have seen above and with the exact same AssertionError message:\r\n<pre>\r\n[ERROR] Tests run: 2, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.008 s <<< FAILURE! - in org.apache.accumulo.tserver.memory.LargestFirstMemoryManagerTest\r\n[ERROR] org.apache.accumulo.tserver.memory.LargestFirstMemoryManagerTest.test  Time elapsed: 0.93 s  <<< FAILURE!\r\njava.lang.AssertionError: expected:<1;f<> but was:<1;e<>\r\n\tat org.apache.accumulo.tserver.memory.LargestFirstMemoryManagerTest.test(LargestFirstMemoryManagerTest.java:118)\r\n</pre>\r\n\r\nThe weird timing difference combined with the following oddities will lead to this failure:\r\n- The math used in the `LargestFirstMemoryManager` to calculate timeMemoryLoad, which is used as a key in the `LargestMap` largestMemTablets\r\n- The fact that the `LargestMap` inner class uses an `ArrayList` to store multiple tablets keyed at the the same Long\r\n- The final loop in the `LargestFirstMemoryManager` will end as soon as it hits the desired number of tablets\r\n\r\nThis can be seen in these log statements:\r\n<pre>\r\n2021-02-24T11:15:57,223 [memory.LargestFirstMemoryManager] INFO : largestMemTablets.put(timeMemoryLoad 446267447, 1;a<)\r\n2021-02-24T11:15:57,224 [memory.LargestFirstMemoryManager] INFO : largestMemTablets.put(timeMemoryLoad 892534895, 1;b<)\r\n2021-02-24T11:15:57,224 [memory.LargestFirstMemoryManager] INFO : largestMemTablets.put(timeMemoryLoad 892534896, 1;c<)\r\n2021-02-24T11:15:57,224 [memory.LargestFirstMemoryManager] INFO : largestMemTablets.put(timeMemoryLoad 892534897, 1;d<)\r\n2021-02-24T11:15:57,225 [memory.LargestFirstMemoryManager] INFO : <b>largestMemTablets.put(timeMemoryLoad 892534898, 1;e<)</b>\r\n2021-02-24T11:15:57,225 [memory.LargestFirstMemoryManager] INFO : <b>largestMemTablets.put(timeMemoryLoad 892534898, 1;f<)</b>\r\n2021-02-24T11:15:57,225 [memory.LargestFirstMemoryManager] INFO : <b>adding 1;f< to list for 892534898</b>\r\n2021-02-24T11:15:57,226 [memory.LargestFirstMemoryManager] INFO : largestMemTablets.put(timeMemoryLoad 892534899, 1;g<)\r\n2021-02-24T11:15:57,226 [memory.LargestFirstMemoryManager] INFO : Last entry 892534899 has list of size = 1\r\n2021-02-24T11:15:57,226 [memory.LargestFirstMemoryManager] INFO : COMPACTING 1;g<  total = 6,979,321,877 ingestMemory = 6,979,321,877\r\n2021-02-24T11:15:57,227 [memory.LargestFirstMemoryManager] INFO : chosenMem = 1,073,741,830 chosenIT = -240.00 load 892,534,899\r\n2021-02-24T11:15:57,227 [memory.LargestFirstMemoryManager] INFO : <b>Last entry 892534898 has list of size = 2</b>\r\n2021-02-24T11:15:57,227 [memory.LargestFirstMemoryManager] INFO : COMPACTING 1;e<  total = 6,979,321,877 ingestMemory = 6,979,321,877\r\n2021-02-24T11:15:57,228 [memory.LargestFirstMemoryManager] INFO : chosenMem = 1,073,741,828 chosenIT = -240.00 load 892,534,898\r\n2021-02-24T11:15:57,228 [memory.LargestFirstMemoryManager] INFO : returning tabletsToMinorCompact with 2 tablets\r\n</pre>\r\n\r\nDuring a failure, the final loop in `LargestFirstMemoryManager` will take the next tablet in the list of the lastEntry, which may or may not be the next largest tablet since the backing `ArrayList` of `LargestMap` is not sorted. During a success, each entry has an `ArrayList` of size one, stored at distinct Long keys.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/785226596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/785269544","html_url":"https://github.com/apache/accumulo/pull/1947#issuecomment-785269544","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1947","id":785269544,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NTI2OTU0NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-24T18:09:14Z","updated_at":"2021-02-24T19:49:18Z","author_association":"MEMBER","body":"There is a bug with MonitorSslIT with this on my machine, that I'm trying to track down. It seems that there's a mismatch in the way the new SSL handling code on the server identifies the certificate to present and the way our http client code in the test initiates the request, that causes the client to pass SNI information (which the client sets to null) that prevents the test server from satisfying the request. I'm still tracking this down.\r\n\r\nEDIT: fixed in newer commits","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/785269544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/785335866","html_url":"https://github.com/apache/accumulo/pull/1947#issuecomment-785335866","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1947","id":785335866,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NTMzNTg2Ng==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-24T20:00:08Z","updated_at":"2021-02-24T20:00:08Z","author_association":"MEMBER","body":"I created https://github.com/FasterXML/jackson-bom/issues/40 to deal with the fact that I couldn't use the jackson bom for managing some of the Jakarta EE variants of jackson libraries.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/785335866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/785980727","html_url":"https://github.com/apache/accumulo/pull/1944#issuecomment-785980727","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1944","id":785980727,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NTk4MDcyNw==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-25T15:20:55Z","updated_at":"2021-02-25T15:20:55Z","author_association":"CONTRIBUTOR","body":"Marking this back to ready for review. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/785980727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786003423","html_url":"https://github.com/apache/accumulo/pull/1910#issuecomment-786003423","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1910","id":786003423,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjAwMzQyMw==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-25T15:52:53Z","updated_at":"2021-02-25T15:52:53Z","author_association":"CONTRIBUTOR","body":"As part of https://issues.apache.org/jira/browse/ACCUMULO-1399 I added the ability for users to write scripts in a supported JSR-223 engine and run them in the shell. How does adding jshell to the shell compare to this? Is it duplicative, should the script command be deprecated?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786003423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786013267","html_url":"https://github.com/apache/accumulo/pull/1910#issuecomment-786013267","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1910","id":786013267,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjAxMzI2Nw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-25T16:05:53Z","updated_at":"2021-02-25T16:05:53Z","author_association":"MEMBER","body":"> As part of https://issues.apache.org/jira/browse/ACCUMULO-1399 I added the ability for users to write scripts in a supported JSR-223 engine and run them in the shell. How does adding jshell to the shell compare to this? Is it duplicative, should the script command be deprecated?\r\n\r\n@dlmarion Rhino, the default scripting engine that feature used is already removed from Java, and replaced with Nashorn, which is now also deprecated and scheduled for removal in JDK 15. So, that feature won't work anymore anyway. So, yes, that script command should be deprecated.\r\n\r\nI don't know all the use cases for the shell script command, but I suspect that they can all be replaced with the use of JShell. JShell is even better, actually, because it can be used interactively.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786013267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786020529","html_url":"https://github.com/apache/accumulo/pull/1910#issuecomment-786020529","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1910","id":786020529,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjAyMDUyOQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-25T16:15:39Z","updated_at":"2021-02-25T16:15:39Z","author_association":"CONTRIBUTOR","body":"Nashorn might be planned for removal, but the ability to plug in a JSR-223 compatible script library is not. Users can still plug in their own library, like https://github.com/eclipsesource/J2V8.\r\n\r\nI'm fine with deprecation, we just need to make sure it makes it into the release notes so that users have time to migrate their javascript / python / whatever files to java.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786020529/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786032497","html_url":"https://github.com/apache/accumulo/issues/1949#issuecomment-786032497","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1949","id":786032497,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjAzMjQ5Nw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-25T16:32:26Z","updated_at":"2021-02-25T16:32:26Z","author_association":"MEMBER","body":"Deprecation basically just involves marking it deprecated, adding a log message to warn about deprecation when it's used, and updating documentation/release notes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786032497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786062253","html_url":"https://github.com/apache/accumulo/pull/1888#issuecomment-786062253","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1888","id":786062253,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjA2MjI1Mw==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-25T17:14:39Z","updated_at":"2021-02-25T17:14:39Z","author_association":"MEMBER","body":"The changes in my most recent commit should account for the mentioned concerns. This should be ready for review again.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786062253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786087979","html_url":"https://github.com/apache/accumulo/issues/1872#issuecomment-786087979","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1872","id":786087979,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjA4Nzk3OQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-25T17:53:36Z","updated_at":"2021-02-25T17:53:36Z","author_association":"CONTRIBUTOR","body":"With the various improvements I made for deletes, I am going to close this issue. The only other path I didn't really explore was for cancelling Bulk imports during a delete. I can't seem to create a long enough running bulk import locally using the new bulk import so it may no longer be an issue. And now that we have the new bulk import, I don't want to waste time testing the old one since it is deprecated.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786087979/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786173741","html_url":"https://github.com/apache/accumulo/issues/1666#issuecomment-786173741","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1666","id":786173741,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjE3Mzc0MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-25T20:17:09Z","updated_at":"2021-02-25T20:17:09Z","author_association":"CONTRIBUTOR","body":"Is it possible this was already completed in 1.10 with this change: https://github.com/apache/accumulo/pull/1462","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786173741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786173967","html_url":"https://github.com/apache/accumulo/issues/1666#issuecomment-786173967","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1666","id":786173967,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjE3Mzk2Nw==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-25T20:17:30Z","updated_at":"2021-02-25T20:17:30Z","author_association":"CONTRIBUTOR","body":"This maybe be OBE with #1462 - but in 1.9.3, the error message here - https://github.com/apache/accumulo/blob/a834aa8f36f1305b3d41abccb4eadc4f3b39302c/server/master/src/main/java/org/apache/accumulo/master/recovery/RecoveryManager.java#L156 will create a wall of log statements during recovery (in the master debug log)\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786173967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786373179","html_url":"https://github.com/apache/accumulo/issues/1666#issuecomment-786373179","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1666","id":786373179,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjM3MzE3OQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-26T02:48:08Z","updated_at":"2021-02-26T02:48:08Z","author_association":"MEMBER","body":"Closing, since it looks like this was already done. Please re-open or submit a PR if there is something more to do here.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786373179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786628970","html_url":"https://github.com/apache/accumulo/issues/1886#issuecomment-786628970","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1886","id":786628970,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjYyODk3MA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-26T12:51:06Z","updated_at":"2021-02-26T12:51:06Z","author_association":"CONTRIBUTOR","body":"The way we are detecting EC policy, I am not sure there is a better way to do this and avoid printing the error. The error should only be printed once on debug. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786628970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786673345","html_url":"https://github.com/apache/accumulo/pull/1950#issuecomment-786673345","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1950","id":786673345,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjY3MzM0NQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-26T14:16:44Z","updated_at":"2021-02-26T14:16:44Z","author_association":"MEMBER","body":"@milleruntime I'm trying to review this, but it's taking time, because I'm finding I have soooo many questions about the compaction stuff, and having a hard time understanding where to begin. I'm sure I could figure some of this out if I spent some more time with it, but my initial thoughts/questions are:\r\n\r\n1. What's a compaction directive, vs. a compaction service, vs. a compaction dispatcher? (these appear to be the different categories of things touched by this change)\r\n2. Why was CompactionDirectiveImpl a package-private class stored in the SPI package instead of a separate implementation package?\r\n3. What was the compaction directives builder that is being deleted in this PR even for (it had no javadoc)? Why did it carry a service ID, and what even is a service ID?\r\n4. Does the retention of CompactionDirectiveImpl.setService in your PR imply that CompactionsDirectiveImpl is mutable? Should it be mutable? Is it okay to be mutable?\r\n5. Is the loop in SimpleCompactionDispatcher that calls defaultService.setService(v) a good idea? What's the end goal being pursued here if the service that is being held in the defaultService object is being swapped out repeatedly in a loop?\r\n6. Naming-wise, what does it mean for a \"defaultService\" to have a \"setService\" method? What is the relationship between the \"service\" that the variable name is referring to and the \"service\" that the method name is referring to?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786673345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786728859","html_url":"https://github.com/apache/accumulo/pull/1950#issuecomment-786728859","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1950","id":786728859,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjcyODg1OQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-26T15:50:24Z","updated_at":"2021-02-26T16:23:20Z","author_association":"CONTRIBUTOR","body":"CompactionDispatcher and CompactionDirective follow the same pattern as [ScanDispatcher](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/spi/scan/ScanDispatcher.java) and [ScanDirectives](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/spi/scan/ScanDirectives.java).  In my opinion it would be good to keep them consistent.  ScanDispatcher used to return a single string for its dispatch method in 2.0.0.  Then in 2.1.0 cache information was added to the scan dispatch method resulting in the need to return an object.  That is why I chose to start off returning an object for the compaction dispatch method.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786728859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786742784","html_url":"https://github.com/apache/accumulo/issues/1666#issuecomment-786742784","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1666","id":786742784,"node_id":"MDEyOklzc3VlQ29tbWVudDc4Njc0Mjc4NA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-26T16:14:33Z","updated_at":"2021-02-26T16:14:33Z","author_association":"CONTRIBUTOR","body":"The comments in #1462 seems to point to additional areas that could be investigated for additional improvements - this issue was generic enough to cover that - should a new issue be created to point to the possibility that additional improvements may be possible?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786742784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786782530","html_url":"https://github.com/apache/accumulo/pull/1950#issuecomment-786782530","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1950","id":786782530,"node_id":"MDEyOklzc3VlQ29tbWVudDc4Njc4MjUzMA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-26T17:23:23Z","updated_at":"2021-02-26T17:23:23Z","author_association":"CONTRIBUTOR","body":"> CompactionDispatcher and CompactionDirective follow the same pattern as [ScanDispatcher](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/spi/scan/ScanDispatcher.java) and [ScanDirectives](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/spi/scan/ScanDirectives.java). In my opinion it would be good to keep them consistent. ScanDispatcher used to return a single string for its dispatch method in 2.0.0. Then in 2.1.0 cache information was added to the scan dispatch method resulting in the need to return an object. That is why I chose to start off returning an object for the compaction dispatch method.\r\n\r\nThere seems to be similar issues with ScanDispatcher, mainly having a builder where only one method should be called to set a single object on another class. My concern is that it seems like a lot of extra code for just calling `new ScanDirectivesImpl().setX()` and the builder returned allows multiple `setX()` calls, which would only create throw away objects.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786782530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786816005","html_url":"https://github.com/apache/accumulo/issues/1666#issuecomment-786816005","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1666","id":786816005,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjgxNjAwNQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-26T18:24:30Z","updated_at":"2021-02-26T18:24:30Z","author_association":"MEMBER","body":"> The comments in #1462 seems to point to additional areas that could be investigated for additional improvements - this issue was generic enough to cover that - should a new issue be created to point to the possibility that additional improvements may be possible?\r\n\r\nIssues work best when they are narrowly targeted and actionable, so somebody can grab one from the queue and work on it. I didn't see anything like that in the referenced PR, but if you do, please feel free to create a new issue to highlight and track the specific work to be done.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786816005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786819912","html_url":"https://github.com/apache/accumulo/pull/1950#issuecomment-786819912","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1950","id":786819912,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjgxOTkxMg==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-26T18:32:11Z","updated_at":"2021-02-26T18:32:11Z","author_association":"CONTRIBUTOR","body":"> There seems to be similar issues with ScanDispatcher, mainly having a builder where only one method should be called to set a single object on another class.\r\n\r\nFor the ScanDispatcher three things can be set.  In 2.0.0 only one thing could be set for the ScanDispatcher.  For 2.1.0 to additional things were added.  Because ScanDispatcher did not follow the pattern in 2.0.0 that it does now, the addition of new things to return was a painful.  The design of this interface is the way it is to support SPI evolution where new things can be returned in the future.  When writing the ScanDispatcher in 2.0.0 I never could have imagined additionally returning cache directives in 2.1.0.\r\n\r\n> My concern is that it seems like a lot of extra code for just calling new ScanDirectivesImpl().setX() and the builder\r\n\r\nSomeone writing a ScanDispatcher or CompactionDispatcher would never interact with ScanDirectivesImpl or CompactionDirectivesImpl.  Those are internal implementations hidden from users.  When making changes I would suggest to start with the interfaces CompactionDirectives and ScanDirectives and changes those to how you think they should be w/o regard for ScanDirectivesImpl and CompactionDirectivesImpl.  Also considering how a user writing a CompactionDispatcher would use CompactionDirectives, as the interfaces only exists to support CompactionDispatcher.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786819912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786824132","html_url":"https://github.com/apache/accumulo/pull/1950#issuecomment-786824132","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1950","id":786824132,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjgyNDEzMg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-26T18:40:44Z","updated_at":"2021-02-26T18:40:44Z","author_association":"MEMBER","body":"Perhaps a stupid question, but if it's designed as complex, extensible return type for the `Dispatcher.dispatch()` method, why not call the returned object a \"Dispatch\" rather than a \"Directive\"?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786824132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786828889","html_url":"https://github.com/apache/accumulo/pull/1950#issuecomment-786828889","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1950","id":786828889,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjgyODg4OQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-26T18:49:12Z","updated_at":"2021-02-26T18:49:12Z","author_association":"CONTRIBUTOR","body":"> Perhaps a stupid question, but if it's designed as complex, extensible return type for the Dispatcher.dispatch() method, why not call the returned object a \"Dispatch\" rather than a \"Directive\"?\r\n\r\nThat name seems fine w/ me.  If changed I think it would make sense to consider ScanDispatcher also.  At this point I would personally prioritize consistency between the two.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786828889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786845057","html_url":"https://github.com/apache/accumulo/issues/1885#issuecomment-786845057","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1885","id":786845057,"node_id":"MDEyOklzc3VlQ29tbWVudDc4Njg0NTA1Nw==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-26T19:21:28Z","updated_at":"2021-02-26T19:21:28Z","author_association":"MEMBER","body":"I would like to be assigned to this ticket please.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786845057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786902924","html_url":"https://github.com/apache/accumulo/pull/1918#issuecomment-786902924","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1918","id":786902924,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjkwMjkyNA==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-26T21:27:15Z","updated_at":"2021-02-26T21:28:05Z","author_association":"MEMBER","body":"I am working to convert ZooLockIT's use of MAC to ZooKeeperTestingServer (via #1885 ) and am seeing the same thing with the log:\r\n```java\r\n2021-02-26T16:23:31,422 [zookeeper.ZooLock] DEBUG: [zlock#81282aef-d8a3-4bf1-a376-23a31e1d7b12#] Renewing watch on prior node  /zltestDeleteWaiting-1025168844-l1/zlock#eadf5a4c-680e-411f-92b5-62a55c615031#0000000000\r\n```\r\nAt what looks like about 100 times per second.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786902924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786989801","html_url":"https://github.com/apache/accumulo/pull/1918#issuecomment-786989801","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1918","id":786989801,"node_id":"MDEyOklzc3VlQ29tbWVudDc4Njk4OTgwMQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-27T02:39:36Z","updated_at":"2021-02-27T02:39:36Z","author_association":"MEMBER","body":"> I am working to convert ZooLockIT's use of MAC to ZooKeeperTestingServer (via #1885 ) and am seeing the same thing with the log:\r\n\r\n@DomGarguilo It's probably better to track that in #1885 or a new issue, since this work is complete and the changes in this PR did not cause the issue you are seeing. It is a different log message, unrelated to these changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/786989801/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/788038269","html_url":"https://github.com/apache/accumulo/issues/1898#issuecomment-788038269","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1898","id":788038269,"node_id":"MDEyOklzc3VlQ29tbWVudDc4ODAzODI2OQ==","user":{"login":"billierinaldi","id":1810597,"node_id":"MDQ6VXNlcjE4MTA1OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1810597?v=4","gravatar_id":"","url":"https://api.github.com/users/billierinaldi","html_url":"https://github.com/billierinaldi","followers_url":"https://api.github.com/users/billierinaldi/followers","following_url":"https://api.github.com/users/billierinaldi/following{/other_user}","gists_url":"https://api.github.com/users/billierinaldi/gists{/gist_id}","starred_url":"https://api.github.com/users/billierinaldi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/billierinaldi/subscriptions","organizations_url":"https://api.github.com/users/billierinaldi/orgs","repos_url":"https://api.github.com/users/billierinaldi/repos","events_url":"https://api.github.com/users/billierinaldi/events{/privacy}","received_events_url":"https://api.github.com/users/billierinaldi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-01T15:32:05Z","updated_at":"2021-03-01T15:32:05Z","author_association":"CONTRIBUTOR","body":"Thanks @ctubbsii!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/788038269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/788130483","html_url":"https://github.com/apache/accumulo/pull/1950#issuecomment-788130483","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1950","id":788130483,"node_id":"MDEyOklzc3VlQ29tbWVudDc4ODEzMDQ4Mw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-01T17:31:05Z","updated_at":"2021-03-01T17:31:05Z","author_association":"CONTRIBUTOR","body":"@keith-turner After the last changes, I had to add a way to set the default in a977accf7a82ea5fc5dc6a6d5b90a1f4355642a3","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/788130483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/788202642","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-788202642","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":788202642,"node_id":"MDEyOklzc3VlQ29tbWVudDc4ODIwMjY0Mg==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-01T19:19:09Z","updated_at":"2021-03-01T19:19:09Z","author_association":"MEMBER","body":"My most recent commit ([af4e4b2](https://github.com/apache/accumulo/pull/1952/commits/af4e4b25e89d412308890ea52fcf108d3777e3e4)) is somewhat unrelated however when this test is run, the logs are inundated with the following log at the rate of hundreds per second:\r\n```java\r\n2021-02-26T16:23:31,422 [zookeeper.ZooLock] DEBUG: [zlock#81282aef-d8a3-4bf1-a376-23a31e1d7b12#] Renewing watch on prior node  /zltestDeleteWaiting-1025168844-l1/zlock#eadf5a4c-680e-411f-92b5-62a55c615031#0000000000\r\n```\r\n\r\nThought I would include this change here to avoid making another PR for this. For reference, another PR has been recently merged with a very similar change #1918.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/788202642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/788955103","html_url":"https://github.com/apache/accumulo/issues/1451#issuecomment-788955103","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1451","id":788955103,"node_id":"MDEyOklzc3VlQ29tbWVudDc4ODk1NTEwMw==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T14:38:51Z","updated_at":"2021-03-02T14:38:51Z","author_association":"CONTRIBUTOR","body":"Updated design document located at https://github.com/apache/accumulo-website/pull/266","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/788955103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789163506","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789163506","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789163506,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTE2MzUwNg==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T19:40:36Z","updated_at":"2021-03-02T19:40:36Z","author_association":"MEMBER","body":"I went back to check if the spammy debug logs that I was seeing were happening as a result of my changes and confirmed that they were not. \r\n\r\nWithout my change that drops the log to trace, the log would be displayed hundreds of times a second.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789163506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789164274","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789164274","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789164274,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTE2NDI3NA==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T19:41:49Z","updated_at":"2021-03-02T19:41:49Z","author_association":"MEMBER","body":"I think these changes are ready for review. I ask that the location that these files were moved to be reviewed because I am not too familiar with where the best place is for these renamed tests.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789164274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789170221","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789170221","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789170221,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTE3MDIyMQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T19:51:19Z","updated_at":"2021-03-02T19:51:19Z","author_association":"CONTRIBUTOR","body":"Seems that the spammy log messages must be due to the switch from MAC to the Curator test ZK server. I don't see anything mentioned online about watches being invoked in the test server.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789170221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789172258","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789172258","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789172258,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTE3MjI1OA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T19:54:49Z","updated_at":"2021-03-02T19:54:49Z","author_association":"CONTRIBUTOR","body":"Can you determine where / what is causing the log messages?  Its not so much the appropriateness of the log level - but rather if there is an potential performance issue where the condition that is triggering the logging is occurring more frequently than originally expected / necessary?  Also, are these messages generated frequently while running (say using uno instance) or is it something specific to testing?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789172258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789172523","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789172523","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789172523,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTE3MjUyMw==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T19:55:14Z","updated_at":"2021-03-02T19:55:14Z","author_association":"MEMBER","body":"> Seems that the spammy log messages must be due to the switch from MAC to the Curator test ZK server. I don't see anything mentioned online about watches being invoked in the test server.\r\n\r\n@dlmarion I am seeing the spammy log message on both versions. That is before _and_ after the switch from MAC to ZooKeeperTestServer.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789172523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789173112","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789173112","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789173112,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTE3MzExMg==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T19:56:21Z","updated_at":"2021-03-02T19:56:21Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo - yep, I misread your comment","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789173112/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789175479","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789175479","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789175479,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTE3NTQ3OQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T20:00:30Z","updated_at":"2021-03-02T20:00:30Z","author_association":"CONTRIBUTOR","body":"I wonder if this was always happening. I went back to the code before my changes, at https://github.com/apache/accumulo/blob/f88cb3bcebb744d7d1f3150877243c756d717ddb/core/src/main/java/org/apache/accumulo/fate/zookeeper/ZooLock.java. The log message was at trace. I must have changed it to debug in my ZooLock UUID changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789175479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789184511","html_url":"https://github.com/apache/accumulo/issues/1451#issuecomment-789184511","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1451","id":789184511,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTE4NDUxMQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T20:15:58Z","updated_at":"2021-03-02T20:15:58Z","author_association":"CONTRIBUTOR","body":"> Updated design document located at apache/accumulo-website#266\r\n\r\nThis supersedes apache/accumulo-website#223.  One major difference between #223 and #266 is the  per tablet compaction queue stored in the metadata table is replaced with a compaction coordinator process that maintains per tserver summary information.  Per tablet information is not tracked by the coordinator, it only tracks enough information to know which tserver to contact next.  Tservers track per tablet information for internal and external compactions.\r\n\r\n We are working on prototyping this new design in the following branch.\r\n\r\nhttps://github.com/apache/accumulo/tree/1451-external-compactions-feature","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789184511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789187479","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789187479","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789187479,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTE4NzQ3OQ==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T20:21:09Z","updated_at":"2021-03-02T20:21:09Z","author_association":"CONTRIBUTOR","body":"Quickly looking at the original code - it seems the watcher is being set on a node basis - if that is correct it does not seem \"normal\" that a single node watcher should be firing enough to be frequent in the logs, not saying that its not in the logs, rather I don't understand why its in the log - and that's an independent issue of the log level.\r\n\r\nCould one possibility be if something was trying to get the lock and didn't because something else held it that it is repeatedly deleting and retrying, failing,....","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789187479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789200931","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789200931","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789200931,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTIwMDkzMQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T20:40:47Z","updated_at":"2021-03-02T20:40:47Z","author_association":"CONTRIBUTOR","body":"> Could one possibility be if something was trying to get the lock and didn't because something else held it that it is repeatedly deleting and retrying, failing,....\r\n\r\nIt would be useful to know which test or tests is causing it. I believe I only added two tests in my ZooLock changes (testLockSerial and testLockParallel)\r\n\r\n@DomGarguilo - would you be able to run the tests independently to see if you can narrow down which one(s) are causing the lock watcher to renew?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789200931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789201388","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789201388","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789201388,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTIwMTM4OA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T20:41:30Z","updated_at":"2021-03-02T20:41:30Z","author_association":"CONTRIBUTOR","body":"Or, this maybe outside the scope of this issue. I'm also fine if you want to create a new issue for investigation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789201388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789206103","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789206103","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789206103,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTIwNjEwMw==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T20:50:03Z","updated_at":"2021-03-02T20:50:03Z","author_association":"CONTRIBUTOR","body":"It could be handled as a separate issue - especially if it needs to touch other code - but I think we should try to get resolution before changing the log level to mask the symptom if it is actually an underlying issue.  \r\n\r\nIt is also something that should be explainable before releasing 2.1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789206103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789210532","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789210532","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789210532,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTIxMDUzMg==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T20:57:50Z","updated_at":"2021-03-02T20:57:50Z","author_association":"MEMBER","body":"> It could be handled as a separate issue - especially if it needs to touch other code - but I think we should try to get resolution before changing the log level to mask the symptom if it is actually an underlying issue.\r\n\r\nSounds good to me. I can revert my change to the log in this PR and then create a separate issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789210532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789211419","html_url":"https://github.com/apache/accumulo/pull/140#issuecomment-789211419","issue_url":"https://api.github.com/repos/apache/accumulo/issues/140","id":789211419,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTIxMTQxOQ==","user":{"login":"phrocker","id":1781585,"node_id":"MDQ6VXNlcjE3ODE1ODU=","avatar_url":"https://avatars.githubusercontent.com/u/1781585?v=4","gravatar_id":"","url":"https://api.github.com/users/phrocker","html_url":"https://github.com/phrocker","followers_url":"https://api.github.com/users/phrocker/followers","following_url":"https://api.github.com/users/phrocker/following{/other_user}","gists_url":"https://api.github.com/users/phrocker/gists{/gist_id}","starred_url":"https://api.github.com/users/phrocker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phrocker/subscriptions","organizations_url":"https://api.github.com/users/phrocker/orgs","repos_url":"https://api.github.com/users/phrocker/repos","events_url":"https://api.github.com/users/phrocker/events{/privacy}","received_events_url":"https://api.github.com/users/phrocker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T20:59:17Z","updated_at":"2021-03-02T20:59:17Z","author_association":"CONTRIBUTOR","body":"@Manno15  I see there are changes that I can resolve; however, I haven't encountered these cases in production recently so I can't say if this is globally still an issue that is pervasive. (Number of open sources and aka the compressors not being returned ). \r\n\r\nIs this an issue you have encountered? I will update this, but would like to validate using the tests here on main that this is indeed an issue, still, otherwise I will close it. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789211419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789654849","html_url":"https://github.com/apache/accumulo/pull/140#issuecomment-789654849","issue_url":"https://api.github.com/repos/apache/accumulo/issues/140","id":789654849,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTY1NDg0OQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-03T11:43:13Z","updated_at":"2021-03-03T11:43:13Z","author_association":"CONTRIBUTOR","body":"No, I haven't encountered this issue in particular. I was just looking through some of the old PR's we have on accumulo to see if any that I can review or complete. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789654849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789837306","html_url":"https://github.com/apache/accumulo/pull/1952#issuecomment-789837306","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1952","id":789837306,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTgzNzMwNg==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-03T16:21:28Z","updated_at":"2021-03-03T16:21:28Z","author_association":"MEMBER","body":"> It could be handled as a separate issue - especially if it needs to touch other code - but I think we should try to get resolution before changing the log level to mask the symptom if it is actually an underlying issue.\r\n\r\nI have created #1955 to track this issue. @EdColeman @dlmarion ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789837306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789969159","html_url":"https://github.com/apache/accumulo/issues/1935#issuecomment-789969159","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1935","id":789969159,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTk2OTE1OQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-03T18:45:18Z","updated_at":"2021-03-04T13:48:01Z","author_association":"CONTRIBUTOR","body":"I went back and tested this with `2.0.1` and it appears that the issue is still there. I still noticed the Lock that was held was `lock-000000000`, without a lock prefix. We just didn't log it as a warning then. Which I believe was added in #1866. I plan to investigate this further if neither of you two is doing so already.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/789969159/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790026928","html_url":"https://github.com/apache/accumulo/issues/1935#issuecomment-790026928","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1935","id":790026928,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MDAyNjkyOA==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-03T20:17:33Z","updated_at":"2021-03-03T20:17:33Z","author_association":"MEMBER","body":"I have observed this as well while running `ZooLockTest`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790026928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790032065","html_url":"https://github.com/apache/accumulo/pull/1950#issuecomment-790032065","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1950","id":790032065,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MDAzMjA2NQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-03T20:26:07Z","updated_at":"2021-03-03T20:26:07Z","author_association":"CONTRIBUTOR","body":"> I think it would be good to rename setService as @ctubbsii had suggested.\r\n\r\nI am not sure what you are referring to. Sorry its hard to follow with all the comments.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790032065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790035120","html_url":"https://github.com/apache/accumulo/pull/1950#issuecomment-790035120","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1950","id":790035120,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MDAzNTEyMA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-03T20:31:13Z","updated_at":"2021-03-03T20:31:13Z","author_association":"CONTRIBUTOR","body":"> > I think it would be good to rename setService as @ctubbsii had suggested.\r\n> \r\n> I am not sure what you are referring to. Sorry its hard to follow with all the comments.\r\n\r\n> If it's required at compile time then I would be ok w/ that change. Also I agreep setService is not a good name for a fluent builder, something else would be better like toService().\r\n\r\nNevermind found it. Sorry I missed your response.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790035120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790789936","html_url":"https://github.com/apache/accumulo/issues/1935#issuecomment-790789936","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1935","id":790789936,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MDc4OTkzNg==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-04T17:26:34Z","updated_at":"2021-03-04T18:02:03Z","author_association":"CONTRIBUTOR","body":"It appears the issue is because tableOps has its own Util function that utilizes `ZooQueueLock.java` which uses a different prefix (which is just \"Lock-\").  By changing that prefix to include \"zlock#\", it got through that first check but now fails because it does not end with a \"#\".  I am working on getting past that now, but before I get too far I wanted to get ideas on what the best solution would be. Should we adapt `ZooQueueLock` to use the naming conventions we expect, adapt `tableOps/Utils` to use `ZooLock` itself so it will also use a UUID, or alter the if statements `ZooLock.validateAndSortChildrenByLockPrefix` to account for `tableOps/Utils` using a different naming convention when we call things like `Fate Print`? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790789936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790840448","html_url":"https://github.com/apache/accumulo/issues/1935#issuecomment-790840448","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1935","id":790840448,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MDg0MDQ0OA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-04T18:41:02Z","updated_at":"2021-03-04T18:41:02Z","author_association":"CONTRIBUTOR","body":"My preference would be to use ZooLock so that there is one place in the code that is managing a lock in zookeeper - otherwise - the tableOps utils would need to be verified that it handles the ZooKeeper connection edge cases that ZooLock was recently modified to handle.\r\n\r\nHowever, that may not be straight forward because ZooQueueLock seems to be either doing something different - or at least has extended the lock concept - for example it seems to have both persistent and ephemeral nodes, and it may be writing data to the node.  It may be that the epidermal locks can delegate to ZooLock and the persistent nodes handled separately? Maybe using lock here is overloaded and maybe a this represents something with a different / more descriptive name?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790840448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790873402","html_url":"https://github.com/apache/accumulo/issues/1935#issuecomment-790873402","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1935","id":790873402,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MDg3MzQwMg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-04T19:32:34Z","updated_at":"2021-03-04T19:32:34Z","author_association":"MEMBER","body":"At the very least, if it's using a different implementation, it shouldn't be using the same path in ZK as ZooLock.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790873402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790955765","html_url":"https://github.com/apache/accumulo/pull/733#issuecomment-790955765","issue_url":"https://api.github.com/repos/apache/accumulo/issues/733","id":790955765,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MDk1NTc2NQ==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-04T21:27:55Z","updated_at":"2021-03-04T21:27:55Z","author_association":"MEMBER","body":"What is the status of this? Does this still seem like an enhancement worth making?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790955765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790966246","html_url":"https://github.com/apache/accumulo/pull/733#issuecomment-790966246","issue_url":"https://api.github.com/repos/apache/accumulo/issues/733","id":790966246,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MDk2NjI0Ng==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-04T21:42:56Z","updated_at":"2021-03-04T21:42:56Z","author_association":"MEMBER","body":"@DomGarguilo I think this could still have some merit, if you want to explore and create a new PR if you end up agreeing that it would be beneficial.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/790966246/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/791522032","html_url":"https://github.com/apache/accumulo/issues/1935#issuecomment-791522032","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1935","id":791522032,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTUyMjAzMg==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T16:16:31Z","updated_at":"2021-03-05T16:16:31Z","author_association":"CONTRIBUTOR","body":"I created a draft PR with a simple solution of altering the prefix in `ZooQueueLock` to match the expected prefix from `ZooLock.validateAndSortChildrenByLockPrefix`. I am still investigating the possible solutions mentioned in the comments above. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/791522032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/791621930","html_url":"https://github.com/apache/accumulo/issues/1953#issuecomment-791621930","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1953","id":791621930,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTYyMTkzMA==","user":{"login":"slackwinner","id":50567198,"node_id":"MDQ6VXNlcjUwNTY3MTk4","avatar_url":"https://avatars.githubusercontent.com/u/50567198?v=4","gravatar_id":"","url":"https://api.github.com/users/slackwinner","html_url":"https://github.com/slackwinner","followers_url":"https://api.github.com/users/slackwinner/followers","following_url":"https://api.github.com/users/slackwinner/following{/other_user}","gists_url":"https://api.github.com/users/slackwinner/gists{/gist_id}","starred_url":"https://api.github.com/users/slackwinner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slackwinner/subscriptions","organizations_url":"https://api.github.com/users/slackwinner/orgs","repos_url":"https://api.github.com/users/slackwinner/repos","events_url":"https://api.github.com/users/slackwinner/events{/privacy}","received_events_url":"https://api.github.com/users/slackwinner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T19:08:15Z","updated_at":"2021-03-05T19:08:15Z","author_association":"CONTRIBUTOR","body":"@ctubbsii Per our conversation, I would like to be assigned to this task.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/791621930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792828572","html_url":"https://github.com/apache/accumulo/pull/1961#issuecomment-792828572","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1961","id":792828572,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MjgyODU3Mg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T15:23:30Z","updated_at":"2021-03-08T15:23:30Z","author_association":"MEMBER","body":"@keith-turner and @milleruntime this is the rename we discussed on #1950 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792828572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792948215","html_url":"https://github.com/apache/accumulo/pull/1958#issuecomment-792948215","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1958","id":792948215,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Mjk0ODIxNQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T17:51:34Z","updated_at":"2021-03-08T17:51:34Z","author_association":"CONTRIBUTOR","body":"After doing more investigating, I am leaning towards the side of keeping the use of `ZooQueueLock` as is and not trying to refactor it to use `ZooLock`. Instead, I'd rather alter the validation and sorting process of the locks. In `AdminUtil` (which is called from the Fate Print command) we call `ZooLock.validateAndSortChildrenByLockPrefix`. This expects the lock prefix to only be zLock which is where the warning is coming from. If the goal of this function is just to validate and sort the locks then I think broadening its use case by accepting different lock prefixes can solve this issue while not forcing every lock to look like ZooLocks. I would do this by moving out this function into a utility class or in its own class. Then, whichever class needs to validate/sort locks can call it and either pass in the expected lock prefix or pull from a list of valid ones. This is under the assumption that we want to keep other lock classes like `ZooQueueLock`/`DistributedReadWriteLock` (which can have different prefixes) and not convert everything to `ZooLock`. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792948215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792956720","html_url":"https://github.com/apache/accumulo/pull/1958#issuecomment-792956720","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1958","id":792956720,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Mjk1NjcyMA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T18:04:00Z","updated_at":"2021-03-08T18:04:00Z","author_association":"MEMBER","body":"If the offending code is the validation in AdminUtil, then it probably got introduced in my fix for #1926. I probably failed to realize that the lock node used for Fate locks was a different path and syntax than other locks, because all the lock node paths are passed around as Strings, instead a more specific type.\r\n\r\nIt might be beneficial to change the code around locking to have more specific types, to prevent this in future. I'm thinking something like:\r\n\r\n```java\r\nFateLockPath fLockPath = FateLock.path(somePathString);\r\nZooQueueLock.validateAndSort(fLockPath, children);\r\n\r\nZooLockPath zLockPath = ZooLock.path(somePathString);\r\nZooLock.validateAndSort(zLockPath, children);\r\n```\r\n\r\nDoing something like this would ensure we can tell the difference between a lock path used for ZooQueueLock and one used for ZooLock, which are very different.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792956720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792959022","html_url":"https://github.com/apache/accumulo/pull/1958#issuecomment-792959022","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1958","id":792959022,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Mjk1OTAyMg==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T18:07:05Z","updated_at":"2021-03-08T18:08:00Z","author_association":"CONTRIBUTOR","body":"Yeah, I was thinking along those lines. I figured having one function that could handle multiple cases would be easier to manage in the long run but I see the benefit of each having its own validation function. I will look into it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792959022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792963262","html_url":"https://github.com/apache/accumulo/pull/1958#issuecomment-792963262","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1958","id":792963262,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Mjk2MzI2Mg==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T18:13:04Z","updated_at":"2021-03-08T18:13:04Z","author_association":"CONTRIBUTOR","body":"`ZooLock.validateAndSortChildrenByLockPrefix` validates and sorts the locks at the associated path for ZooLock's purposes. If the ephemeral node name does not meet the format specifications of ZooLock, then maybe we should just make that a `trace` level event instead of `warn`. The list of valid children is printed at the `trace` level at the end of the method, maybe the invalid children should be the same. My suggestion applies to the log message [here](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/fate/zookeeper/ZooLock.java#L215) and [here](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/fate/zookeeper/ZooLock.java#L218)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792963262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792969068","html_url":"https://github.com/apache/accumulo/pull/733#issuecomment-792969068","issue_url":"https://api.github.com/repos/apache/accumulo/issues/733","id":792969068,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Mjk2OTA2OA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T18:21:06Z","updated_at":"2021-03-08T18:21:06Z","author_association":"MEMBER","body":"Superseded by #1959 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792969068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792976585","html_url":"https://github.com/apache/accumulo/pull/1958#issuecomment-792976585","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1958","id":792976585,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Mjk3NjU4NQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T18:32:02Z","updated_at":"2021-03-08T18:32:02Z","author_association":"MEMBER","body":"> `ZooLock.validateAndSortChildrenByLockPrefix` validates and sorts the locks at the associated path for ZooLock's purposes.\r\n\r\nRight. The problem here is that there was a coding error that incorrectly interpreted this lock path as being one where ZooLock's locks are stored... but that shouldn't have been the case. I don't think we should merely log... we should actively prevent such coding errors from occurring by avoiding String-based parameters in ZooLock (and ZooQueueLock) APIs, where possible.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792976585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792986180","html_url":"https://github.com/apache/accumulo/issues/1955#issuecomment-792986180","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1955","id":792986180,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Mjk4NjE4MA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T18:46:55Z","updated_at":"2021-03-08T18:46:55Z","author_association":"CONTRIBUTOR","body":"The `Renewing watch on prior node` messages from ZooLockIT all have the path  prefix `/zltestDeleteWaiting` which is from the `testDeleteWaiting` test method. Adding `@Ignore` to this test suppresses these messages. Only running this test does not produce these messages. My assumption here is that the watchers being set in the `testDeleteWaiting` method are being triggered by the other tests.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/792986180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793005104","html_url":"https://github.com/apache/accumulo/issues/1955#issuecomment-793005104","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1955","id":793005104,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzAwNTEwNA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T19:15:51Z","updated_at":"2021-03-08T19:15:51Z","author_association":"CONTRIBUTOR","body":"This issue is not reproducible on every test run. It seems to be happening randomly.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793005104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793017735","html_url":"https://github.com/apache/accumulo/issues/1955#issuecomment-793017735","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1955","id":793017735,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzAxNzczNQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T19:35:07Z","updated_at":"2021-03-08T19:35:24Z","author_association":"CONTRIBUTOR","body":"So, I think I understand what's happening here in the test method `testDeleteWaiting`. 3 ZooLocks are created and then the first two ephemeral nodes are deleted from ZK while the method continues to hold the live ZooLock objects. In a deployed system, a TabletServer would have a ZooLock and if the path was deleted (by the Master), then the TabletServer would halt. This test is somewhat similar to what would happen on a half-dead TabletServer.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793017735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793029420","html_url":"https://github.com/apache/accumulo/issues/1955#issuecomment-793029420","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1955","id":793029420,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzAyOTQyMA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T19:52:31Z","updated_at":"2021-03-08T19:52:31Z","author_association":"MEMBER","body":"@dlmarion Should we just ignore these logs from this test, then and take no action, or throttle the log message, or something else?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793029420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793031594","html_url":"https://github.com/apache/accumulo/issues/1955#issuecomment-793031594","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1955","id":793031594,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzAzMTU5NA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T19:56:05Z","updated_at":"2021-03-08T19:56:05Z","author_association":"CONTRIBUTOR","body":"I was talking with @EdColeman - I'm going to look once more at the code where it renews the watcher to make sure it's not renewing on a node that does not exist.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793031594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793035072","html_url":"https://github.com/apache/accumulo/issues/1955#issuecomment-793035072","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1955","id":793035072,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzAzNTA3Mg==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T20:01:30Z","updated_at":"2021-03-08T20:01:30Z","author_association":"CONTRIBUTOR","body":"So, the code currently logs a message, adds the watcher to the node, then if the node does not exist it removes the watcher. I'm moving the log message to the case where the node does exist. PR up soon.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793035072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793181218","html_url":"https://github.com/apache/accumulo/pull/1962#issuecomment-793181218","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1962","id":793181218,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzE4MTIxOA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T23:52:39Z","updated_at":"2021-03-08T23:52:39Z","author_association":"CONTRIBUTOR","body":"@dlmarion - thinking about this, there is only one edge case where a sequential, ephemeral node would ever find a node with a lower sequential number that was created \"after\" the current node.  The sequential numbers are assigned based on the parent, so each child node is created with a 1-up number.  For a lowered numbered node to wink into existence it would take something like, (and hopefully zookeeper prevents this):\r\n \r\n```\r\nprocess A creates a sequential node - this reserves the number, but the node is not \"created\" yet.\r\nprocess B creates a sequential node - this reserves the \"next, higher\" number`, the node IS created.\r\ntime passes...\r\nthe node created by A comes into existence.\r\n```\r\nIf zookeeper protects against this by atomically assigning a sequential number and creating the node, then if you create a sequential node, sequential nodes with lower numbers either exist - or if they don't they can never be recreated using the zookeeper sequential API. Any subsequent sequential nodes created will always have a higher sequential number, never lower.\r\n\r\nThe sequential numbers always increasing is baked into zookeeper and fundamental to the leader election recipe.  So, if you have a sequential node and look for nodes with lower numbers, they either exist or they never will.  If you checked for existence and then added the watcher the only edge case would be if the node was deleted between the check and the watch add - in which case we'd probably want to remove the watcher.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793181218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793875935","html_url":"https://github.com/apache/accumulo/pull/1962#issuecomment-793875935","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1962","id":793875935,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Mzg3NTkzNQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-09T13:08:34Z","updated_at":"2021-03-09T13:08:34Z","author_association":"CONTRIBUTOR","body":"Looking at the [note](https://zookeeper.apache.org/doc/r3.6.2/zookeeperProgrammers.html#ch_zkGuarantees) in the `Consistency Guarantees` section of the ZK programmers guide,  I'm confused by the sentence `ZooKeeper does not guarantee that at every instance in time, two different clients will have identical views of ZooKeeper data.`. Does it mean `data` in the general sense, or `data` in a node?\r\n\r\nIf it's the latter, then ZooLock may need to perform a `sync` before getting the list of children to ensure that it gets a complete list from the ZK server that it's connected to. In your example above, the node created by process A was created but the ZK server to which process B is connected may not know about it?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793875935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793883766","html_url":"https://github.com/apache/accumulo/pull/1962#issuecomment-793883766","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1962","id":793883766,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Mzg4Mzc2Ng==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-09T13:15:32Z","updated_at":"2021-03-09T13:15:32Z","author_association":"CONTRIBUTOR","body":"There is no mention of a client having to use `sync` in the Locks or Leader Election section of [Recipes](https://zookeeper.apache.org/doc/r3.6.2/recipes.html). So, maybe it's just the data in the node.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/793883766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/794261515","html_url":"https://github.com/apache/accumulo/issues/1955#issuecomment-794261515","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1955","id":794261515,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NDI2MTUxNQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-09T18:18:33Z","updated_at":"2021-03-09T18:18:33Z","author_association":"CONTRIBUTOR","body":"I moved the log message, not sure why the watcher was being invoked at the rate that it was. May warrant further investigation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/794261515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/795354626","html_url":"https://github.com/apache/accumulo/pull/1958#issuecomment-795354626","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1958","id":795354626,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTM1NDYyNg==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T12:37:12Z","updated_at":"2021-03-10T13:01:25Z","author_association":"CONTRIBUTOR","body":"In my latest commits, I added a validation and sort method inside `ZooQueueLock`. It pretty much the same as the one in `ZooLock` so it is possible we might want to simplify it some more, but it works as-is. There was only the call in `AdminUtil` that I needed to change to use the new validation function. I also labeled the various areas where we call any of the validation functions with what kind of lock type it is using (Just the ones that are outside of `ZooLock` and its direct tests).\r\n\r\nEDIT: The only real differences between the two validation functions are the PREFIX name and the lack of UUID. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/795354626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]