[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1553501516","html_url":"https://github.com/apache/accumulo/issues/3406#issuecomment-1553501516","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3406","id":1553501516,"node_id":"IC_kwDOACaFSM5cmI1M","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-18T18:59:36Z","updated_at":"2023-05-18T18:59:36Z","author_association":"CONTRIBUTOR","body":"The following are TODOs in the code related to this issue.\n\nhttps://github.com/apache/accumulo/blob/808c0bb5cc28511da6b50676a34f1abf36b7d20c/server/manager/src/main/java/org/apache/accumulo/manager/split/SplitScanner.java#L35\n\nhttps://github.com/apache/accumulo/blob/808c0bb5cc28511da6b50676a34f1abf36b7d20c/server/base/src/main/java/org/apache/accumulo/server/manager/state/CurrentState.java#L45\n\nhttps://github.com/apache/accumulo/blob/808c0bb5cc28511da6b50676a34f1abf36b7d20c/server/base/src/main/java/org/apache/accumulo/server/manager/state/MetaDataTableScanner.java#L105\n\nhttps://github.com/apache/accumulo/blob/808c0bb5cc28511da6b50676a34f1abf36b7d20c/server/manager/src/main/java/org/apache/accumulo/manager/Manager.java#L573\n\n\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1553501516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1553552033","html_url":"https://github.com/apache/accumulo/issues/3408#issuecomment-1553552033","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3408","id":1553552033,"node_id":"IC_kwDOACaFSM5cmVKh","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-18T19:36:24Z","updated_at":"2023-05-18T19:36:24Z","author_association":"CONTRIBUTOR","body":"This should be done after #3409","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1553552033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1553590826","html_url":"https://github.com/apache/accumulo/pull/3382#issuecomment-1553590826","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3382","id":1553590826,"node_id":"IC_kwDOACaFSM5cmeoq","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-18T20:12:33Z","updated_at":"2023-05-18T20:12:33Z","author_association":"CONTRIBUTOR","body":"There were many TODOs in this code.   Opened follow on issues for them #3406,#3407,#3408,#3410,#3411,#3412, and #3413","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1553590826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1554524647","html_url":"https://github.com/apache/accumulo/issues/2830#issuecomment-1554524647","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2830","id":1554524647,"node_id":"IC_kwDOACaFSM5cqCnn","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-19T12:50:21Z","updated_at":"2023-05-19T12:50:21Z","author_association":"CONTRIBUTOR","body":"I am planning to revisit this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1554524647/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1554534539","html_url":"https://github.com/apache/accumulo/pull/3401#issuecomment-1554534539","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3401","id":1554534539,"node_id":"IC_kwDOACaFSM5cqFCL","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-19T12:58:52Z","updated_at":"2023-05-19T12:58:52Z","author_association":"CONTRIBUTOR","body":"I just started a full IT build, if everything passes this should be good to merge.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1554534539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1555008367","html_url":"https://github.com/apache/accumulo/pull/3401#issuecomment-1555008367","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3401","id":1555008367,"node_id":"IC_kwDOACaFSM5cr4tv","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-19T17:28:47Z","updated_at":"2023-05-19T17:28:47Z","author_association":"CONTRIBUTOR","body":"Everything passed except for 2 tests which I fixed, I will merge this once QA checks pass","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1555008367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1555207199","html_url":"https://github.com/apache/accumulo/issues/3407#issuecomment-1555207199","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3407","id":1555207199,"node_id":"IC_kwDOACaFSM5cspQf","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-19T20:33:33Z","updated_at":"2023-05-19T20:33:33Z","author_association":"MEMBER","body":"I've started working on adding tests for these cases in #3415 \r\n\r\n@keith-turner can you please take a look to see if I am on the right track to address the second case mentioned above?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1555207199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1555951743","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1555951743","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1555951743,"node_id":"IC_kwDOACaFSM5cvfB_","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-20T16:57:03Z","updated_at":"2023-05-20T16:57:03Z","author_association":"CONTRIBUTOR","body":"The SunnyITs all passed, I am kicking off a full IT build now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1555951743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1555952067","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1555952067","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1555952067,"node_id":"IC_kwDOACaFSM5cvfHD","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-20T16:58:45Z","updated_at":"2023-05-20T16:58:45Z","author_association":"CONTRIBUTOR","body":"I should also add that credit goes to @keith-turner for the idea of changing StoredTabletFile to extend the AbstractTabletFile class I added as that made this much cleaner and easier.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1555952067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1556067237","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1556067237","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1556067237,"node_id":"IC_kwDOACaFSM5cv7Ol","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-21T02:31:28Z","updated_at":"2023-05-21T02:31:28Z","author_association":"CONTRIBUTOR","body":"Looks like there are a few IT failures when running the full test suite, I will take a look tomorrow to see what needs to be fixed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1556067237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1556214256","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1556214256","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1556214256,"node_id":"IC_kwDOACaFSM5cwfHw","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-21T16:02:41Z","updated_at":"2023-05-21T16:07:19Z","author_association":"CONTRIBUTOR","body":"I just pushed a new commit to fix the failures and also started a new full IT run. \r\n\r\nThe test failures turned out to be due to a class cast exception in FileManager trying to convert StoredTabletFile to TabletFile when using a Scan server because SnapshotTablet was [returning](https://github.com/apache/accumulo/blob/4d933f1a285fb1a5c323bf58062fb05d3110dd91/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/SnapshotTablet.java#L72) StoredTabletFiles when reserving files instead of TabletFile as getDataFiles() is used by [reserveFilesForScan()](https://github.com/apache/accumulo/blob/4d933f1a285fb1a5c323bf58062fb05d3110dd91/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/SnapshotTablet.java#L103). This was missed due to the suppressed warning [annotation](https://github.com/apache/accumulo/blob/4d933f1a285fb1a5c323bf58062fb05d3110dd91/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/SnapshotTablet.java#L100) for unchecked and raw types so the compiler did not pick this up. \r\n\r\nI came up with 3 ways to fix this which I explain below. I picked option 2 for now but I'm not entirely sure it was the best one to use so any feedback is welcome.\r\n\r\n1. **Simplest option:** Each time [reserveFilesForScan() ](https://github.com/apache/accumulo/blob/4d933f1a285fb1a5c323bf58062fb05d3110dd91/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/SnapshotTablet.java#L102)is called in `SnapshotTablet` we could just convert the map to a new map of TabletFiles instead of StoredTabletFiles and return that. We [currently](https://github.com/apache/accumulo/blob/4d933f1a285fb1a5c323bf58062fb05d3110dd91/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/DatafileManager.java#L98) iterate already and create a new map in DataFileManager so this would not be new. It's the simplest option with the least amount of changes but I didn't do that for now as the **downside** is as I pointed out, it requires creating a new map and having to iterate every time we call that method so I wanted to avoid that but I could easily just do that instead. Doing this would simply require changing [reserveFilesForScan() ](https://github.com/apache/accumulo/blob/4d933f1a285fb1a5c323bf58062fb05d3110dd91/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/SnapshotTablet.java#L102) in SnapshotTablet to something like the following with no other changes:\r\n\r\n```java\r\n   @Override\r\n   public Pair<Long,Map<TabletFile,DataFileValue>> reserveFilesForScan() {\r\n    return new Pair<>(0L,\r\n        getDatafiles().entrySet().stream().collect(Collectors.toMap(e -> e.getKey().getTabletFile(),\r\n            Map.Entry::getValue, (tf1, tf2) -> tf1, TreeMap::new)));\r\n   }\r\n```\r\n\r\n2. **This is the option I chose for now:** In my latest commit I updated `FileManager` to just use `StoredTabletFile` instead of TabletFile and also updated the reserveFilesForScan() in `TabletBase` to just return StoredTabletFile. This has the benefit of not having to create a new map each time reserveFilesForScan() was called for `SnapshotTablet`. The downside is more API changes and now TabletFile can't be passed into FileManager anymore, only StoredTabletFile. I think this should be fine though as from what I could tell FileManager is only [used](https://github.com/apache/accumulo/blob/4d933f1a285fb1a5c323bf58062fb05d3110dd91/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/ScanDataSource.java#L167) from the ScanDataSource but not sure if it could be a problem in the future.\r\n3. The last option was a modification of option 2 which was to update FileManager to take AbstractTabletFile instead of StoredTabletFile so either TabletFile or StoredTabletFile could be used. This is certainly more flexible and keeps compatibility with TabletFile and I almost did this but I didn't like that by using the Abstract type it could lead to issues with reserved reader caching because in the future an update could be made such that both that both StoredTabletFile and TabletFile are passed as the API would allow that between different calls for opening files. It could cause problems if they pointed to the same file as they are no longer considered equal so reserved cached readers wouldn't be re-used.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1556214256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1557160881","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1557160881","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1557160881,"node_id":"IC_kwDOACaFSM5c0GOx","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T12:48:37Z","updated_at":"2023-05-22T12:49:56Z","author_association":"CONTRIBUTOR","body":"All IT tests passed now. \r\n\r\nAlso something else I thought of would it would be nice to add a new interface and rename `TabletFile`. Right now `TabletFile`, `UnreferencedTabletFile`, `StoredTabletFile` extend `AbstractTabletFile`. I think this is fine but it would be nicer/more clear to rename the existing `TabletFile` to `ReferencedTabletFile` and create a `TabletFile` interface. So you'd have:\r\n\r\n```\r\n//new interface\r\nTabletFile interface (contains some method definitions like getPath() or getFileName())\r\n\r\n//Abstract class implements the interface\r\nAbstractTabletFile implements TabletFile\r\n```\r\n```\r\n//Concrete classes\r\n\r\n//renamed existing TabletFile\r\nReferencedTabletFile extends AbstractTabletFile\r\nStoredTabletFile extends AbstractTabletFile\r\nUnreferencedTabletFile extends AbstractTabletFile\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1557160881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1557447662","html_url":"https://github.com/apache/accumulo/issues/3394#issuecomment-1557447662","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3394","id":1557447662,"node_id":"IC_kwDOACaFSM5c1MPu","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T15:39:44Z","updated_at":"2023-05-22T15:39:44Z","author_association":"MEMBER","body":"@ivakegg Have you considered using a RegEx filter for the specific messages you want to control? \r\nhttps://logging.apache.org/log4j/2.x/manual/filters.html#regexfilter\r\nYou can configure it so that the filter is only used on the specific logger that emits that message, so you're not doing regex matching on everything, which might be expensive. You could also use a more efficient custom filter, too.\r\n\r\nUsing filters is a more flexible general solution, than moving specific messages into their own logger classes.\r\n\r\nI'm just reluctant to hide or reduce warnings about use of deprecated features for everybody, since we really want users to move away from them, in general. Having said that, I agree there can be a certain amount of messaging that is too much. I'm not exactly sure where the threshold should be for this particular one, so I'm looking first to general solutions. And I think filters are good general solutions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1557447662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1557620993","html_url":"https://github.com/apache/accumulo/pull/3419#issuecomment-1557620993","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3419","id":1557620993,"node_id":"IC_kwDOACaFSM5c12kB","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T17:29:58Z","updated_at":"2023-05-22T17:29:58Z","author_association":"MEMBER","body":"I'm not sure what's wrong with the newest errorprone... it's getting a NoSuchMethodError when calling into Guava code for its own purposes. I checked and it looks like their version of Guava is the same as ours, so I'm not sure what's wrong.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1557620993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1558292098","html_url":"https://github.com/apache/accumulo/issues/3390#issuecomment-1558292098","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3390","id":1558292098,"node_id":"IC_kwDOACaFSM5c4aaC","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T00:54:23Z","updated_at":"2023-05-23T00:54:23Z","author_association":"CONTRIBUTOR","body":"You may be able to use the shell merge command with accumulo in SAFE mode.  \r\n\r\n```\r\naccumulo org.apache.accumulo.manager.state.SetGoalState SAFE_MODE\r\n```\r\n\r\nAnd then in the shell the merge command with its various option can be used.  Usual warnings on setting the split-sizes,...  \r\n\r\nI tried it on uno and it seemed to work as expected.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1558292098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1559195613","html_url":"https://github.com/apache/accumulo/issues/3414#issuecomment-1559195613","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3414","id":1559195613,"node_id":"IC_kwDOACaFSM5c72_d","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T12:24:04Z","updated_at":"2023-05-23T12:24:04Z","author_association":"CONTRIBUTOR","body":"At the 96th iteration, the value of  `waitFactor` is `1.72034982760886272E17` and `waitIncrement` is `9223372036854775807`. When `waitIncrement` is added to the initial wait, it overflows the value of a long turning the value of `currentWait` negative.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1559195613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1559390277","html_url":"https://github.com/apache/accumulo/pull/3422#issuecomment-1559390277","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3422","id":1559390277,"node_id":"IC_kwDOACaFSM5c8mhF","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T13:40:09Z","updated_at":"2023-05-23T13:40:09Z","author_association":"CONTRIBUTOR","body":"This may prevent the overflow, but I was reviewing this to see if the wait / backoff factor is what is expected when this was merged.  Where \r\n```\r\ncurrentWait = Math.min(maxWait, initialWait + waitIncrement);\r\n```\r\nshould it be something like\r\n```\r\ncurrentWait = Math.min(maxWait, currentWait + waitIncrement);\r\n```\r\n\r\nIf you have an initial wait of 10 seconds and then you want to retry every second with a back off I would expect wait times like 10, 11, 13, 17,...  But it appears that the code would be like 10, 21, 33 (or something), but basically backing off by the initialWait and the back-off increment.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1559390277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1559415267","html_url":"https://github.com/apache/accumulo/pull/3422#issuecomment-1559415267","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3422","id":1559415267,"node_id":"IC_kwDOACaFSM5c8snj","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T13:49:14Z","updated_at":"2023-05-23T13:49:14Z","author_association":"CONTRIBUTOR","body":"So, two bugs in our Retry object then? Maybe if we are going to touch this again, instead of fixing it we rip it out and replace it with one of:\r\n\r\nhttps://curator.apache.org/apidocs/org/apache/curator/retry/ExponentialBackoffRetry.html\r\nhttp://rholder.github.io/guava-retrying/\r\nhttps://resilience4j.readme.io/v1.7.0/docs/retry","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1559415267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1559753513","html_url":"https://github.com/apache/accumulo/issues/3390#issuecomment-1559753513","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3390","id":1559753513,"node_id":"IC_kwDOACaFSM5c9_Mp","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T16:13:03Z","updated_at":"2023-05-23T16:13:03Z","author_association":"CONTRIBUTOR","body":"As it turns out you can actually merge the accumulo.metadata if you supply a range without being in safe mode.  What does not work is using the -s (size) option.  In that case you get the message \"org.apache.accumulo.core.util.merge$MergeException: java.lang.IllegalArgumentException: cannot merge tablets on the metadata table.\"\r\n\r\nIf you can merge tablets one way, then you should be able to merge them using the size command.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1559753513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1559810979","html_url":"https://github.com/apache/accumulo/pull/3409#issuecomment-1559810979","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3409","id":1559810979,"node_id":"IC_kwDOACaFSM5c-NOj","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T16:46:47Z","updated_at":"2023-05-23T16:46:47Z","author_association":"CONTRIBUTOR","body":"I have no issue renaming things. Let's get the changes fleshed out first, then we can rename.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1559810979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1559916769","html_url":"https://github.com/apache/accumulo/pull/3409#issuecomment-1559916769","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3409","id":1559916769,"node_id":"IC_kwDOACaFSM5c-nDh","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T18:09:48Z","updated_at":"2023-05-23T18:09:48Z","author_association":"CONTRIBUTOR","body":"> I have no issue renaming things. Let's get the changes fleshed out first, then we can rename.\r\n\r\nI finished looking over the changes.  I am going to look into the null server sets and see if I can understand what is going on with those.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1559916769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1560152395","html_url":"https://github.com/apache/accumulo/issues/3423#issuecomment-1560152395","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3423","id":1560152395,"node_id":"IC_kwDOACaFSM5c_glL","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T21:35:32Z","updated_at":"2023-05-23T21:35:32Z","author_association":"MEMBER","body":"`zoo-info-editor`? Or rename `zoo-info-viewer` to `zoo-info-tool`?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1560152395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1560182408","html_url":"https://github.com/apache/accumulo/issues/3390#issuecomment-1560182408","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3390","id":1560182408,"node_id":"IC_kwDOACaFSM5c_n6I","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-23T22:00:05Z","updated_at":"2023-05-23T22:00:05Z","author_association":"MEMBER","body":"Well, that's good news! I'm glad we don't disallow merging the metadata table if needed. I was really wondering why that restriction might have been in place and couldn't think of a good one, other than to maybe prevent it being offline for awhile while the chop compactions were happening, but apparently not.\r\n\r\nThe size option triggers the use of a separate client-side utility, `Merge.mergomatic()` that does a lot of things to compute sizes from reading the metadata table, before incrementally issuing separate merge commands. This utility has a main method and at one point was probably used without the shell. It looks like has always had the restriction that it only works for non-metadata tables. It also predates the split of the metadata into the root and metadata tables. So, it's likely that this restriction was to prevent attempts to merge the root tablet into the rest of the metadata table. It was probably easier to impose that restriction than to account for that root tablet edge case with a bunch of complicated code. As a separate table, it's much easier to do things to the metadata table without affecting the root tablet now.\r\n\r\nThe utility would need to be updated to scan the root table instead of the metadata table when automatically computing the sizes, but otherwise, I don't see any reason the restriction couldn't be removed. I'm not entirely sure I'd recommend any kind of \"auto\" or \"semi-auto\" things happening to the metadata table, though. A utility called \"mergomatic\" doesn't exactly sound like the pinnacle of safety for the metadata table. :smiley_cat:","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1560182408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1560993501","html_url":"https://github.com/apache/accumulo/issues/3423#issuecomment-1560993501","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3423","id":1560993501,"node_id":"IC_kwDOACaFSM5dCt7d","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-24T12:02:59Z","updated_at":"2023-05-24T12:02:59Z","author_association":"CONTRIBUTOR","body":"> The tool should provide a text output similar to zoo-info-viewer that can be edited and then re-imported.\r\n\r\nAlternatively, you could use the same `-s` syntax that the Shell uses instead of parsing text input.\r\n\r\n`ManagerClientServiceHandler.set(Table|Namespace|System)Property` all end up calling `PropUtil.(set|remove)Properties()`. PropUtil is already in server-base along with the other utilities. As a quicker solution, we could:\r\n\r\n  1. Modify PropUtil to implement `KeywordExecutable` and maybe give it a better name in `keyword()`\r\n  2. Implement `execute()` to do the same argument parsing that `ConfigCommand` uses and call the appropriate PropUtil method.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1560993501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1561127629","html_url":"https://github.com/apache/accumulo/issues/3371#issuecomment-1561127629","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3371","id":1561127629,"node_id":"IC_kwDOACaFSM5dDOrN","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-24T13:14:57Z","updated_at":"2023-05-24T13:14:57Z","author_association":"CONTRIBUTOR","body":"Now that I have a way of overriding the context class loader factory and pass through the configuration, I can override the vfs class loader with one that will capture NoClassDefError and throw an exception instead which will avoid the tserver from falling over.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1561127629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1561135947","html_url":"https://github.com/apache/accumulo/issues/3368#issuecomment-1561135947","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3368","id":1561135947,"node_id":"IC_kwDOACaFSM5dDQtL","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-24T13:19:56Z","updated_at":"2023-05-24T13:19:56Z","author_association":"CONTRIBUTOR","body":"With the updated logging, I believe we can close this issue for now pending reproducing this error.  I have only seen it once thus far and we have been bounced the system several times since.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1561135947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1561224007","html_url":"https://github.com/apache/accumulo/issues/3371#issuecomment-1561224007","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3371","id":1561224007,"node_id":"IC_kwDOACaFSM5dDmNH","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-24T14:03:13Z","updated_at":"2023-05-24T14:03:13Z","author_association":"CONTRIBUTOR","body":"Actually, looking at what the error was more closely, it was actually not in the path of the VFS Class loader.  I am reopening this until I can dig further.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1561224007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1561337078","html_url":"https://github.com/apache/accumulo/issues/3314#issuecomment-1561337078","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3314","id":1561337078,"node_id":"IC_kwDOACaFSM5dEBz2","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-24T15:07:12Z","updated_at":"2023-05-24T15:07:12Z","author_association":"CONTRIBUTOR","body":"I think that this is working as intended. I'm going to move this to the elasticity project as it might be an issue there, but I think it's good for 2.x and 3.x.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1561337078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1561414120","html_url":"https://github.com/apache/accumulo/issues/3371#issuecomment-1561414120","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3371","id":1561414120,"node_id":"IC_kwDOACaFSM5dEUno","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-24T15:44:56Z","updated_at":"2023-05-24T15:44:56Z","author_association":"CONTRIBUTOR","body":"It appears the errors may be generated via the spring and we are simply not seeing the actual underlying cause which may still be the VFSClassLoader.  We will try to validate this once the #3399 is brought in and the context class loader factory is configured.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1561414120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1561757597","html_url":"https://github.com/apache/accumulo/pull/3409#issuecomment-1561757597","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3409","id":1561757597,"node_id":"IC_kwDOACaFSM5dFoed","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-24T18:40:41Z","updated_at":"2023-05-24T18:40:41Z","author_association":"CONTRIBUTOR","body":"I'm going to fix the failed build issue, and then merge this to `elasticity` so that we can continue to build off of it. There are two failing ITs IIRC, MergeStateIT and AssignLocationModeIT, we can fix them up later.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1561757597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1562096726","html_url":"https://github.com/apache/accumulo/pull/3425#issuecomment-1562096726","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3425","id":1562096726,"node_id":"IC_kwDOACaFSM5dG7RW","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T00:35:57Z","updated_at":"2023-05-25T00:35:57Z","author_association":"CONTRIBUTOR","body":"@dlmarion I made a change in this PR in facbdff to make things in the migrating set return NEEDS_LOCATION_UPDATE in the new TabletManagementIterator.  It was ignoring things that were migrating in the manager.  Figured things that are migrating only need a location update so decided to have it return that.  I ran into this while doing some split testing.\r\n\r\nI also addressed #3408 in facbdff.  It was super easy to do after the changes in #3409, it was only a few lines. So I went ahead and threw it since I was running split tests.\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1562096726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1562145054","html_url":"https://github.com/apache/accumulo/pull/3426#issuecomment-1562145054","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3426","id":1562145054,"node_id":"IC_kwDOACaFSM5dHHEe","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T01:49:41Z","updated_at":"2023-05-25T01:49:41Z","author_association":"MEMBER","body":"Updating apilyzer required me to actually update that project and release a new version of it, which I hadn't done since 2017.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1562145054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563083510","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1563083510","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1563083510,"node_id":"IC_kwDOACaFSM5dKsL2","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T15:13:27Z","updated_at":"2023-05-25T15:13:27Z","author_association":"CONTRIBUTOR","body":"Just for information.\r\n\r\nThe information in ZooKeeper where the table name is stored is world readable and should not be considered sensitive.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563083510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563139556","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1563139556","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1563139556,"node_id":"IC_kwDOACaFSM5dK53k","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T15:52:08Z","updated_at":"2023-05-25T15:52:08Z","author_association":"CONTRIBUTOR","body":"For 1.10.x, the Shell returns BAD_CREDENTIALS when a bad username/password is supplied, then the Shell exits. It seems like the behavior here has changed. Maybe it changed in 2.0 and it's not a bug?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563139556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563156535","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1563156535","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1563156535,"node_id":"IC_kwDOACaFSM5dK-A3","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T16:03:45Z","updated_at":"2023-05-25T16:03:45Z","author_association":"CONTRIBUTOR","body":"Carrying BAD_CREDENTIALS behavior forward seems the safest option unless someone can provide an explicit, legitimate reason for relaxing it. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563156535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563325480","html_url":"https://github.com/apache/accumulo/pull/3140#issuecomment-1563325480","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3140","id":1563325480,"node_id":"IC_kwDOACaFSM5dLnQo","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T18:23:07Z","updated_at":"2023-05-25T18:23:07Z","author_association":"CONTRIBUTOR","body":"I created #3428 against 2.1 as a replacement for this PR. It incorporates some of the suggestions here.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563325480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563347672","html_url":"https://github.com/apache/accumulo/pull/3428#issuecomment-1563347672","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3428","id":1563347672,"node_id":"IC_kwDOACaFSM5dLsrY","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T18:44:06Z","updated_at":"2023-05-25T18:44:06Z","author_association":"CONTRIBUTOR","body":"Lol. I think the negations got me and I messed up the bulk import only. Waiting for confirmation.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563347672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563390560","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1563390560","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1563390560,"node_id":"IC_kwDOACaFSM5dL3Jg","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T19:15:32Z","updated_at":"2023-05-25T19:15:32Z","author_association":"MEMBER","body":"> The information in ZooKeeper where the table name is stored is world readable and should not be considered sensitive.\r\n\r\nCould we lock that down easily?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563390560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563395201","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1563395201","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1563395201,"node_id":"IC_kwDOACaFSM5dL4SB","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T19:19:05Z","updated_at":"2023-05-25T19:19:40Z","author_association":"MEMBER","body":"> For 1.10.x, the Shell returns BAD_CREDENTIALS when a bad username/password is supplied, then the Shell exits. It seems like the behavior here has changed. Maybe it changed in 2.0 and it's not a bug?\r\n\r\nThe change is that we no longer authenticate an AccumuloClient with the server, until you try to do some action with that client (Connector always authenticated every time you created it, and that was intentionally changed). Some client operations only need to talk to ZK, so no authentication is needed to do those actions in our public API. So, no error in the shell when the shell uses our public API to do that. To change that, we would need to replace some client side implementations with RPC calls to servers to do those actions for the client.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563395201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563411866","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1563411866","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1563411866,"node_id":"IC_kwDOACaFSM5dL8Wa","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T19:35:10Z","updated_at":"2023-05-25T19:35:10Z","author_association":"CONTRIBUTOR","body":"> The change is that we no longer authenticate an AccumuloClient with the server, until you try to do some action with that client (Connector always authenticated every time you created it, and that was intentionally changed). Some client operations only need to talk to ZK, so no authentication is needed to do those actions in our public API. So, no error in the shell when the shell uses our public API to do that. To change that, we would need to replace some client side implementations with RPC calls to servers to do those actions for the client.\r\n\r\nSo it sounds like you are saying that the behavior changed at some point between 1.10 and 2.1 (maybe 2.0), and that this is the expected behavior. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563411866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563449242","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1563449242","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1563449242,"node_id":"IC_kwDOACaFSM5dMFea","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T20:10:45Z","updated_at":"2023-05-25T20:11:35Z","author_association":"MEMBER","body":"> So it sounds like you are saying that the behavior changed at some point between 1.10 and 2.1 (maybe 2.0), and that this is the expected behavior.\r\n\r\nIt changed in 2.0. AccumuloClient intentionally never implemented the \"fail fast\" authentication check that ConnectorImpl did (and does still in 2.1). So, when the shell switched to use AccumuloClient instead of Connector, it stopped causing the error. The error wasn't with the retrieval of table info. It was with the initial construction of Connector in the shell. So, if there's a problem at all here, it's not with the shell... it's with the AccumuloClient API that doesn't require authentication for ZK read-only operations that work on the client side. AccumuloClient is just treating it the same way zkCli.sh would.\r\n\r\nPut another way: it's what Ed said above: \"The information in ZooKeeper where the table name is stored is world readable\". This has always been the case. The user's observation of the change in shell behavior is only highlighting the pre-existing choice to not make table information private in ZK.\r\n\r\nSo no, this isn't exactly a bug. But, it does raise the question that is implied in the second part of Ed's comment. He said that this \"should not be considered sensitive\". If there is anything to be done here, it would be because we are now asking \"should it be considered sensitive?\" and have decided the answer is \"yes\". If that's the case, then we can change the API's implementation to get the information via an RPC call and we can lock down the ZK view so it can't be accessed publicly with zkCli.sh either. If, on the other hand, we answer \"no\", then there's probably nothing to do here, other than to make it clear that table (and namespace) names and count are not sensitive in the documentation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563449242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563449532","html_url":"https://github.com/apache/accumulo/issues/3408#issuecomment-1563449532","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3408","id":1563449532,"node_id":"IC_kwDOACaFSM5dMFi8","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T20:11:00Z","updated_at":"2023-05-25T20:11:00Z","author_association":"CONTRIBUTOR","body":"This was done as part of #3425","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563449532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563452235","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1563452235","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1563452235,"node_id":"IC_kwDOACaFSM5dMGNL","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T20:13:30Z","updated_at":"2023-05-25T20:13:30Z","author_association":"MEMBER","body":"Also, although AccumuloClient does not authenticate when it is constructed. We could make the shell do that. That's a separate issue than the question about whether table names and quantity are sensitive in ZK.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563452235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563459529","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1563459529","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1563459529,"node_id":"IC_kwDOACaFSM5dMH_J","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T20:20:09Z","updated_at":"2023-05-25T20:20:09Z","author_association":"CONTRIBUTOR","body":"With the 2.0 prop change, the properties removed world:read permissions and require authentication to access.  Most other things  in ZooKeeper are world:read, but are restricted from making changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563459529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563462803","html_url":"https://github.com/apache/accumulo/issues/3340#issuecomment-1563462803","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3340","id":1563462803,"node_id":"IC_kwDOACaFSM5dMIyT","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T20:23:16Z","updated_at":"2023-05-25T20:23:16Z","author_association":"CONTRIBUTOR","body":"I think the changes related to #3382 have fixed this, however we probably want explicit tests that verify the hosting goal after a split is correct in the new child tablets.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563462803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563513486","html_url":"https://github.com/apache/accumulo/pull/3140#issuecomment-1563513486","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3140","id":1563513486,"node_id":"IC_kwDOACaFSM5dMVKO","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T21:13:36Z","updated_at":"2023-05-25T21:13:36Z","author_association":"MEMBER","body":"Closing this as superseded by #3428 . Ongoing design discussion in the code review there.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563513486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563525322","html_url":"https://github.com/apache/accumulo/pull/3428#issuecomment-1563525322","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3428","id":1563525322,"node_id":"IC_kwDOACaFSM5dMYDK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T21:26:14Z","updated_at":"2023-05-25T21:26:14Z","author_association":"CONTRIBUTOR","body":"I can likely put up a different PR for the SPI approach. Given that it's the opposite of what's here, I don't feel like this is a good starting point for it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563525322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563532461","html_url":"https://github.com/apache/accumulo/pull/3428#issuecomment-1563532461","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3428","id":1563532461,"node_id":"IC_kwDOACaFSM5dMZyt","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T21:34:24Z","updated_at":"2023-05-25T21:34:24Z","author_association":"MEMBER","body":"> I can likely put up a different PR for the SPI approach. Given that it's the opposite of what's here, I don't feel like this is a good starting point for it.\r\n\r\nAgreed that it's not the same starting point. Not sure about \"opposite\" :smiley_cat:, but definitely independent. Let me know if you'd prefer I work on that alternative. I'm happy to do so, but don't want to step on your toes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563532461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563689413","html_url":"https://github.com/apache/accumulo/pull/3429#issuecomment-1563689413","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3429","id":1563689413,"node_id":"IC_kwDOACaFSM5dNAHF","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T01:16:54Z","updated_at":"2023-05-26T01:16:54Z","author_association":"CONTRIBUTOR","body":"Wondering if working on #3430 before continuing with this would be best.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1563689413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564277873","html_url":"https://github.com/apache/accumulo/pull/3428#issuecomment-1564277873","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3428","id":1564277873,"node_id":"IC_kwDOACaFSM5dPPxx","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T11:55:00Z","updated_at":"2023-05-26T11:55:00Z","author_association":"CONTRIBUTOR","body":"I started looking at the SPI approach this morning and found something interesting. An SPI already exists in the Hadoop code. If anything I think we could probably remove code from Accumulo and users could create their own implementation of [TrashPolicy](https://github.com/apache/hadoop/blob/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/TrashPolicy.java) and set it via the what appears to be the undocumented Hadoop property `fs.trash.classname` which is used in [TrashPolicy.getInstance](https://github.com/apache/hadoop/blob/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/TrashPolicy.java#L156).\r\n\r\nWhen the Accumulo [GCRun](https://github.com/apache/accumulo/blob/main/server/gc/src/main/java/org/apache/accumulo/gc/GCRun.java#L439) code calls [VolumeManagerImpl.moveToTrash(Path)](https://github.com/apache/accumulo/blob/main/server/base/src/main/java/org/apache/accumulo/server/fs/VolumeManagerImpl.java#L355), a new `Trash` object is created, which calls `TrashPolicy.getInstance` which loads the `TrashPolicy` class specified by `fs.trash.classname`. I think there is an opportunity here to make this more efficient in `VolumeManagerImpl.moveToTrash`, I don't think it needs to create a new `Trash` instance for every call.\r\n\r\nLooking at the history of TrashPolicy, it appears that support for pluggable TrashPolicy's in Hadoop was added about 12 years ago.\r\n\r\n\r\n@alerman @ctubbsii - Is there a reason *not* to use the Hadoop pluggable Trash Policy?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564277873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564305338","html_url":"https://github.com/apache/accumulo/pull/3428#issuecomment-1564305338","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3428","id":1564305338,"node_id":"IC_kwDOACaFSM5dPWe6","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T12:16:46Z","updated_at":"2023-05-26T12:16:46Z","author_association":"CONTRIBUTOR","body":"Along with https://github.com/apache/accumulo/pull/3180, added in 2.1.1, this would allow different TrashPolicy implementations per volume.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564305338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564358865","html_url":"https://github.com/apache/accumulo/pull/3428#issuecomment-1564358865","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3428","id":1564358865,"node_id":"IC_kwDOACaFSM5dPjjR","user":{"login":"alerman","id":119506,"node_id":"MDQ6VXNlcjExOTUwNg==","avatar_url":"https://avatars.githubusercontent.com/u/119506?v=4","gravatar_id":"","url":"https://api.github.com/users/alerman","html_url":"https://github.com/alerman","followers_url":"https://api.github.com/users/alerman/followers","following_url":"https://api.github.com/users/alerman/following{/other_user}","gists_url":"https://api.github.com/users/alerman/gists{/gist_id}","starred_url":"https://api.github.com/users/alerman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alerman/subscriptions","organizations_url":"https://api.github.com/users/alerman/orgs","repos_url":"https://api.github.com/users/alerman/repos","events_url":"https://api.github.com/users/alerman/events{/privacy}","received_events_url":"https://api.github.com/users/alerman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T12:59:58Z","updated_at":"2023-05-26T12:59:58Z","author_association":"CONTRIBUTOR","body":"Did not know there was a pluggable trash policy. The reason we needed the change for imports not going to trash was namenode pressure when trash was enabled due to the volume. Some testing should be done to see if the trash policy accomplishes the same goal without the need for the specialized handling in accumulo.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564358865/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564365206","html_url":"https://github.com/apache/accumulo/pull/3428#issuecomment-1564365206","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3428","id":1564365206,"node_id":"IC_kwDOACaFSM5dPlGW","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T13:04:35Z","updated_at":"2023-05-26T13:04:35Z","author_association":"CONTRIBUTOR","body":"My guess is that you can extent [TrashPolicyDefault](https://github.com/apache/hadoop/blob/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/TrashPolicyDefault.java#L123) and override the `moveToTrash` method. After checking the file name prefix, just call the super class method.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564365206/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564418812","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1564418812","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1564418812,"node_id":"IC_kwDOACaFSM5dPyL8","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T13:44:55Z","updated_at":"2023-05-26T13:44:55Z","author_association":"CONTRIBUTOR","body":">  think this is fine but it would be nicer/more clear to rename the existing TabletFile to ReferencedTabletFile and create a TabletFile interface.\r\n\r\n@cshannon I like this, seems cleaner and feels like it will help improve code correctness.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564418812/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564435728","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1564435728","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1564435728,"node_id":"IC_kwDOACaFSM5dP2UQ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T13:57:44Z","updated_at":"2023-05-26T13:57:44Z","author_association":"CONTRIBUTOR","body":"This would be a follow on issue, but for the existing code in 2.1 it may be good to add test that manually creates tablets with files that are not normalized correctly (like `hdfs://abc/accumulo////tables/etc`) and then compacts (internal and external), splits, and merges those tablets.  To create the misnormalized files could write data to  a table, flush, take offline, edit file path, and then bring back online.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564435728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564439234","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1564439234","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1564439234,"node_id":"IC_kwDOACaFSM5dP3LC","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T14:00:08Z","updated_at":"2023-05-26T14:00:08Z","author_association":"CONTRIBUTOR","body":"It had been asked if the StoredTabletFile should target 2.1 or 3.  I am still inclined that 3.0 (or 3.1) is the correct destination - but seeing the above conversation, could the errors that are being seen with 2.1 and metadata syncs be hitting some of the \"discovered\" bugs?  \r\n\r\nIs there a way to tell when a situation might occur?  Something like entries in the metadata table are not normalized, or normalized somehow different?  \r\n\r\nWhat I am asking is there something we could ask the 2.1 folks to scan for to see if their environment has a higher opportunity to hit these bugs - or (hopefully) all the paths are normalized, so its unlikely that they would see an issue and it is unlikely this could be contributing to the sync issues?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564439234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564444490","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1564444490","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1564444490,"node_id":"IC_kwDOACaFSM5dP4dK","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T14:03:52Z","updated_at":"2023-05-26T14:03:52Z","author_association":"CONTRIBUTOR","body":"> It had been asked if the StoredTabletFile should target 2.1 or 3. I am still inclined that 3.0 (or 3.1) is the correct destination - but seeing the above conversation, could the errors that are being seen with 2.1 and metadata syncs be hitting some of the \"discovered\" bugs?\r\n> \r\n> Is there a way to tell when a situation might occur? Something like entries in the metadata table are not normalized, or normalized somehow different?\r\n> \r\n> What I am asking is there something we could ask the 2.1 folks to scan for to see if their environment has a higher opportunity to hit these bugs - or (hopefully) all the paths are normalized, so its unlikely that they would see an issue and it is unlikely this could be contributing to the sync issues?\r\n\r\nMy plan is to leave the refactoring here to still target 3.0. However, I am going to work on a another PR for 2.1 that fixes the issues that @keith-turner identified. I think we should fix any bugs in 2.1 but the refactoring should stay with 3.0. I also am planning to go ahead and rename TabletFile to ReferencedTabletFile and create the interface I mentioned to make things more clear.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564444490/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564445851","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1564445851","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1564445851,"node_id":"IC_kwDOACaFSM5dP4yb","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T14:04:49Z","updated_at":"2023-05-26T14:04:49Z","author_association":"CONTRIBUTOR","body":"> > think this is fine but it would be nicer/more clear to rename the existing TabletFile to ReferencedTabletFile and create a TabletFile interface.\r\n> \r\n> @cshannon I like this, seems cleaner and feels like it will help improve code correctness.\r\n\r\nAs mentioned I'll go ahead and rename this in another commit as I think it makes sense.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564445851/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564447171","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1564447171","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1564447171,"node_id":"IC_kwDOACaFSM5dP5HD","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T14:05:49Z","updated_at":"2023-05-26T14:05:49Z","author_association":"CONTRIBUTOR","body":"> It had been asked if the StoredTabletFile should target 2.1 or 3. I am still inclined that 3.0 (or 3.1) is the correct destination\r\n\r\nWe may be able to use these changes to find suspicious spots in the code where we can make very minor changes in 2.1.  Do not need to make all of these changes in 2.1.  Also if we add the test mentioned earlier to 2.1 it could help ensure that the nonnomalized path in the metadata table is used for updates.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564447171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564458349","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1564458349","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1564458349,"node_id":"IC_kwDOACaFSM5dP71t","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T14:13:03Z","updated_at":"2023-05-26T14:13:03Z","author_association":"CONTRIBUTOR","body":"To be clear.  Can someone scan the metadata table and tell if they \"might\" have an issue?  Independent of code fixes, if we can see if there is the potential, we may be better able to diagnose the issue report in #3386 or at least rule it out as contributing the the errors that they have seen.  We may have fixed it, but right now we are left with not knowing other than \"we have not seen it since...\"","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564458349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564466184","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1564466184","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1564466184,"node_id":"IC_kwDOACaFSM5dP9wI","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T14:17:06Z","updated_at":"2023-05-26T14:17:06Z","author_association":"CONTRIBUTOR","body":"> To be clear. Can someone scan the metadata table and tell if they \"might\" have an issue? \r\n\r\nI suspect scanning looking for cases where  `!fileFromMetadata.equals(new Path(fileFromMetadata).toString())` is true would find paths that could be susceptible to bugs where StoredTabletFile is not properly used.  This could be caused by changes in Accumulo/Hadoop code over time or users manually editing the metadata table.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564466184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564473033","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1564473033","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1564473033,"node_id":"IC_kwDOACaFSM5dP_bJ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T14:22:10Z","updated_at":"2023-05-26T14:22:10Z","author_association":"CONTRIBUTOR","body":">> but right now we are left with not knowing other than \"we have not seen it since...\"\r\n\r\nIf anyone ever did run into this bug I doubt they would see any problems.  I think it could just silently duplicate data or silently fail to delete data that should be deleted.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564473033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564530049","html_url":"https://github.com/apache/accumulo/pull/3432#issuecomment-1564530049","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3432","id":1564530049,"node_id":"IC_kwDOACaFSM5dQNWB","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T15:03:53Z","updated_at":"2023-05-26T15:03:53Z","author_association":"CONTRIBUTOR","body":"@keith-turner - This should fix the issues you identified in the other PR. Besides the fix `MetadataTableUtil` in finishSplit(), two spots in `ManagerMetadataUtil` will now use the overloaded putFile() method that takes a StoredTabletFile and uses getMetaUpdateDeleteText().\r\n\r\nhttps://github.com/apache/accumulo/blob/969fc52f1c5e0c195a8cef800a87e0fab13cd89c/server/base/src/main/java/org/apache/accumulo/server/util/ManagerMetadataUtil.java#L97\r\nhttps://github.com/apache/accumulo/blob/969fc52f1c5e0c195a8cef800a87e0fab13cd89c/server/base/src/main/java/org/apache/accumulo/server/util/ManagerMetadataUtil.java#L205\r\n\r\nDo you think we should try and add the IT you were talking about as part of this or create a follow on?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564530049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564546336","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1564546336","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1564546336,"node_id":"IC_kwDOACaFSM5dQRUg","user":{"login":"alerman","id":119506,"node_id":"MDQ6VXNlcjExOTUwNg==","avatar_url":"https://avatars.githubusercontent.com/u/119506?v=4","gravatar_id":"","url":"https://api.github.com/users/alerman","html_url":"https://github.com/alerman","followers_url":"https://api.github.com/users/alerman/followers","following_url":"https://api.github.com/users/alerman/following{/other_user}","gists_url":"https://api.github.com/users/alerman/gists{/gist_id}","starred_url":"https://api.github.com/users/alerman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alerman/subscriptions","organizations_url":"https://api.github.com/users/alerman/orgs","repos_url":"https://api.github.com/users/alerman/repos","events_url":"https://api.github.com/users/alerman/events{/privacy}","received_events_url":"https://api.github.com/users/alerman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T15:16:12Z","updated_at":"2023-05-26T15:16:12Z","author_association":"CONTRIBUTOR","body":"The client should absolutely be chnaged to authenticate when contstructed so that the user gets denied without getting to the prompt.\r\n\r\nCan you site one example where that is not the case that would support leaving it as is? Should I be able to type a non existent username into the linux login prompt and be able to read any world readable files?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564546336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564557832","html_url":"https://github.com/apache/accumulo/pull/3432#issuecomment-1564557832","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3432","id":1564557832,"node_id":"IC_kwDOACaFSM5dQUII","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T15:25:25Z","updated_at":"2023-05-26T15:26:05Z","author_association":"CONTRIBUTOR","body":"Sunny IT tests passed and I kicked off a full IT build. \r\n\r\nAlso, I just had a thought that maybe as part of this PR (which only applies in the 2.1 branch where there is still an inheritance relationship) in `StoredTabletFile` we should actually override https://github.com/apache/accumulo/blob/969fc52f1c5e0c195a8cef800a87e0fab13cd89c/core/src/main/java/org/apache/accumulo/core/metadata/TabletFile.java#L109 and https://github.com/apache/accumulo/blob/969fc52f1c5e0c195a8cef800a87e0fab13cd89c/core/src/main/java/org/apache/accumulo/core/metadata/TabletFile.java#L109\r\n\r\nand either throw a new `UnsupportedOperationException` or return the metadataEntry (instead of the normalized path) so we prevent any errors in the future so the normalized path is never used. In #3417 this of course wouldn't be necessary anymore.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564557832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564663776","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1564663776","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1564663776,"node_id":"IC_kwDOACaFSM5dQt_g","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T16:52:31Z","updated_at":"2023-05-26T16:52:31Z","author_association":"MEMBER","body":"> The client should absolutely be chnaged to authenticate when contstructed so that the user gets denied without getting to the prompt.\r\n\r\nThat was a design mistake initially made in Connector that caused performance issues. We ended up working around it for the system user, but we changed that when implementing AccumuloClient, to avoid that problem. Having that creates weird concurrency issues also, like the client can be constructed and authenticates, but then the client stops working because the password was changed by another client instance. That can happen now, but adding the fast failure will give false confidence that the initial construction is doing something more than it is. That would also prevent valid use cases, like being able to construct a client in a client application that is scheduled to perform a task in the future... such a client should be able to be constructed while servers are offline, as long as the task they execute doesn't occur until the servers are online again.\r\n\r\nSo, I don't think we should change this behavior of AccumuloClient. The current behavior is more flexible and prevents performance issues that were previously seen.\r\n\r\nHowever, we can change the behavior in the shell, since the shell is intended to be an interactive client application, and it is strange for the shell to not authenticate right away.\r\n\r\nThis is a separate issue from the listing of tables, though. Adding in authentication to the shell initialization (or even the AccumuloClient) would not prevent an unauthenticated user from viewing the tables. They could still bypass Accumulo client code to use ZK client code to do that.\r\n\r\n> \r\n> Can you site one example where that is not the case that would support leaving it as is? Should I be able to type a non existent username into the linux login prompt and be able to read any world readable files?\r\n\r\nI don't think that's the right analogy. This is more like viewing the contents of a mounted drive. The fact that you're logging in is incidental to the viewer environment. You could mount a drive and view its contents using a password-protected computer, or a computer without a password. The issue isn't with the authentication in the viewer. It's with the exposure of the data in the drive. If you use zkCli.sh, you don't need to log in to Accumulo at all, and you can get all the same info.\r\n\r\nAs stated above, the performance issues, and the ability to pre-construct a client are the use cases for not authenticating AccumuloClient immediately. But that's a separate issue from the fact that ZK is world readable in the first place, or that the AccumuloClient implementation talks directly to ZK instead of going through an authenticated RPC endpoint to talk to an Accumulo service to get the info.\r\n\r\nSteps we can take:\r\n\r\n1. Add authentication to shell startup and any time the shell user switches to another user - can be done for 2.1.1\r\n2. Consider locking down ZK table info and having AccumuloClient get the info via an authenticated RPC (can also look at other things in ZK that are world readable) - probably too disruptive of a design change for 2.1.x.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564663776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564677147","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1564677147","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1564677147,"node_id":"IC_kwDOACaFSM5dQxQb","user":{"login":"alerman","id":119506,"node_id":"MDQ6VXNlcjExOTUwNg==","avatar_url":"https://avatars.githubusercontent.com/u/119506?v=4","gravatar_id":"","url":"https://api.github.com/users/alerman","html_url":"https://github.com/alerman","followers_url":"https://api.github.com/users/alerman/followers","following_url":"https://api.github.com/users/alerman/following{/other_user}","gists_url":"https://api.github.com/users/alerman/gists{/gist_id}","starred_url":"https://api.github.com/users/alerman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alerman/subscriptions","organizations_url":"https://api.github.com/users/alerman/orgs","repos_url":"https://api.github.com/users/alerman/repos","events_url":"https://api.github.com/users/alerman/events{/privacy}","received_events_url":"https://api.github.com/users/alerman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T17:02:37Z","updated_at":"2023-05-26T17:02:37Z","author_association":"CONTRIBUTOR","body":"Option 1. That's all I was asking for in the first place and this entire discussion could have been avoided. I just want the shell to have the same behavior it had in 1.10, and the expected behavior when passing a bogus user/pass combination to any interface.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564677147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564688595","html_url":"https://github.com/apache/accumulo/pull/3428#issuecomment-1564688595","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3428","id":1564688595,"node_id":"IC_kwDOACaFSM5dQ0DT","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T17:12:37Z","updated_at":"2023-05-26T17:12:37Z","author_association":"MEMBER","body":"@dlmarion That's a great find! If it's already pluggable in Hadoop, then we just need the flag we already have for using or not using it (but we might want to still negate the property name to \"use trash = true\" instead of \"ignore trash = false\", but the change will no longer be urgent... just for convenience). Doing this using a pluggable HDFS solution aligns exactly to [my previous comment](https://github.com/apache/accumulo/pull/3140#discussion_r1126585073) about decoupling ourselves from HDFS-specific feature management.\r\n\r\nI definitely don't want to abandon this change proposal, until we can experiment and make sure that the per-volume config with a custom trash policy works, but what you found looks promising.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564688595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564706970","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1564706970","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1564706970,"node_id":"IC_kwDOACaFSM5dQ4ia","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T17:30:13Z","updated_at":"2023-05-26T17:34:16Z","author_association":"CONTRIBUTOR","body":"What needs to be online to validate user identity?  There may be distinction between authenticating as a user versus being able to authenticate with ZooKeeper.  If the shell was modified to allow ZooKeeper operations without having a running cluster - such as set properties, ZooKeeper authentication is required - but user authentication may not be available.\r\n\r\nUsing unix ACLs to protect the configuration should stop a shell user from creating and authenticating as Accumulo to ZooKeeper.  \r\n\r\nWhile the original request seems simple, this discussion is showing that the issue should be evaluated deeper than just mimicking the previous behavior and then assuming that is offering any degree of protection.  Ask a Jeep owner with a canvas top if they lock their doors.\r\n\r\nIt may also be worthwhile to evaluate what is available to unauthenticated users on the monitor.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564706970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564708535","html_url":"https://github.com/apache/accumulo/issues/3427#issuecomment-1564708535","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3427","id":1564708535,"node_id":"IC_kwDOACaFSM5dQ463","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T17:31:48Z","updated_at":"2023-05-26T17:31:48Z","author_association":"MEMBER","body":"> Option 1. That's all I was asking for in the first place and this entire discussion could have been avoided. I just want the shell to have the same behavior it had in 1.10, and the expected behavior when passing a bogus user/pass combination to any interface.\r\n\r\nThe change in behavior you observed ended up highlighting the issue with the stuff in ZK being exposed, which might be worth revisiting. So, it's probably best that we did have the full conversation :smiley_cat:\r\n\r\nI created #3433 to do item 1 for 2.1.1, and #3434 to explore item 2 for the future.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564708535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564723775","html_url":"https://github.com/apache/accumulo/issues/3433#issuecomment-1564723775","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3433","id":1564723775,"node_id":"IC_kwDOACaFSM5dQ8o_","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T17:47:56Z","updated_at":"2023-05-26T17:48:28Z","author_association":"MEMBER","body":"To authenticate the client, it should just be a simple matter of calling `client.securityOperations().authenticate(username, token)` immediately after it is constructed. However, this is made slightly complicated by the fact that the `AccumuloClient` can be constructed using the client config file. You can call `.whoami()` to get the username, but I'm not sure if there's an easy way to get the `AuthenticationToken` parameter that `authenticate(username, token)` requires.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564723775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564728297","html_url":"https://github.com/apache/accumulo/issues/3433#issuecomment-1564728297","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3433","id":1564728297,"node_id":"IC_kwDOACaFSM5dQ9vp","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T17:52:51Z","updated_at":"2023-05-26T17:52:51Z","author_association":"MEMBER","body":"A user also reported that when the shell is idle for too long, and it asks to re-authenticate, it doesn't matter what you enter, and it will still work. That is related to this issue. It should also authenticate the client object when that happens as well as startup and switching users.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564728297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564732180","html_url":"https://github.com/apache/accumulo/issues/3433#issuecomment-1564732180","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3433","id":1564732180,"node_id":"IC_kwDOACaFSM5dQ-sU","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T17:56:08Z","updated_at":"2023-05-26T17:56:08Z","author_association":"MEMBER","body":"There's a challenge that the credentials could be in the client config file, too. So, re-authenticating by asking the user to re-enter things, doesn't necessarily make sense... they might not know the credentials if it's sourced somewhere in the environment. So, we need to make sure that the re-authentication is working correctly for those cases, as well, and we're not pointlessly prompting.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564732180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564889516","html_url":"https://github.com/apache/accumulo/pull/3415#issuecomment-1564889516","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3415","id":1564889516,"node_id":"IC_kwDOACaFSM5dRlGs","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T20:09:17Z","updated_at":"2023-05-26T20:09:17Z","author_association":"MEMBER","body":"I'm working on a test for the first mentioned TODO in #3407. I have the main things roughly in place but am not exactly sure what to test for:\r\n\r\n>  // ELASTICITY_TODO tablets used to always split into 2 tablets. Now the split operation will\r\n    // split into many. How does this impact a tablet with many files and the estimated sizes after\r\n    // split vs the old method. Need to run test where we add lots of data to a single tablet,\r\n    // change the split thresh, wait for splits, then look at the estimated sizes, then compact and\r\n    // look at the sizes after. For example if a tablet has 10M of data and the split thesh is set\r\n    // to 100K, what will the est sizes look like across the tablets after splitting and then after\r\n    // compacting?\r\n\r\n@keith-turner, it looks like you authored this comment. Do you have any suggestions for testing this, i.e. what to check for after each step in the process outlined in the comment?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564889516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564897732","html_url":"https://github.com/apache/accumulo/pull/3415#issuecomment-1564897732","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3415","id":1564897732,"node_id":"IC_kwDOACaFSM5dRnHE","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T20:15:04Z","updated_at":"2023-05-26T20:15:17Z","author_association":"CONTRIBUTOR","body":"> @keith-turner, it looks like you authored this comment. Do you have any suggestions for testing this, i.e. what to check for after each step in the process outlined in the comment?\r\n\r\nThe first thing I would try is manual experimentation.  Like create a tablet w/ 1M file, split into 100 tablets (maybe some split outside the range of the data) and look at what the estimates look like.  Then I would go from there for creating an IT. Would probably check that each estimated size falls with in some range.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1564897732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565028713","html_url":"https://github.com/apache/accumulo/pull/3435#issuecomment-1565028713","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3435","id":1565028713,"node_id":"IC_kwDOACaFSM5dSHFp","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T22:30:38Z","updated_at":"2023-05-26T22:30:38Z","author_association":"CONTRIBUTOR","body":"Hopefully the split test in the PR will run with the changes in #3432. I will try that next week.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565028713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565100173","html_url":"https://github.com/apache/accumulo/pull/3428#issuecomment-1565100173","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3428","id":1565100173,"node_id":"IC_kwDOACaFSM5dSYiN","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-27T00:22:56Z","updated_at":"2023-05-27T00:22:56Z","author_association":"CONTRIBUTOR","body":"Closing this in favor of #3436 as a solution for 2.1.1.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565100173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565101065","html_url":"https://github.com/apache/accumulo/pull/3436#issuecomment-1565101065","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3436","id":1565101065,"node_id":"IC_kwDOACaFSM5dSYwJ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-27T00:24:16Z","updated_at":"2023-05-27T00:24:16Z","author_association":"CONTRIBUTOR","body":"Kicked off full IT build","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565101065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565144211","html_url":"https://github.com/apache/accumulo/pull/3429#issuecomment-1565144211","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3429","id":1565144211,"node_id":"IC_kwDOACaFSM5dSjST","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-27T01:48:21Z","updated_at":"2023-05-27T01:48:21Z","author_association":"CONTRIBUTOR","body":"With commit ddf749e seeing a big speedup when running the BulkSplitOptimizationIT\r\n\r\n```\r\n2023-05-26T21:39:06,004 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 2 ondemand tablets to be hosted.\r\n2023-05-26T21:39:06,410 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 1 ondemand tablets to be hosted.\r\n2023-05-26T21:39:06,471 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 1 ondemand tablets to be hosted.\r\n2023-05-26T21:39:06,622 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 1 ondemand tablets to be hosted.\r\n2023-05-26T21:39:06,665 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 1 ondemand tablets to be hosted.\r\n2023-05-26T21:39:06,694 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 1 ondemand tablets to be hosted.\r\n2023-05-26T21:39:06,721 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 1 ondemand tablets to be hosted.\r\n2023-05-26T21:39:06,767 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 1 ondemand tablets to be hosted.\r\n2023-05-26T21:39:06,903 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 2 ondemand tablets to be hosted.\r\n2023-05-26T21:39:06,955 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 2 ondemand tablets to be hosted.\r\n2023-05-26T21:39:07,052 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 3 ondemand tablets to be hosted.\r\n2023-05-26T21:39:07,142 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 4 ondemand tablets to be hosted.\r\n2023-05-26T21:39:07,268 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 5 ondemand tablets to be hosted.\r\n2023-05-26T21:39:07,403 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 5 ondemand tablets to be hosted.\r\n2023-05-26T21:39:07,540 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 5 ondemand tablets to be hosted.\r\n2023-05-26T21:39:07,769 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 5 ondemand tablets to be hosted.\r\n2023-05-26T21:39:07,936 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 5 ondemand tablets to be hosted.\r\n2023-05-26T21:39:08,049 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 5 ondemand tablets to be hosted.\r\n2023-05-26T21:39:08,165 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 5 ondemand tablets to be hosted.\r\n2023-05-26T21:39:08,376 [clientImpl.ClientTabletCacheImpl] DEBUG: Requesting 3 ondemand tablets to be hosted.\r\n     100,000 records read |   36,284 records/sec |    7,900,000 bytes read | 2,866,473 bytes/sec |  2.756 secs   \r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565144211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565386720","html_url":"https://github.com/apache/accumulo/pull/3435#issuecomment-1565386720","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3435","id":1565386720,"node_id":"IC_kwDOACaFSM5dTefg","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-27T12:17:29Z","updated_at":"2023-05-27T12:17:29Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I went ahead and pulled this branch to test this. I first verified the tests currently fail (which they did). \r\n\r\nI then merged in my changes from #3432 and then I uncommented the verify ingest call in testSplits() and everything passes now and the tablet server no longer dies.\r\n\r\n```\r\n[INFO] -------------------------------------------------------\r\n[INFO]  T E S T S\r\n[INFO] -------------------------------------------------------\r\n[INFO] Running org.apache.accumulo.test.functional.FileNormalizationIT\r\n[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 30.833 s - in org.apache.accumulo.test.functional.FileNormalizationIT\r\n[INFO] \r\n[INFO] Results:\r\n[INFO] \r\n[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565386720/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565390101","html_url":"https://github.com/apache/accumulo/pull/3432#issuecomment-1565390101","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3432","id":1565390101,"node_id":"IC_kwDOACaFSM5dTfUV","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-27T12:21:01Z","updated_at":"2023-05-27T12:21:01Z","author_association":"CONTRIBUTOR","body":"Full IT passed. As commented on #3435, this PR fixes the test there.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565390101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565395333","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1565395333","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1565395333,"node_id":"IC_kwDOACaFSM5dTgmF","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-27T12:40:34Z","updated_at":"2023-05-27T12:40:34Z","author_association":"CONTRIBUTOR","body":"> > > think this is fine but it would be nicer/more clear to rename the existing TabletFile to ReferencedTabletFile and create a TabletFile interface.\r\n> > \r\n> > \r\n> > @cshannon I like this, seems cleaner and feels like it will help improve code correctness.\r\n> \r\n> As mentioned I'll go ahead and rename this in another commit as I think it makes sense.\r\n\r\nBy the way, I meant another PR, not commit. (I just noticed I said commit). I played around with renaming and it changes a ton of files (no surprise). So in order to keep the scope of the changes here easier to see and not pollute the PR, it would be better to do the renaming as a follow on PR once this is merged.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565395333/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565595325","html_url":"https://github.com/apache/accumulo/pull/3429#issuecomment-1565595325","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3429","id":1565595325,"node_id":"IC_kwDOACaFSM5dURa9","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-27T16:58:25Z","updated_at":"2023-05-27T16:58:25Z","author_association":"CONTRIBUTOR","body":"In #3437 processing of tablet hosting request was moved from the tserver to the manager. For #3437 a subset of the changes in this PR were taken and improved.  This PR still has client side changes that try to keep the next few tablets for a scan hosted.\r\n\r\nWith only the changes in #3437 that scan in BulkSplitOptimizationIT takes 17 seconds, which makes a hosting request for each of the ~50 tablets being scanned and waits.  The changes in the PR which have the changes in #3437 plus the changes to try to keep the next few tablets hosted only takes 2.7 seconds for the same scan of ~50 tablets.  So still need to continue experimenting with the changes in this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565595325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565652345","html_url":"https://github.com/apache/accumulo/issues/3284#issuecomment-1565652345","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3284","id":1565652345,"node_id":"IC_kwDOACaFSM5dUfV5","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-27T18:58:00Z","updated_at":"2023-05-27T18:58:00Z","author_association":"CONTRIBUTOR","body":"Completed in #3317","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565652345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565652430","html_url":"https://github.com/apache/accumulo/issues/3209#issuecomment-1565652430","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3209","id":1565652430,"node_id":"IC_kwDOACaFSM5dUfXO","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-27T18:58:31Z","updated_at":"2023-05-27T18:58:31Z","author_association":"CONTRIBUTOR","body":"Completed in #3251 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565652430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565652930","html_url":"https://github.com/apache/accumulo/issues/3337#issuecomment-1565652930","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3337","id":1565652930,"node_id":"IC_kwDOACaFSM5dUffC","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-27T19:00:10Z","updated_at":"2023-05-27T19:00:10Z","author_association":"CONTRIBUTOR","body":"The basics of this were done in #3350 and more specific follow on issue were opened after #3350.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565652930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565653090","html_url":"https://github.com/apache/accumulo/issues/3387#issuecomment-1565653090","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3387","id":1565653090,"node_id":"IC_kwDOACaFSM5dUfhi","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-27T19:01:07Z","updated_at":"2023-05-27T19:01:07Z","author_association":"CONTRIBUTOR","body":"The basics of this were done in #3382 and #3425 and follow on issues were opened.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1565653090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1566204189","html_url":"https://github.com/apache/accumulo/pull/3417#issuecomment-1566204189","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3417","id":1566204189,"node_id":"IC_kwDOACaFSM5dWmEd","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-28T17:17:11Z","updated_at":"2023-05-28T19:44:58Z","author_association":"CONTRIBUTOR","body":"As I was looking at the next round of changes after this PR to start storing a range as part of the metadata I noticed that the getPathStr() method returns the normalized path. I decided to rename this to `getNormalizedPath()` in a new commit so it is more clear what is actually being returned. The main reason I did this is the original path that is given to construct a TabletFile is stored and can be accessed with `getPath()`. So calling getPathStr() is a bit confusing as I would have expected this to return the original string given and not the normalized version. Returning the normalized version looks to be fine/correct (it's used in a lot of places, even by StoredTabletFile) for reading/writing but this just makes what is being used clearer in the code when reading it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1566204189/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1566244211","html_url":"https://github.com/apache/accumulo/pull/3418#issuecomment-1566244211","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3418","id":1566244211,"node_id":"IC_kwDOACaFSM5dWv1z","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-28T19:52:57Z","updated_at":"2023-05-28T19:52:57Z","author_association":"CONTRIBUTOR","body":"I started work today in another branch on updates to store metadata with a range. It's not done and not everything is finished yet (like garbage collection code needs fixing) so a lot of tests don't run but here is the current commit where i left off: https://github.com/apache/accumulo/commit/d936ee7fb9c8e38d5441efd512818492ec558503 That branch is based off of this PR and also has the changes merged in from #3417 and #3432 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1566244211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568253410","html_url":"https://github.com/apache/accumulo/pull/3436#issuecomment-1568253410","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3436","id":1568253410,"node_id":"IC_kwDOACaFSM5deaXi","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T11:18:00Z","updated_at":"2023-05-30T11:18:00Z","author_association":"CONTRIBUTOR","body":"Full IT build successful","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568253410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568471215","html_url":"https://github.com/apache/accumulo/issues/3368#issuecomment-1568471215","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3368","id":1568471215,"node_id":"IC_kwDOACaFSM5dfPiv","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T13:49:44Z","updated_at":"2023-05-30T13:49:44Z","author_association":"CONTRIBUTOR","body":"We appear to be able to reproduce this fairly easily on one of our test systems.  Reopening and will add details.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568471215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568609819","html_url":"https://github.com/apache/accumulo/pull/3415#issuecomment-1568609819","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3415","id":1568609819,"node_id":"IC_kwDOACaFSM5dfxYb","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T15:07:37Z","updated_at":"2023-05-30T15:07:37Z","author_association":"MEMBER","body":"Originally I was planning to address both of the cases outlined in #3415 but since one is already done and I don't have a clear path for the second one yet, I'll just merge this in.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568609819/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568745534","html_url":"https://github.com/apache/accumulo/issues/3368#issuecomment-1568745534","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3368","id":1568745534,"node_id":"IC_kwDOACaFSM5dgSg-","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T16:38:48Z","updated_at":"2023-05-30T16:38:48Z","author_association":"CONTRIBUTOR","body":"Can you confirm that the same host name / fqdn is used consistently in all places?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568745534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568757135","html_url":"https://github.com/apache/accumulo/pull/3435#issuecomment-1568757135","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3435","id":1568757135,"node_id":"IC_kwDOACaFSM5dgVWP","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T16:48:24Z","updated_at":"2023-05-30T16:48:24Z","author_association":"MEMBER","body":"`testSplits()` still fails when I run it. I get the following output:\r\n\r\n```\r\n2023-05-30T12:44:05,712 [functional.FileNormalizationIT] DEBUG: split test, inspecting 3;row_0000050000 file:/home/dgarguilo/github/accumulo/test/target/mini-tests/org.apache.accumulo.test.functional.FileNormalizationIT_SharedMiniClusterBase/accumulo/tables/3/default_tablet/F000000l.rf 165553,33515\r\n2023-05-30T12:44:05,712 [functional.FileNormalizationIT] DEBUG: split test, inspecting 3;row_0000050000 file:/home/dgarguilo/github/accumulo/test/target/mini-tests/org.apache.accumulo.test.functional.FileNormalizationIT_SharedMiniClusterBase/accumulo/tables/3/default_tablet/F000000m.rf 101624,20519\r\n2023-05-30T12:44:05,712 [functional.FileNormalizationIT] DEBUG: split test, inspecting 3< file:/home/dgarguilo/github/accumulo/test/target/mini-tests/org.apache.accumulo.test.functional.FileNormalizationIT_SharedMiniClusterBase/accumulo//tables//3/default_tablet/F000000m.rf 203663,41122\r\n2023-05-30T12:44:05,712 [functional.FileNormalizationIT] DEBUG: split test, inspecting 3< file:/home/dgarguilo/github/accumulo/test/target/mini-tests/org.apache.accumulo.test.functional.FileNormalizationIT_SharedMiniClusterBase/accumulo//tables//3/default_tablet/F000000r.rf 125776,25363\r\n2023-05-30T12:44:05,712 [functional.FileNormalizationIT] DEBUG: split test, inspecting 3< file:/home/dgarguilo/github/accumulo/test/target/mini-tests/org.apache.accumulo.test.functional.FileNormalizationIT_SharedMiniClusterBase/accumulo/tables/3/default_tablet/F000000m.rf 102039,20603\r\n\r\norg.opentest4j.AssertionFailedError: Tablet 3< has duplicate normalized path file:/home/dgarguilo/github/accumulo/test/target/mini-tests/org.apache.accumulo.test.functional.FileNormalizationIT_SharedMiniClusterBase/accumulo/tables/3/default_tablet/F000000m.rf ==> \r\nExpected :false\r\nActual   :true\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568757135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568796695","html_url":"https://github.com/apache/accumulo/pull/3435#issuecomment-1568796695","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3435","id":1568796695,"node_id":"IC_kwDOACaFSM5dgfAX","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T17:20:13Z","updated_at":"2023-05-30T17:20:57Z","author_association":"CONTRIBUTOR","body":"> testSplits() still fails when I run it. I get the following output:\r\n\r\nAre you running it with the fixes from #3432?  I have not tried those yet.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568796695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568814875","html_url":"https://github.com/apache/accumulo/pull/3435#issuecomment-1568814875","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3435","id":1568814875,"node_id":"IC_kwDOACaFSM5dgjcb","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T17:33:16Z","updated_at":"2023-05-30T17:33:16Z","author_association":"MEMBER","body":"> > testSplits() still fails when I run it. I get the following output:\r\n> \r\n> Are you running it with the fixes from #3432? I have not tried those yet.\r\n\r\nI just tried merging that branch into this one. Re-running the tests after that yields the same results","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568814875/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568820073","html_url":"https://github.com/apache/accumulo/issues/3368#issuecomment-1568820073","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3368","id":1568820073,"node_id":"IC_kwDOACaFSM5dgktp","user":{"login":"dtspence","id":33552925,"node_id":"MDQ6VXNlcjMzNTUyOTI1","avatar_url":"https://avatars.githubusercontent.com/u/33552925?v=4","gravatar_id":"","url":"https://api.github.com/users/dtspence","html_url":"https://github.com/dtspence","followers_url":"https://api.github.com/users/dtspence/followers","following_url":"https://api.github.com/users/dtspence/following{/other_user}","gists_url":"https://api.github.com/users/dtspence/gists{/gist_id}","starred_url":"https://api.github.com/users/dtspence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtspence/subscriptions","organizations_url":"https://api.github.com/users/dtspence/orgs","repos_url":"https://api.github.com/users/dtspence/repos","events_url":"https://api.github.com/users/dtspence/events{/privacy}","received_events_url":"https://api.github.com/users/dtspence/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T17:38:03Z","updated_at":"2023-05-31T15:38:08Z","author_association":"CONTRIBUTOR","body":"@EdColeman Yes, we will check.\r\n\r\nEDIT: The nodes are using a short-hostname. There is evidence in the cluster that FQDN hostnames have been used on t-servers in the past two weeks - however, all currently are using the short hostnames.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568820073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568834251","html_url":"https://github.com/apache/accumulo/pull/3435#issuecomment-1568834251","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3435","id":1568834251,"node_id":"IC_kwDOACaFSM5dgoLL","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T17:48:58Z","updated_at":"2023-05-30T17:52:26Z","author_association":"CONTRIBUTOR","body":"I tired locally merging the changes from #3432 and running testSplits() and it passed.  I tried running w/ and w/o the VerifyIngest call commented out.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568834251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568854630","html_url":"https://github.com/apache/accumulo/issues/3368#issuecomment-1568854630","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3368","id":1568854630,"node_id":"IC_kwDOACaFSM5dgtJm","user":{"login":"dtspence","id":33552925,"node_id":"MDQ6VXNlcjMzNTUyOTI1","avatar_url":"https://avatars.githubusercontent.com/u/33552925?v=4","gravatar_id":"","url":"https://api.github.com/users/dtspence","html_url":"https://github.com/dtspence","followers_url":"https://api.github.com/users/dtspence/followers","following_url":"https://api.github.com/users/dtspence/following{/other_user}","gists_url":"https://api.github.com/users/dtspence/gists{/gist_id}","starred_url":"https://api.github.com/users/dtspence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtspence/subscriptions","organizations_url":"https://api.github.com/users/dtspence/orgs","repos_url":"https://api.github.com/users/dtspence/repos","events_url":"https://api.github.com/users/dtspence/events{/privacy}","received_events_url":"https://api.github.com/users/dtspence/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T18:04:38Z","updated_at":"2023-05-30T18:04:38Z","author_association":"CONTRIBUTOR","body":"When attempting to stop a single t-server (i.e. `bin/accumulo-cluster stop-here`) on a test system (Cluster-1) the command-line stop hung and the t-server continued to receive assignments. The monitor showed the t-server assignment number cycle up/down. From the logs, the manager appeared to assign tablets back to the t-server being stopped. We attempted to reproduce the issue on a second test cluster (Cluster-2) and the t-server shutdown as expected. However, we were not sure if the assignment (Cluster-2) which occurs after the t-server shutdown is expected or un-expected (expanded below).\r\n\r\nFor the purposes of below, Cluster-1 will be describing the t-servers with the shutdown issue and Cluster-2 will be the other cluster.\r\n\r\nWe currently have noticed two configuration differences between systems:\r\n- Cluster-1 = Accumulo metadata and root tablets are spread on system experiencing the t-server shutdown hangs. The tablet.suspend.duration=0s.\r\n- Cluster-2 = Accumulo metadata and root tablets are pinned to specific hosts. The tablet.suspend.duration=300s.\r\n\r\nThe following was observed on Cluster-1 (t-server hanging during shutdown):\r\n```\r\n- Seeding FATE[...] Shutdown tserver <shutdown-host:port> [...]\r\n- Tablet Server shutdown requested for <shutdown-host:pot> [...]\r\n- tablet <tid;begin;end> was unloaded from <shutdown-host:port> [...]\r\n- tablet ... was unloaded on <shutdown-host:port> [...]\r\n- tablet ... was unloaded on <shutdown-host:port> [...]\r\n- tablet ... was unloaded on <shutdown-host:port> [...]\r\n- ...\r\n- Sending 1 tablets to balancer for table accumulo.metadata for assignment within t-servers [..., <shutdown-host:port>, ...]\r\n- Assigning 1 tablets\r\n- Assigned !0,~del... to <shutdown-host:port> [....]\r\n- tablet ... was unloaded on <shutdown-host:port> [...]\r\n- tablet ... was unloaded on <shutdown-host:port> [...]\r\n- tablet ... was unloaded on <shutdown-host:port> [...]\r\n- tablet <!0,~del> was loaded on <shutdown-host:port> [...]\r\n- tablet ... was unloaded on <shutdown-host:port> [...]\r\n- Sending 14 tablets to balancer for table <application-table> for assignment within t-servers [..., <shutdown-host:port>, ...]\r\n- ...\r\n- Assigning XXXX tablets\r\n- ...\r\n```\r\n\r\nThe Cluster-2 logs reflect the following:\r\n```\r\n- tablet ... was unloaded on <shutdown-host:port> [...]\r\n- ...\r\n- tablet ... was unloaded on <shutdown-host:port> [...]\r\n- tablet server hosts no tablets <shutdown-host:port> [...]\r\n- unable to get tablet server status <shutdown-host:port> [...]\r\n- IOException: No connection to <shutdown-host:port> [...]\r\n- not balancing because the balance information is out of date\r\n- not balancing just yet, as collection of live tservers is in flux\r\n- Sending X tablets to balancer for table <user-table> for assignment within t-servers  [..., <shutdown-host:port>, ...]\r\n- Assigned <user-tablet-1> to  <shutdown-host:port>\r\n- ...\r\n- Assigned <user-tablet-n> to  <shutdown-host:port> [...]\r\n- Could not connect to server <shutdown-host:port> [...]\r\n- ....\r\n- Could not connect to server <shutdown-host:port> [...]\r\n- [Normal Tablets]: 10237 tablets are SUSPENDED\r\n- Detected change in current tserver set, re-running state machine.\r\n- not balancing because there are unhosted tablets: 10237\r\n- 9597 assigned to dead servers [<user-tablet-1@(Location [server=<shutdown-host:port>, type=FUTURE],null,Location[server=<shutdown-host:port>,type=LAST]),.....\r\n- Suspended <user-tablet-1> to <shutdown-host:port> at <> with 1 walogs\r\n- Sending X tablets to balancer for <user-table> for assignment within tservers [...]\t\r\n- balancer assigned <user-tablet-> to <host-a:port> which is not the suggested location of <shutdown-host:port>\r\n```\r\n\r\nThe Cluster-2 logs above show the t-server shutdown after the tablet unload. However, we were not sure if the assignment after the unload is expected or un-expected (and would be similar to Cluster-1). The assigned tablets are sent to the shutdown t-server (and the list of candidate t-servers contains the shutdown t-server). The manager observes the server is unreachable and after tablet suspension, the candidate t-server in the next assignment list no longer includes the shutdown t-server. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568854630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568965300","html_url":"https://github.com/apache/accumulo/pull/3405#issuecomment-1568965300","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3405","id":1568965300,"node_id":"IC_kwDOACaFSM5dhIK0","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T19:26:21Z","updated_at":"2023-05-30T19:26:21Z","author_association":"MEMBER","body":"While fixing some of these, I noticed a typo in `TConstraintViolationSummary` with member variable \"constrainClass\" which should be \"constraintClass\". Not sure that this is the best place to fix it but I wanted to make a note of it somewhere so I don't forget.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1568965300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]