[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2040157051","html_url":"https://github.com/apache/accumulo/pull/4415#issuecomment-2040157051","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4415","id":2040157051,"node_id":"IC_kwDOACaFSM55mlN7","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-05T15:55:42Z","updated_at":"2024-04-05T15:55:42Z","author_association":"CONTRIBUTOR","body":"The latest update [demonstrates](https://github.com/apache/accumulo/blob/e0fe9e49b9bc00f101afa6a7fa302f792d53b55b/test/src/main/java/org/apache/accumulo/test/ample/TestAmpleIT.java#L203) using the new test API that the fate unspittable marker is written for an unsplittlable tablet. It essentially replicates parts of the test in [LargeSplitRowIT](https://github.com/apache/accumulo/blob/eea8ce48e2d5d7bd5c6b69e05c6824f697d8de0a/test/src/main/java/org/apache/accumulo/test/LargeSplitRowIT.java#L262) that runs with the real metadata table. \r\n\r\nOne really nice side effect of this that I didn't think about is that you can use break points. Normally when testing with ITs the FATE code is running in the Manager JVM so you would need to open up a remote debug port to use break points. With this change the test repo code is running in the unit test JVM so you can easily step through with break points the code which makes debugging a lot easier.\r\n\r\nI think we need both types of tests going forward but certainly having this new API will be nice to test things that are not easy with a normal IT.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2040157051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2040176596","html_url":"https://github.com/apache/accumulo/pull/4432#issuecomment-2040176596","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4432","id":2040176596,"node_id":"IC_kwDOACaFSM55mp_U","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-05T16:05:07Z","updated_at":"2024-04-05T16:05:07Z","author_association":"CONTRIBUTOR","body":"> Have you noticed any improvements in speed for any of the ITs with this change? I know the previous change sped up tests quite a bit and I am wondering if this is as noticeable\r\n\r\nFor this PR I ran verify sunny locally and that took 11 mins.  Seems like it used to take around 12 to 13 mins to run that, but I am not really sure about that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2040176596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2040209598","html_url":"https://github.com/apache/accumulo/issues/4426#issuecomment-2040209598","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4426","id":2040209598,"node_id":"IC_kwDOACaFSM55myC-","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-05T16:23:34Z","updated_at":"2024-04-05T16:23:34Z","author_association":"CONTRIBUTOR","body":"> A version of Accumulo should support one version of cluster.yaml. If it's not correct, then the software should fail and the user should have to fix it.\r\n\r\nThat makes sense.  If a minor version of accumulo l(ike 2.1.X) only supports a single schema then a version number is not very useful.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2040209598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2041152272","html_url":"https://github.com/apache/accumulo/pull/4437#issuecomment-2041152272","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4437","id":2041152272,"node_id":"IC_kwDOACaFSM55qYMQ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-06T18:00:48Z","updated_at":"2024-04-06T18:00:48Z","author_association":"CONTRIBUTOR","body":"The Sunny ITs all passed, I went ahead and also started a full IT build to make sure nothing breaks.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2041152272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2041161914","html_url":"https://github.com/apache/accumulo/pull/4437#issuecomment-2041161914","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4437","id":2041161914,"node_id":"IC_kwDOACaFSM55qai6","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-06T18:32:29Z","updated_at":"2024-04-06T18:32:29Z","author_association":"CONTRIBUTOR","body":"> A nice follow on issue would be new tablet metadata unit test that check the following for each method that returns a collection or map.\r\n> \r\n> * Verify its immutable by trying to add something\r\n> * When empty verify an empty collection or map is returned and not null.\r\n\r\nI can probably add a new test real quick to this before merging.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2041161914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2041164989","html_url":"https://github.com/apache/accumulo/pull/4437#issuecomment-2041164989","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4437","id":2041164989,"node_id":"IC_kwDOACaFSM55qbS9","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-06T18:46:15Z","updated_at":"2024-04-06T18:46:15Z","author_association":"CONTRIBUTOR","body":"I went ahead and applied just the fix for getTabletState() to 2.1 in https://github.com/apache/accumulo/pull/4438","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2041164989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2041175403","html_url":"https://github.com/apache/accumulo/pull/4438#issuecomment-2041175403","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4438","id":2041175403,"node_id":"IC_kwDOACaFSM55qd1r","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-06T19:35:33Z","updated_at":"2024-04-06T19:35:33Z","author_association":"CONTRIBUTOR","body":"This only applies to 2.1 and main, the issue was refactored away already in elasticity","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2041175403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2041176682","html_url":"https://github.com/apache/accumulo/pull/4437#issuecomment-2041176682","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4437","id":2041176682,"node_id":"IC_kwDOACaFSM55qeJq","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-06T19:41:47Z","updated_at":"2024-04-06T19:41:47Z","author_association":"CONTRIBUTOR","body":"I am going to go ahead and just merge this into main and let the build run so I can work on the elasticity conflicts","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2041176682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2043033672","html_url":"https://github.com/apache/accumulo/pull/4403#issuecomment-2043033672","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4403","id":2043033672,"node_id":"IC_kwDOACaFSM55xjhI","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-08T15:17:58Z","updated_at":"2024-04-08T15:17:58Z","author_association":"CONTRIBUTOR","body":"I believe this is complete, just waiting on some changes from @ddanielr that have to do with the compaction configuration changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2043033672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2045989576","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2045989576","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2045989576,"node_id":"IC_kwDOACaFSM5581LI","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-09T20:23:29Z","updated_at":"2024-04-09T20:25:11Z","author_association":"CONTRIBUTOR","body":"BigRootTabletIT is still failing. From what I can determine, the TabletManagementIterator is just returning metadata for the first tablet after the split over and over again until the test times out.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2045989576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2048671066","html_url":"https://github.com/apache/accumulo/pull/4447#issuecomment-2048671066","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4447","id":2048671066,"node_id":"IC_kwDOACaFSM56HD1a","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T00:47:43Z","updated_at":"2024-04-11T00:47:43Z","author_association":"CONTRIBUTOR","body":"Multiple log recovery test were failing in the build, this change should fix them.  Ran a subset of the failing ones and they passed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2048671066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2050178866","html_url":"https://github.com/apache/accumulo/pull/4450#issuecomment-2050178866","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4450","id":2050178866,"node_id":"IC_kwDOACaFSM56Mz8y","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T17:34:11Z","updated_at":"2024-04-11T17:34:11Z","author_association":"CONTRIBUTOR","body":"Opened this PR as a first step for resolving [this TODO](https://github.com/apache/accumulo/blob/4e8440a0ccb449edc26dadfae6f2c01bf977627e/server/base/src/main/java/org/apache/accumulo/server/split/SplitUtils.java#L206) in elasticity.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2050178866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051604841","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2051604841","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2051604841,"node_id":"IC_kwDOACaFSM56SQFp","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T11:46:41Z","updated_at":"2024-04-12T11:46:41Z","author_association":"CONTRIBUTOR","body":"> BigRootTabletIT is still failing. From what I can determine, the TabletManagementIterator is just returning metadata for the first tablet after the split over and over again until the test times out.\r\n\r\nThe test failure with `BigRootTabletIT` doesn't appear to be anything to do with this PR and I think should be opened up as a separate issue. There is a definitely a change of behavior here that needs to be looked, but it seems related more to the overall changes to Elasticity than anything here. With the current setting it's just getting stuck in a loop because it's reporting too high memory usage as I mentioned in [this](https://github.com/apache/accumulo/pull/4421#issuecomment-2027789505) comment. My assumption is it's simply because of the extra data now with the new column\r\n\r\nFor reference, I compared the modified test here against other branches and different settings to see when it would get stuck on the `waitForBalance()` call. The results were that Elasticity also just hangs in the same way if you drop memory a little bit but Main always seems to work. The test passes with this PR if you bump `TABLE_SCAN_MAXMEM` a little to 1152.\r\n\r\n| Branch    | Max Mem | Result |\r\n| -------- | ------- | ------- |\r\n| Main  | 1024 | Pass |\r\n| Main | 992| Pass |\r\n| Main | 128| Pass |\r\n| Elasticity | 992 | Fail |\r\n| Elasticity  | 1024 | Pass |\r\n| PR 4421  | 1024 | Fail |\r\n| PR 4421 | 1088 | Fail |\r\n| PR 4421 | 1152 | Pass |\r\n\r\n\r\n\r\n\r\n\r\n ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051604841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051702800","html_url":"https://github.com/apache/accumulo/issues/3908#issuecomment-2051702800","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3908","id":2051702800,"node_id":"IC_kwDOACaFSM56SoAQ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T12:50:59Z","updated_at":"2024-04-12T12:50:59Z","author_association":"CONTRIBUTOR","body":"I need to revisit this more but this issue may be a good candidate to use the new test API coming in #4415 . The new test API could be used to easily insert some fake WAL entries and then the merge and delete repos could be tested. This could also likely just be tested with a normal IT but should be a lot easier with the test API as we can specifically test just those FATE repos and the logic we care about. I still need to look more at TabletManagementIteratorIT to see about testing that, that could be split out into a follow on if we needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051702800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051872396","html_url":"https://github.com/apache/accumulo/pull/4453#issuecomment-2051872396","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4453","id":2051872396,"node_id":"IC_kwDOACaFSM56TRaM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T14:29:46Z","updated_at":"2024-04-12T14:29:46Z","author_association":"CONTRIBUTOR","body":"I'm curious if we should ignore this property for all tables in the accumulo namespace for proper function of the system.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051872396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051876083","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2051876083","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2051876083,"node_id":"IC_kwDOACaFSM56TSTz","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T14:31:37Z","updated_at":"2024-04-12T14:31:37Z","author_association":"CONTRIBUTOR","body":"@cshannon - Thanks for this information. I submitted #4453 that fixes BigRootTabletIT in elasticity. Seems like always adding `srv:lock` pushes the root tablet over the threshold in this branch. I think that it also means that the root tablet in the elasticity branch is less than `1024` bytes, meaning the test isn't really testing the condition.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051876083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051876178","html_url":"https://github.com/apache/accumulo/pull/4452#issuecomment-2051876178","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4452","id":2051876178,"node_id":"IC_kwDOACaFSM56TSVS","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T14:31:41Z","updated_at":"2024-04-12T14:32:18Z","author_association":"CONTRIBUTOR","body":"@kevinrr888 when I wrote #4422 I had confirmed that the progress counts in the compaction-coordinator log files were also incorrect values which matched the monitor output because I wasn't sure if it was just a monitor specific display problem. \r\n\r\nSo if the log files report the correct progress I wouldn't worry about the monitor output.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051876178/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051894862","html_url":"https://github.com/apache/accumulo/issues/4131#issuecomment-2051894862","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4131","id":2051894862,"node_id":"IC_kwDOACaFSM56TW5O","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T14:42:05Z","updated_at":"2024-04-12T14:42:05Z","author_association":"MEMBER","body":"I can work on this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051894862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051929396","html_url":"https://github.com/apache/accumulo/issues/4454#issuecomment-2051929396","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4454","id":2051929396,"node_id":"IC_kwDOACaFSM56TfU0","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T14:59:33Z","updated_at":"2024-04-12T14:59:33Z","author_association":"CONTRIBUTOR","body":"There is some background from the 2.1 implementation that would be helpful in understanding this.  I plan to add a comment w/ that information.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051929396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051936599","html_url":"https://github.com/apache/accumulo/pull/4415#issuecomment-2051936599","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4415","id":2051936599,"node_id":"IC_kwDOACaFSM56ThFX","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T15:02:58Z","updated_at":"2024-04-12T15:02:58Z","author_association":"CONTRIBUTOR","body":"The latest [commit](https://github.com/apache/accumulo/pull/4415/commits/6180ec183e54c543b00e101a5f496a10bf7b6640) includes a test for #3908, this could be broken out but thought it was a nice demonstration of the API to add it as part of this PR","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051936599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051984089","html_url":"https://github.com/apache/accumulo/issues/4454#issuecomment-2051984089","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4454","id":2051984089,"node_id":"IC_kwDOACaFSM56TsrZ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T15:29:49Z","updated_at":"2024-04-12T15:30:17Z","author_association":"CONTRIBUTOR","body":"In 2.1 and forward user compactions reserve a set of files per tablet and then create one or more jobs to compact these reserved files.  The reserved files are not available for system compactions.  It is possible that the scenario happens.\r\n\r\n 1. Tablet A has many files that are currently candidates for system compaction to reduce the tablets file count\r\n 2. A user compaction is started that includes Tablet A and its files are reserved.\r\n 3. Once the files are reserved for Tablet A a compaction job CJ1 is queued to process some subset of the files\r\n 4. CJ1 sits in a queue for hours and does not run.\r\n 5. System compaction are prevented from running during the time the files are reserved.\r\n\r\nThe property referenced in this ticket deals with the above situation by allowing the system compaction to cancel the reservation if nothing has happened for a while.   Then user compaction will eventually acquire a new reservation on the files after this happens.\r\n\r\nThe way the reservation cancellation works it can only happen when zero jobs have run against a tablet for a user compaction. Once a single job has run, the reservation can not be canceled.  This is done to avoid wasting work.  Canceling the reservation when zero jobs have run waste no work.\r\n\r\nIn elasticity there is currently nothing in place for system compactions to cancel a user compaction reservation.  In elasticity there is a new selected files column that holds the per tablet reserved files.  This selected files column is created by the Fate operation that drives user compactions.  The tablet group watcher sees it and creates compaction jobs based on it.  The coordinator modifies it using conditional mutations as compaction jobs run.\r\n\r\nWe could possibly do something like the following in elasticity.\r\n\r\n 1. Add a new field to the selected files column with a count of the number of jobs that have completed.  This would be updated by the coordinator when commits compactions using conditional mutations.\r\n 2. When the above count is zero the tablet group watcher could queue system and user compactions jobs.  When the count is >0 only user compaction jobs could be scheduled.\r\n 3. When the selected files column exists, the compaction coordinator will only allow system compaction jobs to start when the count is zero.  If a system compaction does start it will remove the selected files column, forcing the fate op to recreate it when the system compaction is done.\r\n\r\nHowever I am not sure how to handle time in the above situation.  The above is conceptually what 2.1 does, but its implemented ina completely different way using conditional mutations vs in memory data structs in a tablet server.   Maybe we could drop the notion of a timeout and always let system compactions run.  The reason the timeout was added was to prevent system compactions from starving user compactions in the case were a tablet always has new small files arriving.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2051984089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052229920","html_url":"https://github.com/apache/accumulo/issues/4456#issuecomment-2052229920","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4456","id":2052229920,"node_id":"IC_kwDOACaFSM56Uosg","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T18:04:15Z","updated_at":"2024-04-12T18:04:15Z","author_association":"CONTRIBUTOR","body":"@sparkyy34 discovered this bug if there are any more questions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052229920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052251333","html_url":"https://github.com/apache/accumulo/issues/4455#issuecomment-2052251333","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4455","id":2052251333,"node_id":"IC_kwDOACaFSM56Ut7F","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T18:21:07Z","updated_at":"2024-04-12T18:21:40Z","author_association":"CONTRIBUTOR","body":"I would be cautious with a change like this without some benchmarking/testing and probably a way to configure or turn it off.\r\n\r\nFsync operations are generally slow and can easily impact IO performance. Some systems like Kafka don't recommend using it and instead relying on replication for durability. Kafka gets its performance from using page cache and letting the OS flush to disk async and the durability comes from the fact that producers will get acks from more than one system that a message was received. Kafka (and also ActiveMQ) support setting a flush interval so you can flush periodically on a timer to tune how much you are syncing.\r\n\r\nHadoop is obviously a bit different and I'm not sure what durability guarantees it provides with data replication without calling hsync but it is worth looking into to see if this is necessary. I ultimately think we need to research this and see if it's really a good idea or providing enough benefit before we start calling hsync(). It may be the case that performance is fine if only calling it once per file but it's hard to say without testing. And lastly, as I said, it would be good to make this configurable to be disabled I think","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052251333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052254364","html_url":"https://github.com/apache/accumulo/pull/4453#issuecomment-2052254364","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4453","id":2052254364,"node_id":"IC_kwDOACaFSM56Uuqc","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T18:23:21Z","updated_at":"2024-04-12T18:23:21Z","author_association":"CONTRIBUTOR","body":">We could also improve the logging around the memory check to make the issue more obvious but just not letting it easily happen in the first place makes sense to me.\r\n> But if a user specifically tries to set a lower value on a system table like metadata then maybe we should throw an exception and prevent that config change as it would just be ignored anyways.\r\n\r\nI'm wondering if instead of changing the code to throw an exception, we just document the behavior change in Property.java. Something like `Values lower than the default value are ignored for system tables.`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052254364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052264009","html_url":"https://github.com/apache/accumulo/pull/4453#issuecomment-2052264009","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4453","id":2052264009,"node_id":"IC_kwDOACaFSM56UxBJ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T18:30:36Z","updated_at":"2024-04-12T18:30:36Z","author_association":"CONTRIBUTOR","body":"> I'm wondering if instead of changing the code to throw an exception, we just document the behavior change in Property.java. Something like `Values lower than the default value are ignored for system tables.`\r\n\r\nThat's probably fine too if it is documented so that users are at least aware it will be ignored and it isn't unexpected. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052264009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052289327","html_url":"https://github.com/apache/accumulo/issues/4455#issuecomment-2052289327","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4455","id":2052289327,"node_id":"IC_kwDOACaFSM56U3Mv","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T18:43:24Z","updated_at":"2024-04-12T18:43:24Z","author_association":"CONTRIBUTOR","body":"> some benchmarking/testing and probably a way to configure or turn it off.\r\n\r\nWe could consider using the metadata table write ahead log sync settings to control this.  For example if the metadata table is configured to use hsync on its wal updates, then could use hsync on the files being added in that case.  That would look like the following.\r\n\r\n 1. Metadata table has hsync set for wal updates\r\n 2. File A is created for compaction\r\n 3. hsync() is called on File A because it set on metadata table\r\n 4. File A is closed\r\n 5. reference to File A is written to metadata table and that mutation is written to walog\r\n 6. hsync() is called on walog\r\n\r\nIn the above the file has the same durability guarantee as the reference to the file.  If hsync is not called when adding the file reference we could omit calling it when closing the file, like the following.\r\n\r\n 1. Metadata table does not have hsync set for wal updates\r\n 2. File A is created for compaction\r\n 4. File A is closed\r\n 5. reference to File A is written to metadata table and that mutation is written to walog\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052289327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052615447","html_url":"https://github.com/apache/accumulo/issues/4454#issuecomment-2052615447","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4454","id":2052615447,"node_id":"IC_kwDOACaFSM56WG0X","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T22:00:17Z","updated_at":"2024-04-12T22:00:17Z","author_association":"CONTRIBUTOR","body":"I can start taking a look at this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052615447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052642718","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2052642718","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2052642718,"node_id":"IC_kwDOACaFSM56WNee","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T22:34:33Z","updated_at":"2024-04-12T22:41:36Z","author_association":"CONTRIBUTOR","body":"Tracked down the cause of the BigRootTabletIT failure and fixed it in #4457.  I think these changes were causing the server side scan buffer to only hold a single key/value.  The code would take the last key from the buffer and create a range like `Range(lastKeyInBuffer, false, ...)`   and reseek to get the next batch.  This reseek would not skip the key and reread the same key again resulting in an infinite loop.  I noticed the TGW was spamming the logs and never flushing any changes and realized it was in an infinite loop.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052642718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052649553","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2052649553","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2052649553,"node_id":"IC_kwDOACaFSM56WPJR","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T22:46:15Z","updated_at":"2024-04-12T22:46:15Z","author_association":"CONTRIBUTOR","body":"@keith-turner infinite loop is exactly what I was seeing. Thanks for tracking this down.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052649553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052684304","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2052684304","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2052684304,"node_id":"IC_kwDOACaFSM56WXoQ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T23:17:03Z","updated_at":"2024-04-12T23:17:03Z","author_association":"CONTRIBUTOR","body":"> @keith-turner infinite loop is exactly what I was seeing. Thanks for tracking this down.\r\n\r\nI spent many hours looking at this.  It took me a while to figure out the TGW was in an infinite loop. I was like why is the TGW never flushing assignments?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052684304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052721165","html_url":"https://github.com/apache/accumulo/pull/4458#issuecomment-2052721165","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4458","id":2052721165,"node_id":"IC_kwDOACaFSM56WgoN","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-13T00:16:38Z","updated_at":"2024-04-13T00:16:38Z","author_association":"CONTRIBUTOR","body":"Have not tested this yet, wanted to figure out the metrics for the tablet metadata cache before testing. Have a TODO in the PR about metrics for the cache.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052721165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052724656","html_url":"https://github.com/apache/accumulo/pull/4244#issuecomment-2052724656","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4244","id":2052724656,"node_id":"IC_kwDOACaFSM56Whew","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-13T00:23:27Z","updated_at":"2024-04-13T00:23:27Z","author_association":"CONTRIBUTOR","body":"Replaced with #4459 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2052724656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2054126448","html_url":"https://github.com/apache/accumulo/pull/4415#issuecomment-2054126448","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4415","id":2054126448,"node_id":"IC_kwDOACaFSM56b3tw","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-14T17:20:32Z","updated_at":"2024-04-14T17:20:32Z","author_association":"CONTRIBUTOR","body":"I am marking this as ready for review as I think it's pretty close to being ready to merge after all the recent changes. Because it's a test API I expect it to continue to mutate and evolve as we use it for more test cases but I think it's a good start in its current state. I added a couple tests for #3908 as stated in another comment. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2054126448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2056634311","html_url":"https://github.com/apache/accumulo/pull/4453#issuecomment-2056634311","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4453","id":2056634311,"node_id":"IC_kwDOACaFSM56lb_H","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-15T11:46:18Z","updated_at":"2024-04-15T11:46:18Z","author_association":"CONTRIBUTOR","body":"Closing as #4457 fixes the root cause.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2056634311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2056675641","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2056675641","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2056675641,"node_id":"IC_kwDOACaFSM56lmE5","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-15T12:06:17Z","updated_at":"2024-04-15T12:06:17Z","author_association":"CONTRIBUTOR","body":"> I spent many hours looking at this.\r\n\r\nSame, over several days. I'm glad you found and fixed it. I think the only remaining issue based on the comments in this PR is where/how the ServiceLock is supplied to Ample. I'm going to review the comments and address this last issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2056675641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2057128015","html_url":"https://github.com/apache/accumulo/pull/4461#issuecomment-2057128015","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4461","id":2057128015,"node_id":"IC_kwDOACaFSM56nUhP","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-15T15:24:08Z","updated_at":"2024-04-15T15:24:08Z","author_association":"CONTRIBUTOR","body":"@EdColeman  I added commit d8b4c66e22b9efcd252e122031fc4513345e6713 to #4458 that could be merged into this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2057128015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2057708418","html_url":"https://github.com/apache/accumulo/issues/4462#issuecomment-2057708418","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4462","id":2057708418,"node_id":"IC_kwDOACaFSM56piOC","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-15T20:03:32Z","updated_at":"2024-04-15T20:03:32Z","author_association":"CONTRIBUTOR","body":"This section of the code could be moved under a try/catch loop for zk lookup failures.\r\nhttps://github.com/apache/accumulo/blob/7c6572caf336cd76bb794befe7a31dce3503cd4b/core/src/main/java/org/apache/accumulo/core/fate/AdminUtil.java#L343-L376","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2057708418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2057910120","html_url":"https://github.com/apache/accumulo/issues/4462#issuecomment-2057910120","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4462","id":2057910120,"node_id":"IC_kwDOACaFSM56qTdo","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-15T22:22:07Z","updated_at":"2024-04-15T22:22:07Z","author_association":"CONTRIBUTOR","body":"See if the `-s` path in the code bypasses this error.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2057910120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2058859737","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2058859737","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2058859737,"node_id":"IC_kwDOACaFSM56t7TZ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-16T11:25:53Z","updated_at":"2024-04-16T11:25:53Z","author_association":"CONTRIBUTOR","body":"What is this bot? I can't find anything about it via Google search.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2058859737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2058951785","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2058951785","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2058951785,"node_id":"IC_kwDOACaFSM56uRxp","user":{"login":"jamietanna","id":3315059,"node_id":"MDQ6VXNlcjMzMTUwNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3315059?v=4","gravatar_id":"","url":"https://api.github.com/users/jamietanna","html_url":"https://github.com/jamietanna","followers_url":"https://api.github.com/users/jamietanna/followers","following_url":"https://api.github.com/users/jamietanna/following{/other_user}","gists_url":"https://api.github.com/users/jamietanna/gists{/gist_id}","starred_url":"https://api.github.com/users/jamietanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamietanna/subscriptions","organizations_url":"https://api.github.com/users/jamietanna/orgs","repos_url":"https://api.github.com/users/jamietanna/repos","events_url":"https://api.github.com/users/jamietanna/events{/privacy}","received_events_url":"https://api.github.com/users/jamietanna/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-16T12:17:07Z","updated_at":"2024-04-16T12:17:07Z","author_association":"NONE","body":"We've also had it hit some of our (Elastic) repos - might be worth blocking from the Apache GitHub organisation","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2058951785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2059296393","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2059296393","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2059296393,"node_id":"IC_kwDOACaFSM56vl6J","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-16T14:55:53Z","updated_at":"2024-04-16T14:55:53Z","author_association":"CONTRIBUTOR","body":"In latest IT build only the SplitMillionIT timed out, no other failures. SplitMillionIT timed out once for me locally, and succeeded twice. So I think it's just flaky. I have no other planned changes for this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2059296393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2059475183","html_url":"https://github.com/apache/accumulo/issues/3709#issuecomment-2059475183","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3709","id":2059475183,"node_id":"IC_kwDOACaFSM56wRjv","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-16T16:21:10Z","updated_at":"2024-04-16T16:21:10Z","author_association":"CONTRIBUTOR","body":"@cshannon  - Is this issue OBE now that we have user FATE operations being stored in an Accumulo table instead of ZooKeeper?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2059475183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2059509404","html_url":"https://github.com/apache/accumulo/issues/3742#issuecomment-2059509404","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3742","id":2059509404,"node_id":"IC_kwDOACaFSM56wZ6c","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-16T16:39:18Z","updated_at":"2024-04-16T16:39:18Z","author_association":"CONTRIBUTOR","body":"When ConditionalWriterImpl.close is called it calls shutdownNow on the `threadPool` ThreadPool. This ThreadPool is used to send mutations to tablet servers. ConditionalWriterImpl.write checks that `threadPool` is still alive every time the method is invoked.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2059509404/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2059546599","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2059546599","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2059546599,"node_id":"IC_kwDOACaFSM56wi_n","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-16T17:02:44Z","updated_at":"2024-04-16T17:02:44Z","author_association":"CONTRIBUTOR","body":"> In latest IT build only the SplitMillionIT timed out, no other failures. SplitMillionIT timed out once for me locally, and succeeded twice. So I think it's just flaky. I have no other planned changes for this PR.\r\n\r\nYeah that test is flaky, it's set for a 10 minute timeout and when I've seen it pass it still takes like 9 minutes and 45 seconds. I think we need to increase the amount of time for that test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2059546599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2059553175","html_url":"https://github.com/apache/accumulo/issues/3709#issuecomment-2059553175","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3709","id":2059553175,"node_id":"IC_kwDOACaFSM56wkmX","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-16T17:06:09Z","updated_at":"2024-04-16T17:06:09Z","author_association":"CONTRIBUTOR","body":"I believe so, the information is stored in SplitInfo which is persisted as part of the Repos in the Accumulo table now. So at least for the user tables it's no longer in ZK and I don't think we need to worry about it being in ZK for metadata.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2059553175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2059750284","html_url":"https://github.com/apache/accumulo/issues/3709#issuecomment-2059750284","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3709","id":2059750284,"node_id":"IC_kwDOACaFSM56xUuM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-16T19:04:08Z","updated_at":"2024-04-16T19:04:08Z","author_association":"CONTRIBUTOR","body":"@jmark99 - are you working this?\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2059750284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061073355","html_url":"https://github.com/apache/accumulo/issues/4074#issuecomment-2061073355","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4074","id":2061073355,"node_id":"IC_kwDOACaFSM562XvL","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-17T11:47:03Z","updated_at":"2024-04-17T11:47:03Z","author_association":"CONTRIBUTOR","body":"This was resolved by #4299 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061073355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061147133","html_url":"https://github.com/apache/accumulo/issues/4409#issuecomment-2061147133","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4409","id":2061147133,"node_id":"IC_kwDOACaFSM562pv9","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-17T12:28:37Z","updated_at":"2024-04-17T12:28:37Z","author_association":"CONTRIBUTOR","body":"I think there may be a no-code solution to this when using Log4J2.  Log4J2 has the concept of [Filters](https://logging.apache.org/log4j/2.x/manual/filters.html#filters), which can be applied to a specific Logger (see bullet 2). A [BurstFilter](https://logging.apache.org/log4j/2.x/manual/filters.html#burstfilter) can be configured by the user to rate limit the number of messages that they are logging. An example would be something like:\r\n\r\n```\r\n<Logger name=\"com.example.SomeClass\" level=\"INFO\">\r\n    <BurstFilter level=\"WARN\" rate=\"10\" maxBurst=\"20\" />\r\n</Logger>\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061147133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061572424","html_url":"https://github.com/apache/accumulo/pull/4466#issuecomment-2061572424","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4466","id":2061572424,"node_id":"IC_kwDOACaFSM564RlI","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-17T15:33:43Z","updated_at":"2024-04-17T15:33:43Z","author_association":"MEMBER","body":"This test is failing at the moment but I wanted to put up what I have so far because, to me, it seems like it should be testing things correctly. The issue is probably with my assumptions in setting the test but may be correctly pointing to a bug.\r\n\r\nThe test essentially sets things up so that there are compactions queued (with no compactors running that would carry out the compactions) and then the compaction settings are changed so that compactions no longer need to happen. It is expected that the queue would be emptied but I do not see that happening. Here is a portion of the logs while the test is waiting for the queue to be emptied:\r\n```\r\n2024-04-17T10:45:10,652 55 [compaction.CompactionPriorityQueueMetricsIT] INFO : Queue size: 6 Jobs Queued: 6 Jobs Dequeued: 0 Jobs Rejected: 96\r\n2024-04-17T10:45:14,153 55 [compaction.CompactionPriorityQueueMetricsIT] INFO : Queue size: 6 Jobs Queued: 6 Jobs Dequeued: 0 Jobs Rejected: 99\r\n2024-04-17T10:45:17,653 55 [compaction.CompactionPriorityQueueMetricsIT] INFO : Queue size: 6 Jobs Queued: 6 Jobs Dequeued: 0 Jobs Rejected: 102\r\n2024-04-17T10:45:21,153 55 [compaction.CompactionPriorityQueueMetricsIT] INFO : Queue size: 6 Jobs Queued: 6 Jobs Dequeued: 0 Jobs Rejected: 102\r\n2024-04-17T10:45:24,654 55 [compaction.CompactionPriorityQueueMetricsIT] INFO : Queue size: 6 Jobs Queued: 6 Jobs Dequeued: 0 Jobs Rejected: 105\r\n2024-04-17T10:45:28,154 55 [compaction.CompactionPriorityQueueMetricsIT] INFO : Queue size: 6 Jobs Queued: 6 Jobs Dequeued: 0 Jobs Rejected: 108\r\n```\r\nThese are the last logs before the test times out. Note the queue sizes and the Jobs rejected.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061572424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061736132","html_url":"https://github.com/apache/accumulo/issues/4409#issuecomment-2061736132","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4409","id":2061736132,"node_id":"IC_kwDOACaFSM5645jE","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-17T16:41:33Z","updated_at":"2024-04-17T16:41:33Z","author_association":"CONTRIBUTOR","body":"> I think there may be a no-code solution to this when using Log4J2. Log4J2 has the concept of [Filters](https://logging.apache.org/log4j/2.x/manual/filters.html#filters), which can be applied to a specific Logger (see bullet 2). A [BurstFilter](https://logging.apache.org/log4j/2.x/manual/filters.html#burstfilter) can be configured by the user to rate limit the number of messages that they are logging.\r\n\r\nI think we could remove some of the suppression that has already been added to the code in favor of this.  We may want to use more specifically named loggers for known bursty logging to allow targeted suppression that does not suppress other unrelated log messages.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061736132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061741940","html_url":"https://github.com/apache/accumulo/issues/4467#issuecomment-2061741940","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4467","id":2061741940,"node_id":"IC_kwDOACaFSM564690","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-17T16:45:10Z","updated_at":"2024-04-17T16:45:10Z","author_association":"CONTRIBUTOR","body":"Stack traces / errors seen:\r\n\r\n```\r\njava.io.EOFException: Length to read: X actual: Y\r\n  at IOUtils.readFully (IOUtils.java:2080)\r\n  at IOUtils.readFully (IOUtils.java:2056)\r\n  at CryptoUtils.readParams (CryptoUtils.java:41)\r\n  at PrintInfo.printCryptoParams (PrintInfo.java:335)\r\n  at PrintInfo.execute (PrintInfo.java:196)\r\n```\r\nWith the `--summary` option, the following error kills the `rfile-info` thread:\r\n\r\n```\r\norg.apache.accumulo.core.file.NoSuchMetaStoreException: name = accumulo.summaries.index\r\n  at RFile$Reader.getMetaStore (RFile.java:1385)\r\n  at SummaryReader.load (SummaryReader.java:129)\r\n  at SummaryReader.print (SummaryReader.java:231)\r\n  at PrintInfo.execute (PrintInfo.java:280)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061741940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061883157","html_url":"https://github.com/apache/accumulo/issues/4409#issuecomment-2061883157","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4409","id":2061883157,"node_id":"IC_kwDOACaFSM565dcV","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-17T17:50:55Z","updated_at":"2024-04-17T17:50:55Z","author_association":"CONTRIBUTOR","body":"CompositeFilters also exist, I wonder if you could combine a RegexFilter and a BurstFilter on a specific Logger.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061883157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061901162","html_url":"https://github.com/apache/accumulo/issues/4409#issuecomment-2061901162","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4409","id":2061901162,"node_id":"IC_kwDOACaFSM565h1q","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-17T18:01:20Z","updated_at":"2024-04-17T18:01:20Z","author_association":"CONTRIBUTOR","body":"Are there any logging performance considerations?  \r\n\r\nParticularity when we know ahead of time that a message could be quite spammy in certain situations?  Defeating the message in code (at the source) when it is known to be desired is going to remove any work necessary to format, output, collect and then filtering that would need to be done by the logging system.  \r\n\r\nIn places where you cannot modify the source, it may be a useful thing to deploy.  But, when known upfront and fully controlled by us, it may be better just to adjust the code to log reasonably in cases like this. \r\n\r\nKeith had what appeared to be a general, good solution to something that we likely could use in multiple places.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061901162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061987636","html_url":"https://github.com/apache/accumulo/issues/4409#issuecomment-2061987636","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4409","id":2061987636,"node_id":"IC_kwDOACaFSM565280","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-17T18:49:30Z","updated_at":"2024-04-17T18:49:30Z","author_association":"CONTRIBUTOR","body":"> Are there any logging performance considerations?\r\n\r\nI'm not sure","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2061987636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2062081462","html_url":"https://github.com/apache/accumulo/pull/4452#issuecomment-2062081462","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4452","id":2062081462,"node_id":"IC_kwDOACaFSM566N22","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-17T19:37:55Z","updated_at":"2024-04-17T19:39:21Z","author_association":"CONTRIBUTOR","body":"Testing the monitor may be possible by pulling json from it, but not sure.  Did you manually try looking at the monitor with this change?  Personally I think a manual check would be good.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2062081462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2062122755","html_url":"https://github.com/apache/accumulo/pull/4397#issuecomment-2062122755","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4397","id":2062122755,"node_id":"IC_kwDOACaFSM566X8D","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-17T20:04:03Z","updated_at":"2024-04-17T20:04:03Z","author_association":"CONTRIBUTOR","body":"merged this so that it would be present when merging main with #4398 into elasticity. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2062122755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2062407713","html_url":"https://github.com/apache/accumulo/pull/4458#issuecomment-2062407713","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4458","id":2062407713,"node_id":"IC_kwDOACaFSM567dgh","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-17T21:25:46Z","updated_at":"2024-04-17T21:25:46Z","author_association":"CONTRIBUTOR","body":"closing in favor of #4461 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2062407713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2063655374","html_url":"https://github.com/apache/accumulo/issues/4467#issuecomment-2063655374","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4467","id":2063655374,"node_id":"IC_kwDOACaFSM57AOHO","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-18T11:35:46Z","updated_at":"2024-04-18T11:35:46Z","author_association":"CONTRIBUTOR","body":"This seems to only be an issue with the rfile-info command. \r\nAccumulo is able to bulk import the old files and read them successfully.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2063655374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2063693600","html_url":"https://github.com/apache/accumulo/issues/4469#issuecomment-2063693600","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4469","id":2063693600,"node_id":"IC_kwDOACaFSM57AXcg","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-18T11:56:48Z","updated_at":"2024-04-18T11:56:48Z","author_association":"CONTRIBUTOR","body":"Feature request is a logging change to assist with troubleshooting. \r\nShould probably look at any other balancer code and update those as well. \r\n\r\nMight be worth looking into if this is something that can be handled at a higher level in `3.1` vs in each individual balancer. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2063693600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2063771291","html_url":"https://github.com/apache/accumulo/issues/4469#issuecomment-2063771291","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4469","id":2063771291,"node_id":"IC_kwDOACaFSM57Aqab","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-18T12:39:30Z","updated_at":"2024-04-18T12:39:30Z","author_association":"CONTRIBUTOR","body":"There seems two parts to this request.  Logging the number of migrations separately seems helpful.\r\n\r\nAs for the level change:  The logging config is dynamic and can be changed at run-time.  Why is it insufficient to set the HostRegexTableLoadBlancer to trace if that level of detail is necessary to troubleshoot?  Maybe some debug level statements could be added that provide a summary (and maybe that's provided by logging the number?).\r\n\r\nOften, we seem to ping-pong with logging in these cases.  It's needed in a rare case so the level is elevated - then later a different issue occurs and it's noticed that the logging is excessive when things are operating as expected and are not providing useful information, so the log level is then reduced.\r\n\r\nRather than just changing the level, is there something that could provide a summary, maybe with counts of #moved, #to be moved, #seen before but not moved,...  Something that would be a one-liner, but sufficient to show progress, amount of work remaining.  Then, if that points to something not making progress, that would trigger modifying the log level if needed.\r\n\r\nI am not saying that this change may be unnecessary or helpful in this situation - rather just asking the question to see if there is something that may add more value (even if it's more work).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2063771291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2063821160","html_url":"https://github.com/apache/accumulo/issues/4469#issuecomment-2063821160","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4469","id":2063821160,"node_id":"IC_kwDOACaFSM57A2lo","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-18T13:04:08Z","updated_at":"2024-04-18T13:04:20Z","author_association":"CONTRIBUTOR","body":"> 1. Log the migrations that are not moving as DEBUG. The message is currently TRACE.\r\n\r\nTo avoid the logging option changes, we could probably take a look at this and do some caching. \r\n\r\n> Rather than just changing the level, is there something that could provide a summary, maybe with counts of #moved, #to be moved, #seen before but not moved,... Something that would be a one-liner, but sufficient to show progress, amount of work remaining. Then, if that points to something not making progress, that would trigger modifying the log level if needed.\r\n\r\nWe could make the change to add the summary count of moved, then if \"moved\" hasn't progressed in 5min, bump the \"TRACE\" message to \"DEBUG\"\r\nWe've done similar things in the code to help with \"spammy\" messages without requiring log4j2.property file changes.\r\nhttps://github.com/apache/accumulo/commit/f98c87cb5798c781364a7773d17b1325a73b9f5d \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2063821160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2064063679","html_url":"https://github.com/apache/accumulo/pull/4452#issuecomment-2064063679","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4452","id":2064063679,"node_id":"IC_kwDOACaFSM57Bxy_","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-18T14:43:41Z","updated_at":"2024-04-18T14:43:41Z","author_association":"MEMBER","body":"> Testing the monitor may be possible by pulling json from it, but not sure. Did you manually try looking at the monitor with this change? Personally I think a manual check would be good.\r\n\r\nOkay, had just tried my test using uno again with an even larger compaction and now I can see that the progress does in fact go above 100% prior to these changes. Perhaps my compaction wasn't large enough before to show any progress, I'm not sure. Will build uno using my changes and check the monitor page and get back to you.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2064063679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2064227775","html_url":"https://github.com/apache/accumulo/pull/4452#issuecomment-2064227775","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4452","id":2064227775,"node_id":"IC_kwDOACaFSM57CZ2_","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-18T15:25:43Z","updated_at":"2024-04-18T15:25:43Z","author_association":"MEMBER","body":"Just confirmed that these changes are reflected in the monitor page. So the logs and the monitor page both no longer show >100% progress","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2064227775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2064450690","html_url":"https://github.com/apache/accumulo/pull/4465#issuecomment-2064450690","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4465","id":2064450690,"node_id":"IC_kwDOACaFSM57DQSC","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-18T16:27:04Z","updated_at":"2024-04-18T16:27:04Z","author_association":"CONTRIBUTOR","body":"Should there be a check to see if the system is up or if there running compactions?  If this was run on a system with active compactions, would it find and delete files that were currently being written to be the compaction process?\r\n\r\nAs a stand-alone utility it is a little harder to run the command - if elevated to an admin utility, would that increase the chances that it would be run on an active system?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2064450690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2064517563","html_url":"https://github.com/apache/accumulo/issues/4470#issuecomment-2064517563","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4470","id":2064517563,"node_id":"IC_kwDOACaFSM57Dgm7","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-18T16:45:21Z","updated_at":"2024-04-18T16:45:21Z","author_association":"CONTRIBUTOR","body":"This metric value could also be a count of tablets undergoing migration, and could report 0 when fully balanced.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2064517563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2065607462","html_url":"https://github.com/apache/accumulo/issues/4454#issuecomment-2065607462","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4454","id":2065607462,"node_id":"IC_kwDOACaFSM57Hqsm","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T01:51:48Z","updated_at":"2024-04-19T01:59:44Z","author_association":"CONTRIBUTOR","body":"Below are some pointers for the code.\r\n\r\n 1. This [code](https://github.com/apache/accumulo/blob/cb25f26ab3be77dbfce54e9d1e7234e5974510ec/server/manager/src/main/java/org/apache/accumulo/manager/tableOps/compact/CompactionDriver.java#L190) selects files for user compactions, creating the selected column.\r\n 2. This [code](https://github.com/apache/accumulo/blob/cb25f26ab3be77dbfce54e9d1e7234e5974510ec/server/base/src/main/java/org/apache/accumulo/server/compaction/CompactionJobGenerator.java#L92) creates compaction jobs that are queued.  If we add a count to the selected files column, then this code could generate system jobs when that count is zero (and no user jobs are running) in addition to user jobs.  Would not want to exclude the selected files as candidates for planning system compaction in this case as this [code](https://github.com/apache/accumulo/blob/cb25f26ab3be77dbfce54e9d1e7234e5974510ec/server/base/src/main/java/org/apache/accumulo/server/compaction/CompactionJobGenerator.java#L210) currently does.\r\n 3. This [code](https://github.com/apache/accumulo/blob/cb25f26ab3be77dbfce54e9d1e7234e5974510ec/server/manager/src/main/java/org/apache/accumulo/manager/compaction/coordinator/CompactionCoordinator.java#L531) creates a running compaction entry in the metadata table when a compaction starts.   This code could allow system compactions to start if selected files exists and its count is zero (and no user jobs are running), for this case would need to remove the selected files column.\r\n 4. This [code](https://github.com/apache/accumulo/blob/cb25f26ab3be77dbfce54e9d1e7234e5974510ec/server/manager/src/main/java/org/apache/accumulo/manager/compaction/coordinator/CompactionCoordinator.java#L726) commits a compaction.  It will modify the selected files column, removing the compacted files for user compactions.  It will also update the tablets files and remove the running compaction entry.  This code could increment the count in the selected files column.\r\n\r\nWe could probably drop the timeout in elasticity for now and replace it with a log messages indicating a system compaction removed the selected files of a user compaction.  This would allow detection of the case where a system compaction is starving a user compaction.  This logging would be done by the code at number 3 above.\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2065607462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2065620709","html_url":"https://github.com/apache/accumulo/issues/4469#issuecomment-2065620709","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4469","id":2065620709,"node_id":"IC_kwDOACaFSM57Ht7l","user":{"login":"dtspence","id":33552925,"node_id":"MDQ6VXNlcjMzNTUyOTI1","avatar_url":"https://avatars.githubusercontent.com/u/33552925?v=4","gravatar_id":"","url":"https://api.github.com/users/dtspence","html_url":"https://github.com/dtspence","followers_url":"https://api.github.com/users/dtspence/followers","following_url":"https://api.github.com/users/dtspence/following{/other_user}","gists_url":"https://api.github.com/users/dtspence/gists{/gist_id}","starred_url":"https://api.github.com/users/dtspence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtspence/subscriptions","organizations_url":"https://api.github.com/users/dtspence/orgs","repos_url":"https://api.github.com/users/dtspence/repos","events_url":"https://api.github.com/users/dtspence/events{/privacy}","received_events_url":"https://api.github.com/users/dtspence/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T02:08:37Z","updated_at":"2024-04-19T02:08:37Z","author_association":"CONTRIBUTOR","body":"@EdColeman \r\n> As for the level change: The logging config is dynamic and can be changed at run-time. Why is it insufficient to set the HostRegexTableLoadBlancer to trace if that level of detail is necessary to troubleshoot? Maybe some debug level statements could be added that provide a summary (and maybe that's provided by logging the number?).\r\n\r\nThank you - in the particular issue we encountered - it took some time investigating (another team was performing the restart of the cluster) and I did not look at the code until later to see the TRACE statement. We encountered an issue again today and set the class to TRACE level to learn more about the problem.\r\n\r\n@ddanielr \r\n> We could make the change to add the summary count of moved, then if \"moved\" hasn't progressed in 5min, bump the \"TRACE\" message to \"DEBUG\"\r\nWe've done similar things in the code to help with \"spammy\" messages without requiring log4j2.property file changes.\r\nf98c87c\r\n\r\nThank you - this sounds like a good idea. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2065620709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2065650064","html_url":"https://github.com/apache/accumulo/issues/4475#issuecomment-2065650064","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4475","id":2065650064,"node_id":"IC_kwDOACaFSM57H1GQ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T02:40:17Z","updated_at":"2024-04-19T02:40:17Z","author_association":"CONTRIBUTOR","body":"#4474 is modifying the same code, so would be good to merge it before working on this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2065650064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066393876","html_url":"https://github.com/apache/accumulo/issues/4454#issuecomment-2066393876","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4454","id":2066393876,"node_id":"IC_kwDOACaFSM57KqsU","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T11:39:43Z","updated_at":"2024-04-19T11:39:43Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I am diving into this more now and I just remembered I recently added a new column to prevent user compaction starvation by system compactions in https://github.com/apache/accumulo/pull/4254 . \r\n\r\nI'm wondering if we need to worry about this column? At first glance I don't think so because it should be cleared after files are selected so I think we just need to worry about the selected files column and clearing that to cancel a user compaction.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066393876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066397194","html_url":"https://github.com/apache/accumulo/pull/4473#issuecomment-2066397194","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4473","id":2066397194,"node_id":"IC_kwDOACaFSM57KrgK","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T11:41:53Z","updated_at":"2024-04-19T11:41:53Z","author_association":"CONTRIBUTOR","body":"The changes LGTM, but I was wondering if the logging for nothing selected for a user compaction should be debug.\r\n\r\nWould it be \"normal\" for a user-initiated compaction to have no work?  I guess if there was no data in a tablet and the file size was 0?  My impression is that a user compaction should always result in tablets being processed, filtered and the results written into a new file. Even if it was a single tablet file from a previous compaction (starts with the 'A` prefix), that file is processed and a new `A` file is generated.\r\n\r\nIf my above assumption is correct, then would it not be unexpected that a user-initiated compaction yielded no work and logging at something higher than trace would be appropriate?  If I ran a compaction and then noticed that some or all of the files did not get updated with new timestamps I would be suspecting a bug and being able to see that the planner selected no work may help point to the issue?  At trace, it may take longer to zero in on an issue?\r\n\r\n(This comment actually is not objecting to the trace level as much as just trying to understand the conditions that would lead to no work.)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066397194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066422472","html_url":"https://github.com/apache/accumulo/issues/4409#issuecomment-2066422472","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4409","id":2066422472,"node_id":"IC_kwDOACaFSM57KxrI","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T11:59:45Z","updated_at":"2024-04-19T11:59:45Z","author_association":"CONTRIBUTOR","body":"One issue with suppressing messages in the code vs the configuration, is that we could suppress a single message that might help the user track something down. Say that an issue is happening with a specific tablet and they are tracking that, but missing messages about that tablet because they were suppressed. I think there are pros & cons to both approaches.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066422472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066437985","html_url":"https://github.com/apache/accumulo/pull/4465#issuecomment-2066437985","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4465","id":2066437985,"node_id":"IC_kwDOACaFSM57K1dh","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T12:09:50Z","updated_at":"2024-04-19T12:09:50Z","author_association":"CONTRIBUTOR","body":"> Should there be a check to see if the system is up or if there running compactions? If this was run on a system with active compactions, would it find and delete files that were currently being written to be the compaction process?\r\n> \r\n> As a stand-alone utility it is a little harder to run the command - if elevated to an admin utility, would that increase the chances that it would be run on an active system?\r\n\r\nFindCompactionTmpFiles first finds the tmp files, then removes from that set any file that is referenced from currently executing compactions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066437985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066440716","html_url":"https://github.com/apache/accumulo/pull/4471#issuecomment-2066440716","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4471","id":2066440716,"node_id":"IC_kwDOACaFSM57K2IM","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T12:11:36Z","updated_at":"2024-04-19T12:11:36Z","author_association":"CONTRIBUTOR","body":"I confirmed that with uno instance configured to use a LoggingProvider, the meters appear in the manager metrics log:\r\n\r\n```\r\nMETRICS: 2024-04-19T12:08:37,303, manager.balancer.balancing.total{host=localhost,instance.name=uno,port=9999,process.name=manager} value=0\r\nMETRICS: 2024-04-19T12:08:37,303, manager.balancer.need.balancing.total{host=localhost,instance.name=uno,port=9999,process.name=manager} value=0\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066440716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066446539","html_url":"https://github.com/apache/accumulo/issues/4454#issuecomment-2066446539","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4454","id":2066446539,"node_id":"IC_kwDOACaFSM57K3jL","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T12:15:34Z","updated_at":"2024-04-19T12:15:59Z","author_association":"CONTRIBUTOR","body":"Actually, it looks like the column is not cleared until after the compaction finishes. The original [issue](#3524) mentions clearing the column after selecting files, but currently it is not cleared until CleanUp runs on completion [here](https://github.com/apache/accumulo/blob/cb25f26ab3be77dbfce54e9d1e7234e5974510ec/server/manager/src/main/java/org/apache/accumulo/manager/tableOps/compact/CleanUp.java#L92)\r\n\r\nSo, I am wondering if we should be clearing that column instead when we mutate the tablet to insert selected files (not sure if we should still have clean up check as well) or if we keep the current behavior where the marker isn't removed until after it's finished and instead we also would need to clear that marker as well as selected files","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066446539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066750433","html_url":"https://github.com/apache/accumulo/pull/4473#issuecomment-2066750433","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4473","id":2066750433,"node_id":"IC_kwDOACaFSM57MBvh","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T14:53:59Z","updated_at":"2024-04-19T14:53:59Z","author_association":"CONTRIBUTOR","body":"> If my above assumption is correct, then would it not be unexpected that a user-initiated compaction yielded no work and logging at something higher than trace would be appropriate? \r\n\r\nNot sure how spammy this would be at debug.   Would need to try it out and look at the manager code that makes the RPCs to tserers asking them to initiate user compactions.  I suspect it may be spammy because the manager may just send RPCs until compactions have completed for the tablet w/ the assumption that the tserver will ignore it if its in progress but not complete.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066750433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066784148","html_url":"https://github.com/apache/accumulo/pull/4458#issuecomment-2066784148","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4458","id":2066784148,"node_id":"IC_kwDOACaFSM57MJ-U","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T15:13:23Z","updated_at":"2024-04-19T15:13:23Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - did you mean to close this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2066784148/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2067155884","html_url":"https://github.com/apache/accumulo/issues/4463#issuecomment-2067155884","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4463","id":2067155884,"node_id":"IC_kwDOACaFSM57Nkus","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T19:18:00Z","updated_at":"2024-04-19T19:18:00Z","author_association":"CONTRIBUTOR","body":"I tried to keep this comment (https://github.com/apache/accumulo/pull/2665#issuecomment-1113302935) up to date during development and testing. It could be used as the foundation for a blog post.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2067155884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2067209093","html_url":"https://github.com/apache/accumulo/pull/4468#issuecomment-2067209093","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4468","id":2067209093,"node_id":"IC_kwDOACaFSM57NxuF","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T20:01:27Z","updated_at":"2024-04-19T20:01:27Z","author_association":"CONTRIBUTOR","body":"I think the description of the GrepCommand needs to be updated to reflect the change.\r\n\r\nhttps://github.com/apache/accumulo/blob/714fdb7e1ac949eebb05fbe6d0fd7fe36c20d5f9/shell/src/main/java/org/apache/accumulo/shell/commands/GrepCommand.java#L125-L129","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2067209093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2067355333","html_url":"https://github.com/apache/accumulo/issues/4454#issuecomment-2067355333","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4454","id":2067355333,"node_id":"IC_kwDOACaFSM57OVbF","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-19T22:28:48Z","updated_at":"2024-04-19T22:28:48Z","author_association":"CONTRIBUTOR","body":"I have a prototype of this in a branch and I'm working on tweaking things and an some tests and an IT. This may be another feature that would be suited for being tested with #4415 when merged, but a regular IT is also necessary as well as there's more to test here than just the fate operations and is good to test end to end with everything working together. I should have at least a draft PR up this weekend.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2067355333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2067765994","html_url":"https://github.com/apache/accumulo/issues/4454#issuecomment-2067765994","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4454","id":2067765994,"node_id":"IC_kwDOACaFSM57P5rq","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-20T19:46:46Z","updated_at":"2024-04-20T19:54:32Z","author_association":"CONTRIBUTOR","body":"One possible way to handle time is to use existing [steady time](\r\nhttps://github.com/apache/accumulo/blob/cb25f26ab3be77dbfce54e9d1e7234e5974510ec/server/manager/src/main/java/org/apache/accumulo/manager/Manager.java#L1633) in the manager which is suitable for persisting and using across multiple manager processes.  One potential drawback to this approach is that the TabletManagment iterator would need access to the current steady time to pass to the compaction job generator so it can make decisions.  One way to handle this would be to add a steadytime parameter to [this class](https://github.com/apache/accumulo/blob/cb25f26ab3be77dbfce54e9d1e7234e5974510ec/server/base/src/main/java/org/apache/accumulo/server/manager/state/TabletManagementParameters.java#L79) that is used to pass information from the manager to the tablet mgmt iterator.  Trying this could be explored in its own PR.  If it were done, thinking a good prerequisite change would be to introduce a SteadyTime type to replace the long currently returned by the method.  If SteadyTime is more widely used a more narrow type in the code would be good for correctness.\r\n\r\nUpdate: Steady time could be persisted int he selected files column at creation time.  Then everything making decisions based on it could use that to compute an age.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2067765994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2067771346","html_url":"https://github.com/apache/accumulo/issues/4482#issuecomment-2067771346","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4482","id":2067771346,"node_id":"IC_kwDOACaFSM57P6_S","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-20T20:13:24Z","updated_at":"2024-04-20T20:13:43Z","author_association":"CONTRIBUTOR","body":"This issue supports the possible use of steady time more in the manager code as outlined in #4481 and [this comment](https://github.com/apache/accumulo/issues/4454#issuecomment-2067765994)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2067771346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2067777541","html_url":"https://github.com/apache/accumulo/issues/4477#issuecomment-2067777541","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4477","id":2067777541,"node_id":"IC_kwDOACaFSM57P8gF","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-20T20:46:14Z","updated_at":"2024-04-20T20:53:45Z","author_association":"CONTRIBUTOR","body":"@dlmarion  I was not able to reproduce this issue, but based on the logs you posted I tracked it down and I think #4483 will fix the bug.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2067777541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2069301773","html_url":"https://github.com/apache/accumulo/issues/3709#issuecomment-2069301773","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3709","id":2069301773,"node_id":"IC_kwDOACaFSM57VwoN","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-22T12:43:14Z","updated_at":"2024-04-22T12:43:14Z","author_association":"CONTRIBUTOR","body":"@dlmarion yes, I'm getting back to it this week.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2069301773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2069304479","html_url":"https://github.com/apache/accumulo/issues/3709#issuecomment-2069304479","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3709","id":2069304479,"node_id":"IC_kwDOACaFSM57VxSf","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-22T12:44:32Z","updated_at":"2024-04-22T12:44:32Z","author_association":"CONTRIBUTOR","body":"@dlmarion I've been away for two weeks. From the comments above is there no longer a need to work this?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2069304479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2069317297","html_url":"https://github.com/apache/accumulo/issues/3709#issuecomment-2069317297","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3709","id":2069317297,"node_id":"IC_kwDOACaFSM57V0ax","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-22T12:50:33Z","updated_at":"2024-04-22T12:50:33Z","author_association":"CONTRIBUTOR","body":">  From the comments above is there no longer a need to work this?\r\n\r\n@jmark99 - Based on what @cshannon said, I think that is the case. I think we could probably close this issue. @cshannon modified FATE such that user FATE operations are stored in a new Accumulo table (+fate).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2069317297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2069403146","html_url":"https://github.com/apache/accumulo/issues/3709#issuecomment-2069403146","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3709","id":2069403146,"node_id":"IC_kwDOACaFSM57WJYK","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-22T13:20:04Z","updated_at":"2024-04-22T13:20:04Z","author_association":"CONTRIBUTOR","body":"@ok, thanks for the update. I'll close the issue as no longer relevant based upon the existence of the new Accumulo table.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2069403146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2069885522","html_url":"https://github.com/apache/accumulo/pull/4484#issuecomment-2069885522","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4484","id":2069885522,"node_id":"IC_kwDOACaFSM57X_JS","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-22T15:26:50Z","updated_at":"2024-04-22T15:26:50Z","author_association":"CONTRIBUTOR","body":"I'm proposing that we leave the code as-is. I don't know that there is a reliable way to determine what the splits should be given the information that we have in the tablet metadata. The todo suggested running tests and doing some compactions, etc. But I think that it's really going to be situation dependent. Users can apply iterators to perform aggregation, deletes, etc. at compaction time that could influence the split points greatly. I think the better option here is to document compactions should be run first to get more accurate split points.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2069885522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2070984411","html_url":"https://github.com/apache/accumulo/pull/4486#issuecomment-2070984411","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4486","id":2070984411,"node_id":"IC_kwDOACaFSM57cLbb","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-22T21:29:34Z","updated_at":"2024-04-22T21:29:34Z","author_association":"CONTRIBUTOR","body":"Supercedes #4175 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2070984411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072116083","html_url":"https://github.com/apache/accumulo/issues/4485#issuecomment-2072116083","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4485","id":2072116083,"node_id":"IC_kwDOACaFSM57gftz","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T11:59:06Z","updated_at":"2024-04-23T11:59:06Z","author_association":"CONTRIBUTOR","body":"@dtspence - is it the case that you manually cancelled the compactions? If so, did your command complete, or did it hang too?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072116083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072140414","html_url":"https://github.com/apache/accumulo/issues/4485#issuecomment-2072140414","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4485","id":2072140414,"node_id":"IC_kwDOACaFSM57glp-","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T12:12:10Z","updated_at":"2024-04-23T12:12:10Z","author_association":"CONTRIBUTOR","body":"The FileCompactor [checks](https://github.com/apache/accumulo/blob/2.1/server/base/src/main/java/org/apache/accumulo/server/compaction/FileCompactor.java#L421) if the compaction is still enabled for every key that it writes. I'm curious if the compaction was making progress (you said filtering was not expected which could also be a cause). Is this happening often? If not, is bouncing the tserver an option?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072140414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072361877","html_url":"https://github.com/apache/accumulo/pull/4487#issuecomment-2072361877","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4487","id":2072361877,"node_id":"IC_kwDOACaFSM57hbuV","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T13:44:36Z","updated_at":"2024-04-23T13:44:36Z","author_association":"CONTRIBUTOR","body":"> No issue with this change. However, I think `Property.fixedProperties` needs to be reviewed. There are properties that we are marking as mutable by using the prefix property that require a restart, but are not in the `fixedProperties` set. For example, `tserver.server.threads.minimum` is marked mutable, so it can be changed in ZK, but the TServer will not update it's internal value and restart the Thrift Server.\r\n\r\nLooking at this, should all the properties that are used as arguments to `TServerUtils.startServer` be considered fixed? \r\nhttps://github.com/apache/accumulo/blob/361ed50211a215e955fb84118280b0cb92743aa3/server/base/src/main/java/org/apache/accumulo/server/rpc/TServerUtils.java#L131-L135 \r\n\r\nIf so I can make updates to `Property.fixedProperties` for the various missing properties.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072361877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072368797","html_url":"https://github.com/apache/accumulo/pull/4487#issuecomment-2072368797","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4487","id":2072368797,"node_id":"IC_kwDOACaFSM57hdad","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T13:47:41Z","updated_at":"2024-04-23T13:47:41Z","author_association":"CONTRIBUTOR","body":"> Looking at this, should all the properties that are used as arguments to TServerUtils.startServer be considered fixed?\r\n\r\nMost likely. Also, the cache properties are likely also fixed. The code would need to be evaluated to determine if a running server will respect property changes. Being ZK mutable allows the user to change the property in the shell. It will take effect for servers started after the change, but there is no guarantee that running servers will be updated.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072368797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072411127","html_url":"https://github.com/apache/accumulo/pull/4487#issuecomment-2072411127","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4487","id":2072411127,"node_id":"IC_kwDOACaFSM57hnv3","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T14:06:22Z","updated_at":"2024-04-23T14:06:22Z","author_association":"CONTRIBUTOR","body":"@ddanielr - I looked through the ScanServer code. These need to be added to the fixedProperties. The only properties that are checked at runtime are the ones dealing with the scan executors.\r\n```\r\n      // sserver fixed properties\r\n      SSERV_CACHED_TABLET_METADATA_EXPIRATION, SSERV_PORTSEARCH, SSERV_DATACACHE_SIZE,\r\n      SSERV_INDEXCACHE_SIZE, SSERV_SUMMARYCACHE_SIZE, SSERV_DEFAULT_BLOCKSIZE,\r\n      SSERVER_SCAN_REFERENCE_EXPIRATION_TIME, SSERV_CLIENTPORT, SSERV_MAX_MESSAGE_SIZE,\r\n      SSERV_MINTHREADS, SSERV_MINTHREADS_TIMEOUT, SSERV_THREADCHECK,\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072411127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072534966","html_url":"https://github.com/apache/accumulo/pull/4487#issuecomment-2072534966","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4487","id":2072534966,"node_id":"IC_kwDOACaFSM57iF-2","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T14:45:02Z","updated_at":"2024-04-23T14:45:02Z","author_association":"CONTRIBUTOR","body":"> @ddanielr - I looked through the ScanServer code. These need to be added to the fixedProperties. The only properties that are checked at runtime are the ones dealing with the scan executors.\r\n> \r\n> ```\r\n>       // sserver fixed properties\r\n>       SSERV_CACHED_TABLET_METADATA_EXPIRATION, SSERV_PORTSEARCH, SSERV_DATACACHE_SIZE,\r\n>       SSERV_INDEXCACHE_SIZE, SSERV_SUMMARYCACHE_SIZE, SSERV_DEFAULT_BLOCKSIZE,\r\n>       SSERVER_SCAN_REFERENCE_EXPIRATION_TIME, SSERV_CLIENTPORT, SSERV_MAX_MESSAGE_SIZE,\r\n>       SSERV_MINTHREADS, SSERV_MINTHREADS_TIMEOUT, SSERV_THREADCHECK,\r\n> ```\r\n\r\nI took that list and also expanded it to include those properties under any other server types.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072534966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072890673","html_url":"https://github.com/apache/accumulo/issues/4485#issuecomment-2072890673","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4485","id":2072890673,"node_id":"IC_kwDOACaFSM57jc0x","user":{"login":"dtspence","id":33552925,"node_id":"MDQ6VXNlcjMzNTUyOTI1","avatar_url":"https://avatars.githubusercontent.com/u/33552925?v=4","gravatar_id":"","url":"https://api.github.com/users/dtspence","html_url":"https://github.com/dtspence","followers_url":"https://api.github.com/users/dtspence/followers","following_url":"https://api.github.com/users/dtspence/following{/other_user}","gists_url":"https://api.github.com/users/dtspence/gists{/gist_id}","starred_url":"https://api.github.com/users/dtspence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtspence/subscriptions","organizations_url":"https://api.github.com/users/dtspence/orgs","repos_url":"https://api.github.com/users/dtspence/repos","events_url":"https://api.github.com/users/dtspence/events{/privacy}","received_events_url":"https://api.github.com/users/dtspence/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T16:37:50Z","updated_at":"2024-04-23T16:37:50Z","author_association":"CONTRIBUTOR","body":"@dlmarion \r\n> is it the case that you manually cancelled the compactions? If so, did your command complete, or did it hang too?\r\n\r\nNo, the compaction eventually logs that it has canceled. We have not been taking manual intervention.\r\n\r\n> The FileCompactor [checks](https://github.com/apache/accumulo/blob/2.1/server/base/src/main/java/org/apache/accumulo/server/compaction/FileCompactor.java#L421) if the compaction is still enabled for every key that it writes. I'm curious if the compaction was making progress (you said filtering was not expected which could also be a cause). Is this happening often? If not, is bouncing the tserver an option?\r\n\r\nYes, the issue is re-appearing. It does not appear to be localized to a single t-server. We have been wondering if something tablet related that correlates to the issue. At least one tablet we were looking at was a hot-spot and contained a lot of i-files from imports. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072890673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072915599","html_url":"https://github.com/apache/accumulo/issues/4485#issuecomment-2072915599","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4485","id":2072915599,"node_id":"IC_kwDOACaFSM57ji6P","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T16:51:45Z","updated_at":"2024-04-23T16:52:00Z","author_association":"CONTRIBUTOR","body":"@dtspence  - are you seeing a lot of [these](https://github.com/apache/accumulo/blob/2.1/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/CompactableImpl.java#L1588) messages?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2072915599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073045161","html_url":"https://github.com/apache/accumulo/issues/4409#issuecomment-2073045161","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4409","id":2073045161,"node_id":"IC_kwDOACaFSM57kCip","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T17:56:39Z","updated_at":"2024-04-23T17:56:39Z","author_association":"CONTRIBUTOR","body":"@keith-turner @EdColeman  - I created #4488 as another possible solution. This would allow you to create two Logger variables in a class and use one variable to always log and use the other variable to log on some interval. This requires\r\nno configuration changes and possible performance penalties with using a BurstFilter and does not require a Cache like in Keith's commit.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073045161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073052177","html_url":"https://github.com/apache/accumulo/issues/4485#issuecomment-2073052177","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4485","id":2073052177,"node_id":"IC_kwDOACaFSM57kEQR","user":{"login":"dtspence","id":33552925,"node_id":"MDQ6VXNlcjMzNTUyOTI1","avatar_url":"https://avatars.githubusercontent.com/u/33552925?v=4","gravatar_id":"","url":"https://api.github.com/users/dtspence","html_url":"https://github.com/dtspence","followers_url":"https://api.github.com/users/dtspence/followers","following_url":"https://api.github.com/users/dtspence/following{/other_user}","gists_url":"https://api.github.com/users/dtspence/gists{/gist_id}","starred_url":"https://api.github.com/users/dtspence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtspence/subscriptions","organizations_url":"https://api.github.com/users/dtspence/orgs","repos_url":"https://api.github.com/users/dtspence/repos","events_url":"https://api.github.com/users/dtspence/events{/privacy}","received_events_url":"https://api.github.com/users/dtspence/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T18:00:16Z","updated_at":"2024-04-23T18:00:16Z","author_association":"CONTRIBUTOR","body":"@dlmarion \r\n> are you seeing a lot of [these](https://github.com/apache/accumulo/blob/2.1/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/CompactableImpl.java#L1588) messages?\r\n\r\nNo we are not seeing the message above. Just for reference, it may have already been known - but we see:\r\n```\r\n2024-04-23T17:58:17,298 [tserver.UnloadTabletHandler] DEBUG: Failed to unload tablet <tablet-name> ... it was already closing or closed\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073052177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073066695","html_url":"https://github.com/apache/accumulo/issues/4485#issuecomment-2073066695","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4485","id":2073066695,"node_id":"IC_kwDOACaFSM57kHzH","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T18:07:15Z","updated_at":"2024-04-23T18:07:15Z","author_association":"CONTRIBUTOR","body":"I think that log message might be from the Manager continuing to tell the TabletServer to unload the tablet. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073066695/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073082174","html_url":"https://github.com/apache/accumulo/pull/4452#issuecomment-2073082174","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4452","id":2073082174,"node_id":"IC_kwDOACaFSM57kLk-","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-23T18:15:32Z","updated_at":"2024-04-23T18:15:32Z","author_association":"MEMBER","body":"> I reviewed this, I see no issues but I think we should have @keith-turner review again. It looks like you have answered some of his questions, I just want to make sure that he sees that and concurs. Have you run any other ITs?\r\n\r\nSounds good. I have only run `ExternalCompactionProgressIT.java` and those that github runs. Let me know if there are others you think that should also be verified.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2073082174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]