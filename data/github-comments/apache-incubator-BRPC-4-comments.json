[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345167159","html_url":"https://github.com/apache/brpc/issues/112#issuecomment-345167159","issue_url":"https://api.github.com/repos/apache/brpc/issues/112","id":345167159,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTE2NzE1OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T07:31:51Z","updated_at":"2017-11-17T07:31:51Z","author_association":"CONTRIBUTOR","body":"无法让server原样返回correlation-id，一般就无法支持单连接，因为client端不知道一个连接上同时返回的多个response该分别对应哪个request。除非response的序保证和request一样，比如redis。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345167159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345167396","html_url":"https://github.com/apache/brpc/issues/112#issuecomment-345167396","issue_url":"https://api.github.com/repos/apache/brpc/issues/112","id":345167396,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTE2NzM5Ng==","user":{"login":"hymanhsu","id":19768150,"node_id":"MDQ6VXNlcjE5NzY4MTUw","avatar_url":"https://avatars.githubusercontent.com/u/19768150?v=4","gravatar_id":"","url":"https://api.github.com/users/hymanhsu","html_url":"https://github.com/hymanhsu","followers_url":"https://api.github.com/users/hymanhsu/followers","following_url":"https://api.github.com/users/hymanhsu/following{/other_user}","gists_url":"https://api.github.com/users/hymanhsu/gists{/gist_id}","starred_url":"https://api.github.com/users/hymanhsu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymanhsu/subscriptions","organizations_url":"https://api.github.com/users/hymanhsu/orgs","repos_url":"https://api.github.com/users/hymanhsu/repos","events_url":"https://api.github.com/users/hymanhsu/events{/privacy}","received_events_url":"https://api.github.com/users/hymanhsu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T07:33:14Z","updated_at":"2017-11-17T07:33:14Z","author_association":"NONE","body":"明白了，谢谢你啊","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345167396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345167454","html_url":"https://github.com/apache/brpc/issues/114#issuecomment-345167454","issue_url":"https://api.github.com/repos/apache/brpc/issues/114","id":345167454,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTE2NzQ1NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T07:33:38Z","updated_at":"2017-11-17T07:33:38Z","author_association":"CONTRIBUTOR","body":"不会有问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345167454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345185913","html_url":"https://github.com/apache/brpc/issues/113#issuecomment-345185913","issue_url":"https://api.github.com/repos/apache/brpc/issues/113","id":345185913,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTE4NTkxMw==","user":{"login":"tjb1216","id":6902833,"node_id":"MDQ6VXNlcjY5MDI4MzM=","avatar_url":"https://avatars.githubusercontent.com/u/6902833?v=4","gravatar_id":"","url":"https://api.github.com/users/tjb1216","html_url":"https://github.com/tjb1216","followers_url":"https://api.github.com/users/tjb1216/followers","following_url":"https://api.github.com/users/tjb1216/following{/other_user}","gists_url":"https://api.github.com/users/tjb1216/gists{/gist_id}","starred_url":"https://api.github.com/users/tjb1216/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjb1216/subscriptions","organizations_url":"https://api.github.com/users/tjb1216/orgs","repos_url":"https://api.github.com/users/tjb1216/repos","events_url":"https://api.github.com/users/tjb1216/events{/privacy}","received_events_url":"https://api.github.com/users/tjb1216/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T09:07:49Z","updated_at":"2017-11-17T09:07:49Z","author_association":"NONE","body":"好的，谢谢及时服务","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345185913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345187516","html_url":"https://github.com/apache/brpc/issues/113#issuecomment-345187516","issue_url":"https://api.github.com/repos/apache/brpc/issues/113","id":345187516,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTE4NzUxNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T09:14:22Z","updated_at":"2017-11-17T09:18:50Z","author_association":"CONTRIBUTOR","body":"附带说一句，在常见的系统中，cdf曲线对应的函数是严格单调的，所以它有同样单调的反函数，f(percent)<=latency和g(latency)>=percent是等价的，其中g是f的反函数。换句话说，你们应该用业界通行的percentile，而不是自己弄个实为“percentile的反函数”的指标。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345187516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345202365","html_url":"https://github.com/apache/brpc/issues/113#issuecomment-345202365","issue_url":"https://api.github.com/repos/apache/brpc/issues/113","id":345202365,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTIwMjM2NQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T10:14:53Z","updated_at":"2017-11-17T10:14:53Z","author_association":"MEMBER","body":"如果cdf曲线是单调递增的，用一个二分搜索就可以满足这个需求。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345202365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345540483","html_url":"https://github.com/apache/brpc/issues/117#issuecomment-345540483","issue_url":"https://api.github.com/repos/apache/brpc/issues/117","id":345540483,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTU0MDQ4Mw==","user":{"login":"snowmagic1","id":6684822,"node_id":"MDQ6VXNlcjY2ODQ4MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6684822?v=4","gravatar_id":"","url":"https://api.github.com/users/snowmagic1","html_url":"https://github.com/snowmagic1","followers_url":"https://api.github.com/users/snowmagic1/followers","following_url":"https://api.github.com/users/snowmagic1/following{/other_user}","gists_url":"https://api.github.com/users/snowmagic1/gists{/gist_id}","starred_url":"https://api.github.com/users/snowmagic1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snowmagic1/subscriptions","organizations_url":"https://api.github.com/users/snowmagic1/orgs","repos_url":"https://api.github.com/users/snowmagic1/repos","events_url":"https://api.github.com/users/snowmagic1/events{/privacy}","received_events_url":"https://api.github.com/users/snowmagic1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-19T18:56:13Z","updated_at":"2017-11-19T18:56:13Z","author_association":"NONE","body":"➜  brpc git:(master) ✗ protoc --version\r\nlibprotoc 3.0.0\r\n\r\n➜ vim /usr/include/google/protobuf/stubs/common.h\r\n// The current version, represented as a single integer to make comparison\r\n// easier:  major * 10^6 + minor * 10^3 + micro\r\n#define GOOGLE_PROTOBUF_VERSION 3000000","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345540483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345595349","html_url":"https://github.com/apache/brpc/issues/116#issuecomment-345595349","issue_url":"https://api.github.com/repos/apache/brpc/issues/116","id":345595349,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTU5NTM0OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T05:28:39Z","updated_at":"2017-11-20T05:28:39Z","author_association":"CONTRIBUTOR","body":"the rdma code is not merged yet.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345595349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345597563","html_url":"https://github.com/apache/brpc/pull/115#issuecomment-345597563","issue_url":"https://api.github.com/repos/apache/brpc/issues/115","id":345597563,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTU5NzU2Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T05:46:39Z","updated_at":"2017-11-20T05:46:39Z","author_association":"CONTRIBUTOR","body":"看起来你这个PR包含了很多内容，CR过程可能会比较长。建议你分成多个PR，那样比较简单的PR可以更快的merge，复杂点的可能会需要更多的评论。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345597563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345625965","html_url":"https://github.com/apache/brpc/issues/118#issuecomment-345625965","issue_url":"https://api.github.com/repos/apache/brpc/issues/118","id":345625965,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTYyNTk2NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T08:37:16Z","updated_at":"2017-11-20T08:37:16Z","author_association":"CONTRIBUTOR","body":"https://github.com/brpc/brpc/blob/master/docs/cn/redis_client.md#访问redis集群","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345625965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345630681","html_url":"https://github.com/apache/brpc/issues/118#issuecomment-345630681","issue_url":"https://api.github.com/repos/apache/brpc/issues/118","id":345630681,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTYzMDY4MQ==","user":{"login":"seiyap70","id":7539640,"node_id":"MDQ6VXNlcjc1Mzk2NDA=","avatar_url":"https://avatars.githubusercontent.com/u/7539640?v=4","gravatar_id":"","url":"https://api.github.com/users/seiyap70","html_url":"https://github.com/seiyap70","followers_url":"https://api.github.com/users/seiyap70/followers","following_url":"https://api.github.com/users/seiyap70/following{/other_user}","gists_url":"https://api.github.com/users/seiyap70/gists{/gist_id}","starred_url":"https://api.github.com/users/seiyap70/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seiyap70/subscriptions","organizations_url":"https://api.github.com/users/seiyap70/orgs","repos_url":"https://api.github.com/users/seiyap70/repos","events_url":"https://api.github.com/users/seiyap70/events{/privacy}","received_events_url":"https://api.github.com/users/seiyap70/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T08:56:38Z","updated_at":"2017-11-20T09:10:42Z","author_association":"NONE","body":"I had read it,  but didn't get it. more detail for lb \"c_murmurhash\" with nameserver \"list://\" please?\r\nI read the code brpc::ploicy::ConsistentHashingLoadBalancer::SelectServer, it just use the request_code to choose a node, what about redis's cluster slot information?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345630681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345630915","html_url":"https://github.com/apache/brpc/issues/119#issuecomment-345630915","issue_url":"https://api.github.com/repos/apache/brpc/issues/119","id":345630915,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTYzMDkxNQ==","user":{"login":"songguiquan","id":11957123,"node_id":"MDQ6VXNlcjExOTU3MTIz","avatar_url":"https://avatars.githubusercontent.com/u/11957123?v=4","gravatar_id":"","url":"https://api.github.com/users/songguiquan","html_url":"https://github.com/songguiquan","followers_url":"https://api.github.com/users/songguiquan/followers","following_url":"https://api.github.com/users/songguiquan/following{/other_user}","gists_url":"https://api.github.com/users/songguiquan/gists{/gist_id}","starred_url":"https://api.github.com/users/songguiquan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songguiquan/subscriptions","organizations_url":"https://api.github.com/users/songguiquan/orgs","repos_url":"https://api.github.com/users/songguiquan/repos","events_url":"https://api.github.com/users/songguiquan/events{/privacy}","received_events_url":"https://api.github.com/users/songguiquan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T08:57:35Z","updated_at":"2017-11-20T08:57:35Z","author_association":"NONE","body":"在.h 文件 定义 static bvar::Adder<int> g_error_count(\"error_count\")，改成在.cpp 文件定义 bvar::Adder<int> g_error_count(\"error_count\") 就有数据了，这个是为什么啊？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345630915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345687321","html_url":"https://github.com/apache/brpc/pull/115#issuecomment-345687321","issue_url":"https://api.github.com/repos/apache/brpc/issues/115","id":345687321,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTY4NzMyMQ==","user":{"login":"hymanhsu","id":19768150,"node_id":"MDQ6VXNlcjE5NzY4MTUw","avatar_url":"https://avatars.githubusercontent.com/u/19768150?v=4","gravatar_id":"","url":"https://api.github.com/users/hymanhsu","html_url":"https://github.com/hymanhsu","followers_url":"https://api.github.com/users/hymanhsu/followers","following_url":"https://api.github.com/users/hymanhsu/following{/other_user}","gists_url":"https://api.github.com/users/hymanhsu/gists{/gist_id}","starred_url":"https://api.github.com/users/hymanhsu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymanhsu/subscriptions","organizations_url":"https://api.github.com/users/hymanhsu/orgs","repos_url":"https://api.github.com/users/hymanhsu/repos","events_url":"https://api.github.com/users/hymanhsu/events{/privacy}","received_events_url":"https://api.github.com/users/hymanhsu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T12:54:12Z","updated_at":"2017-11-20T12:54:12Z","author_association":"NONE","body":"戈君，我已经去掉了nrpc这个新协议相关的修改代码，保留了基于etcd的服务注册和服务发现功能，谢谢提醒","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345687321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345692283","html_url":"https://github.com/apache/brpc/issues/121#issuecomment-345692283","issue_url":"https://api.github.com/repos/apache/brpc/issues/121","id":345692283,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTY5MjI4Mw==","user":{"login":"Tsrign","id":10807479,"node_id":"MDQ6VXNlcjEwODA3NDc5","avatar_url":"https://avatars.githubusercontent.com/u/10807479?v=4","gravatar_id":"","url":"https://api.github.com/users/Tsrign","html_url":"https://github.com/Tsrign","followers_url":"https://api.github.com/users/Tsrign/followers","following_url":"https://api.github.com/users/Tsrign/following{/other_user}","gists_url":"https://api.github.com/users/Tsrign/gists{/gist_id}","starred_url":"https://api.github.com/users/Tsrign/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tsrign/subscriptions","organizations_url":"https://api.github.com/users/Tsrign/orgs","repos_url":"https://api.github.com/users/Tsrign/repos","events_url":"https://api.github.com/users/Tsrign/events{/privacy}","received_events_url":"https://api.github.com/users/Tsrign/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T13:16:05Z","updated_at":"2017-11-20T13:16:05Z","author_association":"NONE","body":"最终我想通过 bthread_list_join 函数实现 io 和 cpu 的半同步。 bthread_list_join 如同上述测试bthread_join 都是没能达到目标，不知道哪里出问题了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345692283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345903765","html_url":"https://github.com/apache/brpc/issues/122#issuecomment-345903765","issue_url":"https://api.github.com/repos/apache/brpc/issues/122","id":345903765,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTkwMzc2NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T03:13:08Z","updated_at":"2017-11-21T03:13:08Z","author_association":"CONTRIBUTOR","body":"这个接口是不跨client/server的，client端调用cancel并不会**直接**导致server端的IsCancel为true。server端的IsCanceled只是针对连接断开，你碰到的情况可能是恰好client端关闭了连接，被server发现了。但你的描述有问题的地方在于，如果IsCanceled为true，NotifyOnCancel注册时的回调是会被调用的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345903765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345904076","html_url":"https://github.com/apache/brpc/issues/121#issuecomment-345904076","issue_url":"https://api.github.com/repos/apache/brpc/issues/121","id":345904076,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTkwNDA3Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T03:15:22Z","updated_at":"2017-11-21T03:15:22Z","author_association":"CONTRIBUTOR","body":"bthread_id_join的参数是bthread_id_t, bthread_join的参数是bthread_t, 这是完全不同的两个东西。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345904076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345904519","html_url":"https://github.com/apache/brpc/issues/119#issuecomment-345904519","issue_url":"https://api.github.com/repos/apache/brpc/issues/119","id":345904519,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTkwNDUxOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T03:18:15Z","updated_at":"2017-11-21T03:18:15Z","author_association":"CONTRIBUTOR","body":"定义在头文件中的static变量在每个包含它的Compilation unit中都有一份，各用各的了。虽然这里没有链接错误，但bvar多半是会报重名的fatal错误的，可能你没注意。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345904519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345919138","html_url":"https://github.com/apache/brpc/issues/121#issuecomment-345919138","issue_url":"https://api.github.com/repos/apache/brpc/issues/121","id":345919138,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTkxOTEzOA==","user":{"login":"Tsrign","id":10807479,"node_id":"MDQ6VXNlcjEwODA3NDc5","avatar_url":"https://avatars.githubusercontent.com/u/10807479?v=4","gravatar_id":"","url":"https://api.github.com/users/Tsrign","html_url":"https://github.com/Tsrign","followers_url":"https://api.github.com/users/Tsrign/followers","following_url":"https://api.github.com/users/Tsrign/following{/other_user}","gists_url":"https://api.github.com/users/Tsrign/gists{/gist_id}","starred_url":"https://api.github.com/users/Tsrign/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tsrign/subscriptions","organizations_url":"https://api.github.com/users/Tsrign/orgs","repos_url":"https://api.github.com/users/Tsrign/repos","events_url":"https://api.github.com/users/Tsrign/events{/privacy}","received_events_url":"https://api.github.com/users/Tsrign/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T05:13:09Z","updated_at":"2017-11-21T05:13:09Z","author_association":"NONE","body":"你好，我查看bthread_id_t和 bthread_t 类型定义，我觉得 bthread_id_t 与 bthread_t 之间应该可以互相转化。\r\ncallid 是 badiu::rpc::Callid 类型，由 cntl 返回的。\r\n 3. bthread_id_join(bthread_id_t{callid.value});  OK  能等待 bthread 完成\r\n 4. bthread_join(callid.value, NULL); NOT OK  未能等待 bthread 完成","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345919138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345928936","html_url":"https://github.com/apache/brpc/issues/121#issuecomment-345928936","issue_url":"https://api.github.com/repos/apache/brpc/issues/121","id":345928936,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTkyODkzNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T06:22:51Z","updated_at":"2017-11-21T06:22:51Z","author_association":"CONTRIBUTOR","body":"bthread_t是对应一个bthread，bthread_id_t是对应一个bthread_id，这两个东西完全没有关系。不是说类型兼容就可以“互相转化”，何况你还是取callid的内部字段value出来。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345928936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345935670","html_url":"https://github.com/apache/brpc/issues/122#issuecomment-345935670","issue_url":"https://api.github.com/repos/apache/brpc/issues/122","id":345935670,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTkzNTY3MA==","user":{"login":"tjb1216","id":6902833,"node_id":"MDQ6VXNlcjY5MDI4MzM=","avatar_url":"https://avatars.githubusercontent.com/u/6902833?v=4","gravatar_id":"","url":"https://api.github.com/users/tjb1216","html_url":"https://github.com/tjb1216","followers_url":"https://api.github.com/users/tjb1216/followers","following_url":"https://api.github.com/users/tjb1216/following{/other_user}","gists_url":"https://api.github.com/users/tjb1216/gists{/gist_id}","starred_url":"https://api.github.com/users/tjb1216/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjb1216/subscriptions","organizations_url":"https://api.github.com/users/tjb1216/orgs","repos_url":"https://api.github.com/users/tjb1216/repos","events_url":"https://api.github.com/users/tjb1216/events{/privacy}","received_events_url":"https://api.github.com/users/tjb1216/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T07:04:09Z","updated_at":"2017-11-21T07:04:09Z","author_association":"NONE","body":"// Asks that the given callback be called when the RPC is canceled or the\r\n// connection has broken. \r\n我的理解是：客户端取消rpc或者断开连接时，服务端会调用注册的回调。\r\n如果我理解不对的话，NotifyOnCancel的用途是什么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345935670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345953329","html_url":"https://github.com/apache/brpc/issues/122#issuecomment-345953329","issue_url":"https://api.github.com/repos/apache/brpc/issues/122","id":345953329,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTk1MzMyOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T08:33:51Z","updated_at":"2017-11-21T08:33:51Z","author_association":"CONTRIBUTOR","body":"这个注释是从通用的角度说的，但\"when the rpc is canceled\"这条并未实现。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345953329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345955170","html_url":"https://github.com/apache/brpc/issues/118#issuecomment-345955170","issue_url":"https://api.github.com/repos/apache/brpc/issues/118","id":345955170,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTk1NTE3MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T08:41:35Z","updated_at":"2017-11-21T08:41:35Z","author_association":"CONTRIBUTOR","body":"你说的cluster是特指redis cluster吧，这个协议是可以基于基本的redis协议封装出来的，但目前brpc并不直接支持。你可以用专门的proxy做这个事情。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345955170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345957728","html_url":"https://github.com/apache/brpc/issues/118#issuecomment-345957728","issue_url":"https://api.github.com/repos/apache/brpc/issues/118","id":345957728,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTk1NzcyOA==","user":{"login":"seiyap70","id":7539640,"node_id":"MDQ6VXNlcjc1Mzk2NDA=","avatar_url":"https://avatars.githubusercontent.com/u/7539640?v=4","gravatar_id":"","url":"https://api.github.com/users/seiyap70","html_url":"https://github.com/seiyap70","followers_url":"https://api.github.com/users/seiyap70/followers","following_url":"https://api.github.com/users/seiyap70/following{/other_user}","gists_url":"https://api.github.com/users/seiyap70/gists{/gist_id}","starred_url":"https://api.github.com/users/seiyap70/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seiyap70/subscriptions","organizations_url":"https://api.github.com/users/seiyap70/orgs","repos_url":"https://api.github.com/users/seiyap70/repos","events_url":"https://api.github.com/users/seiyap70/events{/privacy}","received_events_url":"https://api.github.com/users/seiyap70/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T08:52:07Z","updated_at":"2017-11-21T08:52:07Z","author_association":"NONE","body":"哦，明白了，brpc支持的集群是指每个Redis作为一个单独的节点，然后使用一致性哈希或者MD5映射分配到不同的节点。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/345957728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346013765","html_url":"https://github.com/apache/brpc/issues/122#issuecomment-346013765","issue_url":"https://api.github.com/repos/apache/brpc/issues/122","id":346013765,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjAxMzc2NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T12:36:16Z","updated_at":"2017-11-21T12:36:16Z","author_association":"CONTRIBUTOR","body":"”服务端发出的请求\" ?\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346013765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346237477","html_url":"https://github.com/apache/brpc/issues/122#issuecomment-346237477","issue_url":"https://api.github.com/repos/apache/brpc/issues/122","id":346237477,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjIzNzQ3Nw==","user":{"login":"tjb1216","id":6902833,"node_id":"MDQ6VXNlcjY5MDI4MzM=","avatar_url":"https://avatars.githubusercontent.com/u/6902833?v=4","gravatar_id":"","url":"https://api.github.com/users/tjb1216","html_url":"https://github.com/tjb1216","followers_url":"https://api.github.com/users/tjb1216/followers","following_url":"https://api.github.com/users/tjb1216/following{/other_user}","gists_url":"https://api.github.com/users/tjb1216/gists{/gist_id}","starred_url":"https://api.github.com/users/tjb1216/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjb1216/subscriptions","organizations_url":"https://api.github.com/users/tjb1216/orgs","repos_url":"https://api.github.com/users/tjb1216/repos","events_url":"https://api.github.com/users/tjb1216/events{/privacy}","received_events_url":"https://api.github.com/users/tjb1216/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T04:05:58Z","updated_at":"2017-11-22T04:05:58Z","author_association":"NONE","body":"是，我们想要实现的是一个链路取消的功能，在一个请求链路中，一个服务端也会是下一个服务端的客户端，会往下一个节点发请求，如A-->B-->C；B是A的服务端，也是C的客户端。那么当A的请求取消的时候，我们想要B到C的同一个链路的请求也取消，避免浪费资源。\r\n从目前的测试结果来看，B上NotifyOnCancel注册的回调函数只在两种情况下执行：\r\n1：B发给C的请求顺利完成或超时；\r\n2：A断开到B的连接，A发给B的请求达到超时时间；\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346237477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346238618","html_url":"https://github.com/apache/brpc/issues/122#issuecomment-346238618","issue_url":"https://api.github.com/repos/apache/brpc/issues/122","id":346238618,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjIzODYxOA==","user":{"login":"tjb1216","id":6902833,"node_id":"MDQ6VXNlcjY5MDI4MzM=","avatar_url":"https://avatars.githubusercontent.com/u/6902833?v=4","gravatar_id":"","url":"https://api.github.com/users/tjb1216","html_url":"https://github.com/tjb1216","followers_url":"https://api.github.com/users/tjb1216/followers","following_url":"https://api.github.com/users/tjb1216/following{/other_user}","gists_url":"https://api.github.com/users/tjb1216/gists{/gist_id}","starred_url":"https://api.github.com/users/tjb1216/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjb1216/subscriptions","organizations_url":"https://api.github.com/users/tjb1216/orgs","repos_url":"https://api.github.com/users/tjb1216/repos","events_url":"https://api.github.com/users/tjb1216/events{/privacy}","received_events_url":"https://api.github.com/users/tjb1216/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T04:15:14Z","updated_at":"2017-11-22T04:15:14Z","author_association":"NONE","body":"这个注释是从通用的角度说的，但\"when the rpc is canceled\"这条并未实现。\r\ncancel为什么不实现呢，是有难度还是觉得意义不大？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346238618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346253348","html_url":"https://github.com/apache/brpc/issues/122#issuecomment-346253348","issue_url":"https://api.github.com/repos/apache/brpc/issues/122","id":346253348,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjI1MzM0OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T06:11:06Z","updated_at":"2017-11-22T06:11:06Z","author_association":"CONTRIBUTOR","body":"你说的两个现象是符合预期的。事实上超时和NotifyOnCancel也没有关系，可能是因为client端用的是连接池或短链接，超时后会关闭连接，从而触发了NotifyOnCancel。本质上还是只有连接断开或当前请求处理结束会触发server端的NotifyOnCancel。不实现的原因在于RPC的大部分应用场景中，单个请求的代价都不是很大，所以server cancelation的应用场景比较少，真正特别需要这个功能的产品会自己做类似的功能。另一方面cancel本身要耗费一个RPC在一些场景中可能是负面作用，这里需要一些优化技巧。只支持原地cancel还是能跑到另一台server上去做cancel (cross-server cancelation in backup requests)，这个差别也很大。最后不同的协议支持跨机器cancel的方式可能是不同的，要根据协议特点对应设计，比较麻烦。综合这些因素就没有做跨机器的cancel。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346253348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346254051","html_url":"https://github.com/apache/brpc/issues/123#issuecomment-346254051","issue_url":"https://api.github.com/repos/apache/brpc/issues/123","id":346254051,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjI1NDA1MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T06:15:55Z","updated_at":"2017-11-22T06:15:55Z","author_association":"CONTRIBUTOR","body":"这个变量原子与否是不重要的，它只是一个退出标识。volatile只是避免编译器做过度优化。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346254051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346271362","html_url":"https://github.com/apache/brpc/issues/122#issuecomment-346271362","issue_url":"https://api.github.com/repos/apache/brpc/issues/122","id":346271362,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjI3MTM2Mg==","user":{"login":"tjb1216","id":6902833,"node_id":"MDQ6VXNlcjY5MDI4MzM=","avatar_url":"https://avatars.githubusercontent.com/u/6902833?v=4","gravatar_id":"","url":"https://api.github.com/users/tjb1216","html_url":"https://github.com/tjb1216","followers_url":"https://api.github.com/users/tjb1216/followers","following_url":"https://api.github.com/users/tjb1216/following{/other_user}","gists_url":"https://api.github.com/users/tjb1216/gists{/gist_id}","starred_url":"https://api.github.com/users/tjb1216/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjb1216/subscriptions","organizations_url":"https://api.github.com/users/tjb1216/orgs","repos_url":"https://api.github.com/users/tjb1216/repos","events_url":"https://api.github.com/users/tjb1216/events{/privacy}","received_events_url":"https://api.github.com/users/tjb1216/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T07:58:37Z","updated_at":"2017-11-22T07:58:37Z","author_association":"NONE","body":"了解了，谢谢及时回复，32个赞！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346271362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346361039","html_url":"https://github.com/apache/brpc/issues/125#issuecomment-346361039","issue_url":"https://api.github.com/repos/apache/brpc/issues/125","id":346361039,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjM2MTAzOQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T14:12:08Z","updated_at":"2017-11-22T14:12:08Z","author_association":"MEMBER","body":"@rongliang666 看下这个 https://github.com/brpc/brpc/blob/master/docs/cn/new_protocol.md","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346361039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346523552","html_url":"https://github.com/apache/brpc/issues/126#issuecomment-346523552","issue_url":"https://api.github.com/repos/apache/brpc/issues/126","id":346523552,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjUyMzU1Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-23T03:09:27Z","updated_at":"2017-11-23T03:09:27Z","author_association":"CONTRIBUTOR","body":"是","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346523552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346523689","html_url":"https://github.com/apache/brpc/issues/117#issuecomment-346523689","issue_url":"https://api.github.com/repos/apache/brpc/issues/117","id":346523689,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjUyMzY4OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-23T03:11:15Z","updated_at":"2017-11-23T03:11:15Z","author_association":"CONTRIBUTOR","body":"libprotoc和protobuf-compiler在ubuntu上是两个库，看看是否兼容","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346523689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346523853","html_url":"https://github.com/apache/brpc/issues/124#issuecomment-346523853","issue_url":"https://api.github.com/repos/apache/brpc/issues/124","id":346523853,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjUyMzg1Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-23T03:13:07Z","updated_at":"2017-11-23T03:13:07Z","author_association":"CONTRIBUTOR","body":"Use a linux distro right now. Mac is not supported yet.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346523853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346525858","html_url":"https://github.com/apache/brpc/pull/120#issuecomment-346525858","issue_url":"https://api.github.com/repos/apache/brpc/issues/120","id":346525858,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjUyNTg1OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-23T03:36:37Z","updated_at":"2017-11-23T03:36:37Z","author_association":"CONTRIBUTOR","body":"cetcd本身是个轻量的库我觉得还是很好的，但两个依赖yajl和curl和brpc都没什么关系，看看能不能分别替换成rapidjson和brpc自己的http client。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346525858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346526082","html_url":"https://github.com/apache/brpc/pull/120#issuecomment-346526082","issue_url":"https://api.github.com/repos/apache/brpc/issues/120","id":346526082,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjUyNjA4Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-23T03:39:17Z","updated_at":"2017-11-23T03:39:17Z","author_association":"CONTRIBUTOR","body":"目前这个pr对应的travis-ci都是挂着的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346526082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346540260","html_url":"https://github.com/apache/brpc/issues/29#issuecomment-346540260","issue_url":"https://api.github.com/repos/apache/brpc/issues/29","id":346540260,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjU0MDI2MA==","user":{"login":"guangqianpeng","id":19160151,"node_id":"MDQ6VXNlcjE5MTYwMTUx","avatar_url":"https://avatars.githubusercontent.com/u/19160151?v=4","gravatar_id":"","url":"https://api.github.com/users/guangqianpeng","html_url":"https://github.com/guangqianpeng","followers_url":"https://api.github.com/users/guangqianpeng/followers","following_url":"https://api.github.com/users/guangqianpeng/following{/other_user}","gists_url":"https://api.github.com/users/guangqianpeng/gists{/gist_id}","starred_url":"https://api.github.com/users/guangqianpeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guangqianpeng/subscriptions","organizations_url":"https://api.github.com/users/guangqianpeng/orgs","repos_url":"https://api.github.com/users/guangqianpeng/repos","events_url":"https://api.github.com/users/guangqianpeng/events{/privacy}","received_events_url":"https://api.github.com/users/guangqianpeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-23T06:35:55Z","updated_at":"2017-11-23T06:35:55Z","author_association":"CONTRIBUTOR","body":"同求. 没有CMakeList很难在IDE上阅读和执行源码","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346540260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346564344","html_url":"https://github.com/apache/brpc/issues/126#issuecomment-346564344","issue_url":"https://api.github.com/repos/apache/brpc/issues/126","id":346564344,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjU2NDM0NA==","user":{"login":"tjb1216","id":6902833,"node_id":"MDQ6VXNlcjY5MDI4MzM=","avatar_url":"https://avatars.githubusercontent.com/u/6902833?v=4","gravatar_id":"","url":"https://api.github.com/users/tjb1216","html_url":"https://github.com/tjb1216","followers_url":"https://api.github.com/users/tjb1216/followers","following_url":"https://api.github.com/users/tjb1216/following{/other_user}","gists_url":"https://api.github.com/users/tjb1216/gists{/gist_id}","starred_url":"https://api.github.com/users/tjb1216/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjb1216/subscriptions","organizations_url":"https://api.github.com/users/tjb1216/orgs","repos_url":"https://api.github.com/users/tjb1216/repos","events_url":"https://api.github.com/users/tjb1216/events{/privacy}","received_events_url":"https://api.github.com/users/tjb1216/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-23T09:14:58Z","updated_at":"2017-11-23T09:14:58Z","author_association":"NONE","body":"file:// 请问这个file-path如果是绝对路径要怎么填？\r\n启动命令：./client -server=file:///ads-backend/consul/template/backup/sag_brpc_test -load_balancer=rr\r\n报错：Fail to open `ads-backend/consul/template/backup/sag_brpc_test': No such file or directory [2]\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346564344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346568186","html_url":"https://github.com/apache/brpc/pull/120#issuecomment-346568186","issue_url":"https://api.github.com/repos/apache/brpc/issues/120","id":346568186,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjU2ODE4Ng==","user":{"login":"advancedxy","id":807537,"node_id":"MDQ6VXNlcjgwNzUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/807537?v=4","gravatar_id":"","url":"https://api.github.com/users/advancedxy","html_url":"https://github.com/advancedxy","followers_url":"https://api.github.com/users/advancedxy/followers","following_url":"https://api.github.com/users/advancedxy/following{/other_user}","gists_url":"https://api.github.com/users/advancedxy/gists{/gist_id}","starred_url":"https://api.github.com/users/advancedxy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/advancedxy/subscriptions","organizations_url":"https://api.github.com/users/advancedxy/orgs","repos_url":"https://api.github.com/users/advancedxy/repos","events_url":"https://api.github.com/users/advancedxy/events{/privacy}","received_events_url":"https://api.github.com/users/advancedxy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-23T09:32:47Z","updated_at":"2017-11-23T09:32:47Z","author_association":"NONE","body":"提几个小 comments:\r\n1. 注释中 protobuf 相关的应把后面的 3 或者 3.2 的版本信息去掉, brpc 支持 2.4+ -- 3.x 的全系列 protobuf\r\n2. 建议拆开多个 PR 来提, compile_proto.py 和 CMakeLists.txt 支持可以先提, 并支持在 travis 进行 cmake 编译构建.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346568186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346573181","html_url":"https://github.com/apache/brpc/issues/100#issuecomment-346573181","issue_url":"https://api.github.com/repos/apache/brpc/issues/100","id":346573181,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjU3MzE4MQ==","user":{"login":"zheng39562","id":10336983,"node_id":"MDQ6VXNlcjEwMzM2OTgz","avatar_url":"https://avatars.githubusercontent.com/u/10336983?v=4","gravatar_id":"","url":"https://api.github.com/users/zheng39562","html_url":"https://github.com/zheng39562","followers_url":"https://api.github.com/users/zheng39562/followers","following_url":"https://api.github.com/users/zheng39562/following{/other_user}","gists_url":"https://api.github.com/users/zheng39562/gists{/gist_id}","starred_url":"https://api.github.com/users/zheng39562/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zheng39562/subscriptions","organizations_url":"https://api.github.com/users/zheng39562/orgs","repos_url":"https://api.github.com/users/zheng39562/repos","events_url":"https://api.github.com/users/zheng39562/events{/privacy}","received_events_url":"https://api.github.com/users/zheng39562/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-23T09:54:45Z","updated_at":"2017-11-23T09:55:42Z","author_association":"NONE","body":"我也遇见了。问题在于：proto-dev 和 proto-compiler 的版本必须一致。\r\n我出现的情况在：之前使用过protobuf的某个版本，导致dev 和compiler不一致。\r\n如果出现此问题，建议先清空电脑上的protobuf/protoc等相关依赖，然后重新进行编译。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346573181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346733996","html_url":"https://github.com/apache/brpc/issues/127#issuecomment-346733996","issue_url":"https://api.github.com/repos/apache/brpc/issues/127","id":346733996,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjczMzk5Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T03:15:03Z","updated_at":"2017-11-24T03:15:03Z","author_association":"CONTRIBUTOR","body":"opentracing统一数据格式了么？似乎并没有。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346733996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346764080","html_url":"https://github.com/apache/brpc/issues/126#issuecomment-346764080","issue_url":"https://api.github.com/repos/apache/brpc/issues/126","id":346764080,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc2NDA4MA==","user":{"login":"tjb1216","id":6902833,"node_id":"MDQ6VXNlcjY5MDI4MzM=","avatar_url":"https://avatars.githubusercontent.com/u/6902833?v=4","gravatar_id":"","url":"https://api.github.com/users/tjb1216","html_url":"https://github.com/tjb1216","followers_url":"https://api.github.com/users/tjb1216/followers","following_url":"https://api.github.com/users/tjb1216/following{/other_user}","gists_url":"https://api.github.com/users/tjb1216/gists{/gist_id}","starred_url":"https://api.github.com/users/tjb1216/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjb1216/subscriptions","organizations_url":"https://api.github.com/users/tjb1216/orgs","repos_url":"https://api.github.com/users/tjb1216/repos","events_url":"https://api.github.com/users/tjb1216/events{/privacy}","received_events_url":"https://api.github.com/users/tjb1216/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T07:54:27Z","updated_at":"2017-11-24T07:54:27Z","author_association":"NONE","body":"@jamesge ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346764080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346772546","html_url":"https://github.com/apache/brpc/issues/128#issuecomment-346772546","issue_url":"https://api.github.com/repos/apache/brpc/issues/128","id":346772546,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc3MjU0Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T08:41:05Z","updated_at":"2017-11-24T08:41:05Z","author_association":"CONTRIBUTOR","body":"Duplicate of #90 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346772546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346772670","html_url":"https://github.com/apache/brpc/issues/129#issuecomment-346772670","issue_url":"https://api.github.com/repos/apache/brpc/issues/129","id":346772670,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc3MjY3MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T08:41:41Z","updated_at":"2017-11-24T08:41:41Z","author_association":"CONTRIBUTOR","body":"brpc要先编译成功，才能编译example","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346772670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346773428","html_url":"https://github.com/apache/brpc/issues/90#issuecomment-346773428","issue_url":"https://api.github.com/repos/apache/brpc/issues/90","id":346773428,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc3MzQyOA==","user":{"login":"liaosimin","id":9331678,"node_id":"MDQ6VXNlcjkzMzE2Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/9331678?v=4","gravatar_id":"","url":"https://api.github.com/users/liaosimin","html_url":"https://github.com/liaosimin","followers_url":"https://api.github.com/users/liaosimin/followers","following_url":"https://api.github.com/users/liaosimin/following{/other_user}","gists_url":"https://api.github.com/users/liaosimin/gists{/gist_id}","starred_url":"https://api.github.com/users/liaosimin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liaosimin/subscriptions","organizations_url":"https://api.github.com/users/liaosimin/orgs","repos_url":"https://api.github.com/users/liaosimin/repos","events_url":"https://api.github.com/users/liaosimin/events{/privacy}","received_events_url":"https://api.github.com/users/liaosimin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T08:45:34Z","updated_at":"2017-11-24T08:45:34Z","author_association":"NONE","body":"搞掂了。一语中的。高","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346773428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346776237","html_url":"https://github.com/apache/brpc/issues/130#issuecomment-346776237","issue_url":"https://api.github.com/repos/apache/brpc/issues/130","id":346776237,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc3NjIzNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T08:58:57Z","updated_at":"2017-11-24T08:58:57Z","author_association":"CONTRIBUTOR","body":"/status上可以看到对应方法的processing字段，代表正在处理的请求个数，可以看下是多少","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346776237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346777162","html_url":"https://github.com/apache/brpc/issues/126#issuecomment-346777162","issue_url":"https://api.github.com/repos/apache/brpc/issues/126","id":346777162,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc3NzE2Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T09:03:25Z","updated_at":"2017-11-24T09:03:25Z","author_association":"CONTRIBUTOR","body":"@tjb1216 https://github.com/brpc/brpc/commit/6c34eb537f453207238047036133fe9dd74ae58b","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346777162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346787316","html_url":"https://github.com/apache/brpc/issues/130#issuecomment-346787316","issue_url":"https://api.github.com/repos/apache/brpc/issues/130","id":346787316,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc4NzMxNg==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T09:49:49Z","updated_at":"2017-11-24T09:49:49Z","author_association":"NONE","body":"不好意思，刚才进程被kill掉了， 我又运行了一下，虽然没有完全复现 ，但是已经复现一部分了， 我保持发的压力不变，运行一段时间后qps从6万一下降到3千，processing 在8 和7之间变化，应该是已经出问题了\r\n@jamesge ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346787316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346787672","html_url":"https://github.com/apache/brpc/issues/130#issuecomment-346787672","issue_url":"https://api.github.com/repos/apache/brpc/issues/130","id":346787672,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc4NzY3Mg==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T09:51:19Z","updated_at":"2017-11-24T09:51:55Z","author_association":"NONE","body":"[](url)\r\n<img width=\"810\" alt=\"2017-11-24 5 50 28\" src=\"https://user-images.githubusercontent.com/8623385/33204928-0f8dd632-d140-11e7-8b42-e8c0c5391989.png\">\r\n图中高亮部分为出问题时间点，后面就一直不行了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346787672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346788227","html_url":"https://github.com/apache/brpc/issues/130#issuecomment-346788227","issue_url":"https://api.github.com/repos/apache/brpc/issues/130","id":346788227,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc4ODIyNw==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T09:53:52Z","updated_at":"2017-11-24T09:53:52Z","author_association":"NONE","body":"<img width=\"824\" alt=\"2017-11-24 5 53 16\" src=\"https://user-images.githubusercontent.com/8623385/33205013-61d174a8-d140-11e7-9550-c312eea98585.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346788227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346795328","html_url":"https://github.com/apache/brpc/issues/130#issuecomment-346795328","issue_url":"https://api.github.com/repos/apache/brpc/issues/130","id":346795328,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc5NTMyOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T10:26:40Z","updated_at":"2017-11-24T10:26:40Z","author_association":"CONTRIBUTOR","body":"什么协议？server的done总是被调用了么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346795328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346796929","html_url":"https://github.com/apache/brpc/issues/130#issuecomment-346796929","issue_url":"https://api.github.com/repos/apache/brpc/issues/130","id":346796929,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc5NjkyOQ==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T10:34:05Z","updated_at":"2017-11-24T10:34:05Z","author_association":"NONE","body":"Server done->Run()是肯定调用了的， 出问题协议是sofa-pbrpc, 换成brpc协议同样的方式没有出问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346796929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346798419","html_url":"https://github.com/apache/brpc/issues/130#issuecomment-346798419","issue_url":"https://api.github.com/repos/apache/brpc/issues/130","id":346798419,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc5ODQxOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T10:41:27Z","updated_at":"2017-11-24T10:41:27Z","author_association":"CONTRIBUTOR","body":"这两个协议这部分代码基本上是一样的。你可以再测试一下hulu_pbrpc这个协议有没有问题，以及client完全退出后，processing能否归0.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346798419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346799291","html_url":"https://github.com/apache/brpc/issues/130#issuecomment-346799291","issue_url":"https://api.github.com/repos/apache/brpc/issues/130","id":346799291,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc5OTI5MQ==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T10:45:41Z","updated_at":"2017-11-24T10:45:41Z","author_association":"NONE","body":"我这边没法测试hulu_pbrpc,  我是直接把client kill -9 , 然后就出问题了， 应该还是服务端的问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346799291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346801200","html_url":"https://github.com/apache/brpc/issues/130#issuecomment-346801200","issue_url":"https://api.github.com/repos/apache/brpc/issues/130","id":346801200,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjgwMTIwMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T10:54:19Z","updated_at":"2017-11-24T10:54:19Z","author_association":"CONTRIBUTOR","body":"qps下降不能说明一定有问题，也可能是server不停在做的事情就是变慢了。看下这个“以及client完全退出后，processing能否归0.”","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346801200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346803204","html_url":"https://github.com/apache/brpc/issues/130#issuecomment-346803204","issue_url":"https://api.github.com/repos/apache/brpc/issues/130","id":346803204,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjgwMzIwNA==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T11:03:56Z","updated_at":"2017-11-24T11:04:27Z","author_association":"NONE","body":"我看了出问题时候的cpu, 也下降了相应的倍数，而且我对server很清楚，不可能做其他事情，client退出后没有变为0","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/346803204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347065380","html_url":"https://github.com/apache/brpc/issues/132#issuecomment-347065380","issue_url":"https://api.github.com/repos/apache/brpc/issues/132","id":347065380,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzA2NTM4MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T02:48:53Z","updated_at":"2017-11-27T02:48:53Z","author_association":"CONTRIBUTOR","body":"pub/sub是纯server端功能，肯定是支持的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347065380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347068844","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347068844","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347068844,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzA2ODg0NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T03:18:59Z","updated_at":"2017-11-27T03:18:59Z","author_association":"CONTRIBUTOR","body":"channel和socket是多对多的关系，多个channel可以共用一个socket（通过引用计数），一个channel也可以指向多个socket（连接集群）。\r\n长连接并不需要“保存住channel实例并重用它”。重用的主要原因是连接集群的channel在Init时要连接一次名字服务，一般不会很快，所以要重用。\r\n有一个edge case是：最后一个channel析构时会销毁对应的socket，如果一个socket只被一个channel引用，且那个channel反复地创建析构，那么对应的socket就会被反复地创建析构，类似于短链接。要规避这个情况，一般可以设置[-defer_close_second](https://github.com/brpc/brpc/blob/master/docs/cn/client.md#延迟关闭连接)，或者复用channel。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347068844/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347075037","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347075037","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347075037,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzA3NTAzNw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T04:17:12Z","updated_at":"2017-11-27T05:00:29Z","author_association":"CONTRIBUTOR","body":"@jamesge 多谢解惑。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347075037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347075477","html_url":"https://github.com/apache/brpc/issues/132#issuecomment-347075477","issue_url":"https://api.github.com/repos/apache/brpc/issues/132","id":347075477,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzA3NTQ3Nw==","user":{"login":"tjb1216","id":6902833,"node_id":"MDQ6VXNlcjY5MDI4MzM=","avatar_url":"https://avatars.githubusercontent.com/u/6902833?v=4","gravatar_id":"","url":"https://api.github.com/users/tjb1216","html_url":"https://github.com/tjb1216","followers_url":"https://api.github.com/users/tjb1216/followers","following_url":"https://api.github.com/users/tjb1216/following{/other_user}","gists_url":"https://api.github.com/users/tjb1216/gists{/gist_id}","starred_url":"https://api.github.com/users/tjb1216/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjb1216/subscriptions","organizations_url":"https://api.github.com/users/tjb1216/orgs","repos_url":"https://api.github.com/users/tjb1216/repos","events_url":"https://api.github.com/users/tjb1216/events{/privacy}","received_events_url":"https://api.github.com/users/tjb1216/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T04:21:39Z","updated_at":"2017-11-27T04:21:39Z","author_association":"NONE","body":"以下是运行example下的redis_client，收到publish消息后的报错信息：\r\nredis 127.0.0.1:6379> subscribe test_channel\r\n[\"subscribe\", \"test_channel\", (integer) 1]\r\nredis 127.0.0.1:6379> WARNING: Logging before InitGoogleLogging() is written to STDERR\r\nW1127 12:17:44.279266 26746 redis_protocol.cpp:69] No corresponding PipelinedInfo in socket\r\nE1127 12:17:44.279451 26746 input_messenger.cpp:87] Fail to parse response from 127.0.0.1:6379 by redis at client-side\r\nW1127 12:17:44.279470 26746 input_messenger.cpp:249] Close fd=3 SocketId=0@127.0.0.1:6379@26437: absolutely wrong message\r\nI1127 12:17:44.380089 26752 socket.cpp:2091] Checking SocketId=0@127.0.0.1:6379\r\nI1127 12:17:44.380267 26746 socket.cpp:2153] Revived SocketId=0@127.0.0.1:6379","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347075477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347092924","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347092924","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347092924,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzA5MjkyNA==","user":{"login":"cool-colo","id":20718701,"node_id":"MDQ6VXNlcjIwNzE4NzAx","avatar_url":"https://avatars.githubusercontent.com/u/20718701?v=4","gravatar_id":"","url":"https://api.github.com/users/cool-colo","html_url":"https://github.com/cool-colo","followers_url":"https://api.github.com/users/cool-colo/followers","following_url":"https://api.github.com/users/cool-colo/following{/other_user}","gists_url":"https://api.github.com/users/cool-colo/gists{/gist_id}","starred_url":"https://api.github.com/users/cool-colo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cool-colo/subscriptions","organizations_url":"https://api.github.com/users/cool-colo/orgs","repos_url":"https://api.github.com/users/cool-colo/repos","events_url":"https://api.github.com/users/cool-colo/events{/privacy}","received_events_url":"https://api.github.com/users/cool-colo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T06:47:30Z","updated_at":"2017-11-27T06:53:25Z","author_association":"NONE","body":"@jamesge 顺便问一句，http connection type设置成short，即使复用channel, 每次请求也是新建连接吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347092924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347106658","html_url":"https://github.com/apache/brpc/issues/132#issuecomment-347106658","issue_url":"https://api.github.com/repos/apache/brpc/issues/132","id":347106658,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzEwNjY1OA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T08:09:43Z","updated_at":"2017-11-27T08:09:43Z","author_association":"CONTRIBUTOR","body":"@jamesge ：我看了一下源码，猜测了一下原因，不知道是否正确。现在实现的PipelinedInfo应该是基于一个假设：redis请求message和redis响应message是一一对应的。而redis subscribe命令，打破了这个假设，该命令只有一个请求message，而却可以有无限多个响应message，所以造成了client无法正常工作。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347106658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347118437","html_url":"https://github.com/apache/brpc/issues/127#issuecomment-347118437","issue_url":"https://api.github.com/repos/apache/brpc/issues/127","id":347118437,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzExODQzNw==","user":{"login":"xmm1989218","id":983106,"node_id":"MDQ6VXNlcjk4MzEwNg==","avatar_url":"https://avatars.githubusercontent.com/u/983106?v=4","gravatar_id":"","url":"https://api.github.com/users/xmm1989218","html_url":"https://github.com/xmm1989218","followers_url":"https://api.github.com/users/xmm1989218/followers","following_url":"https://api.github.com/users/xmm1989218/following{/other_user}","gists_url":"https://api.github.com/users/xmm1989218/gists{/gist_id}","starred_url":"https://api.github.com/users/xmm1989218/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xmm1989218/subscriptions","organizations_url":"https://api.github.com/users/xmm1989218/orgs","repos_url":"https://api.github.com/users/xmm1989218/repos","events_url":"https://api.github.com/users/xmm1989218/events{/privacy}","received_events_url":"https://api.github.com/users/xmm1989218/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T09:03:55Z","updated_at":"2017-11-27T09:03:55Z","author_association":"NONE","body":"额 是没有 有没有可能接入比较知名的 比如zipkin之类的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347118437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347168765","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347168765","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347168765,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzE2ODc2NQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T12:33:21Z","updated_at":"2017-11-27T12:33:21Z","author_association":"CONTRIBUTOR","body":"@jamesge 我看了一下源码和文档，试图修改http example，看一下连接重用的情况（代码如下）。因为`idle_timeout_second`的默认值是10秒钟，所以我就加了个9秒钟的循环，期望看到和服务端之间只有一个TCP连接存在，但tcpdump抓包发现每隔9秒钟就多一个time-wait状态的TCP连接，和期望不符合，求解惑。\r\n\r\n`    while (true) {\r\n      // A Channel represents a communication line to a Server. Notice that\r\n      // Channel is thread-safe and can be shared by all threads in your program.\r\n      brpc::Channel channel;\r\n      brpc::ChannelOptions options;\r\n      options.protocol = FLAGS_protocol;\r\n      options.timeout_ms = FLAGS_timeout_ms/*milliseconds*/;\r\n      options.max_retry = FLAGS_max_retry;\r\n\r\n      // Initialize the channel, NULL means using default options.\r\n      // options, see `brpc/channel.h'.\r\n      if (channel.Init(url, FLAGS_load_balancer.c_str(), &options) != 0) {\r\n        LOG(ERROR) << \"Fail to initialize channel\";\r\n        return -1; \r\n      }   \r\n\r\n      // We will receive response synchronously, safe to put variables\r\n      // on stack.\r\n      brpc::Controller cntl;\r\n\r\n      cntl.http_request().uri() = url;\r\n      if (!FLAGS_d.empty()) {\r\n        cntl.http_request().set_method(brpc::HTTP_METHOD_POST);\r\n        cntl.request_attachment().append(FLAGS_d);\r\n      }\r\n\r\n      // Because `done'(last parameter) is NULL, this function waits until\r\n      // the response comes back or error occurs(including timedout).\r\n      channel.CallMethod(NULL, &cntl, NULL, NULL, NULL);\r\n      if (cntl.Failed()) {\r\n        std::cerr << cntl.ErrorText() << std::endl;\r\n        return -1;\r\n      }\r\n      // If -http_verbose is on, brpc already prints the response to stderr.\r\n      if (!brpc::FLAGS_http_verbose) {\r\n        std::cout << cntl.response_attachment() << std::endl;\r\n      }\r\n      std::this_thread::sleep_for(std::chrono::seconds(9));\r\n    }`\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347168765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347174244","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347174244","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347174244,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzE3NDI0NA==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T12:57:47Z","updated_at":"2017-11-27T12:57:47Z","author_association":"MEMBER","body":"idle timeout 是server的配置.  client端的socket如果没有被任何channel或者RPC引用的话， 默认是直接释放。 如果希望延迟释放需要配置一下 --defer_close_second","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347174244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347334572","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347334572","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347334572,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzMzNDU3Mg==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T21:30:31Z","updated_at":"2017-11-28T02:07:51Z","author_association":"CONTRIBUTOR","body":"@chenzhangyi  这个文档和你讲的不一致，文档上说的都是客户端行为，文档链接 https://github.com/brpc/brpc/blob/master/docs/cn/client.md","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347334572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347394246","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347394246","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347394246,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM5NDI0Ng==","user":{"login":"cool-colo","id":20718701,"node_id":"MDQ6VXNlcjIwNzE4NzAx","avatar_url":"https://avatars.githubusercontent.com/u/20718701?v=4","gravatar_id":"","url":"https://api.github.com/users/cool-colo","html_url":"https://github.com/cool-colo","followers_url":"https://api.github.com/users/cool-colo/followers","following_url":"https://api.github.com/users/cool-colo/following{/other_user}","gists_url":"https://api.github.com/users/cool-colo/gists{/gist_id}","starred_url":"https://api.github.com/users/cool-colo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cool-colo/subscriptions","organizations_url":"https://api.github.com/users/cool-colo/orgs","repos_url":"https://api.github.com/users/cool-colo/repos","events_url":"https://api.github.com/users/cool-colo/events{/privacy}","received_events_url":"https://api.github.com/users/cool-colo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T02:31:27Z","updated_at":"2017-11-28T02:31:27Z","author_association":"NONE","body":"@gydong 我也在测试brpc http client, ，10秒idle关闭连接没问题。  你上面的例子每9秒channel就析构了，而对应的socket又没有别的channel引用， 就会被close了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347394246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347395777","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347395777","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347395777,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM5NTc3Nw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T02:41:25Z","updated_at":"2017-11-28T02:41:25Z","author_association":"CONTRIBUTOR","body":"@cool-colo 明白了。那我要重用连接的话，还是设置defer_close_second吧。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347395777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347396014","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347396014","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347396014,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM5NjAxNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T02:43:02Z","updated_at":"2017-11-28T02:43:02Z","author_association":"CONTRIBUTOR","body":"@cool-colo 设置为short即使复用channel每次也新建连接。\r\n@gydong client端的是一个gflags叫-idle_timeout_second，关闭的是连接池中长久不用的连接；而server端的是ServerOptions中的idle_timeout_sec，关闭的是server端长久不用的连接。名字相似是历史问题，但并不是同一个东西。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347396014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347396256","html_url":"https://github.com/apache/brpc/issues/132#issuecomment-347396256","issue_url":"https://api.github.com/repos/apache/brpc/issues/132","id":347396256,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM5NjI1Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T02:44:32Z","updated_at":"2017-11-28T02:44:32Z","author_association":"CONTRIBUTOR","body":"如果pub/sub是这么工作的，那么目前的代码确实是不行的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347396256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347397378","html_url":"https://github.com/apache/brpc/issues/127#issuecomment-347397378","issue_url":"https://api.github.com/repos/apache/brpc/issues/127","id":347397378,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM5NzM3OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T02:51:48Z","updated_at":"2017-11-28T02:51:48Z","author_association":"CONTRIBUTOR","body":"如果有具体的接入spec（数据格式为主），我们可以评估一下接入的难度。这块如果需求比较多样（我看到的比如zipkin, aws x-ray, 国内xx云），也许会加个通用的扩展接口让用户自己扩展。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347397378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347397989","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347397989","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347397989,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM5Nzk4OQ==","user":{"login":"cool-colo","id":20718701,"node_id":"MDQ6VXNlcjIwNzE4NzAx","avatar_url":"https://avatars.githubusercontent.com/u/20718701?v=4","gravatar_id":"","url":"https://api.github.com/users/cool-colo","html_url":"https://github.com/cool-colo","followers_url":"https://api.github.com/users/cool-colo/followers","following_url":"https://api.github.com/users/cool-colo/following{/other_user}","gists_url":"https://api.github.com/users/cool-colo/gists{/gist_id}","starred_url":"https://api.github.com/users/cool-colo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cool-colo/subscriptions","organizations_url":"https://api.github.com/users/cool-colo/orgs","repos_url":"https://api.github.com/users/cool-colo/repos","events_url":"https://api.github.com/users/cool-colo/events{/privacy}","received_events_url":"https://api.github.com/users/cool-colo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T02:55:26Z","updated_at":"2017-11-28T02:55:26Z","author_association":"NONE","body":"@gydong @jamesge  我在测试过程还遇到了coredump, 用bthread并发向几台下游http服务器发请求， 不重用channel, connect type为pooled,  跑几个小时或一天就会coredump。 把connect type 改成short，其它不变， 跑一周也没问题。\r\n所以为了长连接，并且不coredump, 我把channel用doublely buffer data cache起来了。 目前跑了一天多，没发现问题。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347397989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347399142","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347399142","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347399142,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM5OTE0Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T03:02:54Z","updated_at":"2017-11-28T03:02:54Z","author_association":"CONTRIBUTOR","body":"coredump的话你就具体看下挂在哪了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347399142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347399792","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347399792","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347399792,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM5OTc5Mg==","user":{"login":"cool-colo","id":20718701,"node_id":"MDQ6VXNlcjIwNzE4NzAx","avatar_url":"https://avatars.githubusercontent.com/u/20718701?v=4","gravatar_id":"","url":"https://api.github.com/users/cool-colo","html_url":"https://github.com/cool-colo","followers_url":"https://api.github.com/users/cool-colo/followers","following_url":"https://api.github.com/users/cool-colo/following{/other_user}","gists_url":"https://api.github.com/users/cool-colo/gists{/gist_id}","starred_url":"https://api.github.com/users/cool-colo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cool-colo/subscriptions","organizations_url":"https://api.github.com/users/cool-colo/orgs","repos_url":"https://api.github.com/users/cool-colo/repos","events_url":"https://api.github.com/users/cool-colo/events{/privacy}","received_events_url":"https://api.github.com/users/cool-colo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T03:07:26Z","updated_at":"2017-11-28T03:07:26Z","author_association":"NONE","body":"应该是内存越界这类的问题， 跑起来内存占用量很稳定，不会是memory leak.\r\n#0  0x0000000000b89bcf in std::string::_Rep::_M_dispose ()\r\n#1  0x0000000000b8bfb2 in butil::FlatMap<std::string, std::string, butil::DefaultHasher<std::string>, butil::DefaultEqualTo<std::string>, false>::~FlatMap() ()\r\n#2  0x0000000000f460e7 in brpc::URI::~URI() () at src/brpc/uri.cpp:31\r\n#3  0x0000000000ef9a0c in brpc::Controller::DeleteStuff() () at ./src/brpc/http_header.h:37\r\n#4  0x0000000000efaccf in brpc::Controller::~Controller() () at src/brpc/controller.cpp:126\r\n#5  0x0000000000b99a09 in HttpHandler::Prepare(parallel::cpp2::ComboHttpRequest&)::{lambda()#1}::operator()() const ()\r\n#6  0x0000000000b99cec in std::_Function_handler<parallel::cpp2::HttpResponse (), std::_Bind_result<parallel::cpp2::HttpResponse, HttpHandler::Prepare(parallel::cpp2::ComboHttpRequest&)::{lambda()#1} ()> >::_M_invoke(std::_Any_data const&) ()\r\n#7  0x0000000000b8d224 in std::enable_if<!(std::is_same<std::result_of<poi::ParallelExecutor<parallel::cpp2::HttpResponse>::AsyncExecute(std::function<parallel::cpp2::HttpResponse ()>&&)::{lambda()#1}::operator()() const::{lambda()#1} ()>::type, void>::value), folly::Try<poi::ParallelExecutor<parallel::cpp2::HttpResponse>::AsyncExecute(std::function<parallel::cpp2::HttpResponse ()>&&)::{lambda()#1}::operator()() const::{lambda()#1} ()> >::type folly::makeTryWith<poi::ParallelExecutor<parallel::cpp2::HttpResponse>::AsyncExecute(std::function<parallel::cpp2::HttpResponse ()>&&)::{lambda()#1}::operator()() const::{lambda()#1}>(std::is_same&&) ()\r\n#8  0x0000000000b93834 in std::_Function_handler<void (), std::_Bind_result<void, poi::ParallelExecutor<parallel::cpp2::HttpResponse>::AsyncExecute(std::function<parallel::cpp2::HttpResponse ()>&&)::{lambda()#1} ()> >::_M_invoke(std::_Any_data const&) ()\r\n#9  0x0000000000b8b4fc in poi::FunctionWrapper::ThreadFunc(void*) ()\r\n#10 0x0000000000eeba7d in bthread::TaskGroup::task_runner(long) () at src/bthread/task_group.cpp:291\r\n#11 0x000000000100f2f1 in bthread_make_fcontext ()","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347399792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347400808","html_url":"https://github.com/apache/brpc/issues/132#issuecomment-347400808","issue_url":"https://api.github.com/repos/apache/brpc/issues/132","id":347400808,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQwMDgwOA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T03:14:01Z","updated_at":"2017-11-28T03:14:01Z","author_association":"CONTRIBUTOR","body":"@jamesge 那brpc会有支持subscribe命令的计划吗？ ^_^","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347400808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347401399","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347401399","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347401399,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQwMTM5OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T03:18:33Z","updated_at":"2017-11-28T03:19:54Z","author_association":"CONTRIBUTOR","body":"从这个栈看不出什么。你可以试下用[example/http_c++](https://github.com/brpc/brpc/tree/master/example/http_c%2B%2B)模拟能否复现：\r\n```\r\n# 在8000-8002启动三个server ，测完后可用pkill http_server杀掉。\r\nfor ((i=0;i<3;++i)); do ( ./http_server -port $((8000+i)) & ) ; done \r\n# 上压力，使用bthread发送，连接方式是pooled\r\n./benchmark_http -url=list://localhost:8000,localhost:8001,localhost:8002 -load_balancer=rr -use_bthread -connection_type pooled\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347401399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347405971","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347405971","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347405971,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQwNTk3MQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T03:52:40Z","updated_at":"2017-11-28T03:52:40Z","author_association":"CONTRIBUTOR","body":"@jamesge @chenzhangyi 测试了一下这个场景，代码如下（运行的命令为：http_client -defer_close_second=15 \"www.baidu.com\"），和预期还是不符。defer确实是defer了，但在前一个channel析构后，后一个构造的channel并没有重用到前一个channel腾出的连接。机器上还是看到很多time-wait状态的连接。是说重用这个动作只能发生在前一个channel析构之前吗？\r\n\r\n` while (true) {\r\n    // A Channel represents a communication line to a Server. Notice that\r\n    // Channel is thread-safe and can be shared by all threads in your program.\r\n    std::unique_ptr<brpc::Channel> channel(new brpc::Channel());\r\n    brpc::ChannelOptions options;\r\n    options.protocol = FLAGS_protocol;\r\n    options.timeout_ms = FLAGS_timeout_ms/*milliseconds*/;\r\n    options.max_retry = FLAGS_max_retry;\r\n\r\n    // Initialize the channel, NULL means using default options.\r\n    // options, see `brpc/channel.h'.\r\n    if (channel->Init(url, FLAGS_load_balancer.c_str(), &options) != 0) {\r\n      LOG(ERROR) << \"Fail to initialize channel\";\r\n      return -1; \r\n    }   \r\n\r\n    // We will receive response synchronously, safe to put variables\r\n    // on stack.\r\n    brpc::Controller cntl;\r\n\r\n    cntl.http_request().uri() = url;\r\n    if (!FLAGS_d.empty()) {\r\n      cntl.http_request().set_method(brpc::HTTP_METHOD_POST);\r\n      cntl.request_attachment().append(FLAGS_d);\r\n    }   \r\n\r\n    // Because `done'(last parameter) is NULL, this function waits until\r\n    // the response comes back or error occurs(including timedout).\r\n    channel->CallMethod(NULL, &cntl, NULL, NULL, NULL);\r\n    if (cntl.Failed()) {\r\n      std::cerr << cntl.ErrorText() << std::endl;\r\n      return -1; \r\n    }   \r\n    // If -http_verbose is on, brpc already prints the response to stderr.\r\n    if (!brpc::FLAGS_http_verbose) {\r\n      std::cout << cntl.response_attachment() << std::endl;\r\n    }   \r\n    std::this_thread::sleep_for(std::chrono::seconds(9));\r\n  } `","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347405971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347407079","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347407079","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347407079,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQwNzA3OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T04:01:31Z","updated_at":"2017-11-28T04:01:31Z","author_association":"CONTRIBUTOR","body":"你最好试下本地server，访问公网可能超时并导致关连接。defer_close对所有协议，single/pooled都有效。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347407079/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347407233","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347407233","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347407233,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQwNzIzMw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T04:02:42Z","updated_at":"2017-11-28T04:02:42Z","author_association":"CONTRIBUTOR","body":"好的，我再试一下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347407233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347436585","html_url":"https://github.com/apache/brpc/issues/131#issuecomment-347436585","issue_url":"https://api.github.com/repos/apache/brpc/issues/131","id":347436585,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQzNjU4NQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T07:27:04Z","updated_at":"2017-11-28T07:27:04Z","author_association":"CONTRIBUTOR","body":"已测试，证实 -defer_close_second 确实可以起作用。多谢解答！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347436585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347534376","html_url":"https://github.com/apache/brpc/issues/127#issuecomment-347534376","issue_url":"https://api.github.com/repos/apache/brpc/issues/127","id":347534376,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzUzNDM3Ng==","user":{"login":"xmm1989218","id":983106,"node_id":"MDQ6VXNlcjk4MzEwNg==","avatar_url":"https://avatars.githubusercontent.com/u/983106?v=4","gravatar_id":"","url":"https://api.github.com/users/xmm1989218","html_url":"https://github.com/xmm1989218","followers_url":"https://api.github.com/users/xmm1989218/followers","following_url":"https://api.github.com/users/xmm1989218/following{/other_user}","gists_url":"https://api.github.com/users/xmm1989218/gists{/gist_id}","starred_url":"https://api.github.com/users/xmm1989218/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xmm1989218/subscriptions","organizations_url":"https://api.github.com/users/xmm1989218/orgs","repos_url":"https://api.github.com/users/xmm1989218/repos","events_url":"https://api.github.com/users/xmm1989218/events{/privacy}","received_events_url":"https://api.github.com/users/xmm1989218/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T14:10:03Z","updated_at":"2017-11-28T14:10:03Z","author_association":"NONE","body":"对于存在很多服务相互调用的情况 比如广告系统中的 AS/BS/UFS/PB 一个调用另外一个的 百度的经验是怎么去处理服务监控 排查问题的 只是单独分别做监控告警么 还是说链路跟踪 不是做在rpc框架层面 做在业务层面？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347534376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347786093","html_url":"https://github.com/apache/brpc/issues/132#issuecomment-347786093","issue_url":"https://api.github.com/repos/apache/brpc/issues/132","id":347786093,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzc4NjA5Mw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T08:22:24Z","updated_at":"2017-11-29T08:22:24Z","author_association":"CONTRIBUTOR","body":"@jamesge ping","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347786093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347803571","html_url":"https://github.com/apache/brpc/issues/132#issuecomment-347803571","issue_url":"https://api.github.com/repos/apache/brpc/issues/132","id":347803571,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgwMzU3MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T09:34:19Z","updated_at":"2017-11-29T09:34:19Z","author_association":"CONTRIBUTOR","body":"这要增加专门的编程接口，我们可能目前不会做这个事情。不过你可以自己试试，一种方法是在controller中可设置redis的message handler（一般要引用计数），碰到被pub的message就扔给那个handler。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347803571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347813276","html_url":"https://github.com/apache/brpc/pull/134#issuecomment-347813276","issue_url":"https://api.github.com/repos/apache/brpc/issues/134","id":347813276,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgxMzI3Ng==","user":{"login":"feng-y","id":1547384,"node_id":"MDQ6VXNlcjE1NDczODQ=","avatar_url":"https://avatars.githubusercontent.com/u/1547384?v=4","gravatar_id":"","url":"https://api.github.com/users/feng-y","html_url":"https://github.com/feng-y","followers_url":"https://api.github.com/users/feng-y/followers","following_url":"https://api.github.com/users/feng-y/following{/other_user}","gists_url":"https://api.github.com/users/feng-y/gists{/gist_id}","starred_url":"https://api.github.com/users/feng-y/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feng-y/subscriptions","organizations_url":"https://api.github.com/users/feng-y/orgs","repos_url":"https://api.github.com/users/feng-y/repos","events_url":"https://api.github.com/users/feng-y/events{/privacy}","received_events_url":"https://api.github.com/users/feng-y/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T10:10:35Z","updated_at":"2017-11-29T11:05:26Z","author_association":"NONE","body":"那还是标记到pipelined_count 上？\r\n or 上去是基于这样改修改的代码少写，但确实使代码难懂和调试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347813276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347851188","html_url":"https://github.com/apache/brpc/issues/132#issuecomment-347851188","issue_url":"https://api.github.com/repos/apache/brpc/issues/132","id":347851188,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg1MTE4OA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T12:51:09Z","updated_at":"2017-11-29T12:51:09Z","author_association":"CONTRIBUTOR","body":"收到，多谢答复。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347851188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347895954","html_url":"https://github.com/apache/brpc/issues/125#issuecomment-347895954","issue_url":"https://api.github.com/repos/apache/brpc/issues/125","id":347895954,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg5NTk1NA==","user":{"login":"rongliang666","id":5674585,"node_id":"MDQ6VXNlcjU2NzQ1ODU=","avatar_url":"https://avatars.githubusercontent.com/u/5674585?v=4","gravatar_id":"","url":"https://api.github.com/users/rongliang666","html_url":"https://github.com/rongliang666","followers_url":"https://api.github.com/users/rongliang666/followers","following_url":"https://api.github.com/users/rongliang666/following{/other_user}","gists_url":"https://api.github.com/users/rongliang666/gists{/gist_id}","starred_url":"https://api.github.com/users/rongliang666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rongliang666/subscriptions","organizations_url":"https://api.github.com/users/rongliang666/orgs","repos_url":"https://api.github.com/users/rongliang666/repos","events_url":"https://api.github.com/users/rongliang666/events{/privacy}","received_events_url":"https://api.github.com/users/rongliang666/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T15:29:55Z","updated_at":"2017-11-29T15:29:55Z","author_association":"NONE","body":"感谢，添加新协议很复杂。。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/347895954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348097031","html_url":"https://github.com/apache/brpc/issues/135#issuecomment-348097031","issue_url":"https://api.github.com/repos/apache/brpc/issues/135","id":348097031,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODA5NzAzMQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T06:42:19Z","updated_at":"2017-11-30T06:42:19Z","author_association":"CONTRIBUTOR","body":"够了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348097031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348117116","html_url":"https://github.com/apache/brpc/issues/136#issuecomment-348117116","issue_url":"https://api.github.com/repos/apache/brpc/issues/136","id":348117116,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODExNzExNg==","user":{"login":"songguiquan","id":11957123,"node_id":"MDQ6VXNlcjExOTU3MTIz","avatar_url":"https://avatars.githubusercontent.com/u/11957123?v=4","gravatar_id":"","url":"https://api.github.com/users/songguiquan","html_url":"https://github.com/songguiquan","followers_url":"https://api.github.com/users/songguiquan/followers","following_url":"https://api.github.com/users/songguiquan/following{/other_user}","gists_url":"https://api.github.com/users/songguiquan/gists{/gist_id}","starred_url":"https://api.github.com/users/songguiquan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songguiquan/subscriptions","organizations_url":"https://api.github.com/users/songguiquan/orgs","repos_url":"https://api.github.com/users/songguiquan/repos","events_url":"https://api.github.com/users/songguiquan/events{/privacy}","received_events_url":"https://api.github.com/users/songguiquan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T08:29:10Z","updated_at":"2017-11-30T10:40:09Z","author_association":"NONE","body":"如果支持的话，是不是要设置什么参数？brpc::Channel 只有brpc::PROTOCOL_HTTP 没有https 选项","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348117116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348664111","html_url":"https://github.com/apache/brpc/issues/139#issuecomment-348664111","issue_url":"https://api.github.com/repos/apache/brpc/issues/139","id":348664111,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODY2NDExMQ==","user":{"login":"tjb1216","id":6902833,"node_id":"MDQ6VXNlcjY5MDI4MzM=","avatar_url":"https://avatars.githubusercontent.com/u/6902833?v=4","gravatar_id":"","url":"https://api.github.com/users/tjb1216","html_url":"https://github.com/tjb1216","followers_url":"https://api.github.com/users/tjb1216/followers","following_url":"https://api.github.com/users/tjb1216/following{/other_user}","gists_url":"https://api.github.com/users/tjb1216/gists{/gist_id}","starred_url":"https://api.github.com/users/tjb1216/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjb1216/subscriptions","organizations_url":"https://api.github.com/users/tjb1216/orgs","repos_url":"https://api.github.com/users/tjb1216/repos","events_url":"https://api.github.com/users/tjb1216/events{/privacy}","received_events_url":"https://api.github.com/users/tjb1216/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-02T03:19:01Z","updated_at":"2017-12-02T03:19:01Z","author_association":"NONE","body":"@jamesge ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348664111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348849362","html_url":"https://github.com/apache/brpc/issues/139#issuecomment-348849362","issue_url":"https://api.github.com/repos/apache/brpc/issues/139","id":348849362,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODg0OTM2Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-04T03:06:13Z","updated_at":"2017-12-04T03:06:13Z","author_association":"CONTRIBUTOR","body":"LatencyRecorder中的qps比较特殊，是一个PassiveStatus（调用一个回调获得数值，非自身统计），为了在内置界面以1秒精度显示，qps默认是取上一秒的均值。反之如果是原生统计的话，内置界面中窗口总是1秒，dump出来的窗口是-bvar_dump_interval。\r\ndump出来的值一般会被监控系统采集，从\"天\"这个尺度来说，每10秒取最后一秒也是一种有效的采样。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348849362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348849615","html_url":"https://github.com/apache/brpc/issues/136#issuecomment-348849615","issue_url":"https://api.github.com/repos/apache/brpc/issues/136","id":348849615,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODg0OTYxNQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-04T03:08:20Z","updated_at":"2017-12-04T03:08:20Z","author_association":"CONTRIBUTOR","body":"https://github.com/brpc/brpc/blob/master/docs/cn/http_service.md#%E5%BC%80%E5%90%AFhttps","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348849615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348849721","html_url":"https://github.com/apache/brpc/issues/137#issuecomment-348849721","issue_url":"https://api.github.com/repos/apache/brpc/issues/137","id":348849721,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODg0OTcyMQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-04T03:09:11Z","updated_at":"2017-12-04T03:09:11Z","author_association":"CONTRIBUTOR","body":"bthread_count: 同时存在的bthread个数\r\nbthread_worker_count: bthread映射至的pthread的个数。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348849721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348850108","html_url":"https://github.com/apache/brpc/issues/140#issuecomment-348850108","issue_url":"https://api.github.com/repos/apache/brpc/issues/140","id":348850108,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODg1MDEwOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-04T03:12:21Z","updated_at":"2017-12-04T03:13:40Z","author_association":"CONTRIBUTOR","body":"这两个类除了都有epoll_wait其实没什么共同点？EpollThread是站在处理fd的角度对那个类的称呼，不是特别精准，如果叫做FdEventDispatcher会更加明确。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348850108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348852529","html_url":"https://github.com/apache/brpc/issues/140#issuecomment-348852529","issue_url":"https://api.github.com/repos/apache/brpc/issues/140","id":348852529,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODg1MjUyOQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-04T03:34:08Z","updated_at":"2017-12-04T03:34:08Z","author_association":"CONTRIBUTOR","body":"@jamesge 从使用场景上讲，他们有着怎样的区别呢？ EventDispatcher专门用于socket相关的事件管理，而EpollThread用于其它事件管理，是这么理解吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348852529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348920072","html_url":"https://github.com/apache/brpc/issues/140#issuecomment-348920072","issue_url":"https://api.github.com/repos/apache/brpc/issues/140","id":348920072,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODkyMDA3Mg==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-04T10:22:21Z","updated_at":"2017-12-04T10:22:21Z","author_association":"CONTRIBUTOR","body":"@jamesge 求解惑，小白今晚要失眠。。。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/348920072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349185691","html_url":"https://github.com/apache/brpc/issues/143#issuecomment-349185691","issue_url":"https://api.github.com/repos/apache/brpc/issues/143","id":349185691,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTE4NTY5MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T03:39:54Z","updated_at":"2017-12-05T03:39:54Z","author_association":"CONTRIBUTOR","body":"目前没有完整的支持。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349185691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349185841","html_url":"https://github.com/apache/brpc/issues/142#issuecomment-349185841","issue_url":"https://api.github.com/repos/apache/brpc/issues/142","id":349185841,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTE4NTg0MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T03:40:52Z","updated_at":"2017-12-05T03:40:52Z","author_association":"CONTRIBUTOR","body":"1.都可以。2.没有实现，一般来说读写锁的使用场景也很少。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349185841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349185953","html_url":"https://github.com/apache/brpc/issues/141#issuecomment-349185953","issue_url":"https://api.github.com/repos/apache/brpc/issues/141","id":349185953,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTE4NTk1Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T03:41:40Z","updated_at":"2017-12-05T03:41:40Z","author_association":"CONTRIBUTOR","body":"支持glog是在运行config_brpc.sh加上--with-glog","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349185953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349186369","html_url":"https://github.com/apache/brpc/issues/140#issuecomment-349186369","issue_url":"https://api.github.com/repos/apache/brpc/issues/140","id":349186369,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTE4NjM2OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T03:44:39Z","updated_at":"2017-12-05T03:44:39Z","author_association":"CONTRIBUTOR","body":"EventDispatcher是brpc中转发所有socket读写事件的类。EpollThread是bthread中实现与fd相关的几个函数用到的类。它们确实有共同点就是用到了epoll_wait，没有太多可抽象或复用的。当然硬是要全面地封装一下epoll也是可以的，那就是libevent, libev这些库干的事情了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349186369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349186933","html_url":"https://github.com/apache/brpc/issues/140#issuecomment-349186933","issue_url":"https://api.github.com/repos/apache/brpc/issues/140","id":349186933,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTE4NjkzMw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T03:48:50Z","updated_at":"2017-12-05T03:48:50Z","author_association":"CONTRIBUTOR","body":"明白了，多谢解答。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349186933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349187318","html_url":"https://github.com/apache/brpc/issues/144#issuecomment-349187318","issue_url":"https://api.github.com/repos/apache/brpc/issues/144","id":349187318,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTE4NzMxOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T03:51:42Z","updated_at":"2017-12-05T03:51:42Z","author_association":"CONTRIBUTOR","body":"1. 不合理。那样只要一个连接被创建出来，就很难被删了。因为只要连接数小于idle_timeout_sec * QPS，所有的连接就会在idle_timeout_sec内被轮转到，从而不会闲置。\r\n2. 也就不用讨论了。\r\n\r\nclient和server的并发连接数，在pooled的前提下，主要是取决于QPS * latency，不是某个选项能决定的。max_pool_size只是限制了client和server间的最大连接数。关闭频率不是特别高的话，其实是不太用关注的。如果server不是brpc，可以去看看本身有什么关闭策略。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349187318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]