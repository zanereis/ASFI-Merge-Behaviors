[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570909913","html_url":"https://github.com/apache/couchdb/issues/2191#issuecomment-570909913","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2191","id":570909913,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDkwOTkxMw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T12:53:40Z","updated_at":"2020-01-05T12:53:40Z","author_association":"MEMBER","body":"Which is merged now, so closing this: https://github.com/apache/couchdb/pull/2389","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570909913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570932157","html_url":"https://github.com/apache/couchdb/pull/1912#issuecomment-570932157","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1912","id":570932157,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDkzMjE1Nw==","user":{"login":"gdamjan","id":81654,"node_id":"MDQ6VXNlcjgxNjU0","avatar_url":"https://avatars.githubusercontent.com/u/81654?v=4","gravatar_id":"","url":"https://api.github.com/users/gdamjan","html_url":"https://github.com/gdamjan","followers_url":"https://api.github.com/users/gdamjan/followers","following_url":"https://api.github.com/users/gdamjan/following{/other_user}","gists_url":"https://api.github.com/users/gdamjan/gists{/gist_id}","starred_url":"https://api.github.com/users/gdamjan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gdamjan/subscriptions","organizations_url":"https://api.github.com/users/gdamjan/orgs","repos_url":"https://api.github.com/users/gdamjan/repos","events_url":"https://api.github.com/users/gdamjan/events{/privacy}","received_events_url":"https://api.github.com/users/gdamjan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T17:41:33Z","updated_at":"2020-01-05T17:41:33Z","author_association":"CONTRIBUTOR","body":"thanks all ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570932157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570941906","html_url":"https://github.com/apache/couchdb/issues/2391#issuecomment-570941906","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2391","id":570941906,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk0MTkwNg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T19:54:39Z","updated_at":"2020-01-05T19:54:39Z","author_association":"MEMBER","body":"PR: https://github.com/apache/couchdb/pull/2400\r\n\r\nSo far I've only done ioq. We'll want to audit the other dependencies as well. I just wanted to get the ball rolling.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570941906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570942768","html_url":"https://github.com/apache/couchdb/issues/1913#issuecomment-570942768","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1913","id":570942768,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk0Mjc2OA==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T20:05:19Z","updated_at":"2020-01-05T20:05:19Z","author_association":"MEMBER","body":"@janl if that's the requirement, I think it would be a better signal to highlight queries with a high ratio between docs examined and results returned, implying the index isn't narrowing the result set enough. We actually have a warning in (Fauxton)[https://github.com/apache/couchdb-fauxton/blob/4ae5bfb2d9ac571543da646b07e14a3e9623a510/app/addons/documents/mango/components/ExecutionStats.js#L44] when this ratio is 10:1 but it should really be a server-generated warning instead, with a corresponding metric. \r\n\r\nSimilarly, we [already capture](https://github.com/apache/couchdb/blob/5ef18802cb82169843bd32edee838d4302d0dd97/src/mango/src/mango_execution_stats.erl#L85) the number of docs examined and number of results returned for each query so could add metrics for those. I can look at it this week if there's agreement it would be useful.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570942768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570943318","html_url":"https://github.com/apache/couchdb/issues/1913#issuecomment-570943318","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1913","id":570943318,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk0MzMxOA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T20:12:14Z","updated_at":"2020-01-05T20:12:14Z","author_association":"MEMBER","body":"@willholley Iâ€™m happy to +1 a PR that adds this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570943318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570943515","html_url":"https://github.com/apache/couchdb/pull/2400#issuecomment-570943515","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2400","id":570943515,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk0MzUxNQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T20:14:24Z","updated_at":"2020-01-05T20:17:11Z","author_association":"MEMBER","body":"Done so far:\r\n\r\n* b64url 1.0.1 -> 1.0.2\r\n* ets_lru 1.0.0 -> 1.1.0\r\n* khash 1.0.1 -> 1.1.0\r\n* ioq 2.1.2 -> 2.1.3\r\n* jiffy CouchDB-0.14.11-2 -> CouchDB-1.0.1-1\r\n\r\nDeps that were non-trivial and/or outside my expertise:\r\n\r\n* docs\r\n* fauxton\r\n* mochiweb\r\n* meck\r\n* proper\r\n\r\nFor `mochiweb` I was just confused on what the state of things was due to our tag being old and master being even older. Not sure if we have an established protocol for pulling upstream changes there or not.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570943515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570944251","html_url":"https://github.com/apache/couchdb/pull/2018#issuecomment-570944251","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2018","id":570944251,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk0NDI1MQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T20:22:56Z","updated_at":"2020-01-05T20:22:56Z","author_association":"MEMBER","body":"@janl This is targeted at a prototype branch, not for inclusion in 3.0. I'll just remove the tag.\r\n\r\nI also thought that we merged something that did roughly the same thing but not seeing it as a conflict but I think that's because the target branch isn't `prototype/fdb-layer`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570944251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570944652","html_url":"https://github.com/apache/couchdb/pull/2018#issuecomment-570944652","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2018","id":570944652,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk0NDY1Mg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T20:28:12Z","updated_at":"2020-01-05T20:28:12Z","author_association":"MEMBER","body":"oh oops, ta!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570944652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570946789","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-570946789","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":570946789,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk0Njc4OQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T20:55:40Z","updated_at":"2020-01-05T20:55:40Z","author_association":"MEMBER","body":"https://gist.github.com/davisp/0e412b94456e92253f73079d0c7755f2 via [1]\r\n\r\nI tracked down the rules file for the deb package and I'm not seeing anything that would explain a difference between this and other platforms.\r\n\r\nUnfortunately this does not appear to be an easy fix. Looking back at the code we run a full GC right before we attempt to compile each function and then a `Maybe_GC` inbetween each function compilation.\r\n\r\n[1] http://deb.debian.org/debian/pool/main/m/mozjs60/mozjs60_60.2.3-3.debian.tar.xz","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570946789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570950172","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-570950172","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":570950172,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk1MDE3Mg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T21:35:47Z","updated_at":"2020-01-05T21:35:47Z","author_association":"MEMBER","body":"Doing a bit of spelunking through the JS sources between 1.8.5 and 60 and I'm not seeing anything obviously different between the two in how we're setting stack sizes. Granted we're not rewriting source code on 1.8.5 so hard to tell there for sure.\r\n\r\nIt might be useful to try a couple tests increasing the stack size in `./dev/run` for the JS tests to see if we're borderline or if something crazy is happening.\r\n\r\nAlso I've stumbled over `export MOZ_GCTIMER=stderr` which appears to spit out some GC related information. Its a bit dense and appears to be mostly related to timing information but I am seeing a `HeapSize: 59.090 MiB` line when I run the `view_include_docs.js` test locally. I have no idea if that's close to our 64MiB limit though.\r\n\r\nIf anyone has a Buster setup to try that locally it might be useful to check what it shows. But it also makes me wonder if attempting to bump by a few more MiB would be enough to give us the breathing room there?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570950172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570951515","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-570951515","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":570951515,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk1MTUxNQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T21:52:55Z","updated_at":"2020-01-05T21:52:55Z","author_association":"MEMBER","body":"I've managed to create a somewhat duplication using a simplish approach:\r\n\r\nDownload `fail.js` from here:\r\n\r\nhttps://gist.github.com/davisp/8a709a3216c1ac7e90cb1d10ccdc08c1\r\n\r\nAnd then you can duplicate via:\r\n\r\n`cat fail.js | ./src/couch/priv/couchjs share/server/main.js`\r\n\r\nThe segfault at the end isn't a big deal. We just need to scope out the AutoRequest so that it closes before we destroy the context.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570951515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570951936","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-570951936","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":570951936,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk1MTkzNg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T21:58:30Z","updated_at":"2020-01-05T21:58:30Z","author_association":"MEMBER","body":"Hurms. I'm not 100% certain whether that's a valid duplication or if its just me filling out the State.funs array.\r\n\r\nAlso a quick attempt at scoping out the request didn't work. Though given that we're exiting the process just not attempting to destroy things seems like it might be valid as well.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570951936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570952449","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-570952449","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":570952449,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk1MjQ0OQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T22:04:42Z","updated_at":"2020-01-05T22:04:42Z","author_association":"MEMBER","body":"This simple diff fixes the segfault:\r\n\r\n```diff\r\ndiff --git a/src/couch/priv/couch_js/60/main.cpp b/src/couch/priv/couch_js/60/main.cpp\r\nindex c92cfb7c9..ecedfbd3b 100644\r\n--- a/src/couch/priv/couch_js/60/main.cpp\r\n+++ b/src/couch/priv/couch_js/60/main.cpp\r\n@@ -487,8 +487,5 @@ main(int argc, const char* argv[])\r\n         JS_MaybeGC(cx);\r\n     }\r\n \r\n-    JS_DestroyContext(cx);\r\n-    JS_ShutDown();\r\n-\r\n     return 0;\r\n }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570952449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570952906","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-570952906","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":570952906,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk1MjkwNg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T22:09:29Z","updated_at":"2020-01-05T22:09:29Z","author_association":"MEMBER","body":"Playing with that `fail.js` example and `MOZ_GCTIMER` does seem to show that heap line is us getting close the default 64MiB threshold. What I'm currently not understanding is how we get so close to that threshold within a single test. So it might be worth looking into what sort of garbage we might be generating that isn't going away with the multiple GC runs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570952906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570954047","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-570954047","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":570954047,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk1NDA0Nw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T22:23:52Z","updated_at":"2020-01-05T22:23:52Z","author_association":"MEMBER","body":"Last update and I've realized I'm looking at two different couchjs processes. The output for the `couchjs` that is having an error on buster appears to be closer to 1MiB. For reference I was doing this:\r\n\r\n```bash\r\n$ export MOZ_GCTIMER=stderr\r\n$ make javascript suites=view_include_docs.js\r\n```\r\n\r\nI've just realized the output dumped to stderr of the `make javascript` terminal is from the test runner process. The GC stats for the `couchjs` that's compiling functions ends up in `dev/log/node1.log` and those numbers are much smaller around 1MiB instead of the nearly 64MiB I was seeing for the test runner process.\r\n\r\nThat's all I've got for the evening. If anyone has a better idea on what to try tracking down tomorrow I'm all ears.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570954047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570974219","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-570974219","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":570974219,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDk3NDIxOQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T01:48:56Z","updated_at":"2020-01-06T01:48:56Z","author_association":"CONTRIBUTOR","body":"thanks @davisp and @wohali for this. We can see `out of memory\"` for one test case. I will continue to investigate based on above from Paul.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570974219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571047025","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-571047025","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":571047025,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTA0NzAyNQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T08:15:43Z","updated_at":"2020-01-06T08:15:43Z","author_association":"CONTRIBUTOR","body":"hey @davisp , @wohali  , @janl , after some investigation, I highly suspect that this `\"out of memory\"` is related to `infinite_loop` test in https://github.com/apache/couchdb/blob/master/test/javascript/tests/view_errors.js#L154\r\n```\r\n      var designDoc3 = {\r\n        _id:\"_design/infinite\",\r\n        language: \"javascript\",\r\n        views: {\r\n          \"infinite_loop\" :{map:\"function(doc) {while(true){emit(doc,doc);}};\"}\r\n        }\r\n      };\r\n      T(db.save(designDoc3).ok);\r\n\r\n      try {\r\n          db.view(\"infinite/infinite_loop\");\r\n          T(0 == 1);\r\n      } catch(e) {\r\n          T(e.error == \"os_process_error\" || e.error == \"unnamed_error\");\r\n      }\r\n```\r\n\r\nThe sequence of test suites follows `view_errors.js` and then `view_include_docs.js`. In some case, `couchjs` is shared among different test suites. After `view_errors` bumped memory, there is no room for `view_include_docs.js` to allocate when the shared `couchjs` is used.\r\n\r\nToday, I ever made several test in docker image\r\n1. run `make javascript suites=\"view_include_docs\"` more than 200 times in the loop, and didn't hit out-of-memory issue\r\n2. run `make javascript suites=\"view_errors  view_include_docs\"`, and i can get out-of-memory sometime, like\r\n\r\n```\r\nroot@0010847bf784:/couchdb# make javascript suites=\"view_errors  view_include_docs\"\r\ntest/javascript/tests/view_errors.js         pass\r\ntest/javascript/tests/view_include_docs.js\r\n    Error: (new String(\"out of memory\")) (function (doc) { if (typeof doc.integer === 'number') {emit(doc.integer, doc.integer)};})\r\nTrace back (most recent call first):\r\n\r\n 551:14: test/javascript/couch.js\r\n      CouchError\r\n 514:12: test/javascript/couch.js\r\n      CouchDB.maybeThrowError\r\n 202:5: test/javascript/couch.js\r\n      CouchDB/this.view\r\n 43:14: test/javascript/tests/view_include_docs.js\r\n      couchTests.view_include_docs\r\n 45:5: test/javascript/cli_runner.js\r\n      runTest\r\n 56:1: test/javascript/cli_runner.js\r\n\r\nfail\r\n=======================================================\r\nJavaScript tests complete.\r\n  Failed: 1.  Skipped or passed: 1.\r\nmake: *** [Makefile:279: javascript] Error 1\r\n```\r\n\r\n3. run `make javascript suites=\"view_errors  view_include_docs\"` after commenting out below in `view_errors.js`. I didn't see out-of-memory when running more than 100 times \r\n```\r\n      try {\r\n          db.view(\"infinite/infinite_loop\");\r\n          T(0 == 1);\r\n      } catch(e) {\r\n          //T(e.error == \"os_process_error\" || e.error == \"unnamed_error\");\r\n      }\r\n```\r\n\r\nCould we give me a try in Jenkins server to disable infinite_loop temporarily?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571047025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571077623","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-571077623","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":571077623,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTA3NzYyMw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T09:59:15Z","updated_at":"2020-01-06T09:59:15Z","author_association":"MEMBER","body":"@jiangphcn good find! I wonder what happens if we add a `gc();` call in our loop.js that just cleans things up periodically.\r\n\r\nFTR, I canâ€™t get this to fail with just the two tests on my Mac setup here.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571077623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571079088","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-571079088","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":571079088,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTA3OTA4OA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T10:03:34Z","updated_at":"2020-01-06T10:03:34Z","author_association":"MEMBER","body":"@davisp that patch def helps segfaults here as well. funnily enough they donâ€™t seem to be hit when running our tests and whatnot, but running custom code in couches fails quickly. Iâ€™ll prepare a PR for this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571079088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571097817","html_url":"https://github.com/apache/couchdb/pull/2018#issuecomment-571097817","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2018","id":571097817,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTA5NzgxNw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T11:02:35Z","updated_at":"2020-01-06T11:02:35Z","author_association":"CONTRIBUTOR","body":"The same issue is fixed by https://github.com/apache/couchdb/pull/2340","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571097817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571114892","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-571114892","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":571114892,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTExNDg5Mg==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T12:04:59Z","updated_at":"2020-01-06T12:04:59Z","author_association":"CONTRIBUTOR","body":"> FTR, I canâ€™t get this to fail with just the two tests on my Mac setup here.\r\n\r\nsame for me. I didn't see this issue in my Mac environment. Also, it is not always happening in Linux environment. I setup environment today using docker image and can see that this is randomly happening. \r\n\r\n> I wonder what happens if we add a gc(); call in our loop.js that just cleans things up periodically.\r\n\r\nI can have a try to add gc(); to see whether it helps.\r\n\r\nPS: for jenkins test, I didn't figure out how to login to trigger rebuild so this is why I asked before to give a try with disable infinite_loop temporarily?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571114892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571194902","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-571194902","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":571194902,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTE5NDkwMg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T15:58:24Z","updated_at":"2020-01-06T15:58:24Z","author_association":"MEMBER","body":"@janl Its just when couchjs exits and we haven't properly terminated the autorequest thing. Its a bit of a silly assertion during cleanup that we don't care about since we're exiting. It had me more concerned until I ran it through the debugger.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571194902/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571214620","html_url":"https://github.com/apache/couchdb/issues/1913#issuecomment-571214620","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1913","id":571214620,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTIxNDYyMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T16:47:28Z","updated_at":"2020-01-06T16:47:28Z","author_association":"MEMBER","body":"@willholley yup, +1 from me too, if you want it in 3.0 time's a wastin'! ðŸ˜‰ ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571214620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571243137","html_url":"https://github.com/apache/couchdb/pull/2393#issuecomment-571243137","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2393","id":571243137,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTI0MzEzNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T18:01:41Z","updated_at":"2020-01-06T19:34:42Z","author_association":"MEMBER","body":"The CouchDB build is broken on Windows; I need to debug that first before I can validate this change.\r\n\r\nSee https://github.com/apache/couchdb/issues/2404","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571243137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571252545","html_url":"https://github.com/apache/couchdb/issues/2404#issuecomment-571252545","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2404","id":571252545,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTI1MjU0NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T18:25:44Z","updated_at":"2020-01-06T18:25:44Z","author_association":"MEMBER","body":"Resolved via #2405 .\r\n\r\nNow, docs won't build: `Fatal error in launcher: Unable to create process using '\"'`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571252545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571256289","html_url":"https://github.com/apache/couchdb/pull/2405#issuecomment-571256289","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2405","id":571256289,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTI1NjI4OQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T18:35:49Z","updated_at":"2020-01-06T18:35:49Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571256289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571258241","html_url":"https://github.com/apache/couchdb/issues/2404#issuecomment-571258241","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2404","id":571258241,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTI1ODI0MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T18:41:20Z","updated_at":"2020-01-06T18:41:20Z","author_association":"MEMBER","body":"Resolved the docs build with a python 3.7/pip/sphinx update. Will make separate commits to apache/couchdb-glazier with the new steps required.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571258241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571274299","html_url":"https://github.com/apache/couchdb/pull/2407#issuecomment-571274299","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2407","id":571274299,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTI3NDI5OQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T19:20:17Z","updated_at":"2020-01-06T19:20:17Z","author_association":"MEMBER","body":"Derps. We can't do this as it'd be backwards incompatible with views that would otherwise have built. With this change we'd end up stuck on a doc that caused it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571274299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571277827","html_url":"https://github.com/apache/couchdb/issues/2249#issuecomment-571277827","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2249","id":571277827,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTI3NzgyNw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T19:28:53Z","updated_at":"2020-01-06T19:28:53Z","author_association":"MEMBER","body":"So, that patch does address this issue, but I'd like to make a more substantive switch to the IOQ system that simplifies the configuration (and removes the stats database as well). The PR for that is now up at apache/couchdb#2408","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571277827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571279724","html_url":"https://github.com/apache/couchdb/issues/2404#issuecomment-571279724","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2404","id":571279724,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTI3OTcyNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T19:33:03Z","updated_at":"2020-01-06T19:35:58Z","author_association":"MEMBER","body":"Re-opening.\r\n\r\nFauxton can't be accessed on Windows right now.\r\n\r\nThe built files are placed in `rel/overlay/share/www` correctly, but `GET /_utils/index.html` returns `Not found.` I suspect this is related to recent changes to `couchdb.cmd`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571279724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571299962","html_url":"https://github.com/apache/couchdb/issues/2391#issuecomment-571299962","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2391","id":571299962,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTI5OTk2Mg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T20:25:49Z","updated_at":"2020-01-06T20:25:49Z","author_association":"MEMBER","body":"The ioq one was intentional on my part because I decided I didn't want to ship a simpler IOQ. #2408 has my preferred direction.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571299962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571333719","html_url":"https://github.com/apache/couchdb/pull/2360#issuecomment-571333719","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2360","id":571333719,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTMzMzcxOQ==","user":{"login":"ksnavely","id":1530988,"node_id":"MDQ6VXNlcjE1MzA5ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1530988?v=4","gravatar_id":"","url":"https://api.github.com/users/ksnavely","html_url":"https://github.com/ksnavely","followers_url":"https://api.github.com/users/ksnavely/followers","following_url":"https://api.github.com/users/ksnavely/following{/other_user}","gists_url":"https://api.github.com/users/ksnavely/gists{/gist_id}","starred_url":"https://api.github.com/users/ksnavely/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ksnavely/subscriptions","organizations_url":"https://api.github.com/users/ksnavely/orgs","repos_url":"https://api.github.com/users/ksnavely/repos","events_url":"https://api.github.com/users/ksnavely/events{/privacy}","received_events_url":"https://api.github.com/users/ksnavely/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T21:59:38Z","updated_at":"2020-01-07T15:52:48Z","author_association":"CONTRIBUTOR","body":"Alright, @wenli200133 ran some partitioned query benchmarks for this recently, here is what she found:\r\n\r\n\r\nq | stream_limit | mean rows | std-dev % | ratio | 3 std-dev %\r\n-- | -- | -- | -- | -- | --\r\n1 | 5 | 519961.67 | 0.48 | Â  | Â \r\n1 | 10 | 519948 | 0.82 | 0.999974 | 2.8504736\r\n1 | 100 | 385213.67 | 30.3 | 0.74087 | 90.933281\r\n1 | 1000 | 388600.33 | 28 | 1.008792 | 123.76918\r\n8 | 5 | 2739565.67 | 0.23 | Â  | Â \r\n8 | 10 | 2750676.33 | 1.01 | 1.004056 | 3.1075714\r\n8 | 100 | 2753663.67 | 0.21 | 1.001086 | 3.0948021\r\n8 | 1000 | 2763239.67 | 0.55 | 1.003478 | 1.7661823\r\n\r\nFor higher Q values, there was no statistically significant variation in performance with the stream limit. Note the large instability at 100 and 1000 for q=1. Again this was for 1000 keys queried using startkey and limit.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571333719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571339602","html_url":"https://github.com/apache/couchdb/pull/2403#issuecomment-571339602","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2403","id":571339602,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTMzOTYwMg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T22:16:01Z","updated_at":"2020-01-06T22:16:01Z","author_association":"MEMBER","body":"Closing in favor of #2409 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571339602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571340627","html_url":"https://github.com/apache/couchdb/issues/2397#issuecomment-571340627","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2397","id":571340627,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTM0MDYyNw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T22:18:49Z","updated_at":"2020-01-06T22:18:49Z","author_association":"MEMBER","body":"This will be fixed when #2409 is merged.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571340627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571349762","html_url":"https://github.com/apache/couchdb/issues/2387#issuecomment-571349762","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2387","id":571349762,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTM0OTc2Mg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T22:47:45Z","updated_at":"2020-01-06T22:47:45Z","author_association":"MEMBER","body":"To the best of my knowledge it is not.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571349762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571349987","html_url":"https://github.com/apache/couchdb/pull/2360#issuecomment-571349987","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2360","id":571349987,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTM0OTk4Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T22:48:31Z","updated_at":"2020-01-06T22:48:31Z","author_association":"MEMBER","body":"@ksnavely what does that mean for `q=1`? this is a pretty common scenario in desktop/embedded CouchDB environments.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571349987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571353189","html_url":"https://github.com/apache/couchdb/pull/2360#issuecomment-571353189","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2360","id":571353189,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTM1MzE4OQ==","user":{"login":"ksnavely","id":1530988,"node_id":"MDQ6VXNlcjE1MzA5ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1530988?v=4","gravatar_id":"","url":"https://api.github.com/users/ksnavely","html_url":"https://github.com/ksnavely","followers_url":"https://api.github.com/users/ksnavely/followers","following_url":"https://api.github.com/users/ksnavely/following{/other_user}","gists_url":"https://api.github.com/users/ksnavely/gists{/gist_id}","starred_url":"https://api.github.com/users/ksnavely/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ksnavely/subscriptions","organizations_url":"https://api.github.com/users/ksnavely/orgs","repos_url":"https://api.github.com/users/ksnavely/repos","events_url":"https://api.github.com/users/ksnavely/events{/privacy}","received_events_url":"https://api.github.com/users/ksnavely/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T22:59:49Z","updated_at":"2020-01-06T22:59:49Z","author_association":"CONTRIBUTOR","body":"@wohali for q=1 I don't believe we're going to see a performance change given an e.g. 10 -> 5 unacked message limit for `rexi:stream2`. The data collected so far indicates the performance differences taper off as q drops for this range of the unacked message limit.\r\n\r\nBased on testing I would not recommend increasing the limit -- the q=1 case is precisely where Li saw instability at a stream limit of 100, 1000.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571353189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571364726","html_url":"https://github.com/apache/couchdb/issues/2406#issuecomment-571364726","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2406","id":571364726,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTM2NDcyNg==","user":{"login":"chewbranca","id":5326,"node_id":"MDQ6VXNlcjUzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5326?v=4","gravatar_id":"","url":"https://api.github.com/users/chewbranca","html_url":"https://github.com/chewbranca","followers_url":"https://api.github.com/users/chewbranca/followers","following_url":"https://api.github.com/users/chewbranca/following{/other_user}","gists_url":"https://api.github.com/users/chewbranca/gists{/gist_id}","starred_url":"https://api.github.com/users/chewbranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chewbranca/subscriptions","organizations_url":"https://api.github.com/users/chewbranca/orgs","repos_url":"https://api.github.com/users/chewbranca/repos","events_url":"https://api.github.com/users/chewbranca/events{/privacy}","received_events_url":"https://api.github.com/users/chewbranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-06T23:43:37Z","updated_at":"2020-01-06T23:43:37Z","author_association":"CONTRIBUTOR","body":"We can improve the error returned in the stacktrace, but eliminating that stack trace and crash dump has some tradeoffs.\r\n\r\nFor the returned error, the relevant bit is: `bad return value admin_account_required`. This is not an acceptable return value out of an application start callback. It needs to be `ok` or `{error, Reason}`, as per [1]. It appears that the ok or error tuple response also applies to thrown errors. I'm having trouble finding the documentation around it, but supervisor:start_link handles thrown errors if they're error tuples, which is what is bubbling up by way of [2]. If we switch the `throw(admin_account_required)` in [2] to be `throw({error, admin_account_required})` then we get an improved error message with:\r\n\r\n```\r\n(! 2533)-> ./rel/couchdb/bin/couchdb                                                                                                   \r\n[info] 2020-01-06T21:18:16.696903Z couchdb@127.0.0.1 <0.259.0> -------- Preflight check: Asserting Admin Account\r\n                                                                   \r\n[info] 2020-01-06T21:18:16.696973Z couchdb@127.0.0.1 <0.259.0> -------- \r\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%                                                                          \r\n  No Admin Account Found, aborting startup.                        \r\n  Please configure an admin account in your local.ini file.        \r\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%                                                                          \r\n                                                                   \r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed          \r\n{\"Kernel pid terminated\",application_controller,\"{application_start_failure,couch,{admin_account_required,{couch_app,start,[normal,[]]}}}\"}\r\nKernel pid terminated (application_controller) ({application_start_failure,couch,{admin_account_required,{couch_app,start,[normal,[]]}}})\r\n                                                                                                                                       \r\nCrash dump is being written to: erl_crash.dump...done                                                                                  \r\n```\r\n\r\nThis still has the kernel shutdown and crash dump, but it's at least a proper `application_start_failure` rather than a `bad_return` error, so at the very least this would be a correct fix to the current error. This fix also has the property of placing nicely with \"CouchDB as a library,\" in the sense of embedding CouchDB in another application or even just starting it manually in an Erlang shell. For instance:\r\n\r\n```\r\n(! 2544)-> erl -pa rel/couchdb/lib/*/ebin                          \r\nErlang/OTP 22 [erts-10.5.1] [source] [64-bit] [smp:8:8] [ds:8:8:10] [async-threads:1] [hipe] [dtrace]                                  \r\n                                                                                                                                       \r\nEshell V10.5.1  (abort with ^G)                                                                                                                                                                                                                                               \r\n1> application:start(couch).                                                                                                                                                                                                                                                  \r\n{error,{not_started,crypto}}                                       \r\n2> application:ensure_all_started(couch).                          \r\n=INFO REPORT==== 6-Jan-2020::13:22:29.108957 ===                   \r\n    alarm_handler: {set,{{disk_almost_full,\"/Volumes/InstallESD\"},[]}}                                                                 \r\n=INFO REPORT==== 6-Jan-2020::13:22:29.112036 ===                   \r\n    alarm_handler: {set,{system_memory_high_watermark,[]}}                                                                             \r\n[info] 2020-01-06T21:22:29.332120Z nonode@nohost <0.251.0> -------- Preflight check: Asserting Admin Account                           \r\n                                                                   \r\n[info] 2020-01-06T21:22:29.332942Z nonode@nohost <0.251.0> --------                                                                    \r\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%      \r\n  No Admin Account Found, aborting startup.                        \r\n  Please configure an admin account in your local.ini file.        \r\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%      \r\n                                                                   \r\n=CRASH REPORT==== 6-Jan-2020::13:22:29.834060 ===                  \r\n  crasher:                                                         \r\n    initial call: application_master:init/4                        \r\n\r\n***SNIP***\r\n\r\n=INFO REPORT==== 6-Jan-2020::13:22:29.846247 ===                   \r\n    application: crypto                                                                                                                                                                                                                                                       \r\n    exited: stopped                                                \r\n    type: temporary                                                                                                                    \r\n{error,{couch,{admin_account_required,{couch_app,start,                                                                                \r\n                                                 [normal,[]]}}}}                                                                                                                                                                                                              \r\n3>                                                                                                                                                                                                                                                                            \r\n```\r\n\r\nIn particular, when starting CouchDB through an Erlang shell or another app when we don't have admins defined, we'll get the clear error: `{error,{couch,{admin_account_required,{couch_app,start,[normal,[]]}}}}`.\r\n\r\nAlternatively, we can take a more aggressive approach to eliminate the kernel failure and crash dump, by changing the `throw(admin_account_required)` error to be `erlang:halt(1)` which causes the VM to halt immediately. Here's sample output of what the halt approach looks like:\r\n\r\n```\r\n(! 2553)-> ./rel/couchdb/bin/couchdb \r\n[info] 2020-01-06T21:32:50.714402Z couchdb@127.0.0.1 <0.259.0> -------- Preflight check: Asserting Admin Account\r\n\r\n[info] 2020-01-06T21:32:50.714461Z couchdb@127.0.0.1 <0.259.0> -------- \r\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\n  No Admin Account Found, aborting startup.                  \r\n  Please configure an admin account in your local.ini file.  \r\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\n\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n```\r\n\r\nand the Erlang shell based approach (note that this kills the shell):\r\n\r\n```\r\n(! 2554)-> erl -pa rel/couchdb/lib/*/ebin\r\nErlang/OTP 22 [erts-10.5.1] [source] [64-bit] [smp:8:8] [ds:8:8:10] [async-threads:1] [hipe] [dtrace]\r\n\r\nEshell V10.5.1  (abort with ^G)\r\n1> application:ensure_all_started(couch).\r\n=INFO REPORT==== 6-Jan-2020::13:39:48.845608 ===\r\n    alarm_handler: {set,{{disk_almost_full,\"/Volumes/InstallESD\"},[]}}\r\n=INFO REPORT==== 6-Jan-2020::13:39:48.849207 ===\r\n    alarm_handler: {set,{system_memory_high_watermark,[]}}\r\n[info] 2020-01-06T21:39:49.061816Z nonode@nohost <0.250.0> -------- Preflight check: Asserting Admin Account\r\n\r\n[info] 2020-01-06T21:39:49.062572Z nonode@nohost <0.250.0> -------- \r\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\n  No Admin Account Found, aborting startup.                  \r\n  Please configure an admin account in your local.ini file.  \r\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\n\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n```\r\n\r\nIMO throwing a proper error tuple is the \"correct\" Erlang approach in terms of properly utilizing the API and allowing for indirect use of CouchDB as an Erlang library. The halt based approach hides some of the details from users at the expense of behaving badly in certain situations. Pros and cons.\r\n\r\n[1] http://erlang.org/doc/apps/kernel/application.html#start-1\r\n[2] https://github.com/apache/couchdb/blob/0cdd5f035015a1e691008e8affac58ee9463f9fb/src/couch/src/couch_sup.erl#L102","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571364726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571374645","html_url":"https://github.com/apache/couchdb/issues/2387#issuecomment-571374645","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2387","id":571374645,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTM3NDY0NQ==","user":{"login":"elChapoSing","id":5416611,"node_id":"MDQ6VXNlcjU0MTY2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5416611?v=4","gravatar_id":"","url":"https://api.github.com/users/elChapoSing","html_url":"https://github.com/elChapoSing","followers_url":"https://api.github.com/users/elChapoSing/followers","following_url":"https://api.github.com/users/elChapoSing/following{/other_user}","gists_url":"https://api.github.com/users/elChapoSing/gists{/gist_id}","starred_url":"https://api.github.com/users/elChapoSing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elChapoSing/subscriptions","organizations_url":"https://api.github.com/users/elChapoSing/orgs","repos_url":"https://api.github.com/users/elChapoSing/repos","events_url":"https://api.github.com/users/elChapoSing/events{/privacy}","received_events_url":"https://api.github.com/users/elChapoSing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T00:21:45Z","updated_at":"2020-01-07T00:21:45Z","author_association":"NONE","body":"How does couch know which _rev of each _id to use in views ?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571374645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571388867","html_url":"https://github.com/apache/couchdb/pull/2409#issuecomment-571388867","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2409","id":571388867,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTM4ODg2Nw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T01:18:23Z","updated_at":"2020-01-07T01:18:23Z","author_association":"CONTRIBUTOR","body":"test passed locally\r\n\r\n```\r\nroot@0010847bf784:/couchdb# git branch\r\n  master\r\n* sm-60-make-oom-errors-fatal\r\nroot@0010847bf784:/couchdb# make javascript suites=\"view_errors  view_include_docs\"\r\ntest/javascript/tests/view_errors.js         pass\r\ntest/javascript/tests/view_include_docs.js   pass\r\n=======================================================\r\nJavaScript tests complete.\r\n  Failed: 0.  Skipped or passed: 2.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571388867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571504179","html_url":"https://github.com/apache/couchdb/issues/1913#issuecomment-571504179","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1913","id":571504179,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTUwNDE3OQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T09:21:31Z","updated_at":"2020-01-07T09:21:31Z","author_association":"MEMBER","body":"thanks both - initial PR for review is https://github.com/apache/couchdb/pull/2410.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571504179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571554047","html_url":"https://github.com/apache/couchdb/issues/2406#issuecomment-571554047","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2406","id":571554047,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTU1NDA0Nw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T11:45:30Z","updated_at":"2020-01-07T11:45:30Z","author_association":"MEMBER","body":"> IMO throwing a proper error tuple is the \"correct\" Erlang approach in terms of properly utilizing the API and allowing for indirect use of CouchDB as an Erlang library. The halt based approach hides some of the details from users at the expense of behaving badly in certain situations. Pros and cons.\r\n\r\nHow about setting another env var in `bin/couchdb[.cmd]` `COUCHDB_NOT_EMBEDDED=1` or some such, and do the `halt` solution, which looks most user friendly only if that env var is set, which should not be the case if somebody embeds CouchDB?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571554047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571554436","html_url":"https://github.com/apache/couchdb/issues/2404#issuecomment-571554436","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2404","id":571554436,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTU1NDQzNg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T11:46:47Z","updated_at":"2020-01-07T11:46:47Z","author_association":"MEMBER","body":"This sounds like it? https://github.com/apache/couchdb/commit/ff0da20de60b3a70af8727e8fad9a3ff00430fad#diff-bab26d0becaf24757b2024c70e3cd676","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571554436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571557703","html_url":"https://github.com/apache/couchdb/pull/856#issuecomment-571557703","issue_url":"https://api.github.com/repos/apache/couchdb/issues/856","id":571557703,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTU1NzcwMw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T11:57:47Z","updated_at":"2020-01-07T11:57:47Z","author_association":"MEMBER","body":"@rnewson how do you feel about this with an off-by-default config variable? (see latest push)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571557703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571560667","html_url":"https://github.com/apache/couchdb/issues/2387#issuecomment-571560667","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2387","id":571560667,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTU2MDY2Nw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T12:07:54Z","updated_at":"2020-01-07T12:07:54Z","author_association":"MEMBER","body":"@elChapoSing by reading the _changes feed, which has that info. My memory agrees with @kocolosk, so Iâ€™m closing this. Sorry about this! :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571560667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571583966","html_url":"https://github.com/apache/couchdb/pull/2411#issuecomment-571583966","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2411","id":571583966,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTU4Mzk2Ng==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T13:24:31Z","updated_at":"2020-01-07T13:24:31Z","author_association":"MEMBER","body":"supersedes #856\r\n\r\n@rnewson how do you feel bout his approach?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571583966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571586919","html_url":"https://github.com/apache/couchdb/pull/2411#issuecomment-571586919","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2411","id":571586919,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTU4NjkxOQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T13:32:10Z","updated_at":"2020-01-07T13:32:10Z","author_association":"MEMBER","body":"I usually squash those on merge to master.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571586919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571587380","html_url":"https://github.com/apache/couchdb/pull/2411#issuecomment-571587380","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2411","id":571587380,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTU4NzM4MA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T13:33:18Z","updated_at":"2020-01-07T13:33:18Z","author_association":"MEMBER","body":"afaict, the only merge commit that made it recently is from @kocolosk ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571587380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571611756","html_url":"https://github.com/apache/couchdb/pull/2360#issuecomment-571611756","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2360","id":571611756,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTYxMTc1Ng==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T14:33:45Z","updated_at":"2020-01-07T14:33:45Z","author_association":"MEMBER","body":"This is good data, especially because it's a surprising result! (Our hypothesis was that increasing the `stream_limit` would deliver better throughput for partitioned databases and databases with small Q).\r\n\r\nGiven that `stream_limit=5` matches `stream_limit=10` at low Q and outperforms it by 30-50% at high Q, shouldn't we just make that the default?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571611756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571647275","html_url":"https://github.com/apache/couchdb/pull/2360#issuecomment-571647275","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2360","id":571647275,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTY0NzI3NQ==","user":{"login":"ksnavely","id":1530988,"node_id":"MDQ6VXNlcjE1MzA5ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1530988?v=4","gravatar_id":"","url":"https://api.github.com/users/ksnavely","html_url":"https://github.com/ksnavely","followers_url":"https://api.github.com/users/ksnavely/followers","following_url":"https://api.github.com/users/ksnavely/following{/other_user}","gists_url":"https://api.github.com/users/ksnavely/gists{/gist_id}","starred_url":"https://api.github.com/users/ksnavely/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ksnavely/subscriptions","organizations_url":"https://api.github.com/users/ksnavely/orgs","repos_url":"https://api.github.com/users/ksnavely/repos","events_url":"https://api.github.com/users/ksnavely/events{/privacy}","received_events_url":"https://api.github.com/users/ksnavely/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T15:55:04Z","updated_at":"2020-01-07T15:55:04Z","author_association":"CONTRIBUTOR","body":"+1 to update the default to 5, but I think we should leave the new configurability in case Couch users encounter unexpected behavior in production environments.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571647275/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571654167","html_url":"https://github.com/apache/couchdb/issues/2404#issuecomment-571654167","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2404","id":571654167,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTY1NDE2Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T16:10:17Z","updated_at":"2020-01-07T16:10:17Z","author_association":"MEMBER","body":"Yeah, it's an optional variable, Erlang is supposed to set the default value here:\r\n\r\nhttps://github.com/apache/couchdb/blob/08a9a5ffe6b2dcfeb480c4cdb15d60ececea8442/src/chttpd/src/chttpd_misc.erl#L294-L297\r\n\r\nbut that's the wrong guess. I'll dig in a bit more...the variable SHOULD be optional.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571654167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571654834","html_url":"https://github.com/apache/couchdb/issues/2404#issuecomment-571654834","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2404","id":571654834,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTY1NDgzNA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T16:11:40Z","updated_at":"2020-01-07T16:11:40Z","author_association":"MEMBER","body":"Thatâ€™s where the erlang side should pick up the env var that is set in `couchdb.cmd` :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571654834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571655123","html_url":"https://github.com/apache/couchdb/issues/2404#issuecomment-571655123","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2404","id":571655123,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTY1NTEyMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T16:12:04Z","updated_at":"2020-01-07T16:12:04Z","author_association":"MEMBER","body":"But the old behaviour should work too, it shouldn't *have* to be set.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571655123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571663236","html_url":"https://github.com/apache/couchdb/issues/2406#issuecomment-571663236","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2406","id":571663236,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTY2MzIzNg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T16:28:57Z","updated_at":"2020-01-07T16:28:57Z","author_association":"MEMBER","body":"+1 for halting the VM by default.\r\n\r\nEmbedded mode is a fun topic and I'm not opposed to a flag that changes the error behavior (would suggest COUCHDB_EMBEDDED_MODE=0 to avoid the double-negative) but I also think there's a longer list of work items for us to really tackle that goal.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571663236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571663366","html_url":"https://github.com/apache/couchdb/issues/2404#issuecomment-571663366","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2404","id":571663366,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTY2MzM2Ng==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T16:29:04Z","updated_at":"2020-01-07T16:29:04Z","author_association":"MEMBER","body":"IIRC, I built it so that it HAS to be set in `couchdb.cmd`/`couchdb`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571663366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571664253","html_url":"https://github.com/apache/couchdb/issues/2413#issuecomment-571664253","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2413","id":571664253,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTY2NDI1Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T16:30:55Z","updated_at":"2020-01-07T16:30:55Z","author_association":"MEMBER","body":"+1, any `function_clause` is a bug.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571664253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571667761","html_url":"https://github.com/apache/couchdb/pull/2367#issuecomment-571667761","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2367","id":571667761,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTY2Nzc2MQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T16:38:36Z","updated_at":"2020-01-07T16:38:36Z","author_association":"MEMBER","body":"\\o/","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571667761/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571672456","html_url":"https://github.com/apache/couchdb/issues/2404#issuecomment-571672456","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2404","id":571672456,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTY3MjQ1Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T16:49:42Z","updated_at":"2020-01-07T16:49:42Z","author_association":"MEMBER","body":"ðŸ¤·â€â™€ ok, i'll update it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571672456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571685255","html_url":"https://github.com/apache/couchdb/pull/2416#issuecomment-571685255","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2416","id":571685255,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTY4NTI1NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T17:20:52Z","updated_at":"2020-01-07T17:20:52Z","author_association":"MEMBER","body":"Pre-approved by @janl ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571685255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571688066","html_url":"https://github.com/apache/couchdb/issues/2406#issuecomment-571688066","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2406","id":571688066,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTY4ODA2Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T17:27:58Z","updated_at":"2020-01-07T17:27:58Z","author_association":"MEMBER","body":"My $0.02: `COUCHDB_EMBEDDED=1`\r\n\r\nPR is going up with the `halt` solution, and am also +1 on a solution to work around this for embedding if anyone wants, it's low hanging fruit; I'll open a new ticket on that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571688066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571716339","html_url":"https://github.com/apache/couchdb/issues/2386#issuecomment-571716339","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2386","id":571716339,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTcxNjMzOQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T18:40:50Z","updated_at":"2020-01-07T18:40:50Z","author_association":"MEMBER","body":"Hi @nicknaychov, are you talking about the `placement` option described here?\r\n\r\nhttps://docs.couchdb.org/en/stable/cluster/sharding.html#specifying-database-placement\r\n\r\nThat setting controls which nodes host replicas of database shards. CouchDB has some internal optimizations to preferentially retrieve DB metadata from nodes in the same zone as the node handling the incoming HTTP request, but general R/W traffic will cross zones and communicate with every replica of a database shard as needed. Typically the placement setting is used to ensure replicas are distributed to different fault domains, e.g. different availability zones in a cloud region.\r\n\r\nIf you want to confirm that the placement you configured took effect for a particular database you can query the `_shards` endpoint:\r\n\r\nhttps://docs.couchdb.org/en/stable/api/database/shard.html\r\n\r\nEven in the case where you configured the placement so that the shards for database A are hosted on one set of nodes and the shards for database B are hosted on another set, the cluster will still cross zones as needed to satisfy R/W requests. For example, you could submit a request to one of the nodes hosting A asking to read a document for B and that request will succeed -- it will just issue the internal RPCs to retrieve the document data from the nodes in the other zone.\r\n\r\nHopefully that makes sense. Also dropping the `rfc` label as that's intended for formal proposals to enhance CouchDB. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571716339/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571801416","html_url":"https://github.com/apache/couchdb/pull/2399#issuecomment-571801416","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2399","id":571801416,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTgwMTQxNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T22:25:06Z","updated_at":"2020-01-07T22:25:06Z","author_association":"MEMBER","body":"closing and reopening to try and fix a jenkins bug","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571801416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571818614","html_url":"https://github.com/apache/couchdb/issues/2402#issuecomment-571818614","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2402","id":571818614,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTgxODYxNA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T23:18:36Z","updated_at":"2020-01-07T23:18:36Z","author_association":"MEMBER","body":"Should be fixed by #2420 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571818614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571866410","html_url":"https://github.com/apache/couchdb/pull/2422#issuecomment-571866410","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2422","id":571866410,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTg2NjQxMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T02:41:42Z","updated_at":"2020-01-08T02:41:42Z","author_association":"MEMBER","body":"Thanks @kocolosk . At some point we should replace the cache of .js packages on that server with direct downloads from our bintray (`http://dl.bintray.com/apache/couchdb-deb/` and `-rpm`)...or at the point when SM60 is supported everywhere upstream, we can drop the entire thing and simplify the process considerably.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571866410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571868154","html_url":"https://github.com/apache/couchdb/pull/2422#issuecomment-571868154","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2422","id":571868154,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTg2ODE1NA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T02:50:23Z","updated_at":"2020-01-08T02:50:23Z","author_association":"CONTRIBUTOR","body":"thanks @wohali for consideration for SM60-related package distribution. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571868154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571880573","html_url":"https://github.com/apache/couchdb/issues/2423#issuecomment-571880573","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2423","id":571880573,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTg4MDU3Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T03:55:16Z","updated_at":"2020-01-08T03:55:16Z","author_association":"MEMBER","body":"ALso seeing:\r\n\r\n```\r\nRemote call on JNLP4-connect connection from 76.9a.30a9.ip4.static.sl-reverse.com/169.48.154.118:23453 failed\r\n```\r\n\r\non occasion, which is causing nodes to be marked offline temporarily. Something's amiss....","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571880573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571887934","html_url":"https://github.com/apache/couchdb/pull/2422#issuecomment-571887934","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2422","id":571887934,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTg4NzkzNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T04:37:42Z","updated_at":"2020-01-08T04:37:42Z","author_association":"MEMBER","body":"@jiangphcn this is still SM1.8.5, I am not yet committing to shipping SM60 for all platforms. But we'll see ;)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571887934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571890425","html_url":"https://github.com/apache/couchdb/pull/2422#issuecomment-571890425","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2422","id":571890425,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTg5MDQyNQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T04:52:19Z","updated_at":"2020-01-08T04:52:19Z","author_association":"CONTRIBUTOR","body":"totally understand @wohali . We can work together to make this happen in the future :-)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571890425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571905571","html_url":"https://github.com/apache/couchdb/pull/2393#issuecomment-571905571","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2393","id":571905571,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTkwNTU3MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T06:08:50Z","updated_at":"2020-01-08T06:08:50Z","author_association":"MEMBER","body":"Will test this tomorrow when i'm back near Windows.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571905571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571906821","html_url":"https://github.com/apache/couchdb/pull/1616#issuecomment-571906821","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1616","id":571906821,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTkwNjgyMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T06:14:33Z","updated_at":"2020-01-08T06:14:33Z","author_association":"MEMBER","body":"Do we still need this @davisp @jiangphcn ?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571906821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571907279","html_url":"https://github.com/apache/couchdb/pull/1443#issuecomment-571907279","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1443","id":571907279,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTkwNzI3OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T06:16:42Z","updated_at":"2020-01-08T06:16:42Z","author_association":"MEMBER","body":"really wish we could get this into 3.0. :(","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571907279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571907494","html_url":"https://github.com/apache/couchdb/pull/1337#issuecomment-571907494","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1337","id":571907494,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTkwNzQ5NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T06:17:36Z","updated_at":"2020-01-08T06:17:36Z","author_association":"MEMBER","body":"@kocolosk are we abandoning this work in favour of the current -helm approach?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571907494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571907700","html_url":"https://github.com/apache/couchdb/pull/1272#issuecomment-571907700","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1272","id":571907700,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTkwNzcwMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T06:18:29Z","updated_at":"2020-01-08T06:18:29Z","author_association":"MEMBER","body":"This looks pretty gnarly to get back up to speed @rnewson , any chance for 3.x?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571907700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571907957","html_url":"https://github.com/apache/couchdb/pull/1734#issuecomment-571907957","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1734","id":571907957,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTkwNzk1Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T06:19:38Z","updated_at":"2020-01-08T06:19:38Z","author_association":"MEMBER","body":"@nickva is this DOA or any chance of trying it again?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571907957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571908831","html_url":"https://github.com/apache/couchdb/pull/1927#issuecomment-571908831","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1927","id":571908831,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTkwODgzMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T06:23:29Z","updated_at":"2020-01-08T06:23:29Z","author_association":"MEMBER","body":"@dch I'll take a look at this before the first 3.0.0 RC1. If you have time to help, though...would love to work together on it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571908831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571911560","html_url":"https://github.com/apache/couchdb/pull/1734#issuecomment-571911560","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1734","id":571911560,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTkxMTU2MA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T06:35:52Z","updated_at":"2020-01-08T06:35:52Z","author_association":"CONTRIBUTOR","body":"@wohali  hmm, good question. I am on the fence about it. Probably needs a discussion on the ML. Let's close it for now though.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571911560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571912009","html_url":"https://github.com/apache/couchdb/pull/1616#issuecomment-571912009","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1616","id":571912009,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTkxMjAwOQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T06:37:40Z","updated_at":"2020-01-08T06:37:40Z","author_association":"CONTRIBUTOR","body":"No yet. All clusters in Cloudant are moved to build with clustered purge feature now. We can close this and can re-open if other customer encounters some issue and really need to downgrade.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/571912009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572026782","html_url":"https://github.com/apache/couchdb/pull/1337#issuecomment-572026782","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1337","id":572026782,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjAyNjc4Mg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T12:28:12Z","updated_at":"2020-01-08T12:28:12Z","author_association":"MEMBER","body":"If someone wanted to bring it over the finish line I'd be happy to review and merge, but it's a low priority for me given the seedlist capability now adopted by the Helm chart. We can close this PR to clean things up.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572026782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572043783","html_url":"https://github.com/apache/couchdb/issues/2425#issuecomment-572043783","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2425","id":572043783,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjA0Mzc4Mw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T13:09:56Z","updated_at":"2020-01-08T13:09:56Z","author_association":"MEMBER","body":"They @tomasged the Apache CouchDB team does not provide support for version 1 anymore.\r\n\r\nCommercial options are available, e.g. at https://neighbourhood.ie/couchdb-support/production-support/ (thatâ€™s my company).\r\n\r\nThe first thing Iâ€™d check is if you have heavily conflicted documents.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572043783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572045053","html_url":"https://github.com/apache/couchdb/issues/2425#issuecomment-572045053","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2425","id":572045053,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjA0NTA1Mw==","user":{"login":"tomasged","id":59650761,"node_id":"MDQ6VXNlcjU5NjUwNzYx","avatar_url":"https://avatars.githubusercontent.com/u/59650761?v=4","gravatar_id":"","url":"https://api.github.com/users/tomasged","html_url":"https://github.com/tomasged","followers_url":"https://api.github.com/users/tomasged/followers","following_url":"https://api.github.com/users/tomasged/following{/other_user}","gists_url":"https://api.github.com/users/tomasged/gists{/gist_id}","starred_url":"https://api.github.com/users/tomasged/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomasged/subscriptions","organizations_url":"https://api.github.com/users/tomasged/orgs","repos_url":"https://api.github.com/users/tomasged/repos","events_url":"https://api.github.com/users/tomasged/events{/privacy}","received_events_url":"https://api.github.com/users/tomasged/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T13:13:35Z","updated_at":"2020-01-08T13:13:35Z","author_association":"NONE","body":"Thanks for the hint for the conflicted documents.\r\n\r\nSorry, the question still applies for CouchDB 2.x. With over committing disabled in Linux, will CouchDB 2.x try to manage the situation and/or the Erlang VM will crash gracefully?\r\n\r\nFor example, I know that Redis requires over committing but there's nothing in the CouchDB 2.x documentation mentioning this and possible cases.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572045053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572056440","html_url":"https://github.com/apache/couchdb/issues/2425#issuecomment-572056440","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2425","id":572056440,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjA1NjQ0MA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T13:40:27Z","updated_at":"2020-01-08T13:40:27Z","author_association":"MEMBER","body":"There are a number of `erl` tweaks that can keep CouchDB ram usage at a ceiling. `man erl` gives all the options.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572056440/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572120604","html_url":"https://github.com/apache/couchdb/issues/2423#issuecomment-572120604","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2423","id":572120604,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjEyMDYwNA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T15:27:46Z","updated_at":"2020-01-08T15:27:46Z","author_association":"MEMBER","body":"For the JNLP4-connect thing, I saw that on couchdb-ci-worker-dal-1-5 yesterday and it cleared itself up after awhile. No idea what's causing that.\r\n\r\nFor the failed without a stack trace I've also seen that happen to `design_docs.js` as well. And I have seen it once or twice locally. No idea what's causing it either.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572120604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572120902","html_url":"https://github.com/apache/couchdb/issues/2423#issuecomment-572120902","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2423","id":572120902,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjEyMDkwMg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T15:28:24Z","updated_at":"2020-01-08T15:28:24Z","author_association":"MEMBER","body":"That is to say, for the JS tests I think there's something awkward going on that's not test specific necessarily. Will be good to try and keep track of the failed runs so we can gather logs and so on.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572120902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572159483","html_url":"https://github.com/apache/couchdb/issues/2329#issuecomment-572159483","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2329","id":572159483,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjE1OTQ4Mw==","user":{"login":"dsshane","id":15656251,"node_id":"MDQ6VXNlcjE1NjU2MjUx","avatar_url":"https://avatars.githubusercontent.com/u/15656251?v=4","gravatar_id":"","url":"https://api.github.com/users/dsshane","html_url":"https://github.com/dsshane","followers_url":"https://api.github.com/users/dsshane/followers","following_url":"https://api.github.com/users/dsshane/following{/other_user}","gists_url":"https://api.github.com/users/dsshane/gists{/gist_id}","starred_url":"https://api.github.com/users/dsshane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsshane/subscriptions","organizations_url":"https://api.github.com/users/dsshane/orgs","repos_url":"https://api.github.com/users/dsshane/repos","events_url":"https://api.github.com/users/dsshane/events{/privacy}","received_events_url":"https://api.github.com/users/dsshane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T16:54:40Z","updated_at":"2020-01-08T16:54:40Z","author_association":"NONE","body":"@davisp Thanks a lot! Agree that the adding smarts in fabric_doc_open is better.  Is it possible to address this in next release, let's say 2.4. This problem (performance degradation with cluster mode) is preventing us to adopt the cluster mode.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572159483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572178117","html_url":"https://github.com/apache/couchdb/issues/2329#issuecomment-572178117","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2329","id":572178117,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjE3ODExNw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T17:41:02Z","updated_at":"2020-01-08T17:41:02Z","author_association":"MEMBER","body":"We won't be able to land this in the next release (3.0), but I do think an enhancement here makes sense. One technique that I've seen in other systems is\r\n\r\n1. ask every replica for the revision metadata to compute the quorum\r\n1. ask the \"nearest\" replica for the actual data (can be part of the same message above)\r\n1. if the nearest replica is not part of the quorum or serves stale data per the quorum computation, fire off requests for the data to the other replicas and use the first one to respond.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572178117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572210466","html_url":"https://github.com/apache/couchdb/issues/2404#issuecomment-572210466","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2404","id":572210466,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjIxMDQ2Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T19:04:04Z","updated_at":"2020-01-08T19:04:04Z","author_association":"MEMBER","body":"That PR didn't fix Fauxton on Windows @janl . Going to have to dig into the change more deeply, and see exactly how this functioned under 2.3.1.\r\n\r\nFor completeness, after `make release` on Windows, `rel\\couchdb\\bin\\couchdb` contains:\r\n\r\n```\r\nset COUCHDB_FAUXTON_DOCROOT=\"./share/www\"\r\n```\r\n\r\nand hitting `http://localhost:5984/_utils` after startup produces the raw text string `Not found.`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572210466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572227942","html_url":"https://github.com/apache/couchdb/issues/2404#issuecomment-572227942","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2404","id":572227942,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjIyNzk0Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T19:48:34Z","updated_at":"2020-01-08T19:48:34Z","author_association":"MEMBER","body":"Got it.\r\n\r\nIn .cmd/.bat files, you don't quote the value of a string with spaces. In other words,\r\n\r\n```batch\r\nC:\\relax\\couchdb\\rel\\couchdb>SET A=b c d\r\n\r\nC:\\relax\\couchdb\\rel\\couchdb>echo %A%\r\nb c d\r\n```\r\n\r\nPR coming up to fix this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572227942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572232665","html_url":"https://github.com/apache/couchdb/pull/2393#issuecomment-572232665","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2393","id":572232665,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjIzMjY2NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T20:01:18Z","updated_at":"2020-01-08T20:01:18Z","author_association":"MEMBER","body":"This will fix #2404.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572232665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572239115","html_url":"https://github.com/apache/couchdb/pull/2410#issuecomment-572239115","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2410","id":572239115,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjIzOTExNQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T20:18:25Z","updated_at":"2020-01-08T20:18:25Z","author_association":"MEMBER","body":"thanks for the review @garrensmith. I think the latest push addresses your comments.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572239115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572283639","html_url":"https://github.com/apache/couchdb/pull/2322#issuecomment-572283639","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2322","id":572283639,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjI4MzYzOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T22:15:39Z","updated_at":"2020-01-08T22:15:39Z","author_association":"MEMBER","body":"@rnewson Clouseau was approved and merged, per Jan's comment should we progress with this for 3.0?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572283639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572297218","html_url":"https://github.com/apache/couchdb/issues/2391#issuecomment-572297218","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2391","id":572297218,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjI5NzIxOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T22:54:08Z","updated_at":"2020-01-08T22:54:08Z","author_association":"MEMBER","body":"relaese notes WIP PR will be: https://github.com/apache/couchdb-documentation/pull/471","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572297218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572297356","html_url":"https://github.com/apache/couchdb/pull/2429#issuecomment-572297356","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2429","id":572297356,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjI5NzM1Ng==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T22:54:32Z","updated_at":"2020-01-08T22:54:32Z","author_association":"CONTRIBUTOR","body":"Interesting, got one seemingly flaky failure on first run:\r\n\r\n```\r\n]     chttpd_purge_tests:208: test_partial_purge_request...[0.049 s] ok\r\n\r\n[2020-01-08T22:49:17.758Z]     undefined\r\n\r\n[2020-01-08T22:49:17.758Z]     *** context setup failed ***\r\n\r\n[2020-01-08T22:49:17.758Z] **in function chttpd_purge_tests:'-create_db/1-fun-0-'/1 (test/eunit/chttpd_purge_tests.erl, line 43)\r\n\r\n[2020-01-08T22:49:17.758Z] in call from chttpd_purge_tests:setup/0 (test/eunit/chttpd_purge_tests.erl, line 32)\r\n\r\n[2020-01-08T22:49:17.758Z] **error:{assert,[{module,chttpd_purge_tests},\r\n\r\n[2020-01-08T22:49:17.758Z]          {line,43},\r\n\r\n[2020-01-08T22:49:17.758Z]          {expression,\"Status =:= 201 orelse Status =:= 202\"},\r\n\r\n[2020-01-08T22:49:17.758Z]          {expected,true},\r\n\r\n[2020-01-08T22:49:17.758Z]          {value,false}]}\r\n\r\n[2020-01-08T22:49:17.758Z] \r\n```\r\n\r\nDon't think I've seen that one before","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572297356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572298290","html_url":"https://github.com/apache/couchdb/pull/2429#issuecomment-572298290","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2429","id":572298290,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjI5ODI5MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T22:57:26Z","updated_at":"2020-01-08T22:57:26Z","author_association":"MEMBER","body":"@nickva I got this failure a couple of times last night, even without this change. See #2424 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572298290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572298880","html_url":"https://github.com/apache/couchdb/pull/2429#issuecomment-572298880","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2429","id":572298880,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjI5ODg4MA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T22:59:17Z","updated_at":"2020-01-08T22:59:17Z","author_association":"CONTRIBUTOR","body":"@wohali Ah interesting. New environment and fun and excited new failures.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572298880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572304711","html_url":"https://github.com/apache/couchdb/issues/2424#issuecomment-572304711","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2424","id":572304711,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjMwNDcxMQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T23:17:08Z","updated_at":"2020-01-08T23:17:08Z","author_association":"CONTRIBUTOR","body":"I noticed this as well. Dug into the logs and see that it was a flaky auth failure:\r\n\r\n\r\n```\r\n[notice] 2020-01-08T22:49:17.394510Z nonode@nohost <0.7059.0> -------- config: [admins] chttpd_db_test_admin deleted for reason nil\r\n[notice] 2020-01-08T22:49:17.395010Z nonode@nohost <0.7059.0> -------- config: [admins] chttpd_db_test_admin set to pass for reason nil\r\n[notice] 2020-01-08T22:49:17.396323Z nonode@nohost <0.7059.0> -------- config: [admins] chttpd_db_test_admin set to -pbkdf2-81cf7a744b3b0715c06d32436a3c0adee57502fb,01459c94b2344081794c3d0ff8a4ccb4,10 for reason nil\r\n[notice] 2020-01-08T22:49:17.399415Z nonode@nohost <0.7339.0> b3933e8c08 127.0.0.1:32949 127.0.0.1 undefined PUT /eunit-test-db-779d9be929aecb36d3f07bad0914b21a 401 ok 4\r\n[notice] 2020-01-08T22:49:17.400575Z nonode@nohost <0.7059.0> -------- config: [admins] chttpd_db_test_admin set to pass for reason nil\r\n```\r\n `PUT /eunit-test-db-779d9be929aecb36d3f07bad0914b21a 401` was expected to be 202 or 201 but is 401 instead","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572304711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572313313","html_url":"https://github.com/apache/couchdb/pull/2429#issuecomment-572313313","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2429","id":572313313,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjMxMzMxMw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T23:49:06Z","updated_at":"2020-01-08T23:49:06Z","author_association":"MEMBER","body":"I've seen this one on a number of builds as well. I'll take it to be a flaky test and look tomorrow.\r\n\r\nPart of removing the loop is to avoid letting it compensate for these flaky tests so we finally fix things so I can't say this is a bad thing necessarily.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572313313/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572323390","html_url":"https://github.com/apache/couchdb/issues/2424#issuecomment-572323390","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2424","id":572323390,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjMyMzM5MA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-09T00:28:36Z","updated_at":"2020-01-09T00:28:36Z","author_association":"CONTRIBUTOR","body":"thanks @nickva for getting further on this issue. I can't reproduce locally. knowing that this is flaky and happened on CI. Where did you find couchdb log?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572323390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572324327","html_url":"https://github.com/apache/couchdb/pull/2322#issuecomment-572324327","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2322","id":572324327,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjMyNDMyNw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-09T00:32:21Z","updated_at":"2020-01-09T00:32:21Z","author_association":"CONTRIBUTOR","body":"thanks @wohali and @janl for comments for this PR. Finally, we found that we just need to https://github.com/cloudant-labs/clouseau/pull/27. It means that we don't need the change on dreyfus anymore. Let me close this PR. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572324327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572386337","html_url":"https://github.com/apache/couchdb/issues/2424#issuecomment-572386337","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2424","id":572386337,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjM4NjMzNw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-09T04:54:56Z","updated_at":"2020-01-09T04:54:56Z","author_association":"CONTRIBUTOR","body":"np @jiangphcn!\r\n\r\n@wohali had added a nifty way for the log files to be uploaded to a server on test failure.  If you look at the end in the Jenkins logs, you'll see a URL where it was uploaded. The only thing is that `jenkins` gets replaced with `****`. So you'd just replace jenkins back in and then download the logs with`wget` or `curl`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572386337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572387260","html_url":"https://github.com/apache/couchdb/pull/2429#issuecomment-572387260","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2429","id":572387260,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjM4NzI2MA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-09T04:58:48Z","updated_at":"2020-01-09T14:42:32Z","author_association":"CONTRIBUTOR","body":"@davisp I did a bit of investigating https://github.com/apache/couchdb/issues/2424#issuecomment-572304711. Log file shows that flakiness coming from the auth (user / pass) not working after the setup finishes. So first PUT ends up with a 401 instead of 201/202.\r\n\r\nIf there is not obvious error in the flakiness, we could do something like `test_util:wait_until...` until auth is finally ready.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/572387260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]