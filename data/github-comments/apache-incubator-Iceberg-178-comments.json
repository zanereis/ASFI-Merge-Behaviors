[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1153794236","html_url":"https://github.com/apache/iceberg/pull/4946#issuecomment-1153794236","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4946","id":1153794236,"node_id":"IC_kwDOCW7NX85ExYC8","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T11:21:25Z","updated_at":"2022-06-13T11:21:25Z","author_association":"MEMBER","body":"@pvary : I have addressed the comments. Please check. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1153794236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154032265","html_url":"https://github.com/apache/iceberg/pull/5020#issuecomment-1154032265","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5020","id":1154032265,"node_id":"IC_kwDOCW7NX85EySKJ","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T14:59:13Z","updated_at":"2022-06-13T14:59:13Z","author_association":"CONTRIBUTOR","body":"@singhpk234 that makes sense, thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154032265/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154035127","html_url":"https://github.com/apache/iceberg/pull/4792#issuecomment-1154035127","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4792","id":1154035127,"node_id":"IC_kwDOCW7NX85EyS23","user":{"login":"samredai","id":43911210,"node_id":"MDQ6VXNlcjQzOTExMjEw","avatar_url":"https://avatars.githubusercontent.com/u/43911210?v=4","gravatar_id":"","url":"https://api.github.com/users/samredai","html_url":"https://github.com/samredai","followers_url":"https://api.github.com/users/samredai/followers","following_url":"https://api.github.com/users/samredai/following{/other_user}","gists_url":"https://api.github.com/users/samredai/gists{/gist_id}","starred_url":"https://api.github.com/users/samredai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samredai/subscriptions","organizations_url":"https://api.github.com/users/samredai/orgs","repos_url":"https://api.github.com/users/samredai/repos","events_url":"https://api.github.com/users/samredai/events{/privacy}","received_events_url":"https://api.github.com/users/samredai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T15:01:35Z","updated_at":"2022-06-13T15:01:35Z","author_association":"CONTRIBUTOR","body":"@rdblue I agree this isn't optimal and I was planning to add the file-io you mentioned but renamed to `SmartOpenFileIO`. The main reason why I'm hoping to add this `BotoFileIO` is to enable using a custom AWS signer. I couldn't find a way to do this with PyArrow's s3 filesystem (cc: @emkornfield to confirm). I'll have to look into if this is possible with [smart_open](https://github.com/RaRe-Technologies/smart_open). If it is then I think it makes sense to go with that and close this PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154035127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154089505","html_url":"https://github.com/apache/iceberg/issues/3433#issuecomment-1154089505","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3433","id":1154089505,"node_id":"IC_kwDOCW7NX85EygIh","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T15:48:59Z","updated_at":"2022-06-13T15:48:59Z","author_association":"CONTRIBUTOR","body":"Closing this issue as Flink 1.14 has been supported for a while now","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154089505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154099316","html_url":"https://github.com/apache/iceberg/issues/4977#issuecomment-1154099316","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4977","id":1154099316,"node_id":"IC_kwDOCW7NX85Eyih0","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T15:58:32Z","updated_at":"2022-06-13T15:58:32Z","author_association":"CONTRIBUTOR","body":"Thanks for opening this @kondamudikarthik!\r\n\r\n@youngxinler: first, thanks for your interest in this discussions. It’s not entirely true that writing to Iceberg tables needs to be achieved via a computing engine. It can absolutely be achieved with just the plain Java API (or the new Python refactor). While I generally recommend that a compute engine be used, as it’s an easier experience, my understanding is that Kafka Connect is a framework for map-side only / per-record transforms for writing data from Kafka to some other location (in this case Iceberg tables).\r\n\r\nNear-real time data is very often written as-is or with only a handful of per-record transforms. For example, upstream producers will stage the data as they want it written, and then the folks who maintain the data lake might add some metadata to the record (ingestion timestamp etc) but otherwise write the data out as it’s been received, while ensuring that the data has consistent schema.\r\n\r\nThere are many scenarios in which Kafka Connect would be beneficial to end users and if there’s interest from the community then it’s something we should definitely consider supporting.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154099316/reactions","total_count":10,"+1":10,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154100931","html_url":"https://github.com/apache/iceberg/pull/4792#issuecomment-1154100931","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4792","id":1154100931,"node_id":"IC_kwDOCW7NX85Eyi7D","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T16:00:10Z","updated_at":"2022-06-13T16:01:43Z","author_association":"CONTRIBUTOR","body":"@samredai, I saw that `smart_open` does allow you to pass your own S3 session or client. I think it should be possible.\r\n\r\nIn the [smart_open docs](https://github.com/RaRe-Technologies/smart_open), there's an example:\r\n\r\n```python\r\nwith open(url, 'wb', transport_params={'client': session.client('s3')}) as fout:\r\n    ...\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154100931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154101043","html_url":"https://github.com/apache/iceberg/issues/4977#issuecomment-1154101043","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4977","id":1154101043,"node_id":"IC_kwDOCW7NX85Eyi8z","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T16:00:16Z","updated_at":"2022-06-13T16:00:16Z","author_association":"CONTRIBUTOR","body":"That said, I’d love to know of / hear from people who have Kafka Connect experience and would be interested in helping contribute code or review code! I’m by no means an expert with Kafka Connect, but I can gladly help with the Iceberg side of things.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154101043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154122166","html_url":"https://github.com/apache/iceberg/pull/4792#issuecomment-1154122166","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4792","id":1154122166,"node_id":"IC_kwDOCW7NX85EyoG2","user":{"login":"samredai","id":43911210,"node_id":"MDQ6VXNlcjQzOTExMjEw","avatar_url":"https://avatars.githubusercontent.com/u/43911210?v=4","gravatar_id":"","url":"https://api.github.com/users/samredai","html_url":"https://github.com/samredai","followers_url":"https://api.github.com/users/samredai/followers","following_url":"https://api.github.com/users/samredai/following{/other_user}","gists_url":"https://api.github.com/users/samredai/gists{/gist_id}","starred_url":"https://api.github.com/users/samredai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samredai/subscriptions","organizations_url":"https://api.github.com/users/samredai/orgs","repos_url":"https://api.github.com/users/samredai/repos","events_url":"https://api.github.com/users/samredai/events{/privacy}","received_events_url":"https://api.github.com/users/samredai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T16:19:31Z","updated_at":"2022-06-13T16:19:31Z","author_association":"CONTRIBUTOR","body":"@rdblue Nice! I'll try that out and confirm everything works as expected. Then I'll open a `SmartOpenFileIO` PR and close this one.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154122166/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154123892","html_url":"https://github.com/apache/iceberg/issues/5000#issuecomment-1154123892","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5000","id":1154123892,"node_id":"IC_kwDOCW7NX85Eyoh0","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T16:21:05Z","updated_at":"2022-06-13T16:21:05Z","author_association":"CONTRIBUTOR","body":"So far, I want to say that I like a lot about where this is going @wuwenchi.\r\n\r\nI think working on the UDF transforms would be a good first step (as those would have benefit regardless).\r\n\r\n> I think this has no effect on other engines, because watermarks and computed columns themselves do not actually store data, they just will add some logical processing when querying, but these logics only take effect on flink.What is actually stored is the data of the original physical columns, and the related format has not changed.\r\n\r\nMy one concern here would be that users often use one engine, say Flink, for writing and then other engines later for processing. It might be the case that people want these computed columns reflected in the data (possibly even stored, though in the case of partition transforms and partitions in general, the partition fields value isn’t generally stored multiple times).\r\n\r\nIt might be the case we cannot do certain things other than with Flink. Watermarks might be one of those. Though there could be steps we could take to make as much of this information available to downstream consumers as possible.\r\n\r\nFor example, it has been discussed before to use the iceberg sequence ID as a form of a watermark (as it’s generally monotonically increasing). While other engines might not have native support for watermarks in them, at least having the data available would be beneficial.\r\n\r\nTLDR - Again, I think the UDFs you mentioned would be great to work on first, as those have value regardless of how we proceed next (for example, users might want to query with Iceberg’s bucket function as a way to more narrowly specify a subset of data to perform an action on).\r\n\r\n> Of course, maybe the above things can be implemented with Calcite, but since I am not particularly familiar with Calcite, the implementation may be more complicated, and it may also require the cooperation of flink, so we prefer to use this simpler way.\r\n\r\nI don’t have much knowledge of Calcite either, but in the more medium to long term, I think it would be good to reach out to the Flink community to possibly have some of these concepts more natively supported.\r\n\r\nMy concern with using names directly to infer the function is that many users might have columns with those names (_years, etc) already in the data.\r\n\r\nBut with the approach of the UDF, that issue goes away (as users can already choose the partition column name in Spark for example using `ALTER TABLE … ADD PARTITION FIELD bucket(16, id) AS shard`.\r\n\r\nWould you be interested in doing a POC or PR of just the transformation functions at first? Then at the community sync up we can possibly bring this up and form a working group to get input from others on this subject 🙂 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154123892/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154131534","html_url":"https://github.com/apache/iceberg/pull/4926#issuecomment-1154131534","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4926","id":1154131534,"node_id":"IC_kwDOCW7NX85EyqZO","user":{"login":"namrathamyske","id":17932873,"node_id":"MDQ6VXNlcjE3OTMyODcz","avatar_url":"https://avatars.githubusercontent.com/u/17932873?v=4","gravatar_id":"","url":"https://api.github.com/users/namrathamyske","html_url":"https://github.com/namrathamyske","followers_url":"https://api.github.com/users/namrathamyske/followers","following_url":"https://api.github.com/users/namrathamyske/following{/other_user}","gists_url":"https://api.github.com/users/namrathamyske/gists{/gist_id}","starred_url":"https://api.github.com/users/namrathamyske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namrathamyske/subscriptions","organizations_url":"https://api.github.com/users/namrathamyske/orgs","repos_url":"https://api.github.com/users/namrathamyske/repos","events_url":"https://api.github.com/users/namrathamyske/events{/privacy}","received_events_url":"https://api.github.com/users/namrathamyske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T16:28:32Z","updated_at":"2022-06-13T16:28:32Z","author_association":"CONTRIBUTOR","body":"@jackye1995 Is it possible for you to review this?\r\n\r\ncc: @SreeramGarlapati ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154131534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154131785","html_url":"https://github.com/apache/iceberg/pull/5010#issuecomment-1154131785","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5010","id":1154131785,"node_id":"IC_kwDOCW7NX85EyqdJ","user":{"login":"namrathamyske","id":17932873,"node_id":"MDQ6VXNlcjE3OTMyODcz","avatar_url":"https://avatars.githubusercontent.com/u/17932873?v=4","gravatar_id":"","url":"https://api.github.com/users/namrathamyske","html_url":"https://github.com/namrathamyske","followers_url":"https://api.github.com/users/namrathamyske/followers","following_url":"https://api.github.com/users/namrathamyske/following{/other_user}","gists_url":"https://api.github.com/users/namrathamyske/gists{/gist_id}","starred_url":"https://api.github.com/users/namrathamyske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namrathamyske/subscriptions","organizations_url":"https://api.github.com/users/namrathamyske/orgs","repos_url":"https://api.github.com/users/namrathamyske/repos","events_url":"https://api.github.com/users/namrathamyske/events{/privacy}","received_events_url":"https://api.github.com/users/namrathamyske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T16:28:48Z","updated_at":"2022-06-13T16:28:48Z","author_association":"CONTRIBUTOR","body":"@jackye1995 Is it possible for you to review this?\r\n\r\ncc: @SreeramGarlapati ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154131785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154148268","html_url":"https://github.com/apache/iceberg/issues/4251#issuecomment-1154148268","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4251","id":1154148268,"node_id":"IC_kwDOCW7NX85Eyues","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T16:42:53Z","updated_at":"2022-06-13T16:42:53Z","author_association":"CONTRIBUTOR","body":"> > Can you provide a user side example of your idea @yittg? I want to make sure I understand it fully.\r\n> > This feature is not required for my personal scenario. In our platform, the metadata is not managed by Flink SQL, so I have no example about this though.\r\n> \r\n> This issue was primarily intended to initiate a discussion with some preliminary idea.\r\n\r\nFully understood. I’m glad this discussion is coming up.\r\n\r\nI think a few people have given a few different ideas, and I think that some combination of them will likely wind up being best. For example, I really like @wuwenchi’s idea of using UDFs for transform functions vs relying on the column names.\r\n\r\nOne concern with column names is that then would break behavior for users who already have fields with those names (eg they’ve got a data field called ts_month that isn’t intended as a partition transform). I know generally speaking that’s how partition transform fields wind up being named, but we don’t rely on the name but the `PartitionSpec` and associated `PartitionField`s and users are free to rename the partition columns as they choose.\r\n\r\nBut I’m glad this is being brought up. Possibly as the next community sync this can be brought up and then a small working group or anybody interested could come to some design meetings? Throwing that out there as a consideration.\r\n\r\nAppreciate your taking the time to propose this @yittg (as well as work done by @wuwenchi @hililiwei and others that I apologize if I missed).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154148268/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154148641","html_url":"https://github.com/apache/iceberg/pull/5024#issuecomment-1154148641","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5024","id":1154148641,"node_id":"IC_kwDOCW7NX85Eyukh","user":{"login":"steveloughran","id":162090,"node_id":"MDQ6VXNlcjE2MjA5MA==","avatar_url":"https://avatars.githubusercontent.com/u/162090?v=4","gravatar_id":"","url":"https://api.github.com/users/steveloughran","html_url":"https://github.com/steveloughran","followers_url":"https://api.github.com/users/steveloughran/followers","following_url":"https://api.github.com/users/steveloughran/following{/other_user}","gists_url":"https://api.github.com/users/steveloughran/gists{/gist_id}","starred_url":"https://api.github.com/users/steveloughran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steveloughran/subscriptions","organizations_url":"https://api.github.com/users/steveloughran/orgs","repos_url":"https://api.github.com/users/steveloughran/repos","events_url":"https://api.github.com/users/steveloughran/events{/privacy}","received_events_url":"https://api.github.com/users/steveloughran/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T16:43:18Z","updated_at":"2022-06-13T16:43:18Z","author_association":"CONTRIBUTOR","body":"for anyone wondering \"why 3.2.0 and not 3.2.3?\": you need to upgrade hive from 3.2.1+ just to get guava versions lined up.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154148641/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154156417","html_url":"https://github.com/apache/iceberg/issues/5000#issuecomment-1154156417","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5000","id":1154156417,"node_id":"IC_kwDOCW7NX85EyweB","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T16:51:39Z","updated_at":"2022-06-13T16:51:39Z","author_association":"CONTRIBUTOR","body":"I guess TLDR\r\n\r\n> The difference from spark here is that the partition field name in spark is generated by iceberg by default, while flink can specify the field name in the computed column, so the partition field name uses the name specified by the user.\r\n\r\nIt would be nice if the name could be autogenerated (with the option to override it), but I personally wouldn’t make that a blocker for moving forward if we had the UDFs.\r\n\r\nI am generally not a fan of using the names to infer specific information, as Iceberg tends to use numeric IDs for everything to help avoid a number of cases.\r\n\r\nFor example, if I have a field `referralId` and it were in a flink.computed-columns field or something, and then I dropped it and later added a new field `referralId`, that new field very well potentially represent something else. This is one of the big reasons we use numeric identifiers for fields, so that they can be renamed and that situations like the one mentioned don’t cause issues (as I have seen that exact situation cause issues - especially when you don’t control the field name, e.g. it comes from a 3rd party).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154156417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154158916","html_url":"https://github.com/apache/iceberg/issues/5000#issuecomment-1154158916","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5000","id":1154158916,"node_id":"IC_kwDOCW7NX85EyxFE","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T16:54:27Z","updated_at":"2022-06-13T16:54:27Z","author_association":"CONTRIBUTOR","body":"Also, can you elaborate more on why this restriction exists?\r\n\r\n> Restriction: Because computed columns are not currently supported, when there are computed columns in DDL, these computed columns must be in partition keys.\r\n\r\nIf somebody uses a generated column for a field, why does it have to be a partition field? What am I missing that imposes that requirement?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154158916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154165069","html_url":"https://github.com/apache/iceberg/issues/5014#issuecomment-1154165069","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5014","id":1154165069,"node_id":"IC_kwDOCW7NX85EyylN","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T17:01:27Z","updated_at":"2022-06-13T17:02:01Z","author_association":"CONTRIBUTOR","body":"So the issue with the field being named `key` has been resolved.\r\n\r\nDo you have any reference, for example to MySQL documentation (and ideally Postgres documentation) that states what the field length limit is?\r\n\r\nYou mentioned MySQL 8, but do you know which versions of MySQL are affected by this and does the latest version of MySQL fail due to the `varchar` size?\r\n\r\nThat would be a helpful first step in finding a better size.\r\n\r\nWe’d then need to update the code, and likely provide a path for users to upgrade (or some configuration field indicating to use the old style), depending on what RDBMS are affected.\r\n\r\nI’d ask, if possible, that you consider opening a new issue focusing on just the field size limits, referencing this issue. That way there’s less overhead for people reading it as the field name has been changed already.\r\n\r\nThank you for reporting this @noneback!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154165069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154170386","html_url":"https://github.com/apache/iceberg/issues/4952#issuecomment-1154170386","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4952","id":1154170386,"node_id":"IC_kwDOCW7NX85Eyz4S","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T17:07:04Z","updated_at":"2022-06-13T17:07:04Z","author_association":"CONTRIBUTOR","body":"As #5017 has been merged and the field has been renamed, I’m going to close this issue.\r\n\r\nPlease create a new issue if there’s a new question, or reopen this issue if the follow up relates directly to the field name (or potentially open a new isssue that references this one).\r\n\r\nThank you for reporting @sungwy and thank you for the patch @syun64! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154170386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154173521","html_url":"https://github.com/apache/iceberg/issues/4971#issuecomment-1154173521","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4971","id":1154173521,"node_id":"IC_kwDOCW7NX85Ey0pR","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T17:10:26Z","updated_at":"2022-06-13T17:10:26Z","author_association":"CONTRIBUTOR","body":"Hi @JunjianS!\r\n\r\nThanks for your interest and report.\r\n\r\nYou’re right that a commit is generated. I know in other places we do that for what is effectively a no-op (or might be viewed as one).\r\n\r\nSome people have argued in some cases that they _do_ want the commit to occur / new snapshot to be present, to still represent that the action took place.\r\n\r\nPerhaps this might be better suited for the user (or even dev) mailing list? I know there have been many opinions on whether or not certain operations should generate commits.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154173521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154176676","html_url":"https://github.com/apache/iceberg/issues/4971#issuecomment-1154176676","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4971","id":1154176676,"node_id":"IC_kwDOCW7NX85Ey1ak","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T17:13:46Z","updated_at":"2022-06-13T17:13:46Z","author_association":"CONTRIBUTOR","body":"As an aside, may I ask what you have you max concurrent checkpoints set to with Flink? I would advise you keep it at 1.\r\n\r\nAdditionally, I would advise that you configure (via Flink configuration) a minimum time between checkpoints.\r\n\r\nDefining a minimum time between checkpoints (default is zero) ensures that if a checkpoint takes place, if it takes long enough to complete that another checkpoint would have already started, that checkpoint is skipped to allow the engine time to process more data.\r\n\r\nI know that an empty commit could still occur in some scenarios, for example a Kafka topic might not receive data at all for 10 minutes.\r\n\r\nBut if you’re not using those two Flink configurations, I highly suggest you do as they will reduce the chances of this happening and also generally make your jobs more stable. 🙂 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154176676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154190065","html_url":"https://github.com/apache/iceberg/issues/5023#issuecomment-1154190065","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5023","id":1154190065,"node_id":"IC_kwDOCW7NX85Ey4rx","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T17:28:04Z","updated_at":"2022-06-13T17:28:04Z","author_association":"CONTRIBUTOR","body":"First, you don’t need to include both `iceberg-core` and `iceberg-spark-runtime-3.2_2.12`. For Iceberg, the “Spark runtime” jar is the only dependency required (though you nigh need some non-Iceberg dependencies, such as AWS s3 Java SDK v2 to use S3FileIO). But `iceberg-core` is already included in the Spark runtime jar.\r\n\r\nSecond, can you please provide the full output of `desc extended <tbl>`? I’m wondering if one of the columns has maybe been dropped, and so the query filter is being simplified to false because a non-null value is being provided.\r\n\r\nIn any case, the `desc extended <tbl>` output, as well as the full logs from the deletion, would be beneficial.\r\n\r\nIt’s also possible that one of the columns you marked is a partition column or something and that value isn’t present. Just a couple guesses, but the full logs as well as the `desc extended <tbl>` output would help a lot in debugging.\r\n\r\nAdditionally, querying the current snapshot with that same filter to see if any data is returned (eg `select count(*) from tbl where <that deletion where clause>`) would also be beneficial in debugging.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154190065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154194003","html_url":"https://github.com/apache/iceberg/issues/4959#issuecomment-1154194003","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4959","id":1154194003,"node_id":"IC_kwDOCW7NX85Ey5pT","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T17:32:23Z","updated_at":"2022-06-13T17:32:23Z","author_association":"CONTRIBUTOR","body":"No worries about your English.\r\n\r\nI think it’s best in the long run to ask the project to set the language if they depend on the output string (which they do).\r\n\r\nFor now, if running with LANGUAGE before the build helps, we can consider adding that the the FAQ for users who hit this issue. We can also set the LANGUAGE value in the GitHub actions, though that won’t fix the local.\r\n\r\nI’ll try reproducing and then also commenting on the issue in the project that you opened.\r\n\r\nDefinitely at least making note of this in our documentation in an FAQ would be good. Thanks @KarlManong!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154194003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154198123","html_url":"https://github.com/apache/iceberg/issues/4889#issuecomment-1154198123","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4889","id":1154198123,"node_id":"IC_kwDOCW7NX85Ey6pr","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T17:37:08Z","updated_at":"2022-06-13T17:37:08Z","author_association":"CONTRIBUTOR","body":"Wanted to let you know I’ve seen this issue @cccs-jc \r\n\r\ndo you know if this is something that can be used with non-Iceberg datasourcev2 tables? If so, then we only need to update Iceberg. If not, we might need to update the upstream Spark as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154198123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154201511","html_url":"https://github.com/apache/iceberg/pull/5024#issuecomment-1154201511","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5024","id":1154201511,"node_id":"IC_kwDOCW7NX85Ey7en","user":{"login":"steveloughran","id":162090,"node_id":"MDQ6VXNlcjE2MjA5MA==","avatar_url":"https://avatars.githubusercontent.com/u/162090?v=4","gravatar_id":"","url":"https://api.github.com/users/steveloughran","html_url":"https://github.com/steveloughran","followers_url":"https://api.github.com/users/steveloughran/followers","following_url":"https://api.github.com/users/steveloughran/following{/other_user}","gists_url":"https://api.github.com/users/steveloughran/gists{/gist_id}","starred_url":"https://api.github.com/users/steveloughran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steveloughran/subscriptions","organizations_url":"https://api.github.com/users/steveloughran/orgs","repos_url":"https://api.github.com/users/steveloughran/repos","events_url":"https://api.github.com/users/steveloughran/events{/privacy}","received_events_url":"https://api.github.com/users/steveloughran/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T17:41:07Z","updated_at":"2022-06-13T17:51:28Z","author_association":"CONTRIBUTOR","body":"[TEZ-3853](https://issues.apache.org/jira/browse/TEZ-3853) Binary incompatibility caused by DEFAULT_LOG_LEVEL\r\n\r\nit looks like hive/tez will need some version update, because the version of tez used in the tests isn't compatible with hadoop branch 3. This is going to make for a more traumatic change","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154201511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154241027","html_url":"https://github.com/apache/iceberg/pull/5007#issuecomment-1154241027","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5007","id":1154241027,"node_id":"IC_kwDOCW7NX85EzFID","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T18:25:53Z","updated_at":"2022-06-13T18:25:53Z","author_association":"CONTRIBUTOR","body":"I see. The problem is that there isn't a way to override the check from SQL. Iceberg does allow you to make incompatible changes if you decide to \"force\" the change. But the SQL API doesn't have a way to do that an will always fail.\r\n\r\nLooks like Postgres supports this by immediately checking the table to see if there are any null values. We should be able to use a metadata check to do the same, assuming that the column's metadata collection is not set to `none`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154241027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154299437","html_url":"https://github.com/apache/iceberg/pull/5020#issuecomment-1154299437","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5020","id":1154299437,"node_id":"IC_kwDOCW7NX85EzTYt","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T19:12:04Z","updated_at":"2022-06-13T19:12:04Z","author_association":"CONTRIBUTOR","body":"@Fokko, can you check the other LICENSE files for binaries and update those if needed? We may have copied this more places.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154299437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154377615","html_url":"https://github.com/apache/iceberg/pull/5007#issuecomment-1154377615","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5007","id":1154377615,"node_id":"IC_kwDOCW7NX85EzmeP","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T20:06:11Z","updated_at":"2022-06-13T20:06:11Z","author_association":"COLLABORATOR","body":"Yea, that sounds like a cool feature to have","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154377615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154385684","html_url":"https://github.com/apache/iceberg/pull/4908#issuecomment-1154385684","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4908","id":1154385684,"node_id":"IC_kwDOCW7NX85EzocU","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T20:15:32Z","updated_at":"2022-06-13T20:15:32Z","author_association":"CONTRIBUTOR","body":"Thanks, @jun-he!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154385684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154412690","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1154412690","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1154412690,"node_id":"IC_kwDOCW7NX85EzvCS","user":{"login":"puchengy","id":8072956,"node_id":"MDQ6VXNlcjgwNzI5NTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072956?v=4","gravatar_id":"","url":"https://api.github.com/users/puchengy","html_url":"https://github.com/puchengy","followers_url":"https://api.github.com/users/puchengy/followers","following_url":"https://api.github.com/users/puchengy/following{/other_user}","gists_url":"https://api.github.com/users/puchengy/gists{/gist_id}","starred_url":"https://api.github.com/users/puchengy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/puchengy/subscriptions","organizations_url":"https://api.github.com/users/puchengy/orgs","repos_url":"https://api.github.com/users/puchengy/repos","events_url":"https://api.github.com/users/puchengy/events{/privacy}","received_events_url":"https://api.github.com/users/puchengy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T20:36:43Z","updated_at":"2022-06-13T20:37:24Z","author_association":"CONTRIBUTOR","body":"@kbendick Hey sorry for the delay on the reply. In our spark version, we are seeing the filter pushed down to the scan operator for plain spark.\r\n\r\n```\r\nspark-sql> create table tbl_test_predicate_4 (id bigint, dt string) using parquet partitioned by (dt);\r\nResponse code\r\nTime taken: 1.03 seconds\r\nspark-sql> explain select * from tbl_test_predicate_4 where dt between date_add('2022-06-06', -1) AND '2022-06-06';\r\nplan\r\n== Physical Plan ==\r\n*(1) ColumnarToRow\r\n+- FileScan parquet pyang.tbl_test_predicate_4[id#12L,dt#13] Batched: true, DataFilters: [], Format: Parquet, Location: InMemoryFileIndex(0 paths)[], PartitionFilters: [isnotnull(dt#13), (cast(dt#13 as date) >= 2022-06-05), (dt#13 <= 2022-06-06)], PushedFilters: [], ReadSchema: struct<id:bigint>\r\n```\r\n\r\nI wonder do you see the same thing on your side (i.e. predicate not pushed down for Iceberg, but predicate get pushed down for non-Iceberg).\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154412690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154422670","html_url":"https://github.com/apache/iceberg/pull/5020#issuecomment-1154422670","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5020","id":1154422670,"node_id":"IC_kwDOCW7NX85EzxeO","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T20:45:57Z","updated_at":"2022-06-13T20:45:57Z","author_association":"CONTRIBUTOR","body":"@rdblue I checked the rest, and it looks good 👍🏻 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154422670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154430977","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1154430977","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1154430977,"node_id":"IC_kwDOCW7NX85EzzgB","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T20:56:13Z","updated_at":"2022-06-13T20:57:12Z","author_association":"MEMBER","body":"@puchengy The example you pasted shows there is a function applied to the column\r\n\r\nsee\r\n\r\n```\r\n(cast(dt#119 as date) >= 2022-06-05) \r\n AND (dt#119 <= 2022-06-06))\r\n```\r\n\r\nIn general this is a problem for Datasources, although in 3.2? 3.3? a rule was added to force cast the literal side of the predicate but I think that's still limited only to certain types of literals. Basically the issue is that if Spark thinks a function like `cast` must be applied to a DataSource Column then it is not allowed to push down that predicate. It can only push down predicates where the columns are not modified in any way before being compared to a literal.\r\n\r\nI wrote about this a long time ago [here](https://www.russellspitzer.com/2016/04/18/Catalyst-Debugging/)\r\n\r\nThe issue in your particular query is that _dt_ is a **string** and the output of your function is a **date**. Spark needs to resolve this mismatch so it casts _dt_ as a date so the types match. The types now match, but it is impossible to pushdown the predicate. To fix it you cast the literal output as **string** before Spark has a chance to cast _dt_.  You'll notice that in your example the other predicate is always pushed down correctly because it is a literal string being compared to a string column.\r\n\r\nThis has been the case in Spark for external datasources for a very long time so I don't think it's a new issue.\r\n\r\nIn this case you fix it by casting the \"literal\" part of the predicate to match the column type.\r\n```sql\r\nselect * from tbl where dt between cast(date_add('2022-01-01, -1) as String) and '2022-01-01'\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154430977/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154464965","html_url":"https://github.com/apache/iceberg/issues/4356#issuecomment-1154464965","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4356","id":1154464965,"node_id":"IC_kwDOCW7NX85Ez7zF","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T21:38:22Z","updated_at":"2022-06-13T21:38:22Z","author_association":"COLLABORATOR","body":"Closed via #4630","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154464965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154465738","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1154465738","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1154465738,"node_id":"IC_kwDOCW7NX85Ez7_K","user":{"login":"puchengy","id":8072956,"node_id":"MDQ6VXNlcjgwNzI5NTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072956?v=4","gravatar_id":"","url":"https://api.github.com/users/puchengy","html_url":"https://github.com/puchengy","followers_url":"https://api.github.com/users/puchengy/followers","following_url":"https://api.github.com/users/puchengy/following{/other_user}","gists_url":"https://api.github.com/users/puchengy/gists{/gist_id}","starred_url":"https://api.github.com/users/puchengy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/puchengy/subscriptions","organizations_url":"https://api.github.com/users/puchengy/orgs","repos_url":"https://api.github.com/users/puchengy/repos","events_url":"https://api.github.com/users/puchengy/events{/privacy}","received_events_url":"https://api.github.com/users/puchengy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T21:39:19Z","updated_at":"2022-06-13T21:39:19Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer got it, thank you very much! And thanks @kbendick as well!!\r\n\r\nI am closing this issue right now.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154465738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154468929","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1154468929","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1154468929,"node_id":"IC_kwDOCW7NX85Ez8xB","user":{"login":"puchengy","id":8072956,"node_id":"MDQ6VXNlcjgwNzI5NTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072956?v=4","gravatar_id":"","url":"https://api.github.com/users/puchengy","html_url":"https://github.com/puchengy","followers_url":"https://api.github.com/users/puchengy/followers","following_url":"https://api.github.com/users/puchengy/following{/other_user}","gists_url":"https://api.github.com/users/puchengy/gists{/gist_id}","starred_url":"https://api.github.com/users/puchengy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/puchengy/subscriptions","organizations_url":"https://api.github.com/users/puchengy/orgs","repos_url":"https://api.github.com/users/puchengy/repos","events_url":"https://api.github.com/users/puchengy/events{/privacy}","received_events_url":"https://api.github.com/users/puchengy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T21:43:51Z","updated_at":"2022-06-13T21:44:32Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer BTW, do you know if there are related ongoing issues in the Spark community that we can follow? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154468929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154471992","html_url":"https://github.com/apache/iceberg/pull/4898#issuecomment-1154471992","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4898","id":1154471992,"node_id":"IC_kwDOCW7NX85Ez9g4","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T21:47:54Z","updated_at":"2022-06-13T21:47:54Z","author_association":"COLLABORATOR","body":"Yea there is some limited discussion in this related issue, but I guess no good conclusions:  https://github.com/apache/iceberg/issues/2542.  \r\n\r\nMaybe a test writer that creates metadata files with all optional columns as null?  That way can test all the new columns at once.\r\n\r\nBy the way,  change mostly looks good, and it's good you put the new field is optional to avoid the issue like the one mentioned.  I just dont know enough about the serialization/deserialization code to be sure if there are any other problems with previous serialized metadata, so was hoping to have a test to verify it.  Though can leave to @rdblue to approve if he is confident , and we can tackle the backward compat tests on the side.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154471992/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154504247","html_url":"https://github.com/apache/iceberg/issues/2542#issuecomment-1154504247","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2542","id":1154504247,"node_id":"IC_kwDOCW7NX85E0FY3","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T22:25:49Z","updated_at":"2022-06-13T22:26:24Z","author_association":"COLLABORATOR","body":"A bit late to the discussion, and didnt look very closely, but I wonder if we can make Testwriters for the various metadata that writes null for all optional fields, and then try to deserialize it with the regular readers, to test all newly-fields at once.   @RussellSpitzer , @yyanyy ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154504247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154529386","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1154529386","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1154529386,"node_id":"IC_kwDOCW7NX85E0Lhq","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T22:57:49Z","updated_at":"2022-06-13T22:57:49Z","author_association":"MEMBER","body":"@puchengy There were ... But it's been a while since I saw them and I searched for a bit and couldn't find them again. I'm pretty sure the issue with fully applying the fix was that apparently it was always safer to call cast on the table column than on the literal ... I think .... I can't remember the full logic or what the pr was called. I thought the logic would be in Analyzer.scala but I didn't see it when I skimmed through.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154529386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154530854","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1154530854","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1154530854,"node_id":"IC_kwDOCW7NX85E0L4m","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T23:00:47Z","updated_at":"2022-06-13T23:01:59Z","author_association":"MEMBER","body":"Oh i'm silly, my coworker actually did all of this work\r\n\r\nHere is the first PR @sunchao submitted a way long time ago :). \r\n\r\nhttps://github.com/apache/spark/commit/3d08084022a4365966526216a616a3b760450884 \r\n\r\nhttps://github.com/apache/spark/blob/master/sql/catalyst/src/main/scala/org/apache/spark/sql/catalyst/optimizer/UnwrapCastInBinaryComparison.scala\r\n\r\nThere is actually a lot of documentation in that rule to explain when it get's applied and the difficulties with doing it generically.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154530854/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154554220","html_url":"https://github.com/apache/iceberg/pull/2105#issuecomment-1154554220","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2105","id":1154554220,"node_id":"IC_kwDOCW7NX85E0Rls","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T23:41:16Z","updated_at":"2022-06-13T23:41:16Z","author_association":"CONTRIBUTOR","body":"@zoucao for the MVP version, there are two sub PRs left: (1) PR #4986 part 2 of enumerator (2) the `IcebergSource` that puts everything together. Based on the pace, I think we are talking about probably another 1.5-2 months.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154554220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154589332","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1154589332","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1154589332,"node_id":"IC_kwDOCW7NX85E0aKU","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T00:43:09Z","updated_at":"2022-06-14T00:43:09Z","author_association":"CONTRIBUTOR","body":"Thank you @RussellSpitzer for bringing the heat in terms of Catalyst knowledge and for your wonderful blog... you're gonna need to blog more because I'm gonna be sending a lot of traffic that way =)\r\n\r\nI had suspected this was generally the case, but the solution of casting to a string again before the comparison to the column escaped me. Thank you!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154589332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154610939","html_url":"https://github.com/apache/iceberg/pull/5007#issuecomment-1154610939","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5007","id":1154610939,"node_id":"IC_kwDOCW7NX85E0fb7","user":{"login":"zhongyujiang","id":42907416,"node_id":"MDQ6VXNlcjQyOTA3NDE2","avatar_url":"https://avatars.githubusercontent.com/u/42907416?v=4","gravatar_id":"","url":"https://api.github.com/users/zhongyujiang","html_url":"https://github.com/zhongyujiang","followers_url":"https://api.github.com/users/zhongyujiang/followers","following_url":"https://api.github.com/users/zhongyujiang/following{/other_user}","gists_url":"https://api.github.com/users/zhongyujiang/gists{/gist_id}","starred_url":"https://api.github.com/users/zhongyujiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhongyujiang/subscriptions","organizations_url":"https://api.github.com/users/zhongyujiang/orgs","repos_url":"https://api.github.com/users/zhongyujiang/repos","events_url":"https://api.github.com/users/zhongyujiang/events{/privacy}","received_events_url":"https://api.github.com/users/zhongyujiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T01:26:19Z","updated_at":"2022-06-14T01:26:19Z","author_association":"CONTRIBUTOR","body":"+1 Sounds like a cool feature!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154610939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154636197","html_url":"https://github.com/apache/iceberg/issues/4977#issuecomment-1154636197","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4977","id":1154636197,"node_id":"IC_kwDOCW7NX85E0lml","user":{"login":"youngxinler","id":36697727,"node_id":"MDQ6VXNlcjM2Njk3NzI3","avatar_url":"https://avatars.githubusercontent.com/u/36697727?v=4","gravatar_id":"","url":"https://api.github.com/users/youngxinler","html_url":"https://github.com/youngxinler","followers_url":"https://api.github.com/users/youngxinler/followers","following_url":"https://api.github.com/users/youngxinler/following{/other_user}","gists_url":"https://api.github.com/users/youngxinler/gists{/gist_id}","starred_url":"https://api.github.com/users/youngxinler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/youngxinler/subscriptions","organizations_url":"https://api.github.com/users/youngxinler/orgs","repos_url":"https://api.github.com/users/youngxinler/repos","events_url":"https://api.github.com/users/youngxinler/events{/privacy}","received_events_url":"https://api.github.com/users/youngxinler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T02:20:05Z","updated_at":"2022-06-14T02:20:40Z","author_association":"CONTRIBUTOR","body":"thanks for @kbendick discussion,  i agree for @kbendick  advice,  although usually sometime we use compute engine to write, but kafka is very popular,  if iceberg support kafka connector to iceberg, it will help more developer who use iceberg or want to use iceberg.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154636197/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154636699","html_url":"https://github.com/apache/iceberg/issues/5025#issuecomment-1154636699","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5025","id":1154636699,"node_id":"IC_kwDOCW7NX85E0lub","user":{"login":"renshangtao","id":53618158,"node_id":"MDQ6VXNlcjUzNjE4MTU4","avatar_url":"https://avatars.githubusercontent.com/u/53618158?v=4","gravatar_id":"","url":"https://api.github.com/users/renshangtao","html_url":"https://github.com/renshangtao","followers_url":"https://api.github.com/users/renshangtao/followers","following_url":"https://api.github.com/users/renshangtao/following{/other_user}","gists_url":"https://api.github.com/users/renshangtao/gists{/gist_id}","starred_url":"https://api.github.com/users/renshangtao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renshangtao/subscriptions","organizations_url":"https://api.github.com/users/renshangtao/orgs","repos_url":"https://api.github.com/users/renshangtao/repos","events_url":"https://api.github.com/users/renshangtao/events{/privacy}","received_events_url":"https://api.github.com/users/renshangtao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T02:21:14Z","updated_at":"2022-06-14T02:21:14Z","author_association":"CONTRIBUTOR","body":"@rdblue @openinx @kbendick \r\nLooking forward for feedback, thank you.\r\n\r\n#5026 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154636699/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154651022","html_url":"https://github.com/apache/iceberg/issues/5014#issuecomment-1154651022","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5014","id":1154651022,"node_id":"IC_kwDOCW7NX85E0pOO","user":{"login":"noneback","id":46670806,"node_id":"MDQ6VXNlcjQ2NjcwODA2","avatar_url":"https://avatars.githubusercontent.com/u/46670806?v=4","gravatar_id":"","url":"https://api.github.com/users/noneback","html_url":"https://github.com/noneback","followers_url":"https://api.github.com/users/noneback/followers","following_url":"https://api.github.com/users/noneback/following{/other_user}","gists_url":"https://api.github.com/users/noneback/gists{/gist_id}","starred_url":"https://api.github.com/users/noneback/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noneback/subscriptions","organizations_url":"https://api.github.com/users/noneback/orgs","repos_url":"https://api.github.com/users/noneback/repos","events_url":"https://api.github.com/users/noneback/events{/privacy}","received_events_url":"https://api.github.com/users/noneback/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T02:50:12Z","updated_at":"2022-06-14T02:50:12Z","author_association":"NONE","body":"I will open another issue. Thanks for your reply.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154651022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154652121","html_url":"https://github.com/apache/iceberg/issues/4981#issuecomment-1154652121","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4981","id":1154652121,"node_id":"IC_kwDOCW7NX85E0pfZ","user":{"login":"noneback","id":46670806,"node_id":"MDQ6VXNlcjQ2NjcwODA2","avatar_url":"https://avatars.githubusercontent.com/u/46670806?v=4","gravatar_id":"","url":"https://api.github.com/users/noneback","html_url":"https://github.com/noneback","followers_url":"https://api.github.com/users/noneback/followers","following_url":"https://api.github.com/users/noneback/following{/other_user}","gists_url":"https://api.github.com/users/noneback/gists{/gist_id}","starred_url":"https://api.github.com/users/noneback/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noneback/subscriptions","organizations_url":"https://api.github.com/users/noneback/orgs","repos_url":"https://api.github.com/users/noneback/repos","events_url":"https://api.github.com/users/noneback/events{/privacy}","received_events_url":"https://api.github.com/users/noneback/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T02:52:23Z","updated_at":"2022-06-14T02:52:23Z","author_association":"NONE","body":"No reply. So I just close this issue.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154652121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154665861","html_url":"https://github.com/apache/iceberg/pull/5024#issuecomment-1154665861","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5024","id":1154665861,"node_id":"IC_kwDOCW7NX85E0s2F","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T03:21:25Z","updated_at":"2022-06-14T03:21:25Z","author_association":"CONTRIBUTOR","body":"> you need to upgrade hive from 3.2.1+ just to get guava versions lined up.\r\n\r\nIceberg shades Guava to avoid conflicts. Do we need to worry about this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154665861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154666375","html_url":"https://github.com/apache/iceberg/pull/5019#issuecomment-1154666375","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5019","id":1154666375,"node_id":"IC_kwDOCW7NX85E0s-H","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T03:22:40Z","updated_at":"2022-06-14T03:22:40Z","author_association":"CONTRIBUTOR","body":"Thanks, @findepi!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154666375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154666614","html_url":"https://github.com/apache/iceberg/pull/5022#issuecomment-1154666614","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5022","id":1154666614,"node_id":"IC_kwDOCW7NX85E0tB2","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T03:23:11Z","updated_at":"2022-06-14T03:23:11Z","author_association":"CONTRIBUTOR","body":"Thanks, @singhpk234!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154666614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154669858","html_url":"https://github.com/apache/iceberg/issues/5015#issuecomment-1154669858","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5015","id":1154669858,"node_id":"IC_kwDOCW7NX85E0t0i","user":{"login":"shiyuhang0","id":52435083,"node_id":"MDQ6VXNlcjUyNDM1MDgz","avatar_url":"https://avatars.githubusercontent.com/u/52435083?v=4","gravatar_id":"","url":"https://api.github.com/users/shiyuhang0","html_url":"https://github.com/shiyuhang0","followers_url":"https://api.github.com/users/shiyuhang0/followers","following_url":"https://api.github.com/users/shiyuhang0/following{/other_user}","gists_url":"https://api.github.com/users/shiyuhang0/gists{/gist_id}","starred_url":"https://api.github.com/users/shiyuhang0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shiyuhang0/subscriptions","organizations_url":"https://api.github.com/users/shiyuhang0/orgs","repos_url":"https://api.github.com/users/shiyuhang0/repos","events_url":"https://api.github.com/users/shiyuhang0/events{/privacy}","received_events_url":"https://api.github.com/users/shiyuhang0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T03:29:45Z","updated_at":"2022-06-14T03:29:45Z","author_association":"NONE","body":"thanks","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154669858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154712167","html_url":"https://github.com/apache/iceberg/issues/4977#issuecomment-1154712167","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4977","id":1154712167,"node_id":"IC_kwDOCW7NX85E04Jn","user":{"login":"kondamudikarthik","id":11358195,"node_id":"MDQ6VXNlcjExMzU4MTk1","avatar_url":"https://avatars.githubusercontent.com/u/11358195?v=4","gravatar_id":"","url":"https://api.github.com/users/kondamudikarthik","html_url":"https://github.com/kondamudikarthik","followers_url":"https://api.github.com/users/kondamudikarthik/followers","following_url":"https://api.github.com/users/kondamudikarthik/following{/other_user}","gists_url":"https://api.github.com/users/kondamudikarthik/gists{/gist_id}","starred_url":"https://api.github.com/users/kondamudikarthik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kondamudikarthik/subscriptions","organizations_url":"https://api.github.com/users/kondamudikarthik/orgs","repos_url":"https://api.github.com/users/kondamudikarthik/repos","events_url":"https://api.github.com/users/kondamudikarthik/events{/privacy}","received_events_url":"https://api.github.com/users/kondamudikarthik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T04:58:54Z","updated_at":"2022-06-14T04:58:54Z","author_association":"NONE","body":"Thanks, @kbendick. That's right having the ability to ingest data into Iceberg via Kafka Connect is a very powerful feature to have. @youngxinler I'm working on spec for the same, keep an eye on this space for more updates.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154712167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154760987","html_url":"https://github.com/apache/iceberg/pull/3834#issuecomment-1154760987","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3834","id":1154760987,"node_id":"IC_kwDOCW7NX85E1EEb","user":{"login":"Xiangakun","id":20922357,"node_id":"MDQ6VXNlcjIwOTIyMzU3","avatar_url":"https://avatars.githubusercontent.com/u/20922357?v=4","gravatar_id":"","url":"https://api.github.com/users/Xiangakun","html_url":"https://github.com/Xiangakun","followers_url":"https://api.github.com/users/Xiangakun/followers","following_url":"https://api.github.com/users/Xiangakun/following{/other_user}","gists_url":"https://api.github.com/users/Xiangakun/gists{/gist_id}","starred_url":"https://api.github.com/users/Xiangakun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xiangakun/subscriptions","organizations_url":"https://api.github.com/users/Xiangakun/orgs","repos_url":"https://api.github.com/users/Xiangakun/repos","events_url":"https://api.github.com/users/Xiangakun/events{/privacy}","received_events_url":"https://api.github.com/users/Xiangakun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T06:16:12Z","updated_at":"2022-06-14T06:16:12Z","author_association":"NONE","body":"The comment in TestDeltaTaskWriter.testCdcEvents should also be updated since it may confuse the user.\r\n\r\n<img width=\"1249\" alt=\"image\" src=\"https://user-images.githubusercontent.com/20922357/173506075-71791563-fef2-4c53-88dc-618b1d45362d.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154760987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154766431","html_url":"https://github.com/apache/iceberg/issues/4959#issuecomment-1154766431","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4959","id":1154766431,"node_id":"IC_kwDOCW7NX85E1FZf","user":{"login":"KarlManong","id":2627662,"node_id":"MDQ6VXNlcjI2Mjc2NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2627662?v=4","gravatar_id":"","url":"https://api.github.com/users/KarlManong","html_url":"https://github.com/KarlManong","followers_url":"https://api.github.com/users/KarlManong/followers","following_url":"https://api.github.com/users/KarlManong/following{/other_user}","gists_url":"https://api.github.com/users/KarlManong/gists{/gist_id}","starred_url":"https://api.github.com/users/KarlManong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KarlManong/subscriptions","organizations_url":"https://api.github.com/users/KarlManong/orgs","repos_url":"https://api.github.com/users/KarlManong/repos","events_url":"https://api.github.com/users/KarlManong/events{/privacy}","received_events_url":"https://api.github.com/users/KarlManong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T06:24:02Z","updated_at":"2022-06-14T06:24:02Z","author_association":"CONTRIBUTOR","body":"Yes, FAQ would be good.\r\n\r\nThank U too.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154766431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154771852","html_url":"https://github.com/apache/iceberg/pull/4993#issuecomment-1154771852","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4993","id":1154771852,"node_id":"IC_kwDOCW7NX85E1GuM","user":{"login":"wang-x-xia","id":83057695,"node_id":"MDQ6VXNlcjgzMDU3Njk1","avatar_url":"https://avatars.githubusercontent.com/u/83057695?v=4","gravatar_id":"","url":"https://api.github.com/users/wang-x-xia","html_url":"https://github.com/wang-x-xia","followers_url":"https://api.github.com/users/wang-x-xia/followers","following_url":"https://api.github.com/users/wang-x-xia/following{/other_user}","gists_url":"https://api.github.com/users/wang-x-xia/gists{/gist_id}","starred_url":"https://api.github.com/users/wang-x-xia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wang-x-xia/subscriptions","organizations_url":"https://api.github.com/users/wang-x-xia/orgs","repos_url":"https://api.github.com/users/wang-x-xia/repos","events_url":"https://api.github.com/users/wang-x-xia/events{/privacy}","received_events_url":"https://api.github.com/users/wang-x-xia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T06:31:52Z","updated_at":"2022-06-14T06:31:52Z","author_association":"CONTRIBUTOR","body":"Thanks for @samredai 's help. My English is bad. If you have other suggestions, I'll fix them to make this document more readable.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154771852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154854904","html_url":"https://github.com/apache/iceberg/pull/5021#issuecomment-1154854904","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5021","id":1154854904,"node_id":"IC_kwDOCW7NX85E1a_4","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T08:06:34Z","updated_at":"2022-06-14T08:06:34Z","author_association":"MEMBER","body":"@rdblue thank you for your review. Updated accordingly.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154854904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154880048","html_url":"https://github.com/apache/iceberg/pull/4537#issuecomment-1154880048","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4537","id":1154880048,"node_id":"IC_kwDOCW7NX85E1hIw","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T08:31:46Z","updated_at":"2022-06-14T08:31:46Z","author_association":"MEMBER","body":"Rebased after https://github.com/apache/iceberg/pull/5019 merged.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154880048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154927742","html_url":"https://github.com/apache/iceberg/issues/4251#issuecomment-1154927742","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4251","id":1154927742,"node_id":"IC_kwDOCW7NX85E1sx-","user":{"login":"hililiwei","id":59213263,"node_id":"MDQ6VXNlcjU5MjEzMjYz","avatar_url":"https://avatars.githubusercontent.com/u/59213263?v=4","gravatar_id":"","url":"https://api.github.com/users/hililiwei","html_url":"https://github.com/hililiwei","followers_url":"https://api.github.com/users/hililiwei/followers","following_url":"https://api.github.com/users/hililiwei/following{/other_user}","gists_url":"https://api.github.com/users/hililiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/hililiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hililiwei/subscriptions","organizations_url":"https://api.github.com/users/hililiwei/orgs","repos_url":"https://api.github.com/users/hililiwei/repos","events_url":"https://api.github.com/users/hililiwei/events{/privacy}","received_events_url":"https://api.github.com/users/hililiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T09:15:11Z","updated_at":"2022-06-14T09:15:11Z","author_association":"CONTRIBUTOR","body":"I think we've been stuck on FLink integrations such as compute columns for too long.\r\nIn Flink's flow calculation, the computed columns and so on is a rigid requirement.\r\nI agree with @kbendick  that we should mention it at the next community meeting and form a design team to finish it as soon as possible.\r\nAny progress is better than standing still.\r\nSo far, I've seen three or four different proposals. We should focus on them and then design a workable proposal and get it done.\r\nWithout this support, Flink streaming tasks simply don't work.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154927742/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154931555","html_url":"https://github.com/apache/iceberg/issues/4251#issuecomment-1154931555","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4251","id":1154931555,"node_id":"IC_kwDOCW7NX85E1ttj","user":{"login":"hililiwei","id":59213263,"node_id":"MDQ6VXNlcjU5MjEzMjYz","avatar_url":"https://avatars.githubusercontent.com/u/59213263?v=4","gravatar_id":"","url":"https://api.github.com/users/hililiwei","html_url":"https://github.com/hililiwei","followers_url":"https://api.github.com/users/hililiwei/followers","following_url":"https://api.github.com/users/hililiwei/following{/other_user}","gists_url":"https://api.github.com/users/hililiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/hililiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hililiwei/subscriptions","organizations_url":"https://api.github.com/users/hililiwei/orgs","repos_url":"https://api.github.com/users/hililiwei/repos","events_url":"https://api.github.com/users/hililiwei/events{/privacy}","received_events_url":"https://api.github.com/users/hililiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T09:18:40Z","updated_at":"2022-06-14T09:18:40Z","author_association":"CONTRIBUTOR","body":"We've adopted an approach #4994  internally, but ryan doesn't seem to think it's feasible.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154931555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154945761","html_url":"https://github.com/apache/iceberg/pull/4625#issuecomment-1154945761","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4625","id":1154945761,"node_id":"IC_kwDOCW7NX85E1xLh","user":{"login":"hililiwei","id":59213263,"node_id":"MDQ6VXNlcjU5MjEzMjYz","avatar_url":"https://avatars.githubusercontent.com/u/59213263?v=4","gravatar_id":"","url":"https://api.github.com/users/hililiwei","html_url":"https://github.com/hililiwei","followers_url":"https://api.github.com/users/hililiwei/followers","following_url":"https://api.github.com/users/hililiwei/following{/other_user}","gists_url":"https://api.github.com/users/hililiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/hililiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hililiwei/subscriptions","organizations_url":"https://api.github.com/users/hililiwei/orgs","repos_url":"https://api.github.com/users/hililiwei/repos","events_url":"https://api.github.com/users/hililiwei/events{/privacy}","received_events_url":"https://api.github.com/users/hililiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T09:31:39Z","updated_at":"2022-06-14T09:31:39Z","author_association":"CONTRIBUTOR","body":"As for computed columns, we try to support it in Iceberg itself, so that not only Flink, but other engines can also use it, but this change is quite large, just for reference https://github.com/apache/iceberg/pull/4994. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1154945761/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155054083","html_url":"https://github.com/apache/iceberg/issues/4889#issuecomment-1155054083","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4889","id":1155054083,"node_id":"IC_kwDOCW7NX85E2LoD","user":{"login":"cccs-jc","id":56140112,"node_id":"MDQ6VXNlcjU2MTQwMTEy","avatar_url":"https://avatars.githubusercontent.com/u/56140112?v=4","gravatar_id":"","url":"https://api.github.com/users/cccs-jc","html_url":"https://github.com/cccs-jc","followers_url":"https://api.github.com/users/cccs-jc/followers","following_url":"https://api.github.com/users/cccs-jc/following{/other_user}","gists_url":"https://api.github.com/users/cccs-jc/gists{/gist_id}","starred_url":"https://api.github.com/users/cccs-jc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cccs-jc/subscriptions","organizations_url":"https://api.github.com/users/cccs-jc/orgs","repos_url":"https://api.github.com/users/cccs-jc/repos","events_url":"https://api.github.com/users/cccs-jc/events{/privacy}","received_events_url":"https://api.github.com/users/cccs-jc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T11:23:19Z","updated_at":"2022-06-14T11:23:19Z","author_association":"CONTRIBUTOR","body":"I think this is an iceberg only issue. I don't know how it would be applied using spark dataframes.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155054083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155079167","html_url":"https://github.com/apache/iceberg/issues/5000#issuecomment-1155079167","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5000","id":1155079167,"node_id":"IC_kwDOCW7NX85E2Rv_","user":{"login":"wuwenchi","id":19755729,"node_id":"MDQ6VXNlcjE5NzU1NzI5","avatar_url":"https://avatars.githubusercontent.com/u/19755729?v=4","gravatar_id":"","url":"https://api.github.com/users/wuwenchi","html_url":"https://github.com/wuwenchi","followers_url":"https://api.github.com/users/wuwenchi/followers","following_url":"https://api.github.com/users/wuwenchi/following{/other_user}","gists_url":"https://api.github.com/users/wuwenchi/gists{/gist_id}","starred_url":"https://api.github.com/users/wuwenchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuwenchi/subscriptions","organizations_url":"https://api.github.com/users/wuwenchi/orgs","repos_url":"https://api.github.com/users/wuwenchi/repos","events_url":"https://api.github.com/users/wuwenchi/events{/privacy}","received_events_url":"https://api.github.com/users/wuwenchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T11:49:34Z","updated_at":"2022-06-14T11:49:34Z","author_association":"CONTRIBUTOR","body":"\r\n> For example, if I have a field referralId and it were in a flink.computed-columns field or something, and then I dropped it and later added a new field referralId, that new field very well potentially represent something else.\r\nIt might be the case that people want these computed columns reflected in the data (possibly even stored, though in the case of partition transforms and partitions in general, the partition fields value isn’t generally stored multiple times).\r\n\r\nYes, because flink can't modify the partition field now, I have some lack of consideration in this regard, and there may be some problems in the future. I'll re-analyze this issue. Thanks for your great ideas!\r\n\r\n> If somebody uses a generated column for a field, why does it have to be a partition field?\r\n\r\nThe current version does not support computed columns. When there is a computed column in the DDL, it will directly return unsupported. Because I want to get the transform of the partition through the computed column, but I did not release all the computed columns, only the computed columns that can become the partition transform, other types of computed columns will still have the original error.\r\n\r\n> Would you be interested in doing a POC or PR of just the transformation functions at first?\r\n\r\nGlad to do this! Can I contact your slack directly when I have some ideas or questions?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155079167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155141020","html_url":"https://github.com/apache/iceberg/pull/5024#issuecomment-1155141020","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5024","id":1155141020,"node_id":"IC_kwDOCW7NX85E2g2c","user":{"login":"steveloughran","id":162090,"node_id":"MDQ6VXNlcjE2MjA5MA==","avatar_url":"https://avatars.githubusercontent.com/u/162090?v=4","gravatar_id":"","url":"https://api.github.com/users/steveloughran","html_url":"https://github.com/steveloughran","followers_url":"https://api.github.com/users/steveloughran/followers","following_url":"https://api.github.com/users/steveloughran/following{/other_user}","gists_url":"https://api.github.com/users/steveloughran/gists{/gist_id}","starred_url":"https://api.github.com/users/steveloughran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steveloughran/subscriptions","organizations_url":"https://api.github.com/users/steveloughran/orgs","repos_url":"https://api.github.com/users/steveloughran/repos","events_url":"https://api.github.com/users/steveloughran/events{/privacy}","received_events_url":"https://api.github.com/users/steveloughran/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T12:48:17Z","updated_at":"2022-06-14T12:48:17Z","author_association":"CONTRIBUTOR","body":"hive and tez turn out to have problems in the public branches; ASF hive is currently only building against 3.1 until https://github.com/apache/hive/pull/3279 is in. I'm going to avoid touching this PR for a bit while I see about getting parquet building against 3.2 first","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155141020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155149335","html_url":"https://github.com/apache/iceberg/pull/5033#issuecomment-1155149335","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5033","id":1155149335,"node_id":"IC_kwDOCW7NX85E2i4X","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T12:55:54Z","updated_at":"2022-06-14T12:55:54Z","author_association":"MEMBER","body":"cc: @nastra, @snazy ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155149335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155289687","html_url":"https://github.com/apache/iceberg/pull/4578#issuecomment-1155289687","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4578","id":1155289687,"node_id":"IC_kwDOCW7NX85E3FJX","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T14:42:17Z","updated_at":"2022-06-14T14:42:17Z","author_association":"CONTRIBUTOR","body":"Thanks, @amogh-jahagirdar!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155289687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155306625","html_url":"https://github.com/apache/iceberg/pull/5030#issuecomment-1155306625","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5030","id":1155306625,"node_id":"IC_kwDOCW7NX85E3JSB","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T14:55:36Z","updated_at":"2022-06-14T14:55:36Z","author_association":"COLLABORATOR","body":"Found at https://github.com/python/cpython/issues/85160 that singledispatchmethod significantly slower than singledispatch. As the community is working to fix it, wondering if we should just keep singledispatchmethod for simplicity. \r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155306625/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155311035","html_url":"https://github.com/apache/iceberg/pull/5034#issuecomment-1155311035","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5034","id":1155311035,"node_id":"IC_kwDOCW7NX85E3KW7","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T14:59:14Z","updated_at":"2022-06-14T14:59:14Z","author_association":"CONTRIBUTOR","body":"@amogh-jahagirdar, can you take a look?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155311035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155427881","html_url":"https://github.com/apache/iceberg/pull/5034#issuecomment-1155427881","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5034","id":1155427881,"node_id":"IC_kwDOCW7NX85E3m4p","user":{"login":"amogh-jahagirdar","id":87500546,"node_id":"MDQ6VXNlcjg3NTAwNTQ2","avatar_url":"https://avatars.githubusercontent.com/u/87500546?v=4","gravatar_id":"","url":"https://api.github.com/users/amogh-jahagirdar","html_url":"https://github.com/amogh-jahagirdar","followers_url":"https://api.github.com/users/amogh-jahagirdar/followers","following_url":"https://api.github.com/users/amogh-jahagirdar/following{/other_user}","gists_url":"https://api.github.com/users/amogh-jahagirdar/gists{/gist_id}","starred_url":"https://api.github.com/users/amogh-jahagirdar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amogh-jahagirdar/subscriptions","organizations_url":"https://api.github.com/users/amogh-jahagirdar/orgs","repos_url":"https://api.github.com/users/amogh-jahagirdar/repos","events_url":"https://api.github.com/users/amogh-jahagirdar/events{/privacy}","received_events_url":"https://api.github.com/users/amogh-jahagirdar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T16:29:54Z","updated_at":"2022-06-14T16:29:54Z","author_association":"CONTRIBUTOR","body":"Thanks for catching this I missed this in https://github.com/amogh-jahagirdar/iceberg/pull/1/files\r\n\r\nLooks like there are some checkstyle errors in TestRemoveSnapshots but other than that looks good to me!\r\n\r\n[Error: Checkstyle] [ERROR] /home/runner/work/iceberg/iceberg/core/src/test/java/org/apache/iceberg/TestRemoveSnapshots.java:34:1: Extra separation in import group before 'java.io.IOException' [ImportOrder]\r\nError: eckstyle] [ERROR] /home/runner/work/iceberg/iceberg/core/src/test/java/org/apache/iceberg/TestRemoveSnapshots.java:34:1: Wrong order for 'java.io.IOException' import. [ImportOrder]","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155427881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155440960","html_url":"https://github.com/apache/iceberg/pull/5009#issuecomment-1155440960","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5009","id":1155440960,"node_id":"IC_kwDOCW7NX85E3qFA","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T16:40:36Z","updated_at":"2022-06-14T16:40:36Z","author_association":"CONTRIBUTOR","body":"This changes some of the existing behavior:\r\n- `changed-partition-count` does not include \"unpartitioned\" - so the number of changed partitions could potentially go down by 1 in some scenarios (or not be present at all).\r\n  -  We can decouple the function that writes the `partition.` stats and the count of changed partitions to keep the old behavior.\r\n- Stops writing partition summaries for unpartitioned tables (the goal of the PR). So there won't be a `partitions.` summary in the file for the unpartitioned section of the table.\r\n  - Void partition transforms (dropped partitions) in v1 tables will still be included in partition summary stats as they transform to `alwaysNull` and where the change was made, it's not possible to differentiate between an actual partition field with a null value vs the void transform.\r\n  - This does not affect v2 tables which don't use the void transform\r\n\r\nThe big one is the `changed-partition-count`. We can decouple the logic so that `changed-partition-count` is still 1 for the unpartitioned parts of the table when they are touched (technically at present, if a V2 table has multiple unpartitioned specs, there will only be 1 value in total added to `changed-partition-count`, instead of the value being incremented for each unpartitioned section of the table).\r\n\r\nIf anybody has a real-world use case where the original behavior is needed, I'm very open to hearing it. My goal is just to remove `partition.` partition summary fields caused by the PartitionSpec for `PartitionSpec.unpartitioned()` being defined as an empty list of fields.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155440960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155519984","html_url":"https://github.com/apache/iceberg/pull/5024#issuecomment-1155519984","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5024","id":1155519984,"node_id":"IC_kwDOCW7NX85E39Xw","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T17:59:09Z","updated_at":"2022-06-14T17:59:09Z","author_association":"MEMBER","body":"is there possible to use hadoop shaded client?\r\nhttps://issues.apache.org/jira/browse/HADOOP-11656","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155519984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155621685","html_url":"https://github.com/apache/iceberg/pull/5010#issuecomment-1155621685","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5010","id":1155621685,"node_id":"IC_kwDOCW7NX85E4WM1","user":{"login":"namrathamyske","id":17932873,"node_id":"MDQ6VXNlcjE3OTMyODcz","avatar_url":"https://avatars.githubusercontent.com/u/17932873?v=4","gravatar_id":"","url":"https://api.github.com/users/namrathamyske","html_url":"https://github.com/namrathamyske","followers_url":"https://api.github.com/users/namrathamyske/followers","following_url":"https://api.github.com/users/namrathamyske/following{/other_user}","gists_url":"https://api.github.com/users/namrathamyske/gists{/gist_id}","starred_url":"https://api.github.com/users/namrathamyske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namrathamyske/subscriptions","organizations_url":"https://api.github.com/users/namrathamyske/orgs","repos_url":"https://api.github.com/users/namrathamyske/repos","events_url":"https://api.github.com/users/namrathamyske/events{/privacy}","received_events_url":"https://api.github.com/users/namrathamyske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T19:19:08Z","updated_at":"2022-06-14T19:19:08Z","author_association":"CONTRIBUTOR","body":"@amogh-jahagirdar incorporated your feedback. Thanks for your review.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155621685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155664392","html_url":"https://github.com/apache/iceberg/pull/4920#issuecomment-1155664392","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4920","id":1155664392,"node_id":"IC_kwDOCW7NX85E4goI","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T20:08:58Z","updated_at":"2022-06-14T20:08:58Z","author_association":"CONTRIBUTOR","body":"Hey @rdblue I've gone through the comments, the only one open is currently: https://github.com/apache/iceberg/pull/4920#discussion_r897261489 Not sure if we want to break the protocol, or make a helper class. Apart from that, I've added a lot of tests to do some checks and boost the coverage a bit. Let me know what you think!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155664392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155668500","html_url":"https://github.com/apache/iceberg/pull/4982#issuecomment-1155668500","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4982","id":1155668500,"node_id":"IC_kwDOCW7NX85E4hoU","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T20:14:14Z","updated_at":"2022-06-14T20:14:14Z","author_association":"CONTRIBUTOR","body":"@rdblue @danielcweeks rebased :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155668500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155730097","html_url":"https://github.com/apache/iceberg/pull/5036#issuecomment-1155730097","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5036","id":1155730097,"node_id":"IC_kwDOCW7NX85E4wqx","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T21:29:48Z","updated_at":"2022-06-14T21:29:48Z","author_association":"CONTRIBUTOR","body":"@rdblue @pvary can you help review, thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155730097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155777567","html_url":"https://github.com/apache/iceberg/pull/5036#issuecomment-1155777567","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5036","id":1155777567,"node_id":"IC_kwDOCW7NX85E48Qf","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T22:38:46Z","updated_at":"2022-06-14T22:38:46Z","author_association":"CONTRIBUTOR","body":"@szehon-ho and @RussellSpitzer, you may be interested in this one, too.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155777567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155788005","html_url":"https://github.com/apache/iceberg/pull/5035#issuecomment-1155788005","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5035","id":1155788005,"node_id":"IC_kwDOCW7NX85E4-zl","user":{"login":"huaxingao","id":13592258,"node_id":"MDQ6VXNlcjEzNTkyMjU4","avatar_url":"https://avatars.githubusercontent.com/u/13592258?v=4","gravatar_id":"","url":"https://api.github.com/users/huaxingao","html_url":"https://github.com/huaxingao","followers_url":"https://api.github.com/users/huaxingao/followers","following_url":"https://api.github.com/users/huaxingao/following{/other_user}","gists_url":"https://api.github.com/users/huaxingao/gists{/gist_id}","starred_url":"https://api.github.com/users/huaxingao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huaxingao/subscriptions","organizations_url":"https://api.github.com/users/huaxingao/orgs","repos_url":"https://api.github.com/users/huaxingao/repos","events_url":"https://api.github.com/users/huaxingao/events{/privacy}","received_events_url":"https://api.github.com/users/huaxingao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T22:58:30Z","updated_at":"2022-06-14T22:58:30Z","author_association":"CONTRIBUTOR","body":"cc @rdblue @RussellSpitzer @kbendick @chenjunjiedada @hililiwei","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155788005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155830618","html_url":"https://github.com/apache/iceberg/pull/5039#issuecomment-1155830618","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5039","id":1155830618,"node_id":"IC_kwDOCW7NX85E5JNa","user":{"login":"abmo-x","id":69539469,"node_id":"MDQ6VXNlcjY5NTM5NDY5","avatar_url":"https://avatars.githubusercontent.com/u/69539469?v=4","gravatar_id":"","url":"https://api.github.com/users/abmo-x","html_url":"https://github.com/abmo-x","followers_url":"https://api.github.com/users/abmo-x/followers","following_url":"https://api.github.com/users/abmo-x/following{/other_user}","gists_url":"https://api.github.com/users/abmo-x/gists{/gist_id}","starred_url":"https://api.github.com/users/abmo-x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abmo-x/subscriptions","organizations_url":"https://api.github.com/users/abmo-x/orgs","repos_url":"https://api.github.com/users/abmo-x/repos","events_url":"https://api.github.com/users/abmo-x/events{/privacy}","received_events_url":"https://api.github.com/users/abmo-x/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T00:15:28Z","updated_at":"2022-06-15T02:06:45Z","author_association":"CONTRIBUTOR","body":"Question:\r\nhttps://github.com/apache/iceberg/blob/a5b2c703fb810a6d0731c18056cf287358d15e6c/hive-metastore/src/main/java/org/apache/iceberg/hive/HiveTableOperations.java#L563\r\nAnd \r\nhttps://github.com/apache/iceberg/blob/a5b2c703fb810a6d0731c18056cf287358d15e6c/hive-metastore/src/main/java/org/apache/iceberg/hive/HiveTableOperations.java#L568\r\n\r\nThese should be logging the database.tablename if lock is not acquired in a timely manner. \r\n\r\nis that exception getting swallowed somewhere or the msg not logged from the exception, which includes these details along with the state of the lock.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155830618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155871727","html_url":"https://github.com/apache/iceberg/pull/5003#issuecomment-1155871727","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5003","id":1155871727,"node_id":"IC_kwDOCW7NX85E5TPv","user":{"login":"ymZhao1001","id":19317643,"node_id":"MDQ6VXNlcjE5MzE3NjQz","avatar_url":"https://avatars.githubusercontent.com/u/19317643?v=4","gravatar_id":"","url":"https://api.github.com/users/ymZhao1001","html_url":"https://github.com/ymZhao1001","followers_url":"https://api.github.com/users/ymZhao1001/followers","following_url":"https://api.github.com/users/ymZhao1001/following{/other_user}","gists_url":"https://api.github.com/users/ymZhao1001/gists{/gist_id}","starred_url":"https://api.github.com/users/ymZhao1001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ymZhao1001/subscriptions","organizations_url":"https://api.github.com/users/ymZhao1001/orgs","repos_url":"https://api.github.com/users/ymZhao1001/repos","events_url":"https://api.github.com/users/ymZhao1001/events{/privacy}","received_events_url":"https://api.github.com/users/ymZhao1001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T01:20:09Z","updated_at":"2022-06-15T01:20:39Z","author_association":"CONTRIBUTOR","body":"hello, @rdblue , can you help review this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155871727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155903040","html_url":"https://github.com/apache/iceberg/pull/5039#issuecomment-1155903040","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5039","id":1155903040,"node_id":"IC_kwDOCW7NX85E5a5A","user":{"login":"krisdas","id":5305131,"node_id":"MDQ6VXNlcjUzMDUxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/5305131?v=4","gravatar_id":"","url":"https://api.github.com/users/krisdas","html_url":"https://github.com/krisdas","followers_url":"https://api.github.com/users/krisdas/followers","following_url":"https://api.github.com/users/krisdas/following{/other_user}","gists_url":"https://api.github.com/users/krisdas/gists{/gist_id}","starred_url":"https://api.github.com/users/krisdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krisdas/subscriptions","organizations_url":"https://api.github.com/users/krisdas/orgs","repos_url":"https://api.github.com/users/krisdas/repos","events_url":"https://api.github.com/users/krisdas/events{/privacy}","received_events_url":"https://api.github.com/users/krisdas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T02:18:59Z","updated_at":"2022-06-15T02:18:59Z","author_association":"CONTRIBUTOR","body":"> Question:\r\n> \r\n> https://github.com/apache/iceberg/blob/a5b2c703fb810a6d0731c18056cf287358d15e6c/hive-metastore/src/main/java/org/apache/iceberg/hive/HiveTableOperations.java#L563\r\n> \r\n> \r\n> And\r\n> https://github.com/apache/iceberg/blob/a5b2c703fb810a6d0731c18056cf287358d15e6c/hive-metastore/src/main/java/org/apache/iceberg/hive/HiveTableOperations.java#L568\r\n> \r\n> These should be logging the database.tablename if lock is not acquired in a timely manner.\r\n> \r\n> is that exception getting swallowed somewhere or the msg not logged from the exception, which includes these details along with the state of the lock.\r\n\r\nThese logs gets printed, just that, they are printed at the very end, after exhausting all the retries. Here we are trying to add db.table details after each re-try and get the information up in the log file. Currently with just \"Waiting for lock\" message, we don't get details about, which db.table, the lock is requested.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155903040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155909845","html_url":"https://github.com/apache/iceberg/issues/4471#issuecomment-1155909845","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4471","id":1155909845,"node_id":"IC_kwDOCW7NX85E5cjV","user":{"login":"eric666666","id":51162281,"node_id":"MDQ6VXNlcjUxMTYyMjgx","avatar_url":"https://avatars.githubusercontent.com/u/51162281?v=4","gravatar_id":"","url":"https://api.github.com/users/eric666666","html_url":"https://github.com/eric666666","followers_url":"https://api.github.com/users/eric666666/followers","following_url":"https://api.github.com/users/eric666666/following{/other_user}","gists_url":"https://api.github.com/users/eric666666/gists{/gist_id}","starred_url":"https://api.github.com/users/eric666666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eric666666/subscriptions","organizations_url":"https://api.github.com/users/eric666666/orgs","repos_url":"https://api.github.com/users/eric666666/repos","events_url":"https://api.github.com/users/eric666666/events{/privacy}","received_events_url":"https://api.github.com/users/eric666666/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T02:24:55Z","updated_at":"2022-06-15T02:24:55Z","author_association":"NONE","body":"> 我也这个问题了，过渡和删除孤儿文件都在最后一个，10小时反应\r\n\r\n我解决掉了这个问题，用local模式跑会阻塞，spark on yarn是正常的\r\n如果本地模式要解决阻塞有两种方式，1种改spark源码，1种改iceberg的源码，改spark源码的方式比较通用解决这个阻塞问题\r\n改一下org.apache.spark.scheduler.TaskSetManager#addPendingTask这个方法，把spark task任务优先级这段注释一下就可以了\r\n![image](https://user-images.githubusercontent.com/51162281/173723217-bdeca447-7c39-4a5a-a92e-4a6499b06b37.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155909845/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155912241","html_url":"https://github.com/apache/iceberg/issues/4900#issuecomment-1155912241","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4900","id":1155912241,"node_id":"IC_kwDOCW7NX85E5dIx","user":{"login":"eric666666","id":51162281,"node_id":"MDQ6VXNlcjUxMTYyMjgx","avatar_url":"https://avatars.githubusercontent.com/u/51162281?v=4","gravatar_id":"","url":"https://api.github.com/users/eric666666","html_url":"https://github.com/eric666666","followers_url":"https://api.github.com/users/eric666666/followers","following_url":"https://api.github.com/users/eric666666/following{/other_user}","gists_url":"https://api.github.com/users/eric666666/gists{/gist_id}","starred_url":"https://api.github.com/users/eric666666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eric666666/subscriptions","organizations_url":"https://api.github.com/users/eric666666/orgs","repos_url":"https://api.github.com/users/eric666666/repos","events_url":"https://api.github.com/users/eric666666/events{/privacy}","received_events_url":"https://api.github.com/users/eric666666/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T02:28:52Z","updated_at":"2022-06-15T02:28:52Z","author_association":"NONE","body":"I fixed this problem. You can see issue #4471","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155912241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155925120","html_url":"https://github.com/apache/iceberg/pull/5039#issuecomment-1155925120","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5039","id":1155925120,"node_id":"IC_kwDOCW7NX85E5gSA","user":{"login":"abmo-x","id":69539469,"node_id":"MDQ6VXNlcjY5NTM5NDY5","avatar_url":"https://avatars.githubusercontent.com/u/69539469?v=4","gravatar_id":"","url":"https://api.github.com/users/abmo-x","html_url":"https://github.com/abmo-x","followers_url":"https://api.github.com/users/abmo-x/followers","following_url":"https://api.github.com/users/abmo-x/following{/other_user}","gists_url":"https://api.github.com/users/abmo-x/gists{/gist_id}","starred_url":"https://api.github.com/users/abmo-x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abmo-x/subscriptions","organizations_url":"https://api.github.com/users/abmo-x/orgs","repos_url":"https://api.github.com/users/abmo-x/repos","events_url":"https://api.github.com/users/abmo-x/events{/privacy}","received_events_url":"https://api.github.com/users/abmo-x/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T02:52:46Z","updated_at":"2022-06-15T02:52:46Z","author_association":"CONTRIBUTOR","body":"> > Question:\r\n> > https://github.com/apache/iceberg/blob/a5b2c703fb810a6d0731c18056cf287358d15e6c/hive-metastore/src/main/java/org/apache/iceberg/hive/HiveTableOperations.java#L563\r\n> > \r\n> > And\r\n> > https://github.com/apache/iceberg/blob/a5b2c703fb810a6d0731c18056cf287358d15e6c/hive-metastore/src/main/java/org/apache/iceberg/hive/HiveTableOperations.java#L568\r\n> > \r\n> > These should be logging the database.tablename if lock is not acquired in a timely manner.\r\n> > is that exception getting swallowed somewhere or the msg not logged from the exception, which includes these details along with the state of the lock.\r\n> \r\n> These logs gets printed, just that, they are printed at the very end, after exhausting all the retries. Here we are trying to add db.table details after each re-try and get the information up in the log file. Currently with just \"Waiting for lock\" message, we don't get details about, which db.table, the lock is requested.\r\n\r\nAh! That makes sense, thanks for clarifying. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155925120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155934025","html_url":"https://github.com/apache/iceberg/pull/5041#issuecomment-1155934025","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5041","id":1155934025,"node_id":"IC_kwDOCW7NX85E5idJ","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T03:11:00Z","updated_at":"2022-06-15T03:11:00Z","author_association":"CONTRIBUTOR","body":"@amogh-jahagirdar any other comments?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155934025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155947529","html_url":"https://github.com/apache/iceberg/pull/5041#issuecomment-1155947529","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5041","id":1155947529,"node_id":"IC_kwDOCW7NX85E5lwJ","user":{"login":"amogh-jahagirdar","id":87500546,"node_id":"MDQ6VXNlcjg3NTAwNTQ2","avatar_url":"https://avatars.githubusercontent.com/u/87500546?v=4","gravatar_id":"","url":"https://api.github.com/users/amogh-jahagirdar","html_url":"https://github.com/amogh-jahagirdar","followers_url":"https://api.github.com/users/amogh-jahagirdar/followers","following_url":"https://api.github.com/users/amogh-jahagirdar/following{/other_user}","gists_url":"https://api.github.com/users/amogh-jahagirdar/gists{/gist_id}","starred_url":"https://api.github.com/users/amogh-jahagirdar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amogh-jahagirdar/subscriptions","organizations_url":"https://api.github.com/users/amogh-jahagirdar/orgs","repos_url":"https://api.github.com/users/amogh-jahagirdar/repos","events_url":"https://api.github.com/users/amogh-jahagirdar/events{/privacy}","received_events_url":"https://api.github.com/users/amogh-jahagirdar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T03:38:00Z","updated_at":"2022-06-15T03:38:00Z","author_association":"CONTRIBUTOR","body":"@jackye1995 just some indentation stuff, the logic and the docs look good to me. I think my comments should cover where I think the continuing indentation needs to be updated, but let me know if I missed places","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155947529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155994292","html_url":"https://github.com/apache/iceberg/pull/5036#issuecomment-1155994292","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5036","id":1155994292,"node_id":"IC_kwDOCW7NX85E5xK0","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T05:09:59Z","updated_at":"2022-06-15T05:09:59Z","author_association":"CONTRIBUTOR","body":"@SinghAsDev: Quick question: Did you face a specific issue around this, or we are just fixing a long outstanding `TODO` here?\r\n\r\nI am asking, because I have a feeling that the need for heartbeat is more like a theoretical issue  than a concrete one. The code is like this:\r\n```\r\nlock\r\nloadTable\r\nif needed createTable\r\nsome object value settings\r\npersistTable\r\n```\r\n\r\nThe `acquireLock` part should heartbeat the lock until the lock is acquired, and the other parts should be fast.\r\n\r\nI was trying to find situations where we need heartbeat, and I was able to come up with these:\r\n- Wrong configuration: Too low heartbeat interval configured on the HMS\r\n- JVM pause on the client, or the HMS side\r\n\r\nFor the JVM pause situations the problem is still unlikely to happen (even without the heartbeat), and the heartbeating thread is also suspended in this case, so there is no guarantees that it will help.\r\n\r\nSince Hive 4 is around the release, we might try to add a `checkAndSet` method to the HMS API for setting the `metadata_location` atomically. This could be the ultimate solution for the issue, if we find this fix important.\r\n\r\nAll that said: using the default configuration on the HMS, the timeout is set to 300s. If we can not finish the commit in 5 mins, then we already are in serious trouble.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1155994292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156374538","html_url":"https://github.com/apache/iceberg/pull/5048#issuecomment-1156374538","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5048","id":1156374538,"node_id":"IC_kwDOCW7NX85E7OAK","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T11:51:04Z","updated_at":"2022-06-15T11:51:04Z","author_association":"MEMBER","body":"Currently, based on https://github.com/apache/iceberg/pull/4537, since it fixes also code being added there.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156374538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156375557","html_url":"https://github.com/apache/iceberg/pull/4537#issuecomment-1156375557","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4537","id":1156375557,"node_id":"IC_kwDOCW7NX85E7OQF","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T11:52:15Z","updated_at":"2022-06-15T11:52:15Z","author_association":"MEMBER","body":"Thanks @rdblue and @nastra for your reviews!\r\n\r\nUpdated the code accordingly. Please take another look.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156375557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156385716","html_url":"https://github.com/apache/iceberg/pull/5049#issuecomment-1156385716","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5049","id":1156385716,"node_id":"IC_kwDOCW7NX85E7Qu0","user":{"login":"ConeyLiu","id":12733256,"node_id":"MDQ6VXNlcjEyNzMzMjU2","avatar_url":"https://avatars.githubusercontent.com/u/12733256?v=4","gravatar_id":"","url":"https://api.github.com/users/ConeyLiu","html_url":"https://github.com/ConeyLiu","followers_url":"https://api.github.com/users/ConeyLiu/followers","following_url":"https://api.github.com/users/ConeyLiu/following{/other_user}","gists_url":"https://api.github.com/users/ConeyLiu/gists{/gist_id}","starred_url":"https://api.github.com/users/ConeyLiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ConeyLiu/subscriptions","organizations_url":"https://api.github.com/users/ConeyLiu/orgs","repos_url":"https://api.github.com/users/ConeyLiu/repos","events_url":"https://api.github.com/users/ConeyLiu/events{/privacy}","received_events_url":"https://api.github.com/users/ConeyLiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T12:03:49Z","updated_at":"2022-06-15T12:03:49Z","author_association":"CONTRIBUTOR","body":"Hi, @rdblue @aokolnychyi @chenjunjiedada @jackye1995, could you help to review this? Thanks in advance.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156385716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156396262","html_url":"https://github.com/apache/iceberg/pull/4898#issuecomment-1156396262","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4898","id":1156396262,"node_id":"IC_kwDOCW7NX85E7TTm","user":{"login":"ConeyLiu","id":12733256,"node_id":"MDQ6VXNlcjEyNzMzMjU2","avatar_url":"https://avatars.githubusercontent.com/u/12733256?v=4","gravatar_id":"","url":"https://api.github.com/users/ConeyLiu","html_url":"https://github.com/ConeyLiu","followers_url":"https://api.github.com/users/ConeyLiu/followers","following_url":"https://api.github.com/users/ConeyLiu/following{/other_user}","gists_url":"https://api.github.com/users/ConeyLiu/gists{/gist_id}","starred_url":"https://api.github.com/users/ConeyLiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ConeyLiu/subscriptions","organizations_url":"https://api.github.com/users/ConeyLiu/orgs","repos_url":"https://api.github.com/users/ConeyLiu/repos","events_url":"https://api.github.com/users/ConeyLiu/events{/privacy}","received_events_url":"https://api.github.com/users/ConeyLiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T12:15:10Z","updated_at":"2022-06-15T12:15:10Z","author_association":"CONTRIBUTOR","body":"Thanks @szehon-ho for the review and suggestion.\r\n\r\n> Maybe a test writer that creates metadata files with all optional columns as null? That way can test all the new columns at once.\r\n\r\nI will add the test later.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156396262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156440749","html_url":"https://github.com/apache/iceberg/pull/4662#issuecomment-1156440749","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4662","id":1156440749,"node_id":"IC_kwDOCW7NX85E7eKt","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T12:59:03Z","updated_at":"2022-06-15T12:59:03Z","author_association":"CONTRIBUTOR","body":"Since the decision on #4868 is to stick with the old naming convention of default partition names, I think this is the best solution here. Please call out if you disagree, otherwise I will merge this soon.\r\n\r\nThanks,\r\nPeter  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156440749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156466570","html_url":"https://github.com/apache/iceberg/pull/4670#issuecomment-1156466570","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4670","id":1156466570,"node_id":"IC_kwDOCW7NX85E7keK","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T13:21:39Z","updated_at":"2022-06-15T13:21:52Z","author_association":"COLLABORATOR","body":"Ping @kbendick @rdblue @openinx ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156466570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156535576","html_url":"https://github.com/apache/iceberg/pull/5036#issuecomment-1156535576","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5036","id":1156535576,"node_id":"IC_kwDOCW7NX85E71UY","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T14:19:14Z","updated_at":"2022-06-15T14:25:20Z","author_association":"CONTRIBUTOR","body":"Hi @pvary we did hit the issue that led to data corruption. I think a lot of platforms are still going to remain on older version of HMS, and may not want to increase the txn timeout.\n\nTbh, we should have rolled back the transaction or at least fail the job when we failed to unlock the hive lock from the beginning. Many users may be hitting this issue without even realizing.\n\nBtw, there can be many more reasons for the transactions to take way longer than txn timeout. For instance, HMS does a fast scan for alter table operations even when stats collection is turned off. This fast stats lists all files from S3, and can take hours. Another example, would be a HMS pre commit hook taking long for whatever reason. I would argue that we can not safely make the assumption that transactions would finish within txn timeout.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156535576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156557364","html_url":"https://github.com/apache/iceberg/pull/4692#issuecomment-1156557364","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4692","id":1156557364,"node_id":"IC_kwDOCW7NX85E76o0","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T14:37:00Z","updated_at":"2022-06-15T14:37:00Z","author_association":"CONTRIBUTOR","body":"\n> I'd be open for that but I feel like we need to think a little bit more about how to expose this.\n\nYea, happy to discuss more along this.\n\n> @SinghAsDev, do you happen to have some performance numbers to share? I'd image a local sort be fairly cheap unless there is a shuffle spill or substantial GC time.\n\nWe saw 10-20% cost increase with local sort. The cost also goes up with number of keys the sort is on.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156557364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156624834","html_url":"https://github.com/apache/iceberg/pull/5036#issuecomment-1156624834","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5036","id":1156624834,"node_id":"IC_kwDOCW7NX85E8LHC","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T15:34:02Z","updated_at":"2022-06-15T15:34:02Z","author_association":"CONTRIBUTOR","body":"> For instance, HMS does a fast scan for alter table operations even when stats collection is turned off\r\n\r\nThat's seriously bad and unnecessary. This would cause a seriously long commit times.\r\nWhich version of Hive you are using?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156624834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156635902","html_url":"https://github.com/apache/iceberg/pull/5036#issuecomment-1156635902","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5036","id":1156635902,"node_id":"IC_kwDOCW7NX85E8Nz-","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T15:44:02Z","updated_at":"2022-06-15T15:44:02Z","author_association":"CONTRIBUTOR","body":"> > For instance, HMS does a fast scan for alter table operations even when stats collection is turned off\n> \n> \n> \n> That's seriously bad and unnecessary. This would cause a seriously long commit times.\n> \n> Which version of Hive you are using?\n\nWe are on hive 1.2. But I think the issue still exists in later versions. I agree this is more of a bug. We had fixed this for our hms deployment. Btw, forgot to mention this issue is limited to unpartitioned tables. All iceberg tables are stored as unpartitioned tables on HMS, so iceberg tables are affected by this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156635902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156654203","html_url":"https://github.com/apache/iceberg/pull/4826#issuecomment-1156654203","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4826","id":1156654203,"node_id":"IC_kwDOCW7NX85E8SR7","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T16:00:13Z","updated_at":"2022-06-15T16:00:13Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer could you review/merge this one please?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156654203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156660808","html_url":"https://github.com/apache/iceberg/pull/5036#issuecomment-1156660808","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5036","id":1156660808,"node_id":"IC_kwDOCW7NX85E8T5I","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T16:06:16Z","updated_at":"2022-06-15T16:06:16Z","author_association":"CONTRIBUTOR","body":"> > > For instance, HMS does a fast scan for alter table operations even when stats collection is turned off\r\n> > \r\n> > \r\n> > That's seriously bad and unnecessary. This would cause a seriously long commit times.\r\n> > Which version of Hive you are using?\r\n> \r\n> We are on hive 1.2. But I think the issue still exists in later versions. I agree this is more of a bug. We had fixed this for our hms deployment. Btw, forgot to mention this issue is limited to unpartitioned tables. All iceberg tables are stored as unpartitioned tables on HMS, so iceberg tables are affected by this.\r\n\r\nAfter fixing this issue, you still see long `alter table` HMS calls? I am trying to understand the situation better, and possible other places where we have to fix too","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156660808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156673401","html_url":"https://github.com/apache/iceberg/pull/5050#issuecomment-1156673401","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5050","id":1156673401,"node_id":"IC_kwDOCW7NX85E8W95","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T16:17:56Z","updated_at":"2022-06-15T16:18:33Z","author_association":"CONTRIBUTOR","body":"> For properties like upsert, it is not recommended to enable it in the table props. Configuring it in table props is a bit strange.\r\n\r\nYes this is true. There are some jobs (and maintenance tasks where having it enabeld is not a great idea). I believe @chenjunjiedada has more insight on this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156673401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156692210","html_url":"https://github.com/apache/iceberg/pull/5050#issuecomment-1156692210","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5050","id":1156692210,"node_id":"IC_kwDOCW7NX85E8bjy","user":{"login":"hililiwei","id":59213263,"node_id":"MDQ6VXNlcjU5MjEzMjYz","avatar_url":"https://avatars.githubusercontent.com/u/59213263?v=4","gravatar_id":"","url":"https://api.github.com/users/hililiwei","html_url":"https://github.com/hililiwei","followers_url":"https://api.github.com/users/hililiwei/followers","following_url":"https://api.github.com/users/hililiwei/following{/other_user}","gists_url":"https://api.github.com/users/hililiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/hililiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hililiwei/subscriptions","organizations_url":"https://api.github.com/users/hililiwei/orgs","repos_url":"https://api.github.com/users/hililiwei/repos","events_url":"https://api.github.com/users/hililiwei/events{/privacy}","received_events_url":"https://api.github.com/users/hililiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T16:36:16Z","updated_at":"2022-06-15T16:36:16Z","author_association":"CONTRIBUTOR","body":"> This is great to see worked on @hililiwei!\r\n> \r\n> Can you provide a test of some sort to ensure that this works?\r\n\r\nthx. Added UT","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156692210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156745636","html_url":"https://github.com/apache/iceberg/pull/5036#issuecomment-1156745636","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5036","id":1156745636,"node_id":"IC_kwDOCW7NX85E8omk","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T17:30:09Z","updated_at":"2022-06-15T17:30:09Z","author_association":"CONTRIBUTOR","body":"> After fixing this issue, you still see long alter table HMS calls? I am trying to understand the situation better, and possible other places where we have to fix too\r\n\r\nYea, though likely it won't be as frequent anymore. I think the point I am trying to make is that we can not guarantee that Iceberg commit would be able finish within hive.txn.timeout. You and I both listed a few reasons on why that can happen. I think heartbeats on locks is a must have, or we should fail the commit/ rollback the commit if unlock fails with lock not found. I prefer the former as it would really be a waste of compute to simply fail or rollback.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156745636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156764355","html_url":"https://github.com/apache/iceberg/pull/5049#issuecomment-1156764355","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5049","id":1156764355,"node_id":"IC_kwDOCW7NX85E8tLD","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T17:51:35Z","updated_at":"2022-06-15T17:51:35Z","author_association":"CONTRIBUTOR","body":"I don't think this should be merged. This NPE is intended. This code can catch the NPE and throw a more friendly error, but I think it is also reasonable to keep the exception message as it is right now. The problem is that `null` should not be passed as a literal.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156764355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156773135","html_url":"https://github.com/apache/iceberg/pull/4537#issuecomment-1156773135","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4537","id":1156773135,"node_id":"IC_kwDOCW7NX85E8vUP","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T18:02:02Z","updated_at":"2022-06-15T18:02:02Z","author_association":"CONTRIBUTOR","body":"Thanks, @findepi! This looks good to me. We can still follow up, but I think the majority of the changes are ready so I've merged it to avoid keeping a big PR outstanding.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156773135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156821697","html_url":"https://github.com/apache/iceberg/pull/5041#issuecomment-1156821697","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5041","id":1156821697,"node_id":"IC_kwDOCW7NX85E87LB","user":{"login":"amogh-jahagirdar","id":87500546,"node_id":"MDQ6VXNlcjg3NTAwNTQ2","avatar_url":"https://avatars.githubusercontent.com/u/87500546?v=4","gravatar_id":"","url":"https://api.github.com/users/amogh-jahagirdar","html_url":"https://github.com/amogh-jahagirdar","followers_url":"https://api.github.com/users/amogh-jahagirdar/followers","following_url":"https://api.github.com/users/amogh-jahagirdar/following{/other_user}","gists_url":"https://api.github.com/users/amogh-jahagirdar/gists{/gist_id}","starred_url":"https://api.github.com/users/amogh-jahagirdar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amogh-jahagirdar/subscriptions","organizations_url":"https://api.github.com/users/amogh-jahagirdar/orgs","repos_url":"https://api.github.com/users/amogh-jahagirdar/repos","events_url":"https://api.github.com/users/amogh-jahagirdar/events{/privacy}","received_events_url":"https://api.github.com/users/amogh-jahagirdar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-15T19:01:13Z","updated_at":"2022-06-15T19:01:13Z","author_association":"CONTRIBUTOR","body":"LGTM thanks for the contribution!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1156821697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]