[{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612653754","html_url":"https://github.com/apache/storm/issues/5110#issuecomment-2612653754","issue_url":"https://api.github.com/repos/apache/storm/issues/5110","id":2612653754,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTM3NTQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T04:47:05Z","updated_at":"2025-01-24T14:24:14Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user zhuoliu commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1081#issuecomment-184515933\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1081#issuecomment-184515933</a></p>\n\n<p>    We would also like @knusbaum to review this one.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612653754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612653346","html_url":"https://github.com/apache/storm/issues/5109#issuecomment-2612653346","issue_url":"https://api.github.com/repos/apache/storm/issues/5109","id":2612653346,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTMzNDY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T05:21:43Z","updated_at":"2025-01-24T14:24:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abhishek.agarwal\">abhishek.agarwal</a>:</i>\n<p>Reopening since the pull request <a href=\"https://github.com/apache/storm/pull/1095/files\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1095/files</a> is still open. </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612653346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184551547","html_url":"https://github.com/apache/storm/pull/1087#issuecomment-184551547","issue_url":"https://api.github.com/repos/apache/storm/issues/1087","id":184551547,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDU1MTU0Nw==","user":{"login":"kishorvpatil","id":6090397,"node_id":"MDQ6VXNlcjYwOTAzOTc=","avatar_url":"https://avatars.githubusercontent.com/u/6090397?v=4","gravatar_id":"","url":"https://api.github.com/users/kishorvpatil","html_url":"https://github.com/kishorvpatil","followers_url":"https://api.github.com/users/kishorvpatil/followers","following_url":"https://api.github.com/users/kishorvpatil/following{/other_user}","gists_url":"https://api.github.com/users/kishorvpatil/gists{/gist_id}","starred_url":"https://api.github.com/users/kishorvpatil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishorvpatil/subscriptions","organizations_url":"https://api.github.com/users/kishorvpatil/orgs","repos_url":"https://api.github.com/users/kishorvpatil/repos","events_url":"https://api.github.com/users/kishorvpatil/events{/privacy}","received_events_url":"https://api.github.com/users/kishorvpatil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T06:56:47Z","updated_at":"2016-02-16T06:56:47Z","author_association":"CONTRIBUTOR","body":"@knusbaum, I addressed the conflicts.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184551547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612868918","html_url":"https://github.com/apache/storm/issues/5364#issuecomment-2612868918","issue_url":"https://api.github.com/repos/apache/storm/issues/5364","id":2612868918,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4Njg5MTg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T06:56:49Z","updated_at":"2025-01-24T16:00:40Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user kishorvpatil commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1087#issuecomment-184551547\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1087#issuecomment-184551547</a></p>\n\n<p>    @knusbaum, I addressed the conflicts.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612868918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184563880","html_url":"https://github.com/apache/storm/pull/986#issuecomment-184563880","issue_url":"https://api.github.com/repos/apache/storm/issues/986","id":184563880,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDU2Mzg4MA==","user":{"login":"jianbzhou","id":16497854,"node_id":"MDQ6VXNlcjE2NDk3ODU0","avatar_url":"https://avatars.githubusercontent.com/u/16497854?v=4","gravatar_id":"","url":"https://api.github.com/users/jianbzhou","html_url":"https://github.com/jianbzhou","followers_url":"https://api.github.com/users/jianbzhou/followers","following_url":"https://api.github.com/users/jianbzhou/following{/other_user}","gists_url":"https://api.github.com/users/jianbzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/jianbzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jianbzhou/subscriptions","organizations_url":"https://api.github.com/users/jianbzhou/orgs","repos_url":"https://api.github.com/users/jianbzhou/repos","events_url":"https://api.github.com/users/jianbzhou/events{/privacy}","received_events_url":"https://api.github.com/users/jianbzhou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T07:50:58Z","updated_at":"2016-02-16T07:50:58Z","author_association":"NONE","body":"Hi **@hmcl** ,may I have the patch please? Thanks!\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184563880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184566399","html_url":"https://github.com/apache/storm/pull/986#issuecomment-184566399","issue_url":"https://api.github.com/repos/apache/storm/issues/986","id":184566399,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDU2NjM5OQ==","user":{"login":"hmcl","id":10284328,"node_id":"MDQ6VXNlcjEwMjg0MzI4","avatar_url":"https://avatars.githubusercontent.com/u/10284328?v=4","gravatar_id":"","url":"https://api.github.com/users/hmcl","html_url":"https://github.com/hmcl","followers_url":"https://api.github.com/users/hmcl/followers","following_url":"https://api.github.com/users/hmcl/following{/other_user}","gists_url":"https://api.github.com/users/hmcl/gists{/gist_id}","starred_url":"https://api.github.com/users/hmcl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmcl/subscriptions","organizations_url":"https://api.github.com/users/hmcl/orgs","repos_url":"https://api.github.com/users/hmcl/repos","events_url":"https://api.github.com/users/hmcl/events{/privacy}","received_events_url":"https://api.github.com/users/hmcl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T07:56:43Z","updated_at":"2016-02-16T07:56:43Z","author_association":"CONTRIBUTOR","body":"@jianbzhou I am just finishing the final touches. I will uploaded it today.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184566399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872961","html_url":"https://github.com/apache/storm/issues/5388#issuecomment-2612872961","issue_url":"https://api.github.com/repos/apache/storm/issues/5388","id":2612872961,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzI5NjE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T08:00:31Z","updated_at":"2025-01-24T16:02:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=johnbaba\">johnbaba</a>:</i>\n<p><a href=\"https://github.com/apache/storm/pull/1110\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1110</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872967","html_url":"https://github.com/apache/storm/issues/5388#issuecomment-2612872967","issue_url":"https://api.github.com/repos/apache/storm/issues/5388","id":2612872967,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzI5Njc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T08:20:39Z","updated_at":"2025-01-24T16:02:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user abhishekagarwal87 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1110#discussion_r52979185\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1110#discussion_r52979185</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/callback/IRunnableCallback.java &#8212;<br/>\n    @@ -0,0 +1,22 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.callback;<br/>\n    +<br/>\n    +public interface IRunnableCallback {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    you can use Runnable instead of this.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872970","html_url":"https://github.com/apache/storm/issues/5388#issuecomment-2612872970","issue_url":"https://api.github.com/repos/apache/storm/issues/5388","id":2612872970,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzI5NzA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T08:22:20Z","updated_at":"2025-01-24T16:02:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user abhishekagarwal87 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1110#discussion_r52979325\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1110#discussion_r52979325</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/event/EventManagerImp.java &#8212;<br/>\n    @@ -0,0 +1,102 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.event;<br/>\n    +<br/>\n    +import org.apache.storm.callback.IRunnableCallback;<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.io.InterruptedIOException;<br/>\n    +import java.util.concurrent.LinkedBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +import java.util.concurrent.atomic.AtomicInteger;<br/>\n    +<br/>\n    +public class EventManagerImp implements EventManager {<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(EventManagerImp.class);<br/>\n    +<br/>\n    +    private AtomicInteger added;<br/>\n    +    private AtomicInteger processed;<br/>\n    +    private AtomicBoolean running;<br/>\n    +    private Thread runner;<br/>\n    +<br/>\n    +    private LinkedBlockingQueue<IRunnableCallback> queue = new LinkedBlockingQueue<IRunnableCallback>();<br/>\n    +<br/>\n    +    public EventManagerImp(boolean daemon) {<br/>\n    +added = new AtomicInteger();<br/>\n    +processed = new AtomicInteger();<br/>\n    +running = new AtomicBoolean(true);<br/>\n    +runner = new Thread() {<br/>\n    +    @Override<br/>\n    +    public void run() {<br/>\n    +while (running.get()) {<br/>\n    +    try {<br/>\n    +IRunnableCallback r = queue.take();<br/>\n    +if (r == null) </p>\n{\n    +    return;\n    +}\n<p>    +<br/>\n    +r.run();<br/>\n    +proccessinc();<br/>\n    +    } catch (Throwable t) {<br/>\n    +if (Utils.exceptionCauseIsInstanceOf(InterruptedIOException.class, t)) </p>\n{\n    +    LOG.info(\"Event manager interrupted while doing IO\");\n    +}\n<p> else if (Utils.exceptionCauseIsInstanceOf(InterruptedException.class, t)) </p>\n{\n    +    LOG.info(\"Event manager interrupted\");\n    +}\n<p> else {<br/>\n    +    LOG.error(\"{} Error when processing event\", t);<br/>\n    +    Utils.exitProcess(20, \"Error when processing an event\");<br/>\n    +}<br/>\n    +    }<br/>\n    +}<br/>\n    +    }<br/>\n    +};<br/>\n    +runner.setDaemon(daemon);<br/>\n    +runner.start();<br/>\n    +    }<br/>\n    +<br/>\n    +    public void proccessinc() </p>\n{\n    +processed.incrementAndGet();\n    +    }\n<p>    +<br/>\n    +    @Override<br/>\n    +    public void add(IRunnableCallback eventFn) {<br/>\n    +if (!running.get()) </p>\n{\n    +    throw new RuntimeException(\"Cannot add events to a shutdown event manager\");\n    +}\n<p>    +added.incrementAndGet();<br/>\n    +queue.add(eventFn);<br/>\n    +    }<br/>\n    +<br/>\n    +    @Override<br/>\n    +    public boolean waiting() {<br/>\n    +return (Time.isThreadWaiting(runner) || (processed.get() == added.get()));<br/>\n    +<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    extra line</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872976","html_url":"https://github.com/apache/storm/issues/5388#issuecomment-2612872976","issue_url":"https://api.github.com/repos/apache/storm/issues/5388","id":2612872976,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzI5NzY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T08:23:12Z","updated_at":"2025-01-24T16:02:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user abhishekagarwal87 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1110#discussion_r52979401\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1110#discussion_r52979401</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/event/EventManagerImp.java &#8212;<br/>\n    @@ -0,0 +1,102 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.event;<br/>\n    +<br/>\n    +import org.apache.storm.callback.IRunnableCallback;<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.io.InterruptedIOException;<br/>\n    +import java.util.concurrent.LinkedBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +import java.util.concurrent.atomic.AtomicInteger;<br/>\n    +<br/>\n    +public class EventManagerImp implements EventManager {<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(EventManagerImp.class);<br/>\n    +<br/>\n    +    private AtomicInteger added;<br/>\n    +    private AtomicInteger processed;<br/>\n    +    private AtomicBoolean running;<br/>\n    +    private Thread runner;<br/>\n    +<br/>\n    +    private LinkedBlockingQueue<IRunnableCallback> queue = new LinkedBlockingQueue<IRunnableCallback>();<br/>\n    +<br/>\n    +    public EventManagerImp(boolean daemon) {<br/>\n    +added = new AtomicInteger();<br/>\n    +processed = new AtomicInteger();<br/>\n    +running = new AtomicBoolean(true);<br/>\n    +runner = new Thread() {<br/>\n    +    @Override<br/>\n    +    public void run() {<br/>\n    +while (running.get()) {<br/>\n    +    try {<br/>\n    +IRunnableCallback r = queue.take();<br/>\n    +if (r == null) </p>\n{\n    +    return;\n    +}\n<p>    +<br/>\n    +r.run();<br/>\n    +proccessinc();<br/>\n    +    } catch (Throwable t) {<br/>\n    +if (Utils.exceptionCauseIsInstanceOf(InterruptedIOException.class, t)) </p>\n{\n    +    LOG.info(\"Event manager interrupted while doing IO\");\n    +}\n<p> else if (Utils.exceptionCauseIsInstanceOf(InterruptedException.class, t)) </p>\n{\n    +    LOG.info(\"Event manager interrupted\");\n    +}\n<p> else {<br/>\n    +    LOG.error(\"{} Error when processing event\", t);<br/>\n    +    Utils.exitProcess(20, \"Error when processing an event\");<br/>\n    +}<br/>\n    +    }<br/>\n    +}<br/>\n    +    }<br/>\n    +};<br/>\n    +runner.setDaemon(daemon);<br/>\n    +runner.start();<br/>\n    +    }<br/>\n    +<br/>\n    +    public void proccessinc() {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    please rename to processInc</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872981","html_url":"https://github.com/apache/storm/issues/5388#issuecomment-2612872981","issue_url":"https://api.github.com/repos/apache/storm/issues/5388","id":2612872981,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzI5ODE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T08:23:46Z","updated_at":"2025-01-24T16:02:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user abhishekagarwal87 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1110#discussion_r52979444\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1110#discussion_r52979444</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/event/EventManagerImp.java &#8212;<br/>\n    @@ -0,0 +1,102 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.event;<br/>\n    +<br/>\n    +import org.apache.storm.callback.IRunnableCallback;<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.io.InterruptedIOException;<br/>\n    +import java.util.concurrent.LinkedBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +import java.util.concurrent.atomic.AtomicInteger;<br/>\n    +<br/>\n    +public class EventManagerImp implements EventManager {<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(EventManagerImp.class);<br/>\n    +<br/>\n    +    private AtomicInteger added;<br/>\n    +    private AtomicInteger processed;<br/>\n    +    private AtomicBoolean running;<br/>\n    +    private Thread runner;<br/>\n    +<br/>\n    +    private LinkedBlockingQueue<IRunnableCallback> queue = new LinkedBlockingQueue<IRunnableCallback>();<br/>\n    +<br/>\n    +    public EventManagerImp(boolean daemon) {<br/>\n    +added = new AtomicInteger();<br/>\n    +processed = new AtomicInteger();<br/>\n    +running = new AtomicBoolean(true);<br/>\n    +runner = new Thread() {<br/>\n    +    @Override<br/>\n    +    public void run() {<br/>\n    +while (running.get()) {<br/>\n    +    try {<br/>\n    +IRunnableCallback r = queue.take();<br/>\n    +if (r == null) </p>\n{\n    +    return;\n    +}\n<p>    +<br/>\n    +r.run();<br/>\n    +proccessinc();<br/>\n    +    } catch (Throwable t) {<br/>\n    +if (Utils.exceptionCauseIsInstanceOf(InterruptedIOException.class, t)) </p>\n{\n    +    LOG.info(\"Event manager interrupted while doing IO\");\n    +}\n<p> else if (Utils.exceptionCauseIsInstanceOf(InterruptedException.class, t)) </p>\n{\n    +    LOG.info(\"Event manager interrupted\");\n    +}\n<p> else {<br/>\n    +    LOG.error(\"{} Error when processing event\", t);<br/>\n    +    Utils.exitProcess(20, \"Error when processing an event\");<br/>\n    +}<br/>\n    +    }<br/>\n    +}<br/>\n    +    }<br/>\n    +};<br/>\n    +runner.setDaemon(daemon);<br/>\n    +runner.start();<br/>\n    +    }<br/>\n    +<br/>\n    +    public void proccessinc() {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Infact function can be inlined</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872984","html_url":"https://github.com/apache/storm/issues/5388#issuecomment-2612872984","issue_url":"https://api.github.com/repos/apache/storm/issues/5388","id":2612872984,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzI5ODQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T08:27:03Z","updated_at":"2025-01-24T16:02:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user abhishekagarwal87 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1110#discussion_r52979722\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1110#discussion_r52979722</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/event/EventManagerImp.java &#8212;<br/>\n    @@ -0,0 +1,102 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.event;<br/>\n    +<br/>\n    +import org.apache.storm.callback.IRunnableCallback;<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.io.InterruptedIOException;<br/>\n    +import java.util.concurrent.LinkedBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +import java.util.concurrent.atomic.AtomicInteger;<br/>\n    +<br/>\n    +public class EventManagerImp implements EventManager {<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(EventManagerImp.class);<br/>\n    +<br/>\n    +    private AtomicInteger added;<br/>\n    +    private AtomicInteger processed;<br/>\n    +    private AtomicBoolean running;<br/>\n    +    private Thread runner;<br/>\n    +<br/>\n    +    private LinkedBlockingQueue<IRunnableCallback> queue = new LinkedBlockingQueue<IRunnableCallback>();<br/>\n    +<br/>\n    +    public EventManagerImp(boolean daemon) {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    daemon variable can be renamed to isDaemon</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872986","html_url":"https://github.com/apache/storm/issues/5388#issuecomment-2612872986","issue_url":"https://api.github.com/repos/apache/storm/issues/5388","id":2612872986,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzI5ODY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T09:17:57Z","updated_at":"2025-01-24T16:02:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user hustfxj commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1110#discussion_r52984812\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1110#discussion_r52984812</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/callback/IRunnableCallback.java &#8212;<br/>\n    @@ -0,0 +1,22 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.callback;<br/>\n    +<br/>\n    +public interface IRunnableCallback {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    ok</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872991","html_url":"https://github.com/apache/storm/issues/5388#issuecomment-2612872991","issue_url":"https://api.github.com/repos/apache/storm/issues/5388","id":2612872991,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzI5OTE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T09:18:04Z","updated_at":"2025-01-24T16:02:30Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user hustfxj commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1110#discussion_r52984823\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1110#discussion_r52984823</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/event/EventManagerImp.java &#8212;<br/>\n    @@ -0,0 +1,102 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.event;<br/>\n    +<br/>\n    +import org.apache.storm.callback.IRunnableCallback;<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.io.InterruptedIOException;<br/>\n    +import java.util.concurrent.LinkedBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +import java.util.concurrent.atomic.AtomicInteger;<br/>\n    +<br/>\n    +public class EventManagerImp implements EventManager {<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(EventManagerImp.class);<br/>\n    +<br/>\n    +    private AtomicInteger added;<br/>\n    +    private AtomicInteger processed;<br/>\n    +    private AtomicBoolean running;<br/>\n    +    private Thread runner;<br/>\n    +<br/>\n    +    private LinkedBlockingQueue<IRunnableCallback> queue = new LinkedBlockingQueue<IRunnableCallback>();<br/>\n    +<br/>\n    +    public EventManagerImp(boolean daemon) {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    ok</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646559","html_url":"https://github.com/apache/storm/issues/5080#issuecomment-2612646559","issue_url":"https://api.github.com/repos/apache/storm/issues/5080","id":2612646559,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDY1NTk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T09:32:21Z","updated_at":"2025-01-24T14:21:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user hustfxj opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1111\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1111</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1243\" title=\"port backtype.storm.command.healthcheck to java\" class=\"issue-link\" data-issue-key=\"STORM-1243\"><del>STORM-1243</del></a> port HealthCheck to java</p>\n\n\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/hustfxj/storm\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/hustfxj/storm</a> health</p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1111.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1111.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #1111</p>\n\n<hr />\n<p>commit 0f4b7522dfeeae33fdadf6ec59ace97769b9ffe4<br/>\nAuthor: xiaojian.fxj <xiaojian.fxj@alibaba-inc.com><br/>\nDate:   2016-02-16T09:18:35Z</p>\n\n<p>    port HealthCheck to java</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646565","html_url":"https://github.com/apache/storm/issues/5080#issuecomment-2612646565","issue_url":"https://api.github.com/repos/apache/storm/issues/5080","id":2612646565,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDY1NjU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T09:37:21Z","updated_at":"2025-01-24T14:21:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user hustfxj closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1111\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1111</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646568","html_url":"https://github.com/apache/storm/issues/5080#issuecomment-2612646568","issue_url":"https://api.github.com/repos/apache/storm/issues/5080","id":2612646568,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDY1Njg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T09:54:52Z","updated_at":"2025-01-24T14:21:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user hustfxj reopened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1111\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1111</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1243\" title=\"port backtype.storm.command.healthcheck to java\" class=\"issue-link\" data-issue-key=\"STORM-1243\"><del>STORM-1243</del></a> port HealthCheck to java</p>\n\n\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/hustfxj/storm\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/hustfxj/storm</a> health</p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1111.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1111.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #1111</p>\n\n<hr />\n<p>commit 0f4b7522dfeeae33fdadf6ec59ace97769b9ffe4<br/>\nAuthor: xiaojian.fxj <xiaojian.fxj@alibaba-inc.com><br/>\nDate:   2016-02-16T09:18:35Z</p>\n\n<p>    port HealthCheck to java</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870865","html_url":"https://github.com/apache/storm/issues/5375#issuecomment-2612870865","issue_url":"https://api.github.com/repos/apache/storm/issues/5375","id":2612870865,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzA4NjU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T10:04:37Z","updated_at":"2025-01-24T16:01:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arunmahadevan\">arunmahadevan</a>:</i>\n<p>Actually this issue happens only when the trident tuples has to be transferred over the network (and has to be serialized). </p>\n\n<p>To reproduce, I set numWorkers to '4' in TridentWordCount, topology.eventlogger.executors: 1 in storm.yaml, ran the topology and then turn on debug/sampling from UI.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870868","html_url":"https://github.com/apache/storm/issues/5375#issuecomment-2612870868","issue_url":"https://api.github.com/repos/apache/storm/issues/5375","id":2612870868,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzA4Njg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T10:39:45Z","updated_at":"2025-01-24T16:01:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user arunmahadevan opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1112\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1112</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1540\" title=\"Topology Debug/Sampling Breaks Trident Topologies\" class=\"issue-link\" data-issue-key=\"STORM-1540\"><del>STORM-1540</del></a> Fix Debug/Sampling for Trident</p>\n\n<p>    When ConsList emitted by a trident spout has to be transferred over<br/>\n    the network, it fails during Serialization. The proposed fix is to make ConsList<br/>\n    kyro serializable.</p>\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/arunmahadevan/storm\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/arunmahadevan/storm</a> <a href=\"https://issues.apache.org/jira/browse/STORM-1540\" title=\"Topology Debug/Sampling Breaks Trident Topologies\" class=\"issue-link\" data-issue-key=\"STORM-1540\"><del>STORM-1540</del></a>-new</p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1112.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1112.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #1112</p>\n\n<hr />\n<p>commit 0f0dea0b4d2b17d6e8dc32e82341b8aec70ef6e9<br/>\nAuthor: Arun Mahadevan <aiyer@hortonworks.com><br/>\nDate:   2016-02-16T10:25:25Z</p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1540\" title=\"Topology Debug/Sampling Breaks Trident Topologies\" class=\"issue-link\" data-issue-key=\"STORM-1540\"><del>STORM-1540</del></a> Fix Debug/Sampling for Trident</p>\n\n<p>    When ConsList emitted by a trident spout has to be transferred over<br/>\n    the network, it fails during Serialization. The proposed fix is to make ConsList<br/>\n    kyro serializable.</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650862","html_url":"https://github.com/apache/storm/issues/5099#issuecomment-2612650862","issue_url":"https://api.github.com/repos/apache/storm/issues/5099","id":2612650862,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTA4NjI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T11:39:12Z","updated_at":"2025-01-24T14:22:57Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=johnbaba\">johnbaba</a>:</i>\n<p><a href=\"https://github.com/apache/storm/pull/1113\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1113</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650870","html_url":"https://github.com/apache/storm/issues/5099#issuecomment-2612650870","issue_url":"https://api.github.com/repos/apache/storm/issues/5099","id":2612650870,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTA4NzA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T11:45:56Z","updated_at":"2025-01-24T14:22:57Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user abhishekagarwal87 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1113#discussion_r53000321\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1113#discussion_r53000321</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/command/devZookeeper.java &#8212;<br/>\n    @@ -0,0 +1,35 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.command;<br/>\n    +<br/>\n    +import org.apache.storm.Config;<br/>\n    +import org.apache.storm.utils.ConfigUtils;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.apache.storm.zookeeper.Zookeeper;<br/>\n    +<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class devZookeeper {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    class name should start with Capital letter</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650873","html_url":"https://github.com/apache/storm/issues/5099#issuecomment-2612650873","issue_url":"https://api.github.com/repos/apache/storm/issues/5099","id":2612650873,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTA4NzM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T11:47:35Z","updated_at":"2025-01-24T14:22:57Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user abhishekagarwal87 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1113#discussion_r53000458\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1113#discussion_r53000458</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/Config.java &#8212;<br/>\n    @@ -2086,7 +2086,7 @@</p>\n\n<p> /**</p>\n<ul>\n\t<li>The path to use as the zookeeper dir when running a zookeeper server via</li>\n</ul>\n<ul class=\"alternate\" type=\"square\">\n\t<li>* \"storm dev-zookeeper\". This zookeeper instance is only intended for development;<br/>\n    +     * \"storm devZookeeper\". This zookeeper instance is only intended for development;\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    command syntax is not changed. so you can revert this</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650878","html_url":"https://github.com/apache/storm/issues/5099#issuecomment-2612650878","issue_url":"https://api.github.com/repos/apache/storm/issues/5099","id":2612650878,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTA4Nzg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T12:01:18Z","updated_at":"2025-01-24T14:22:57Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user hustfxj commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1113#discussion_r53001610\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1113#discussion_r53001610</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/command/devZookeeper.java &#8212;<br/>\n    @@ -0,0 +1,35 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.command;<br/>\n    +<br/>\n    +import org.apache.storm.Config;<br/>\n    +import org.apache.storm.utils.ConfigUtils;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.apache.storm.zookeeper.Zookeeper;<br/>\n    +<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class devZookeeper {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    yes  I make mistake</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612647349","html_url":"https://github.com/apache/storm/issues/5083#issuecomment-2612647349","issue_url":"https://api.github.com/repos/apache/storm/issues/5083","id":2612647349,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDczNDk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T12:14:27Z","updated_at":"2025-01-24T14:21:28Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abhishek.agarwal\">abhishek.agarwal</a>:</i>\n<p>I have been trying to figure out clean ways to migrate this clj. I was thinking of writing a generic utility which can convert thrift object into a map representation with map key same as field name. However, currently clojure keywords are not same as corresponding field names in thrift file. So I will follow the brute approach of preparing map from thrift and vice-versa. </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612647349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650881","html_url":"https://github.com/apache/storm/issues/5099#issuecomment-2612650881","issue_url":"https://api.github.com/repos/apache/storm/issues/5099","id":2612650881,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTA4ODE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T12:22:07Z","updated_at":"2025-01-24T14:22:57Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user abhishekagarwal87 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1113#discussion_r53003391\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1113#discussion_r53003391</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/command/devZookeeper.java &#8212;<br/>\n    @@ -0,0 +1,35 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.command;<br/>\n    +<br/>\n    +import org.apache.storm.Config;<br/>\n    +import org.apache.storm.utils.ConfigUtils;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.apache.storm.zookeeper.Zookeeper;<br/>\n    +<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class DevZookeeper {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    You have missed capitalizing the filename. You might have to set ignoreCase to false in your local git config. </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650888","html_url":"https://github.com/apache/storm/issues/5099#issuecomment-2612650888","issue_url":"https://api.github.com/repos/apache/storm/issues/5099","id":2612650888,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTA4ODg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T12:45:34Z","updated_at":"2025-01-24T14:22:57Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user hustfxj commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1113#discussion_r53005224\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1113#discussion_r53005224</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/command/devZookeeper.java &#8212;<br/>\n    @@ -0,0 +1,35 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.command;<br/>\n    +<br/>\n    +import org.apache.storm.Config;<br/>\n    +import org.apache.storm.utils.ConfigUtils;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.apache.storm.zookeeper.Zookeeper;<br/>\n    +<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class DevZookeeper {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    @abhishekagarwal87  thank you. I have capitalizing the filename. But it may not been pushed successfully. </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184690115","html_url":"https://github.com/apache/storm/pull/1113#issuecomment-184690115","issue_url":"https://api.github.com/repos/apache/storm/issues/1113","id":184690115,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDY5MDExNQ==","user":{"login":"abhishekagarwal87","id":1477457,"node_id":"MDQ6VXNlcjE0Nzc0NTc=","avatar_url":"https://avatars.githubusercontent.com/u/1477457?v=4","gravatar_id":"","url":"https://api.github.com/users/abhishekagarwal87","html_url":"https://github.com/abhishekagarwal87","followers_url":"https://api.github.com/users/abhishekagarwal87/followers","following_url":"https://api.github.com/users/abhishekagarwal87/following{/other_user}","gists_url":"https://api.github.com/users/abhishekagarwal87/gists{/gist_id}","starred_url":"https://api.github.com/users/abhishekagarwal87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhishekagarwal87/subscriptions","organizations_url":"https://api.github.com/users/abhishekagarwal87/orgs","repos_url":"https://api.github.com/users/abhishekagarwal87/repos","events_url":"https://api.github.com/users/abhishekagarwal87/events{/privacy}","received_events_url":"https://api.github.com/users/abhishekagarwal87/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T13:51:30Z","updated_at":"2016-02-16T13:51:30Z","author_association":"CONTRIBUTOR","body":"Thanks @hustfxj  Looks good to me.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184690115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650893","html_url":"https://github.com/apache/storm/issues/5099#issuecomment-2612650893","issue_url":"https://api.github.com/repos/apache/storm/issues/5099","id":2612650893,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTA4OTM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T13:51:31Z","updated_at":"2025-01-24T14:22:57Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user abhishekagarwal87 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1113#issuecomment-184690115\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1113#issuecomment-184690115</a></p>\n\n<p>    Thanks @hustfxj  Looks good to me.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612647357","html_url":"https://github.com/apache/storm/issues/5083#issuecomment-2612647357","issue_url":"https://api.github.com/repos/apache/storm/issues/5083","id":2612647357,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDczNTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T14:32:24Z","updated_at":"2025-01-24T14:21:28Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>The issue is that local_state.clj is providing two different things.  The first is conversions between thrift data structures and clojure maps.  The second a set of functions that make working with a LocalState instance simpler (they know the type of the data structures that should be used).  The first part we don't need/want when this is all done.  There is no reason to go to clojure when we don't use clojure any more.  The second could be wrapped into LocalState itself.  I would suggest that you move/rename the -> functions to converter.clj, and then inline the separation.  So for example</p>\n\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">;TODO: when translating <span class=\"code-keyword\">this</span> function, you should replace the map-val with a proper <span class=\"code-keyword\">for</span> loop HERE\n(defn ls-local-assignments\n  [^LocalState local-state]\n    (<span class=\"code-keyword\">if</span>-let [thrift-local-assignments (.get local-state LS-LOCAL-ASSIGNMENTS)]\n      (map-val\n->local-assignment\n(.get_assignments thrift-local-assignments))))\n</pre>\n</div></div>\n\n<p>would become something like</p>\n\n<p>LocalState.java</p>\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\"><span class=\"code-keyword\">public</span> Map<<span class=\"code-object\">Long</span>, LocalAssignment> getLocalAssignments() {\n    <span class=\"code-comment\">//TODO needs <span class=\"code-keyword\">null</span> checks\n</span>    <span class=\"code-keyword\">return</span> ((LSSupervisorAssignments)get(LOCAL_ASSIGNMENTS)).get_assignments();\n}\n</pre>\n</div></div>\n\n<p>converter.clj</p>\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">;;needs a better name\n(defn ->local-assignments \n  [thrift-local-assignments]\n    (<span class=\"code-keyword\">if</span>  thrift-local-assignments\n      (map-val\n->local-assignment\n(.get_assignments thrift-local-assignments))))\n</pre>\n</div></div>\n\n<p>Then everywhere that ls-local-assignments is called would be replaced with</p>\n\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">(->local-assignments (.getLocalAssignments local-state))\n</pre>\n</div></div>\n\n<p>When that code is translated into java they can use the thrift APIs directly.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612647357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184703067","html_url":"https://github.com/apache/storm/pull/1112#issuecomment-184703067","issue_url":"https://api.github.com/repos/apache/storm/issues/1112","id":184703067,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDcwMzA2Nw==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T14:35:03Z","updated_at":"2016-02-16T14:35:03Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184703067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870876","html_url":"https://github.com/apache/storm/issues/5375#issuecomment-2612870876","issue_url":"https://api.github.com/repos/apache/storm/issues/5375","id":2612870876,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzA4NzY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T14:35:04Z","updated_at":"2025-01-24T16:01:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1112#issuecomment-184703067\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1112#issuecomment-184703067</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184703475","html_url":"https://github.com/apache/storm/pull/1112#issuecomment-184703475","issue_url":"https://api.github.com/repos/apache/storm/issues/1112","id":184703475,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDcwMzQ3NQ==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T14:36:34Z","updated_at":"2016-02-16T14:36:34Z","author_association":"CONTRIBUTOR","body":"Could we look at turning on \"topology.testing.always.try.serialize\" for the thrift unit tests?  This config should have caught it without the need for multiple real workers.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184703475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870878","html_url":"https://github.com/apache/storm/issues/5375#issuecomment-2612870878","issue_url":"https://api.github.com/repos/apache/storm/issues/5375","id":2612870878,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzA4Nzg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T14:36:36Z","updated_at":"2025-01-24T16:01:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1112#issuecomment-184703475\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1112#issuecomment-184703475</a></p>\n\n<p>    Could we look at turning on \"topology.testing.always.try.serialize\" for the thrift unit tests?  This config should have caught it without the need for multiple real workers.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646574","html_url":"https://github.com/apache/storm/issues/5080#issuecomment-2612646574","issue_url":"https://api.github.com/repos/apache/storm/issues/5080","id":2612646574,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDY1NzQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T14:43:54Z","updated_at":"2025-01-24T14:21:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1111#discussion_r53018855\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1111#discussion_r53018855</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/command/HealthCheck.java &#8212;<br/>\n    @@ -0,0 +1,124 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.command;<br/>\n    +<br/>\n    +import org.apache.commons.lang.StringUtils;<br/>\n    +import org.apache.storm.Config;<br/>\n    +import org.apache.storm.utils.ConfigUtils;<br/>\n    +<br/>\n    +import java.io.BufferedReader;<br/>\n    +import java.io.File;<br/>\n    +import java.io.InputStream;<br/>\n    +import java.io.InputStreamReader;<br/>\n    +import java.util.ArrayList;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class HealthCheck {<br/>\n    +    private static final String FAILED = \"failed\";<br/>\n    +    private static final String SUCCESS = \"success\";<br/>\n    +    private static final String TIMEOUT = \"timeout\";<br/>\n    +    private static final String FAILED_WITH_EXIT_CODE = \"failed_with_exit_code\";<br/>\n    +<br/>\n    +    public static int healthCheck(Map conf) {<br/>\n    +String healthDir = ConfigUtils.absoluteHealthCheckDir(conf);<br/>\n    +List<String> results = new ArrayList<>();<br/>\n    +if (healthDir != null) {<br/>\n    +    File parentFile = new File(healthDir);<br/>\n    +    List<String> healthScripts = new ArrayList<String>();<br/>\n    +    if (parentFile.exists()) {<br/>\n    +File[] list = parentFile.listFiles();<br/>\n    +for (File f : list) </p>\n{\n    +    if (!f.isDirectory() && f.canExecute())\n    +healthScripts.add(f.getAbsolutePath());\n    +}\n<p>    +    }<br/>\n    +    for (String script : healthScripts) </p>\n{\n    +String result = processScript(conf, script);\n    +results.add(result);\n    +    }\n<p>    +}<br/>\n    +<br/>\n    +// failed_with_exit_code is OK. We're mimicing Hadoop's health checks.<br/>\n    +// We treat non-zero exit codes as indicators that the scripts failed<br/>\n    +// to execute properly, not that the system is unhealthy, in which case<br/>\n    +// we don't want to start killing things.<br/>\n    +<br/>\n    +if (results.contains(FAILED) || results.contains(TIMEOUT)) </p>\n{\n    +    return 1;\n    +}\n<p> else </p>\n{\n    +    return 0;\n    +}\n<p>    +<br/>\n    +    }<br/>\n    +<br/>\n    +    public static String processScript(Map conf, String script) {<br/>\n    +Thread interruptThread = null;<br/>\n    +try {<br/>\n    +    Process process = Runtime.getRuntime().exec(script);<br/>\n    +    final long timeout = (long) (conf.get(Config.STORM_HEALTH_CHECK_TIMEOUT_MS));<br/>\n    +    final Thread curThread = Thread.currentThread();<br/>\n    +    // kill process when timeout<br/>\n    +    interruptThread = new Thread(new Runnable() {<br/>\n    +@Override<br/>\n    +public void run() {<br/>\n    +    try </p>\n{\n    +Thread.sleep(timeout);\n    +curThread.interrupt();\n    +    }\n<p> catch (InterruptedException e) {<br/>\n    +<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    can we have a comment like `//Ignored`</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646580","html_url":"https://github.com/apache/storm/issues/5080#issuecomment-2612646580","issue_url":"https://api.github.com/repos/apache/storm/issues/5080","id":2612646580,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDY1ODA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T14:49:55Z","updated_at":"2025-01-24T14:21:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1111#discussion_r53019635\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1111#discussion_r53019635</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/command/HealthCheck.java &#8212;<br/>\n    @@ -0,0 +1,124 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.command;<br/>\n    +<br/>\n    +import org.apache.commons.lang.StringUtils;<br/>\n    +import org.apache.storm.Config;<br/>\n    +import org.apache.storm.utils.ConfigUtils;<br/>\n    +<br/>\n    +import java.io.BufferedReader;<br/>\n    +import java.io.File;<br/>\n    +import java.io.InputStream;<br/>\n    +import java.io.InputStreamReader;<br/>\n    +import java.util.ArrayList;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class HealthCheck {<br/>\n    +    private static final String FAILED = \"failed\";<br/>\n    +    private static final String SUCCESS = \"success\";<br/>\n    +    private static final String TIMEOUT = \"timeout\";<br/>\n    +    private static final String FAILED_WITH_EXIT_CODE = \"failed_with_exit_code\";<br/>\n    +<br/>\n    +    public static int healthCheck(Map conf) {<br/>\n    +String healthDir = ConfigUtils.absoluteHealthCheckDir(conf);<br/>\n    +List<String> results = new ArrayList<>();<br/>\n    +if (healthDir != null) {<br/>\n    +    File parentFile = new File(healthDir);<br/>\n    +    List<String> healthScripts = new ArrayList<String>();<br/>\n    +    if (parentFile.exists()) {<br/>\n    +File[] list = parentFile.listFiles();<br/>\n    +for (File f : list) </p>\n{\n    +    if (!f.isDirectory() && f.canExecute())\n    +healthScripts.add(f.getAbsolutePath());\n    +}\n<p>    +    }<br/>\n    +    for (String script : healthScripts) </p>\n{\n    +String result = processScript(conf, script);\n    +results.add(result);\n    +    }\n<p>    +}<br/>\n    +<br/>\n    +// failed_with_exit_code is OK. We're mimicing Hadoop's health checks.<br/>\n    +// We treat non-zero exit codes as indicators that the scripts failed<br/>\n    +// to execute properly, not that the system is unhealthy, in which case<br/>\n    +// we don't want to start killing things.<br/>\n    +<br/>\n    +if (results.contains(FAILED) || results.contains(TIMEOUT)) </p>\n{\n    +    return 1;\n    +}\n<p> else </p>\n{\n    +    return 0;\n    +}\n<p>    +<br/>\n    +    }<br/>\n    +<br/>\n    +    public static String processScript(Map conf, String script) {<br/>\n    +Thread interruptThread = null;<br/>\n    +try {<br/>\n    +    Process process = Runtime.getRuntime().exec(script);<br/>\n    +    final long timeout = (long) (conf.get(Config.STORM_HEALTH_CHECK_TIMEOUT_MS));<br/>\n    +    final Thread curThread = Thread.currentThread();<br/>\n    +    // kill process when timeout<br/>\n    +    interruptThread = new Thread(new Runnable() {<br/>\n    +@Override<br/>\n    +public void run() {<br/>\n    +    try </p>\n{\n    +Thread.sleep(timeout);\n    +curThread.interrupt();\n    +    }\n<p> catch (InterruptedException e) </p>\n{\n    +\n    +    }\n<p>    +}<br/>\n    +    });<br/>\n    +    interruptThread.start();<br/>\n    +    process.waitFor();<br/>\n    +    interruptThread.interrupt();<br/>\n    +<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    I know that this existed in the original code, but there is a race condition here.  If interruptThread interrupts us before we interrupt it, this thread will have it's interrupt status set, and we should clear it before going on, or future I/O could get interrupted before it starts.</p>\n\n<p>    This is really minor because the race is so rare, but I think if we add the following here we will be good.</p>\n\n<p>    ```<br/>\n    curThread.interrupted(); //clearing status <br/>\n    ```</p>\n\n<p>    I think we just </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646582","html_url":"https://github.com/apache/storm/issues/5080#issuecomment-2612646582","issue_url":"https://api.github.com/repos/apache/storm/issues/5080","id":2612646582,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDY1ODI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T14:51:52Z","updated_at":"2025-01-24T14:21:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1111#discussion_r53019913\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1111#discussion_r53019913</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/command/HealthCheck.java &#8212;<br/>\n    @@ -0,0 +1,124 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.command;<br/>\n    +<br/>\n    +import org.apache.commons.lang.StringUtils;<br/>\n    +import org.apache.storm.Config;<br/>\n    +import org.apache.storm.utils.ConfigUtils;<br/>\n    +<br/>\n    +import java.io.BufferedReader;<br/>\n    +import java.io.File;<br/>\n    +import java.io.InputStream;<br/>\n    +import java.io.InputStreamReader;<br/>\n    +import java.util.ArrayList;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class HealthCheck {<br/>\n    +    private static final String FAILED = \"failed\";<br/>\n    +    private static final String SUCCESS = \"success\";<br/>\n    +    private static final String TIMEOUT = \"timeout\";<br/>\n    +    private static final String FAILED_WITH_EXIT_CODE = \"failed_with_exit_code\";<br/>\n    +<br/>\n    +    public static int healthCheck(Map conf) {<br/>\n    +String healthDir = ConfigUtils.absoluteHealthCheckDir(conf);<br/>\n    +List<String> results = new ArrayList<>();<br/>\n    +if (healthDir != null) {<br/>\n    +    File parentFile = new File(healthDir);<br/>\n    +    List<String> healthScripts = new ArrayList<String>();<br/>\n    +    if (parentFile.exists()) {<br/>\n    +File[] list = parentFile.listFiles();<br/>\n    +for (File f : list) </p>\n{\n    +    if (!f.isDirectory() && f.canExecute())\n    +healthScripts.add(f.getAbsolutePath());\n    +}\n<p>    +    }<br/>\n    +    for (String script : healthScripts) </p>\n{\n    +String result = processScript(conf, script);\n    +results.add(result);\n    +    }\n<p>    +}<br/>\n    +<br/>\n    +// failed_with_exit_code is OK. We're mimicing Hadoop's health checks.<br/>\n    +// We treat non-zero exit codes as indicators that the scripts failed<br/>\n    +// to execute properly, not that the system is unhealthy, in which case<br/>\n    +// we don't want to start killing things.<br/>\n    +<br/>\n    +if (results.contains(FAILED) || results.contains(TIMEOUT)) </p>\n{\n    +    return 1;\n    +}\n<p> else </p>\n{\n    +    return 0;\n    +}\n<p>    +<br/>\n    +    }<br/>\n    +<br/>\n    +    public static String processScript(Map conf, String script) {<br/>\n    +Thread interruptThread = null;<br/>\n    +try {<br/>\n    +    Process process = Runtime.getRuntime().exec(script);<br/>\n    +    final long timeout = (long) (conf.get(Config.STORM_HEALTH_CHECK_TIMEOUT_MS));<br/>\n    +    final Thread curThread = Thread.currentThread();<br/>\n    +    // kill process when timeout<br/>\n    +    interruptThread = new Thread(new Runnable() {<br/>\n    +@Override<br/>\n    +public void run() {<br/>\n    +    try </p>\n{\n    +Thread.sleep(timeout);\n    +curThread.interrupt();\n    +    }\n<p> catch (InterruptedException e) </p>\n{\n    +\n    +    }\n<p>    +}<br/>\n    +    });<br/>\n    +    interruptThread.start();<br/>\n    +    process.waitFor();<br/>\n    +    interruptThread.interrupt();<br/>\n    +<br/>\n    +    if (process.exitValue() != 0) {<br/>\n    +String str;<br/>\n    +InputStream stdin = process.getInputStream();<br/>\n    +BufferedReader reader = new BufferedReader(new InputStreamReader(stdin));<br/>\n    +while ((str = reader.readLine()) != null) {<br/>\n    +    if (StringUtils.isBlank(str)) </p>\n{\n    +continue;\n    +    }\n<p>    +    if (str.startsWith(\"ERROR\")) </p>\n{\n    +return FAILED;\n    +    }\n<p>    +}<br/>\n    +return SUCCESS;<br/>\n    +    }<br/>\n    +    return FAILED_WITH_EXIT_CODE;<br/>\n    +} catch (InterruptedException e) {<br/>\n    +    System.out.println(\"Script \" + script + \"timed out.\");<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Need a space before `timed out.`</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646588","html_url":"https://github.com/apache/storm/issues/5080#issuecomment-2612646588","issue_url":"https://api.github.com/repos/apache/storm/issues/5080","id":2612646588,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDY1ODg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T14:53:58Z","updated_at":"2025-01-24T14:21:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1111#discussion_r53020251\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1111#discussion_r53020251</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/command/HealthCheck.java &#8212;<br/>\n    @@ -0,0 +1,124 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.command;<br/>\n    +<br/>\n    +import org.apache.commons.lang.StringUtils;<br/>\n    +import org.apache.storm.Config;<br/>\n    +import org.apache.storm.utils.ConfigUtils;<br/>\n    +<br/>\n    +import java.io.BufferedReader;<br/>\n    +import java.io.File;<br/>\n    +import java.io.InputStream;<br/>\n    +import java.io.InputStreamReader;<br/>\n    +import java.util.ArrayList;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class HealthCheck {<br/>\n    +    private static final String FAILED = \"failed\";<br/>\n    +    private static final String SUCCESS = \"success\";<br/>\n    +    private static final String TIMEOUT = \"timeout\";<br/>\n    +    private static final String FAILED_WITH_EXIT_CODE = \"failed_with_exit_code\";<br/>\n    +<br/>\n    +    public static int healthCheck(Map conf) {<br/>\n    +String healthDir = ConfigUtils.absoluteHealthCheckDir(conf);<br/>\n    +List<String> results = new ArrayList<>();<br/>\n    +if (healthDir != null) {<br/>\n    +    File parentFile = new File(healthDir);<br/>\n    +    List<String> healthScripts = new ArrayList<String>();<br/>\n    +    if (parentFile.exists()) {<br/>\n    +File[] list = parentFile.listFiles();<br/>\n    +for (File f : list) </p>\n{\n    +    if (!f.isDirectory() && f.canExecute())\n    +healthScripts.add(f.getAbsolutePath());\n    +}\n<p>    +    }<br/>\n    +    for (String script : healthScripts) </p>\n{\n    +String result = processScript(conf, script);\n    +results.add(result);\n    +    }\n<p>    +}<br/>\n    +<br/>\n    +// failed_with_exit_code is OK. We're mimicing Hadoop's health checks.<br/>\n    +// We treat non-zero exit codes as indicators that the scripts failed<br/>\n    +// to execute properly, not that the system is unhealthy, in which case<br/>\n    +// we don't want to start killing things.<br/>\n    +<br/>\n    +if (results.contains(FAILED) || results.contains(TIMEOUT)) </p>\n{\n    +    return 1;\n    +}\n<p> else </p>\n{\n    +    return 0;\n    +}\n<p>    +<br/>\n    +    }<br/>\n    +<br/>\n    +    public static String processScript(Map conf, String script) {<br/>\n    +Thread interruptThread = null;<br/>\n    +try {<br/>\n    +    Process process = Runtime.getRuntime().exec(script);<br/>\n    +    final long timeout = (long) (conf.get(Config.STORM_HEALTH_CHECK_TIMEOUT_MS));<br/>\n    +    final Thread curThread = Thread.currentThread();<br/>\n    +    // kill process when timeout<br/>\n    +    interruptThread = new Thread(new Runnable() {<br/>\n    +@Override<br/>\n    +public void run() {<br/>\n    +    try </p>\n{\n    +Thread.sleep(timeout);\n    +curThread.interrupt();\n    +    }\n<p> catch (InterruptedException e) </p>\n{\n    +\n    +    }\n<p>    +}<br/>\n    +    });<br/>\n    +    interruptThread.start();<br/>\n    +    process.waitFor();<br/>\n    +    interruptThread.interrupt();<br/>\n    +<br/>\n    +    if (process.exitValue() != 0) {<br/>\n    +String str;<br/>\n    +InputStream stdin = process.getInputStream();<br/>\n    +BufferedReader reader = new BufferedReader(new InputStreamReader(stdin));<br/>\n    +while ((str = reader.readLine()) != null) {<br/>\n    +    if (StringUtils.isBlank(str)) </p>\n{\n    +continue;\n    +    }\n<p>    &#8212; End diff &#8211;</p>\n\n<p>    I'm not sure this is needed.  It doesn't hurt things, but str should never be null because of the while, and if it is the empty string it will not start with \"ERROR\"</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184714383","html_url":"https://github.com/apache/storm/pull/1111#issuecomment-184714383","issue_url":"https://api.github.com/repos/apache/storm/issues/1111","id":184714383,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDcxNDM4Mw==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T14:55:19Z","updated_at":"2016-02-16T14:55:19Z","author_association":"CONTRIBUTOR","body":"+1 the translation looks really good.  I found one minor issue with the original code, and a few very minor style issues.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184714383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646593","html_url":"https://github.com/apache/storm/issues/5080#issuecomment-2612646593","issue_url":"https://api.github.com/repos/apache/storm/issues/5080","id":2612646593,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDY1OTM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T14:55:20Z","updated_at":"2025-01-24T14:21:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1111#issuecomment-184714383\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1111#issuecomment-184714383</a></p>\n\n<p>    +1 the translation looks really good.  I found one minor issue with the original code, and a few very minor style issues.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612653347","html_url":"https://github.com/apache/storm/issues/5109#issuecomment-2612653347","issue_url":"https://api.github.com/repos/apache/storm/issues/5109","id":2612653347,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTMzNDc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T15:13:11Z","updated_at":"2025-01-24T14:24:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1095\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1095</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612653347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612653350","html_url":"https://github.com/apache/storm/issues/5109#issuecomment-2612653350","issue_url":"https://api.github.com/repos/apache/storm/issues/5109","id":2612653350,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTMzNTA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T15:13:53Z","updated_at":"2025-01-24T14:24:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>Sorry something happened when I was pushing the changes and it failed without me knowing.   It is in now. </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612653350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612647360","html_url":"https://github.com/apache/storm/issues/5083#issuecomment-2612647360","issue_url":"https://api.github.com/repos/apache/storm/issues/5083","id":2612647360,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDczNjA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T15:16:43Z","updated_at":"2025-01-24T14:21:28Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abhishek.agarwal\">abhishek.agarwal</a>:</i>\n<p>Thanks <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\" class=\"user-hover\" rel=\"revans2\">Robert Joseph Evans</a> I will move the translation logic to local_state_converter.clj. Much of the code in that file will be throwaway code. I am also adding methods such as these in LocalState.java</p>\n<div class=\"preformatted panel\" style=\"border-width: 1px;\"><div class=\"preformattedContent panelContent\">\n<pre>public void addTopologyHistory(LSTopoHistory lsTopoHistory) {\nLSTopoHistoryList lsTopoHistoryListWrapper = (LSTopoHistoryList) get(LS_TOPO_HISTORY);\nList<LSTopoHistory> currentTopoHistoryList = new ArrayList<>();\nif (null != lsTopoHistoryListWrapper) {\n    currentTopoHistoryList.addAll(lsTopoHistoryListWrapper.get_topo_history());\n}\ncurrentTopoHistoryList.add(lsTopoHistory);\nput(LS_TOPO_HISTORY, new LSTopoHistoryList(currentTopoHistoryList));\n    }\n</pre>\n</div></div>\n\n<p>The above can be used in clojure and later in java without any re-porting. Will send a PR soon. </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612647360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612647363","html_url":"https://github.com/apache/storm/issues/5083#issuecomment-2612647363","issue_url":"https://api.github.com/repos/apache/storm/issues/5083","id":2612647363,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDczNjM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T15:20:01Z","updated_at":"2025-01-24T14:21:28Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>Sounds good.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612647363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184779076","html_url":"https://github.com/apache/storm/pull/1087#issuecomment-184779076","issue_url":"https://api.github.com/repos/apache/storm/issues/1087","id":184779076,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDc3OTA3Ng==","user":{"login":"knusbaum","id":1819836,"node_id":"MDQ6VXNlcjE4MTk4MzY=","avatar_url":"https://avatars.githubusercontent.com/u/1819836?v=4","gravatar_id":"","url":"https://api.github.com/users/knusbaum","html_url":"https://github.com/knusbaum","followers_url":"https://api.github.com/users/knusbaum/followers","following_url":"https://api.github.com/users/knusbaum/following{/other_user}","gists_url":"https://api.github.com/users/knusbaum/gists{/gist_id}","starred_url":"https://api.github.com/users/knusbaum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knusbaum/subscriptions","organizations_url":"https://api.github.com/users/knusbaum/orgs","repos_url":"https://api.github.com/users/knusbaum/repos","events_url":"https://api.github.com/users/knusbaum/events{/privacy}","received_events_url":"https://api.github.com/users/knusbaum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T17:16:21Z","updated_at":"2016-02-16T17:16:21Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184779076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612868926","html_url":"https://github.com/apache/storm/issues/5364#issuecomment-2612868926","issue_url":"https://api.github.com/repos/apache/storm/issues/5364","id":2612868926,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4Njg5MjY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T17:16:22Z","updated_at":"2025-01-24T16:00:40Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user knusbaum commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1087#issuecomment-184779076\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1087#issuecomment-184779076</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612868926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184780055","html_url":"https://github.com/apache/storm/pull/1103#issuecomment-184780055","issue_url":"https://api.github.com/repos/apache/storm/issues/1103","id":184780055,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDc4MDA1NQ==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T17:17:28Z","updated_at":"2016-02-16T17:17:28Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184780055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612871271","html_url":"https://github.com/apache/storm/issues/5378#issuecomment-2612871271","issue_url":"https://api.github.com/repos/apache/storm/issues/5378","id":2612871271,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzEyNzE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T17:17:30Z","updated_at":"2025-01-24T16:01:44Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1103#issuecomment-184780055\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1103#issuecomment-184780055</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612871271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184780707","html_url":"https://github.com/apache/storm/pull/1085#issuecomment-184780707","issue_url":"https://api.github.com/repos/apache/storm/issues/1085","id":184780707,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDc4MDcwNw==","user":{"login":"knusbaum","id":1819836,"node_id":"MDQ6VXNlcjE4MTk4MzY=","avatar_url":"https://avatars.githubusercontent.com/u/1819836?v=4","gravatar_id":"","url":"https://api.github.com/users/knusbaum","html_url":"https://github.com/knusbaum","followers_url":"https://api.github.com/users/knusbaum/followers","following_url":"https://api.github.com/users/knusbaum/following{/other_user}","gists_url":"https://api.github.com/users/knusbaum/gists{/gist_id}","starred_url":"https://api.github.com/users/knusbaum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knusbaum/subscriptions","organizations_url":"https://api.github.com/users/knusbaum/orgs","repos_url":"https://api.github.com/users/knusbaum/repos","events_url":"https://api.github.com/users/knusbaum/events{/privacy}","received_events_url":"https://api.github.com/users/knusbaum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T17:18:01Z","updated_at":"2016-02-16T17:18:01Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184780707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612868763","html_url":"https://github.com/apache/storm/issues/5363#issuecomment-2612868763","issue_url":"https://api.github.com/repos/apache/storm/issues/5363","id":2612868763,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4Njg3NjM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T17:18:04Z","updated_at":"2025-01-24T16:00:36Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user knusbaum commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1085#issuecomment-184780707\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1085#issuecomment-184780707</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612868763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184786632","html_url":"https://github.com/apache/storm/pull/1103#issuecomment-184786632","issue_url":"https://api.github.com/repos/apache/storm/issues/1103","id":184786632,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDc4NjYzMg==","user":{"login":"knusbaum","id":1819836,"node_id":"MDQ6VXNlcjE4MTk4MzY=","avatar_url":"https://avatars.githubusercontent.com/u/1819836?v=4","gravatar_id":"","url":"https://api.github.com/users/knusbaum","html_url":"https://github.com/knusbaum","followers_url":"https://api.github.com/users/knusbaum/followers","following_url":"https://api.github.com/users/knusbaum/following{/other_user}","gists_url":"https://api.github.com/users/knusbaum/gists{/gist_id}","starred_url":"https://api.github.com/users/knusbaum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knusbaum/subscriptions","organizations_url":"https://api.github.com/users/knusbaum/orgs","repos_url":"https://api.github.com/users/knusbaum/repos","events_url":"https://api.github.com/users/knusbaum/events{/privacy}","received_events_url":"https://api.github.com/users/knusbaum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T17:27:57Z","updated_at":"2016-02-16T17:27:57Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184786632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612871277","html_url":"https://github.com/apache/storm/issues/5378#issuecomment-2612871277","issue_url":"https://api.github.com/repos/apache/storm/issues/5378","id":2612871277,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzEyNzc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T17:27:58Z","updated_at":"2025-01-24T16:01:44Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user knusbaum commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1103#issuecomment-184786632\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1103#issuecomment-184786632</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612871277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872011","html_url":"https://github.com/apache/storm/issues/5382#issuecomment-2612872011","issue_url":"https://api.github.com/repos/apache/storm/issues/5382","id":2612872011,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzIwMTE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T17:31:35Z","updated_at":"2025-01-24T16:02:01Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user redsanket closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1106\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1106</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612872011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184803373","html_url":"https://github.com/apache/storm/pull/1094#issuecomment-184803373","issue_url":"https://api.github.com/repos/apache/storm/issues/1094","id":184803373,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDgwMzM3Mw==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:04:03Z","updated_at":"2016-02-16T18:04:03Z","author_association":"CONTRIBUTOR","body":"OK I am +1 for this then.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184803373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612869469","html_url":"https://github.com/apache/storm/issues/5367#issuecomment-2612869469","issue_url":"https://api.github.com/repos/apache/storm/issues/5367","id":2612869469,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4Njk0Njk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:04:04Z","updated_at":"2025-01-24T16:00:55Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1094#issuecomment-184803373\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1094#issuecomment-184803373</a></p>\n\n<p>    OK I am +1 for this then.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612869469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184803695","html_url":"https://github.com/apache/storm/pull/1098#issuecomment-184803695","issue_url":"https://api.github.com/repos/apache/storm/issues/1098","id":184803695,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDgwMzY5NQ==","user":{"login":"jerrypeng","id":3613359,"node_id":"MDQ6VXNlcjM2MTMzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3613359?v=4","gravatar_id":"","url":"https://api.github.com/users/jerrypeng","html_url":"https://github.com/jerrypeng","followers_url":"https://api.github.com/users/jerrypeng/followers","following_url":"https://api.github.com/users/jerrypeng/following{/other_user}","gists_url":"https://api.github.com/users/jerrypeng/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrypeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrypeng/subscriptions","organizations_url":"https://api.github.com/users/jerrypeng/orgs","repos_url":"https://api.github.com/users/jerrypeng/repos","events_url":"https://api.github.com/users/jerrypeng/events{/privacy}","received_events_url":"https://api.github.com/users/jerrypeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:04:57Z","updated_at":"2016-02-16T18:04:57Z","author_association":"CONTRIBUTOR","body":"@revans2 thank you for your review!  I have addressed all your comments.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184803695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648904","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648904","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648904,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5MDQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:04:59Z","updated_at":"2025-01-24T14:22:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#issuecomment-184803695\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#issuecomment-184803695</a></p>\n\n<p>    @revans2 thank you for your review!  I have addressed all your comments.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648907","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648907","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648907,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5MDc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:10:27Z","updated_at":"2025-01-24T14:22:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#discussion_r53051919\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#discussion_r53051919</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/StormTimer.java &#8212;<br/>\n    @@ -0,0 +1,274 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm;<br/>\n    +<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.Comparator;<br/>\n    +import java.util.Random;<br/>\n    +import java.util.concurrent.PriorityBlockingQueue;<br/>\n    +import java.util.concurrent.Semaphore;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +/**<br/>\n    + * The timer defined in this file is very similar to java.util.Timer, except<br/>\n    + * it integrates with Storm's time simulation capabilities. This lets us test<br/>\n    + * code that does asynchronous work on the timer thread<br/>\n    + */<br/>\n    +<br/>\n    +public class StormTimer {<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(StormTimer.class);<br/>\n    +<br/>\n    +    public interface TimerFunc </p>\n{\n    +public void run(Object o);\n    +    }\n<p>    +<br/>\n    +    public static class QueueEntry {<br/>\n    +public final Long endTimeMs;<br/>\n    +public final TimerFunc afn;<br/>\n    +public final String id;<br/>\n    +<br/>\n    +public QueueEntry(Long endTimeMs, TimerFunc afn, String id) </p>\n{\n    +    this.endTimeMs = endTimeMs;\n    +    this.afn = afn;\n    +    this.id = id;\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    public static class StormTimerTask extends Thread {<br/>\n    +<br/>\n    +private PriorityBlockingQueue<QueueEntry> queue = new PriorityBlockingQueue<QueueEntry>(10, new Comparator() {<br/>\n    +    @Override<br/>\n    +    public int compare(Object o1, Object o2) </p>\n{\n    +return ((QueueEntry)o1).endTimeMs.intValue() - ((QueueEntry)o2).endTimeMs.intValue();\n    +    }\n<p>    +});<br/>\n    +<br/>\n    +// boolean to indicate whether timer is active<br/>\n    +private AtomicBoolean active = new AtomicBoolean(false);<br/>\n    +<br/>\n    +// function to call when timer is killed<br/>\n    +private TimerFunc onKill;<br/>\n    +<br/>\n    +//random number generator<br/>\n    +private Random random = new Random();<br/>\n    +<br/>\n    +// synchronization for cancelling the timer<br/>\n    +private Semaphore cancelNotifier = new Semaphore(0);<br/>\n    +<br/>\n    +//used for synchronization<br/>\n    +private Object lock = new Object();<br/>\n    +<br/>\n    +@Override<br/>\n    +public void run() {<br/>\n    +    while (this.active.get()) {<br/>\n    +QueueEntry queueEntry = null;<br/>\n    +try {<br/>\n    +    synchronized (this.lock) </p>\n{\n    +queueEntry = this.queue.peek();\n    +    }\n<p>    +    if ((queueEntry != null) && (Time.currentTimeMillis() >= queueEntry.endTimeMs)) {<br/>\n    +// It is imperative to not run the function<br/>\n    +// inside the timer lock. Otherwise, it is<br/>\n    +// possible to deadlock if the fn deals with<br/>\n    +// other locks, like the submit lock.<br/>\n    +synchronized (this.lock) </p>\n{\n    +    this.queue.poll();\n    +}\n<p>    +queueEntry.afn.run(null);<br/>\n    +    } else if (queueEntry != null) {<br/>\n    +//  If any events are scheduled, sleep until<br/>\n    +// event generation. If any recurring events<br/>\n    +// are scheduled then we will always go<br/>\n    +// through this branch, sleeping only the<br/>\n    +// exact necessary amount of time. We give<br/>\n    +// an upper bound, e.g. 1000 millis, to the<br/>\n    +// sleeping time, to limit the response time<br/>\n    +// for detecting any new event within 1 secs.<br/>\n    +Time.sleep(Math.min(1000, (queueEntry.endTimeMs - Time.currentTimeMillis())));<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1554\" class=\"external-link\" rel=\"nofollow\">https://issues.apache.org/jira/browse/STORM-1554</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648915","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648915","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648915,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5MTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:14:18Z","updated_at":"2025-01-24T14:22:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#discussion_r53052441\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#discussion_r53052441</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/StormTimer.java &#8212;<br/>\n    @@ -0,0 +1,246 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm;<br/>\n    +<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.Comparator;<br/>\n    +import java.util.Random;<br/>\n    +import java.util.concurrent.PriorityBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +/**<br/>\n    + * The timer defined in this file is very similar to java.util.Timer, except<br/>\n    + * it integrates with Storm's time simulation capabilities. This lets us test<br/>\n    + * code that does asynchronous work on the timer thread<br/>\n    + */<br/>\n    +<br/>\n    +public class StormTimer implements AutoCloseable{<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(StormTimer.class);<br/>\n    +<br/>\n    +    public static class QueueEntry {<br/>\n    +public final Long endTimeMs;<br/>\n    +public final Runnable func;<br/>\n    +public final String id;<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    What is this ID used for?  Seems like it is a UUID that is generated but never read.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648922","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648922","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648922,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5MjI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:15:36Z","updated_at":"2025-01-24T14:22:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#discussion_r53052633\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#discussion_r53052633</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/StormTimer.java &#8212;<br/>\n    @@ -0,0 +1,246 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm;<br/>\n    +<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.Comparator;<br/>\n    +import java.util.Random;<br/>\n    +import java.util.concurrent.PriorityBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +/**<br/>\n    + * The timer defined in this file is very similar to java.util.Timer, except<br/>\n    + * it integrates with Storm's time simulation capabilities. This lets us test<br/>\n    + * code that does asynchronous work on the timer thread<br/>\n    + */<br/>\n    +<br/>\n    +public class StormTimer implements AutoCloseable{<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(StormTimer.class);<br/>\n    +<br/>\n    +    public static class QueueEntry {<br/>\n    +public final Long endTimeMs;<br/>\n    +public final Runnable func;<br/>\n    +public final String id;<br/>\n    +<br/>\n    +public QueueEntry(Long endTimeMs, Runnable func, String id) </p>\n{\n    +    this.endTimeMs = endTimeMs;\n    +    this.func = func;\n    +    this.id = id;\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    public static class StormTimerTask extends Thread {<br/>\n    +<br/>\n    +private PriorityBlockingQueue<QueueEntry> queue = new PriorityBlockingQueue<QueueEntry>(10, new Comparator<QueueEntry>() {<br/>\n    +    @Override<br/>\n    +    public int compare(QueueEntry o1, QueueEntry o2) </p>\n{\n    +return o1.endTimeMs.intValue() - o2.endTimeMs.intValue();\n    +    }\n<p>    +});<br/>\n    +<br/>\n    +// boolean to indicate whether timer is active<br/>\n    +private AtomicBoolean active = new AtomicBoolean(false);<br/>\n    +<br/>\n    +// function to call when timer is killed<br/>\n    +private Thread.UncaughtExceptionHandler onKill;<br/>\n    +<br/>\n    +//random number generator<br/>\n    +private Random random = new Random();<br/>\n    +<br/>\n    +@Override<br/>\n    +public void run() {<br/>\n    +    while (this.active.get()) {<br/>\n    +QueueEntry queueEntry = null;<br/>\n    +try {<br/>\n    +    queueEntry = this.queue.peek();<br/>\n    +    if ((queueEntry != null) && (Time.currentTimeMillis() >= queueEntry.endTimeMs)) </p>\n{\n    +// It is imperative to not run the function\n    +// inside the timer lock. Otherwise, it is\n    +// possible to deadlock if the fn deals with\n    +// other locks, like the submit lock.\n    +this.queue.remove(queueEntry);\n    +queueEntry.func.run();\n    +    }\n<p> else if (queueEntry != null) </p>\n{\n    +//  If any events are scheduled, sleep until\n    +// event generation. If any recurring events\n    +// are scheduled then we will always go\n    +// through this branch, sleeping only the\n    +// exact necessary amount of time. We give\n    +// an upper bound, e.g. 1000 millis, to the\n    +// sleeping time, to limit the response time\n    +// for detecting any new event within 1 secs.\n    +Time.sleep(Math.min(1000, (queueEntry.endTimeMs - Time.currentTimeMillis())));\n    +    }\n<p> else </p>\n{\n    +// Otherwise poll to see if any new event\n    +// was scheduled. This is, in essence, the\n    +// response time for detecting any new event\n    +// schedulings when there are no scheduled\n    +// events.\n    +Time.sleep(1000);\n    +    }\n<p>    +} catch (Throwable e) {<br/>\n    +    if (!(Utils.exceptionCauseIsInstanceOf(InterruptedException.class, e))) </p>\n{\n    +this.onKill.uncaughtException(this, e);\n    +this.setActive(false);\n    +    }\n<p>    +}<br/>\n    +    }<br/>\n    +}<br/>\n    +<br/>\n    +public void setOnKillFunc(Thread.UncaughtExceptionHandler onKill) </p>\n{\n    +    this.onKill = onKill;\n    +}\n<p>    +<br/>\n    +public void setActive(boolean flag) </p>\n{\n    +    this.active.set(flag);\n    +}\n<p>    +<br/>\n    +public boolean isActive() </p>\n{\n    +    return this.active.get();\n    +}\n<p>    +<br/>\n    +public void add(QueueEntry queueEntry) </p>\n{\n    +    this.queue.add(queueEntry);\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    //task to run<br/>\n    +    StormTimerTask task = new StormTimerTask();<br/>\n    +<br/>\n    +    /**<br/>\n    +     * Makes a Timer in the form of a StormTimerTask Object<br/>\n    +     * @param name name of the timer<br/>\n    +     * @param onKill function to call when timer is killed unexpectedly<br/>\n    +     * @return StormTimerTask object that was initialized<br/>\n    +     */<br/>\n    +    public StormTimer (String name, Thread.UncaughtExceptionHandler onKill) {<br/>\n    +if (onKill == null) </p>\n{\n    +    throw new RuntimeException(\"onKill func is null!\");\n    +}\n<p>    +if (name == null) </p>\n{\n    +    this.task.setName(\"timer\");\n    +}\n<p> else </p>\n{\n    +    this.task.setName(name);\n    +}\n<p>    +this.task.setOnKillFunc(onKill);<br/>\n    +this.task.setActive(true);<br/>\n    +<br/>\n    +this.task.setDaemon(true);<br/>\n    +this.task.setPriority(Thread.MAX_PRIORITY);<br/>\n    +this.task.start();<br/>\n    +    }<br/>\n    +<br/>\n    +    /**<br/>\n    +     * Schedule a function to be executed in the timer<br/>\n    +     * @param delaySecs the number of seconds to delay before running the function<br/>\n    +     * @param func the function to run<br/>\n    +     * @param checkActive whether to check is the timer is active<br/>\n    +     * @param jitterMs add jitter to the run<br/>\n    +     */<br/>\n    +    public void schedule(int delaySecs, Runnable func, boolean checkActive, int jitterMs) {<br/>\n    +if (this.task == null) </p>\n{\n    +    throw new RuntimeException(\"task is null!\");\n    +}\n<p>    +if (func == null) </p>\n{\n    +    throw new RuntimeException(\"function to schedule is null!\");\n    +}\n<p>    +if (checkActive) </p>\n{\n    +    checkActive();\n    +}\n<p>    +String id = Utils.uuid();<br/>\n    +long endTimeMs = Time.currentTimeMillis() + Time.secsToMillisLong(delaySecs);<br/>\n    +if (jitterMs > 0) </p>\n{\n    +    endTimeMs = this.task.random.nextInt(jitterMs) + endTimeMs;\n    +}\n<p>    +task.add(new QueueEntry(endTimeMs, func, id));<br/>\n    +    }<br/>\n    +<br/>\n    +    public void schedule(int delaySecs, Runnable func) </p>\n{\n    +schedule(delaySecs, func, true, 0);\n    +    }\n<p>    +<br/>\n    +    /**<br/>\n    +     * Schedule a function to run recurrently<br/>\n    +     * @param delaySecs the number of seconds to delay before running the function<br/>\n    +     * @param recurSecs the time between each invocation<br/>\n    +     * @param func the function to run<br/>\n    +     */<br/>\n    +    public void scheduleRecurring(int delaySecs, final int recurSecs, final Runnable func) {<br/>\n    +schedule(delaySecs, new Runnable() {<br/>\n    +    @Override<br/>\n    +    public void run() </p>\n{\n    +func.run();\n    +// This avoids a race condition with cancel-timer.\n    +schedule(recurSecs, this, false, 0);\n    +    }\n<p>    +});<br/>\n    +    }<br/>\n    +<br/>\n    +    /**<br/>\n    +     * schedule a function to run recurrently with jitter<br/>\n    +     * @param delaySecs the number of seconds to delay before running the function<br/>\n    +     * @param recurSecs the time between each invocation<br/>\n    +     * @param jitterMs jitter added to the run<br/>\n    +     * @param func the function to run<br/>\n    +     */<br/>\n    +    public void scheduleRecurringWithJitter(int delaySecs, final int recurSecs, final int jitterMs, final Runnable func) {<br/>\n    +schedule(delaySecs, new Runnable() {<br/>\n    +    @Override<br/>\n    +    public void run() </p>\n{\n    +func.run();\n    +// This avoids a race condition with cancel-timer.\n    +schedule(recurSecs, this, false, jitterMs);\n    +    }\n<p>    +});<br/>\n    +    }<br/>\n    +<br/>\n    +    /**<br/>\n    +     * check if timer is active<br/>\n    +     */<br/>\n    +    public void checkActive() {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    This should probably not be public.  It was private in the original code.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648928","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648928","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648928,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5Mjg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:16:50Z","updated_at":"2025-01-24T14:22:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#discussion_r53052812\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#discussion_r53052812</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/StormTimer.java &#8212;<br/>\n    @@ -0,0 +1,246 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm;<br/>\n    +<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.Comparator;<br/>\n    +import java.util.Random;<br/>\n    +import java.util.concurrent.PriorityBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +/**<br/>\n    + * The timer defined in this file is very similar to java.util.Timer, except<br/>\n    + * it integrates with Storm's time simulation capabilities. This lets us test<br/>\n    + * code that does asynchronous work on the timer thread<br/>\n    + */<br/>\n    +<br/>\n    +public class StormTimer implements AutoCloseable{<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(StormTimer.class);<br/>\n    +<br/>\n    +    public static class QueueEntry {<br/>\n    +public final Long endTimeMs;<br/>\n    +public final Runnable func;<br/>\n    +public final String id;<br/>\n    +<br/>\n    +public QueueEntry(Long endTimeMs, Runnable func, String id) </p>\n{\n    +    this.endTimeMs = endTimeMs;\n    +    this.func = func;\n    +    this.id = id;\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    public static class StormTimerTask extends Thread {<br/>\n    +<br/>\n    +private PriorityBlockingQueue<QueueEntry> queue = new PriorityBlockingQueue<QueueEntry>(10, new Comparator<QueueEntry>() {<br/>\n    +    @Override<br/>\n    +    public int compare(QueueEntry o1, QueueEntry o2) </p>\n{\n    +return o1.endTimeMs.intValue() - o2.endTimeMs.intValue();\n    +    }\n<p>    +});<br/>\n    +<br/>\n    +// boolean to indicate whether timer is active<br/>\n    +private AtomicBoolean active = new AtomicBoolean(false);<br/>\n    +<br/>\n    +// function to call when timer is killed<br/>\n    +private Thread.UncaughtExceptionHandler onKill;<br/>\n    +<br/>\n    +//random number generator<br/>\n    +private Random random = new Random();<br/>\n    +<br/>\n    +@Override<br/>\n    +public void run() {<br/>\n    +    while (this.active.get()) {<br/>\n    +QueueEntry queueEntry = null;<br/>\n    +try {<br/>\n    +    queueEntry = this.queue.peek();<br/>\n    +    if ((queueEntry != null) && (Time.currentTimeMillis() >= queueEntry.endTimeMs)) </p>\n{\n    +// It is imperative to not run the function\n    +// inside the timer lock. Otherwise, it is\n    +// possible to deadlock if the fn deals with\n    +// other locks, like the submit lock.\n    +this.queue.remove(queueEntry);\n    +queueEntry.func.run();\n    +    }\n<p> else if (queueEntry != null) </p>\n{\n    +//  If any events are scheduled, sleep until\n    +// event generation. If any recurring events\n    +// are scheduled then we will always go\n    +// through this branch, sleeping only the\n    +// exact necessary amount of time. We give\n    +// an upper bound, e.g. 1000 millis, to the\n    +// sleeping time, to limit the response time\n    +// for detecting any new event within 1 secs.\n    +Time.sleep(Math.min(1000, (queueEntry.endTimeMs - Time.currentTimeMillis())));\n    +    }\n<p> else </p>\n{\n    +// Otherwise poll to see if any new event\n    +// was scheduled. This is, in essence, the\n    +// response time for detecting any new event\n    +// schedulings when there are no scheduled\n    +// events.\n    +Time.sleep(1000);\n    +    }\n<p>    +} catch (Throwable e) {<br/>\n    +    if (!(Utils.exceptionCauseIsInstanceOf(InterruptedException.class, e))) </p>\n{\n    +this.onKill.uncaughtException(this, e);\n    +this.setActive(false);\n    +    }\n<p>    +}<br/>\n    +    }<br/>\n    +}<br/>\n    +<br/>\n    +public void setOnKillFunc(Thread.UncaughtExceptionHandler onKill) </p>\n{\n    +    this.onKill = onKill;\n    +}\n<p>    +<br/>\n    +public void setActive(boolean flag) </p>\n{\n    +    this.active.set(flag);\n    +}\n<p>    +<br/>\n    +public boolean isActive() </p>\n{\n    +    return this.active.get();\n    +}\n<p>    +<br/>\n    +public void add(QueueEntry queueEntry) </p>\n{\n    +    this.queue.add(queueEntry);\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    //task to run<br/>\n    +    StormTimerTask task = new StormTimerTask();<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Can we make this final? and ideally private too.  No reason to change it currently.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184807818","html_url":"https://github.com/apache/storm/pull/1105#issuecomment-184807818","issue_url":"https://api.github.com/repos/apache/storm/issues/1105","id":184807818,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDgwNzgxOA==","user":{"login":"ptgoetz","id":260896,"node_id":"MDQ6VXNlcjI2MDg5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/260896?v=4","gravatar_id":"","url":"https://api.github.com/users/ptgoetz","html_url":"https://github.com/ptgoetz","followers_url":"https://api.github.com/users/ptgoetz/followers","following_url":"https://api.github.com/users/ptgoetz/following{/other_user}","gists_url":"https://api.github.com/users/ptgoetz/gists{/gist_id}","starred_url":"https://api.github.com/users/ptgoetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptgoetz/subscriptions","organizations_url":"https://api.github.com/users/ptgoetz/orgs","repos_url":"https://api.github.com/users/ptgoetz/repos","events_url":"https://api.github.com/users/ptgoetz/events{/privacy}","received_events_url":"https://api.github.com/users/ptgoetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:16:51Z","updated_at":"2016-02-16T18:16:51Z","author_association":"MEMBER","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184807818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648935","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648935","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648935,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5MzU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:17:00Z","updated_at":"2025-01-24T14:22:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#discussion_r53052850\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#discussion_r53052850</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/StormTimer.java &#8212;<br/>\n    @@ -0,0 +1,246 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm;<br/>\n    +<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.Comparator;<br/>\n    +import java.util.Random;<br/>\n    +import java.util.concurrent.PriorityBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +/**<br/>\n    + * The timer defined in this file is very similar to java.util.Timer, except<br/>\n    + * it integrates with Storm's time simulation capabilities. This lets us test<br/>\n    + * code that does asynchronous work on the timer thread<br/>\n    + */<br/>\n    +<br/>\n    +public class StormTimer implements AutoCloseable{<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(StormTimer.class);<br/>\n    +<br/>\n    +    public static class QueueEntry {<br/>\n    +public final Long endTimeMs;<br/>\n    +public final Runnable func;<br/>\n    +public final String id;<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    I am not sure. It was included in the original clojure code.  Though I did find it easier to debug the timer code when each timer event is tagged with a unique id</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648944","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648944","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648944,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5NDQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:17:09Z","updated_at":"2025-01-24T14:22:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#discussion_r53052873\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#discussion_r53052873</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/StormTimer.java &#8212;<br/>\n    @@ -0,0 +1,246 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm;<br/>\n    +<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.Comparator;<br/>\n    +import java.util.Random;<br/>\n    +import java.util.concurrent.PriorityBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +/**<br/>\n    + * The timer defined in this file is very similar to java.util.Timer, except<br/>\n    + * it integrates with Storm's time simulation capabilities. This lets us test<br/>\n    + * code that does asynchronous work on the timer thread<br/>\n    + */<br/>\n    +<br/>\n    +public class StormTimer implements AutoCloseable{<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(StormTimer.class);<br/>\n    +<br/>\n    +    public static class QueueEntry {<br/>\n    +public final Long endTimeMs;<br/>\n    +public final Runnable func;<br/>\n    +public final String id;<br/>\n    +<br/>\n    +public QueueEntry(Long endTimeMs, Runnable func, String id) </p>\n{\n    +    this.endTimeMs = endTimeMs;\n    +    this.func = func;\n    +    this.id = id;\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    public static class StormTimerTask extends Thread {<br/>\n    +<br/>\n    +private PriorityBlockingQueue<QueueEntry> queue = new PriorityBlockingQueue<QueueEntry>(10, new Comparator<QueueEntry>() {<br/>\n    +    @Override<br/>\n    +    public int compare(QueueEntry o1, QueueEntry o2) </p>\n{\n    +return o1.endTimeMs.intValue() - o2.endTimeMs.intValue();\n    +    }\n<p>    +});<br/>\n    +<br/>\n    +// boolean to indicate whether timer is active<br/>\n    +private AtomicBoolean active = new AtomicBoolean(false);<br/>\n    +<br/>\n    +// function to call when timer is killed<br/>\n    +private Thread.UncaughtExceptionHandler onKill;<br/>\n    +<br/>\n    +//random number generator<br/>\n    +private Random random = new Random();<br/>\n    +<br/>\n    +@Override<br/>\n    +public void run() {<br/>\n    +    while (this.active.get()) {<br/>\n    +QueueEntry queueEntry = null;<br/>\n    +try {<br/>\n    +    queueEntry = this.queue.peek();<br/>\n    +    if ((queueEntry != null) && (Time.currentTimeMillis() >= queueEntry.endTimeMs)) </p>\n{\n    +// It is imperative to not run the function\n    +// inside the timer lock. Otherwise, it is\n    +// possible to deadlock if the fn deals with\n    +// other locks, like the submit lock.\n    +this.queue.remove(queueEntry);\n    +queueEntry.func.run();\n    +    }\n<p> else if (queueEntry != null) </p>\n{\n    +//  If any events are scheduled, sleep until\n    +// event generation. If any recurring events\n    +// are scheduled then we will always go\n    +// through this branch, sleeping only the\n    +// exact necessary amount of time. We give\n    +// an upper bound, e.g. 1000 millis, to the\n    +// sleeping time, to limit the response time\n    +// for detecting any new event within 1 secs.\n    +Time.sleep(Math.min(1000, (queueEntry.endTimeMs - Time.currentTimeMillis())));\n    +    }\n<p> else </p>\n{\n    +// Otherwise poll to see if any new event\n    +// was scheduled. This is, in essence, the\n    +// response time for detecting any new event\n    +// schedulings when there are no scheduled\n    +// events.\n    +Time.sleep(1000);\n    +    }\n<p>    +} catch (Throwable e) {<br/>\n    +    if (!(Utils.exceptionCauseIsInstanceOf(InterruptedException.class, e))) </p>\n{\n    +this.onKill.uncaughtException(this, e);\n    +this.setActive(false);\n    +    }\n<p>    +}<br/>\n    +    }<br/>\n    +}<br/>\n    +<br/>\n    +public void setOnKillFunc(Thread.UncaughtExceptionHandler onKill) </p>\n{\n    +    this.onKill = onKill;\n    +}\n<p>    +<br/>\n    +public void setActive(boolean flag) </p>\n{\n    +    this.active.set(flag);\n    +}\n<p>    +<br/>\n    +public boolean isActive() </p>\n{\n    +    return this.active.get();\n    +}\n<p>    +<br/>\n    +public void add(QueueEntry queueEntry) </p>\n{\n    +    this.queue.add(queueEntry);\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    //task to run<br/>\n    +    StormTimerTask task = new StormTimerTask();<br/>\n    +<br/>\n    +    /**<br/>\n    +     * Makes a Timer in the form of a StormTimerTask Object<br/>\n    +     * @param name name of the timer<br/>\n    +     * @param onKill function to call when timer is killed unexpectedly<br/>\n    +     * @return StormTimerTask object that was initialized<br/>\n    +     */<br/>\n    +    public StormTimer (String name, Thread.UncaughtExceptionHandler onKill) {<br/>\n    +if (onKill == null) </p>\n{\n    +    throw new RuntimeException(\"onKill func is null!\");\n    +}\n<p>    +if (name == null) </p>\n{\n    +    this.task.setName(\"timer\");\n    +}\n<p> else </p>\n{\n    +    this.task.setName(name);\n    +}\n<p>    +this.task.setOnKillFunc(onKill);<br/>\n    +this.task.setActive(true);<br/>\n    +<br/>\n    +this.task.setDaemon(true);<br/>\n    +this.task.setPriority(Thread.MAX_PRIORITY);<br/>\n    +this.task.start();<br/>\n    +    }<br/>\n    +<br/>\n    +    /**<br/>\n    +     * Schedule a function to be executed in the timer<br/>\n    +     * @param delaySecs the number of seconds to delay before running the function<br/>\n    +     * @param func the function to run<br/>\n    +     * @param checkActive whether to check is the timer is active<br/>\n    +     * @param jitterMs add jitter to the run<br/>\n    +     */<br/>\n    +    public void schedule(int delaySecs, Runnable func, boolean checkActive, int jitterMs) {<br/>\n    +if (this.task == null) {<br/>\n    +    throw new RuntimeException(\"task is null!\");<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    If task is set to final there is no need to check for null everywhere.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648954","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648954","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648954,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5NTQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:17:29Z","updated_at":"2025-01-24T14:22:06Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#discussion_r53052905\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#discussion_r53052905</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/StormTimer.java &#8212;<br/>\n    @@ -0,0 +1,246 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm;<br/>\n    +<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.Comparator;<br/>\n    +import java.util.Random;<br/>\n    +import java.util.concurrent.PriorityBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +/**<br/>\n    + * The timer defined in this file is very similar to java.util.Timer, except<br/>\n    + * it integrates with Storm's time simulation capabilities. This lets us test<br/>\n    + * code that does asynchronous work on the timer thread<br/>\n    + */<br/>\n    +<br/>\n    +public class StormTimer implements AutoCloseable{<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(StormTimer.class);<br/>\n    +<br/>\n    +    public static class QueueEntry {<br/>\n    +public final Long endTimeMs;<br/>\n    +public final Runnable func;<br/>\n    +public final String id;<br/>\n    +<br/>\n    +public QueueEntry(Long endTimeMs, Runnable func, String id) </p>\n{\n    +    this.endTimeMs = endTimeMs;\n    +    this.func = func;\n    +    this.id = id;\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    public static class StormTimerTask extends Thread {<br/>\n    +<br/>\n    +private PriorityBlockingQueue<QueueEntry> queue = new PriorityBlockingQueue<QueueEntry>(10, new Comparator<QueueEntry>() {<br/>\n    +    @Override<br/>\n    +    public int compare(QueueEntry o1, QueueEntry o2) </p>\n{\n    +return o1.endTimeMs.intValue() - o2.endTimeMs.intValue();\n    +    }\n<p>    +});<br/>\n    +<br/>\n    +// boolean to indicate whether timer is active<br/>\n    +private AtomicBoolean active = new AtomicBoolean(false);<br/>\n    +<br/>\n    +// function to call when timer is killed<br/>\n    +private Thread.UncaughtExceptionHandler onKill;<br/>\n    +<br/>\n    +//random number generator<br/>\n    +private Random random = new Random();<br/>\n    +<br/>\n    +@Override<br/>\n    +public void run() {<br/>\n    +    while (this.active.get()) {<br/>\n    +QueueEntry queueEntry = null;<br/>\n    +try {<br/>\n    +    queueEntry = this.queue.peek();<br/>\n    +    if ((queueEntry != null) && (Time.currentTimeMillis() >= queueEntry.endTimeMs)) </p>\n{\n    +// It is imperative to not run the function\n    +// inside the timer lock. Otherwise, it is\n    +// possible to deadlock if the fn deals with\n    +// other locks, like the submit lock.\n    +this.queue.remove(queueEntry);\n    +queueEntry.func.run();\n    +    }\n<p> else if (queueEntry != null) </p>\n{\n    +//  If any events are scheduled, sleep until\n    +// event generation. If any recurring events\n    +// are scheduled then we will always go\n    +// through this branch, sleeping only the\n    +// exact necessary amount of time. We give\n    +// an upper bound, e.g. 1000 millis, to the\n    +// sleeping time, to limit the response time\n    +// for detecting any new event within 1 secs.\n    +Time.sleep(Math.min(1000, (queueEntry.endTimeMs - Time.currentTimeMillis())));\n    +    }\n<p> else </p>\n{\n    +// Otherwise poll to see if any new event\n    +// was scheduled. This is, in essence, the\n    +// response time for detecting any new event\n    +// schedulings when there are no scheduled\n    +// events.\n    +Time.sleep(1000);\n    +    }\n<p>    +} catch (Throwable e) {<br/>\n    +    if (!(Utils.exceptionCauseIsInstanceOf(InterruptedException.class, e))) </p>\n{\n    +this.onKill.uncaughtException(this, e);\n    +this.setActive(false);\n    +    }\n<p>    +}<br/>\n    +    }<br/>\n    +}<br/>\n    +<br/>\n    +public void setOnKillFunc(Thread.UncaughtExceptionHandler onKill) </p>\n{\n    +    this.onKill = onKill;\n    +}\n<p>    +<br/>\n    +public void setActive(boolean flag) </p>\n{\n    +    this.active.set(flag);\n    +}\n<p>    +<br/>\n    +public boolean isActive() </p>\n{\n    +    return this.active.get();\n    +}\n<p>    +<br/>\n    +public void add(QueueEntry queueEntry) </p>\n{\n    +    this.queue.add(queueEntry);\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    //task to run<br/>\n    +    StormTimerTask task = new StormTimerTask();<br/>\n    +<br/>\n    +    /**<br/>\n    +     * Makes a Timer in the form of a StormTimerTask Object<br/>\n    +     * @param name name of the timer<br/>\n    +     * @param onKill function to call when timer is killed unexpectedly<br/>\n    +     * @return StormTimerTask object that was initialized<br/>\n    +     */<br/>\n    +    public StormTimer (String name, Thread.UncaughtExceptionHandler onKill) {<br/>\n    +if (onKill == null) </p>\n{\n    +    throw new RuntimeException(\"onKill func is null!\");\n    +}\n<p>    +if (name == null) </p>\n{\n    +    this.task.setName(\"timer\");\n    +}\n<p> else </p>\n{\n    +    this.task.setName(name);\n    +}\n<p>    +this.task.setOnKillFunc(onKill);<br/>\n    +this.task.setActive(true);<br/>\n    +<br/>\n    +this.task.setDaemon(true);<br/>\n    +this.task.setPriority(Thread.MAX_PRIORITY);<br/>\n    +this.task.start();<br/>\n    +    }<br/>\n    +<br/>\n    +    /**<br/>\n    +     * Schedule a function to be executed in the timer<br/>\n    +     * @param delaySecs the number of seconds to delay before running the function<br/>\n    +     * @param func the function to run<br/>\n    +     * @param checkActive whether to check is the timer is active<br/>\n    +     * @param jitterMs add jitter to the run<br/>\n    +     */<br/>\n    +    public void schedule(int delaySecs, Runnable func, boolean checkActive, int jitterMs) {<br/>\n    +if (this.task == null) </p>\n{\n    +    throw new RuntimeException(\"task is null!\");\n    +}\n<p>    +if (func == null) </p>\n{\n    +    throw new RuntimeException(\"function to schedule is null!\");\n    +}\n<p>    +if (checkActive) </p>\n{\n    +    checkActive();\n    +}\n<p>    +String id = Utils.uuid();<br/>\n    +long endTimeMs = Time.currentTimeMillis() + Time.secsToMillisLong(delaySecs);<br/>\n    +if (jitterMs > 0) </p>\n{\n    +    endTimeMs = this.task.random.nextInt(jitterMs) + endTimeMs;\n    +}\n<p>    +task.add(new QueueEntry(endTimeMs, func, id));<br/>\n    +    }<br/>\n    +<br/>\n    +    public void schedule(int delaySecs, Runnable func) </p>\n{\n    +schedule(delaySecs, func, true, 0);\n    +    }\n<p>    +<br/>\n    +    /**<br/>\n    +     * Schedule a function to run recurrently<br/>\n    +     * @param delaySecs the number of seconds to delay before running the function<br/>\n    +     * @param recurSecs the time between each invocation<br/>\n    +     * @param func the function to run<br/>\n    +     */<br/>\n    +    public void scheduleRecurring(int delaySecs, final int recurSecs, final Runnable func) {<br/>\n    +schedule(delaySecs, new Runnable() {<br/>\n    +    @Override<br/>\n    +    public void run() </p>\n{\n    +func.run();\n    +// This avoids a race condition with cancel-timer.\n    +schedule(recurSecs, this, false, 0);\n    +    }\n<p>    +});<br/>\n    +    }<br/>\n    +<br/>\n    +    /**<br/>\n    +     * schedule a function to run recurrently with jitter<br/>\n    +     * @param delaySecs the number of seconds to delay before running the function<br/>\n    +     * @param recurSecs the time between each invocation<br/>\n    +     * @param jitterMs jitter added to the run<br/>\n    +     * @param func the function to run<br/>\n    +     */<br/>\n    +    public void scheduleRecurringWithJitter(int delaySecs, final int recurSecs, final int jitterMs, final Runnable func) {<br/>\n    +schedule(delaySecs, new Runnable() {<br/>\n    +    @Override<br/>\n    +    public void run() </p>\n{\n    +func.run();\n    +// This avoids a race condition with cancel-timer.\n    +schedule(recurSecs, this, false, jitterMs);\n    +    }\n<p>    +});<br/>\n    +    }<br/>\n    +<br/>\n    +    /**<br/>\n    +     * check if timer is active<br/>\n    +     */<br/>\n    +    public void checkActive() {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    will change</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184808041","html_url":"https://github.com/apache/storm/pull/1098#issuecomment-184808041","issue_url":"https://api.github.com/repos/apache/storm/issues/1098","id":184808041,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDgwODA0MQ==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:17:33Z","updated_at":"2016-02-16T18:17:33Z","author_association":"CONTRIBUTOR","body":"A few minor comment but overall it looks really good.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184808041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648957","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648957","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648957,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5NTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:17:34Z","updated_at":"2025-01-24T14:22:06Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#issuecomment-184808041\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#issuecomment-184808041</a></p>\n\n<p>    A few minor comment but overall it looks really good.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648964","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648964","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648964,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5NjQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:17:52Z","updated_at":"2025-01-24T14:22:06Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#discussion_r53052967\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#discussion_r53052967</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/StormTimer.java &#8212;<br/>\n    @@ -0,0 +1,246 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm;<br/>\n    +<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.Comparator;<br/>\n    +import java.util.Random;<br/>\n    +import java.util.concurrent.PriorityBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +/**<br/>\n    + * The timer defined in this file is very similar to java.util.Timer, except<br/>\n    + * it integrates with Storm's time simulation capabilities. This lets us test<br/>\n    + * code that does asynchronous work on the timer thread<br/>\n    + */<br/>\n    +<br/>\n    +public class StormTimer implements AutoCloseable{<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(StormTimer.class);<br/>\n    +<br/>\n    +    public static class QueueEntry {<br/>\n    +public final Long endTimeMs;<br/>\n    +public final Runnable func;<br/>\n    +public final String id;<br/>\n    +<br/>\n    +public QueueEntry(Long endTimeMs, Runnable func, String id) </p>\n{\n    +    this.endTimeMs = endTimeMs;\n    +    this.func = func;\n    +    this.id = id;\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    public static class StormTimerTask extends Thread {<br/>\n    +<br/>\n    +private PriorityBlockingQueue<QueueEntry> queue = new PriorityBlockingQueue<QueueEntry>(10, new Comparator<QueueEntry>() {<br/>\n    +    @Override<br/>\n    +    public int compare(QueueEntry o1, QueueEntry o2) </p>\n{\n    +return o1.endTimeMs.intValue() - o2.endTimeMs.intValue();\n    +    }\n<p>    +});<br/>\n    +<br/>\n    +// boolean to indicate whether timer is active<br/>\n    +private AtomicBoolean active = new AtomicBoolean(false);<br/>\n    +<br/>\n    +// function to call when timer is killed<br/>\n    +private Thread.UncaughtExceptionHandler onKill;<br/>\n    +<br/>\n    +//random number generator<br/>\n    +private Random random = new Random();<br/>\n    +<br/>\n    +@Override<br/>\n    +public void run() {<br/>\n    +    while (this.active.get()) {<br/>\n    +QueueEntry queueEntry = null;<br/>\n    +try {<br/>\n    +    queueEntry = this.queue.peek();<br/>\n    +    if ((queueEntry != null) && (Time.currentTimeMillis() >= queueEntry.endTimeMs)) </p>\n{\n    +// It is imperative to not run the function\n    +// inside the timer lock. Otherwise, it is\n    +// possible to deadlock if the fn deals with\n    +// other locks, like the submit lock.\n    +this.queue.remove(queueEntry);\n    +queueEntry.func.run();\n    +    }\n<p> else if (queueEntry != null) </p>\n{\n    +//  If any events are scheduled, sleep until\n    +// event generation. If any recurring events\n    +// are scheduled then we will always go\n    +// through this branch, sleeping only the\n    +// exact necessary amount of time. We give\n    +// an upper bound, e.g. 1000 millis, to the\n    +// sleeping time, to limit the response time\n    +// for detecting any new event within 1 secs.\n    +Time.sleep(Math.min(1000, (queueEntry.endTimeMs - Time.currentTimeMillis())));\n    +    }\n<p> else </p>\n{\n    +// Otherwise poll to see if any new event\n    +// was scheduled. This is, in essence, the\n    +// response time for detecting any new event\n    +// schedulings when there are no scheduled\n    +// events.\n    +Time.sleep(1000);\n    +    }\n<p>    +} catch (Throwable e) {<br/>\n    +    if (!(Utils.exceptionCauseIsInstanceOf(InterruptedException.class, e))) </p>\n{\n    +this.onKill.uncaughtException(this, e);\n    +this.setActive(false);\n    +    }\n<p>    +}<br/>\n    +    }<br/>\n    +}<br/>\n    +<br/>\n    +public void setOnKillFunc(Thread.UncaughtExceptionHandler onKill) </p>\n{\n    +    this.onKill = onKill;\n    +}\n<p>    +<br/>\n    +public void setActive(boolean flag) </p>\n{\n    +    this.active.set(flag);\n    +}\n<p>    +<br/>\n    +public boolean isActive() </p>\n{\n    +    return this.active.get();\n    +}\n<p>    +<br/>\n    +public void add(QueueEntry queueEntry) </p>\n{\n    +    this.queue.add(queueEntry);\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    //task to run<br/>\n    +    StormTimerTask task = new StormTimerTask();<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    will change</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648970","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648970","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648970,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5NzA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:18:33Z","updated_at":"2025-01-24T14:22:06Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#discussion_r53053060\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#discussion_r53053060</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/StormTimer.java &#8212;<br/>\n    @@ -0,0 +1,246 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm;<br/>\n    +<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.Comparator;<br/>\n    +import java.util.Random;<br/>\n    +import java.util.concurrent.PriorityBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +/**<br/>\n    + * The timer defined in this file is very similar to java.util.Timer, except<br/>\n    + * it integrates with Storm's time simulation capabilities. This lets us test<br/>\n    + * code that does asynchronous work on the timer thread<br/>\n    + */<br/>\n    +<br/>\n    +public class StormTimer implements AutoCloseable{<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(StormTimer.class);<br/>\n    +<br/>\n    +    public static class QueueEntry {<br/>\n    +public final Long endTimeMs;<br/>\n    +public final Runnable func;<br/>\n    +public final String id;<br/>\n    +<br/>\n    +public QueueEntry(Long endTimeMs, Runnable func, String id) </p>\n{\n    +    this.endTimeMs = endTimeMs;\n    +    this.func = func;\n    +    this.id = id;\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    public static class StormTimerTask extends Thread {<br/>\n    +<br/>\n    +private PriorityBlockingQueue<QueueEntry> queue = new PriorityBlockingQueue<QueueEntry>(10, new Comparator<QueueEntry>() {<br/>\n    +    @Override<br/>\n    +    public int compare(QueueEntry o1, QueueEntry o2) </p>\n{\n    +return o1.endTimeMs.intValue() - o2.endTimeMs.intValue();\n    +    }\n<p>    +});<br/>\n    +<br/>\n    +// boolean to indicate whether timer is active<br/>\n    +private AtomicBoolean active = new AtomicBoolean(false);<br/>\n    +<br/>\n    +// function to call when timer is killed<br/>\n    +private Thread.UncaughtExceptionHandler onKill;<br/>\n    +<br/>\n    +//random number generator<br/>\n    +private Random random = new Random();<br/>\n    +<br/>\n    +@Override<br/>\n    +public void run() {<br/>\n    +    while (this.active.get()) {<br/>\n    +QueueEntry queueEntry = null;<br/>\n    +try {<br/>\n    +    queueEntry = this.queue.peek();<br/>\n    +    if ((queueEntry != null) && (Time.currentTimeMillis() >= queueEntry.endTimeMs)) </p>\n{\n    +// It is imperative to not run the function\n    +// inside the timer lock. Otherwise, it is\n    +// possible to deadlock if the fn deals with\n    +// other locks, like the submit lock.\n    +this.queue.remove(queueEntry);\n    +queueEntry.func.run();\n    +    }\n<p> else if (queueEntry != null) </p>\n{\n    +//  If any events are scheduled, sleep until\n    +// event generation. If any recurring events\n    +// are scheduled then we will always go\n    +// through this branch, sleeping only the\n    +// exact necessary amount of time. We give\n    +// an upper bound, e.g. 1000 millis, to the\n    +// sleeping time, to limit the response time\n    +// for detecting any new event within 1 secs.\n    +Time.sleep(Math.min(1000, (queueEntry.endTimeMs - Time.currentTimeMillis())));\n    +    }\n<p> else </p>\n{\n    +// Otherwise poll to see if any new event\n    +// was scheduled. This is, in essence, the\n    +// response time for detecting any new event\n    +// schedulings when there are no scheduled\n    +// events.\n    +Time.sleep(1000);\n    +    }\n<p>    +} catch (Throwable e) {<br/>\n    +    if (!(Utils.exceptionCauseIsInstanceOf(InterruptedException.class, e))) </p>\n{\n    +this.onKill.uncaughtException(this, e);\n    +this.setActive(false);\n    +    }\n<p>    +}<br/>\n    +    }<br/>\n    +}<br/>\n    +<br/>\n    +public void setOnKillFunc(Thread.UncaughtExceptionHandler onKill) </p>\n{\n    +    this.onKill = onKill;\n    +}\n<p>    +<br/>\n    +public void setActive(boolean flag) </p>\n{\n    +    this.active.set(flag);\n    +}\n<p>    +<br/>\n    +public boolean isActive() </p>\n{\n    +    return this.active.get();\n    +}\n<p>    +<br/>\n    +public void add(QueueEntry queueEntry) </p>\n{\n    +    this.queue.add(queueEntry);\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    //task to run<br/>\n    +    StormTimerTask task = new StormTimerTask();<br/>\n    +<br/>\n    +    /**<br/>\n    +     * Makes a Timer in the form of a StormTimerTask Object<br/>\n    +     * @param name name of the timer<br/>\n    +     * @param onKill function to call when timer is killed unexpectedly<br/>\n    +     * @return StormTimerTask object that was initialized<br/>\n    +     */<br/>\n    +    public StormTimer (String name, Thread.UncaughtExceptionHandler onKill) {<br/>\n    +if (onKill == null) </p>\n{\n    +    throw new RuntimeException(\"onKill func is null!\");\n    +}\n<p>    +if (name == null) </p>\n{\n    +    this.task.setName(\"timer\");\n    +}\n<p> else </p>\n{\n    +    this.task.setName(name);\n    +}\n<p>    +this.task.setOnKillFunc(onKill);<br/>\n    +this.task.setActive(true);<br/>\n    +<br/>\n    +this.task.setDaemon(true);<br/>\n    +this.task.setPriority(Thread.MAX_PRIORITY);<br/>\n    +this.task.start();<br/>\n    +    }<br/>\n    +<br/>\n    +    /**<br/>\n    +     * Schedule a function to be executed in the timer<br/>\n    +     * @param delaySecs the number of seconds to delay before running the function<br/>\n    +     * @param func the function to run<br/>\n    +     * @param checkActive whether to check is the timer is active<br/>\n    +     * @param jitterMs add jitter to the run<br/>\n    +     */<br/>\n    +    public void schedule(int delaySecs, Runnable func, boolean checkActive, int jitterMs) {<br/>\n    +if (this.task == null) {<br/>\n    +    throw new RuntimeException(\"task is null!\");<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    will fix</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184809511","html_url":"https://github.com/apache/storm/pull/1098#issuecomment-184809511","issue_url":"https://api.github.com/repos/apache/storm/issues/1098","id":184809511,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDgwOTUxMQ==","user":{"login":"jerrypeng","id":3613359,"node_id":"MDQ6VXNlcjM2MTMzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3613359?v=4","gravatar_id":"","url":"https://api.github.com/users/jerrypeng","html_url":"https://github.com/jerrypeng","followers_url":"https://api.github.com/users/jerrypeng/followers","following_url":"https://api.github.com/users/jerrypeng/following{/other_user}","gists_url":"https://api.github.com/users/jerrypeng/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrypeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrypeng/subscriptions","organizations_url":"https://api.github.com/users/jerrypeng/orgs","repos_url":"https://api.github.com/users/jerrypeng/repos","events_url":"https://api.github.com/users/jerrypeng/events{/privacy}","received_events_url":"https://api.github.com/users/jerrypeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:20:30Z","updated_at":"2016-02-16T18:20:30Z","author_association":"CONTRIBUTOR","body":"@revans2 thanks again for the review.  I have addressed your comments\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184809511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648977","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648977","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648977,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5Nzc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:20:32Z","updated_at":"2025-01-24T14:22:06Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#issuecomment-184809511\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#issuecomment-184809511</a></p>\n\n<p>    @revans2 thanks again for the review.  I have addressed your comments</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184812340","html_url":"https://github.com/apache/storm/pull/1053#issuecomment-184812340","issue_url":"https://api.github.com/repos/apache/storm/issues/1053","id":184812340,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDgxMjM0MA==","user":{"login":"zhuoliu","id":11683054,"node_id":"MDQ6VXNlcjExNjgzMDU0","avatar_url":"https://avatars.githubusercontent.com/u/11683054?v=4","gravatar_id":"","url":"https://api.github.com/users/zhuoliu","html_url":"https://github.com/zhuoliu","followers_url":"https://api.github.com/users/zhuoliu/followers","following_url":"https://api.github.com/users/zhuoliu/following{/other_user}","gists_url":"https://api.github.com/users/zhuoliu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhuoliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhuoliu/subscriptions","organizations_url":"https://api.github.com/users/zhuoliu/orgs","repos_url":"https://api.github.com/users/zhuoliu/repos","events_url":"https://api.github.com/users/zhuoliu/events{/privacy}","received_events_url":"https://api.github.com/users/zhuoliu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:25:05Z","updated_at":"2016-02-16T18:25:05Z","author_association":"NONE","body":"Looks good! +1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184812340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612651000","html_url":"https://github.com/apache/storm/issues/5100#issuecomment-2612651000","issue_url":"https://api.github.com/repos/apache/storm/issues/5100","id":2612651000,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTEwMDA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:34:40Z","updated_at":"2025-01-24T14:23:00Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>Merged this into master</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612651000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650622","html_url":"https://github.com/apache/storm/issues/5097#issuecomment-2612650622","issue_url":"https://api.github.com/repos/apache/storm/issues/5097","id":2612650622,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTA2MjI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:35:02Z","updated_at":"2025-01-24T14:22:49Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>Merged into master</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650755","html_url":"https://github.com/apache/storm/issues/5098#issuecomment-2612650755","issue_url":"https://api.github.com/repos/apache/storm/issues/5098","id":2612650755,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTA3NTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:35:25Z","updated_at":"2025-01-24T14:22:53Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>merged into master</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612651111","html_url":"https://github.com/apache/storm/issues/5101#issuecomment-2612651111","issue_url":"https://api.github.com/repos/apache/storm/issues/5101","id":2612651111,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTExMTE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:35:46Z","updated_at":"2025-01-24T14:23:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>merged into master</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612651111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184820877","html_url":"https://github.com/apache/storm/pull/1055#issuecomment-184820877","issue_url":"https://api.github.com/repos/apache/storm/issues/1055","id":184820877,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDgyMDg3Nw==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:42:17Z","updated_at":"2016-02-16T18:42:17Z","author_association":"CONTRIBUTOR","body":"+1 please rebase and squash commits.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184820877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612647142","html_url":"https://github.com/apache/storm/issues/5082#issuecomment-2612647142","issue_url":"https://api.github.com/repos/apache/storm/issues/5082","id":2612647142,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDcxNDI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:46:01Z","updated_at":"2025-01-24T14:21:23Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1069#discussion_r53057252\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1069#discussion_r53057252</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/daemon/AckerBolt.java &#8212;<br/>\n    @@ -0,0 +1,128 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.daemon;<br/>\n    +<br/>\n    +import org.apache.storm.task.IBolt;<br/>\n    +import org.apache.storm.task.OutputCollector;<br/>\n    +import org.apache.storm.task.TopologyContext;<br/>\n    +import org.apache.storm.tuple.Tuple;<br/>\n    +import org.apache.storm.utils.RotatingMap;<br/>\n    +import org.apache.storm.utils.TupleUtils;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class AckerBolt implements IBolt {<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(AckerBolt.class);<br/>\n    +<br/>\n    +    private static final long serialVersionUID = 4430906880683183091L;<br/>\n    +<br/>\n    +    public static final String ACKER_COMPONENT_ID = \"__acker\";<br/>\n    +    public static final String ACKER_INIT_STREAM_ID = \"__ack_init\";<br/>\n    +    public static final String ACKER_ACK_STREAM_ID = \"__ack_ack\";<br/>\n    +    public static final String ACKER_FAIL_STREAM_ID = \"__ack_fail\";<br/>\n    +<br/>\n    +    public static final int TIMEOUT_BUCKET_NUM = 3;<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Sounds good.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612647142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612647146","html_url":"https://github.com/apache/storm/issues/5082#issuecomment-2612647146","issue_url":"https://api.github.com/repos/apache/storm/issues/5082","id":2612647146,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDcxNDY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:47:00Z","updated_at":"2025-01-24T14:21:23Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1069#discussion_r53057414\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1069#discussion_r53057414</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/daemon/AckerBolt.java &#8212;<br/>\n    @@ -0,0 +1,129 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.daemon;<br/>\n    +<br/>\n    +import org.apache.storm.task.IBolt;<br/>\n    +import org.apache.storm.task.OutputCollector;<br/>\n    +import org.apache.storm.task.TopologyContext;<br/>\n    +import org.apache.storm.tuple.Tuple;<br/>\n    +import org.apache.storm.utils.RotatingMap;<br/>\n    +import org.apache.storm.utils.TupleUtils;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class AckerBolt implements IBolt {<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(AckerBolt.class);<br/>\n    +<br/>\n    +    private static final long serialVersionUID = 4430906880683183091L;<br/>\n    +<br/>\n    +    public static final String ACKER_COMPONENT_ID = \"__acker\";<br/>\n    +    public static final String ACKER_INIT_STREAM_ID = \"__ack_init\";<br/>\n    +    public static final String ACKER_ACK_STREAM_ID = \"__ack_ack\";<br/>\n    +    public static final String ACKER_FAIL_STREAM_ID = \"__ack_fail\";<br/>\n    +<br/>\n    +    public static final int TIMEOUT_BUCKET_NUM = 3;<br/>\n    +<br/>\n    +    private OutputCollector collector;<br/>\n    +    private RotatingMap<Object, AckObject> pending;<br/>\n    +<br/>\n    +    private class AckObject {<br/>\n    +public long val = 0L;<br/>\n    +public Integer spoutTask = null;<br/>\n    +public boolean failed = false;<br/>\n    +<br/>\n    +// val xor value<br/>\n    +public void updateAck(Object value) </p>\n{\n    +    val = Utils.bitXor(val, value);\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    @Override<br/>\n    +    public void prepare(Map stormConf, TopologyContext context, OutputCollector collector) </p>\n{\n    +this.collector = collector;\n    +this.pending = new RotatingMap<Object, AckObject>(TIMEOUT_BUCKET_NUM);\n    +    }\n<p>    +<br/>\n    +    @Override<br/>\n    +    public void execute(Tuple input) {<br/>\n    +if (TupleUtils.isTick(input)) {<br/>\n    +    Map<Object, AckObject> tmp = pending.rotate();<br/>\n    +    LOG.debug(\"Number of timeout tuples:{}\", tmp.size());<br/>\n    +}<br/>\n    +<br/>\n    +String streamId = input.getSourceStreamId();<br/>\n    +Object id = input.getValue(0);<br/>\n    +AckObject curr = pending.get(id);<br/>\n    +if (ACKER_INIT_STREAM_ID.equals(streamId)) {<br/>\n    +    if (curr == null) </p>\n{\n    +curr = new AckObject();\n    +curr.val = input.getLong(1);\n    +curr.spoutTask = input.getInteger(2);\n    +pending.put(id, curr);\n    +    }\n<p> else </p>\n{\n    +// If receiving bolt's ack before the init message from spout, just update the xor value.\n    +curr.updateAck(input.getValue(1));\n    +curr.spoutTask = input.getInteger(2);\n    +    }\n<p>    +} else if (ACKER_ACK_STREAM_ID.equals(streamId)) {<br/>\n    +    if (curr != null) </p>\n{\n    +curr.updateAck(input.getValue(1));\n    +    }\n<p> else </p>\n{\n    +curr = new AckObject();\n    +curr.val = input.getLong(1);\n    +pending.put(id, curr);\n    +    }\n<p>    +} else if (ACKER_FAIL_STREAM_ID.equals(streamId)) {<br/>\n    +    if (curr == null) {<br/>\n    +// The tuple has been already timeout or failed. So, do nothing<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Yes it is the same behavior I checked in my review.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612647146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612871129","html_url":"https://github.com/apache/storm/issues/5377#issuecomment-2612871129","issue_url":"https://api.github.com/repos/apache/storm/issues/5377","id":2612871129,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzExMjk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T18:59:08Z","updated_at":"2025-01-24T16:01:40Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>I'm not totally sure what you are proposing.  Do you want the logviewer to expose a REST API for taking the JStack and we would remove the corresponding thrift API?  That does seem simpler then what we have now.  <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kishorvpatil\" class=\"user-hover\" rel=\"kishorvpatil\">Kishor Patil</a> do you see any issues with a change like this?  My only concern is that it prevents a command line tool from doing this, but I don't think that is too critical.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612871129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612871135","html_url":"https://github.com/apache/storm/issues/5377#issuecomment-2612871135","issue_url":"https://api.github.com/repos/apache/storm/issues/5377","id":2612871135,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzExMzU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T19:19:11Z","updated_at":"2025-01-24T16:01:40Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kishorvpatil\">kishorvpatil</a>:</i>\n\n<p>We can change logviewer to expose the REST API to create jstack - as it might work. Even though it is overhead of refactoring portions of logic supervisor uses to find which pid to launch the jstack command. <br/>\nNot all actions are synchronous - run profiler for next 10 minutes ( needs to remember to shut it down/ take profiler dump before shutting down the profiler.)<br/>\nIt may good advice to do that for other profiling actions such as run profiler ( which requires remembering how long to run and stop etc. - we are using Zookeeper for that.). Also, it is useful to have UI route all pending actions via ZK to supervisor - so that multiple users requesting for same action - does not reflect in multiple actions being taken. Currently, supervisor kind of merged those to single action for profiling.</p>\n\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abhishek.agarwal\" class=\"user-hover\" rel=\"abhishek.agarwal\">Abhishek Agarwal</a>,<br/>\nI don't see any special advantage to avoiding ZK here. Can you please elaborate if I am missing something?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612871135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184871174","html_url":"https://github.com/apache/storm/pull/1113#issuecomment-184871174","issue_url":"https://api.github.com/repos/apache/storm/issues/1113","id":184871174,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDg3MTE3NA==","user":{"login":"ppoulosk","id":4550393,"node_id":"MDQ6VXNlcjQ1NTAzOTM=","avatar_url":"https://avatars.githubusercontent.com/u/4550393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppoulosk","html_url":"https://github.com/ppoulosk","followers_url":"https://api.github.com/users/ppoulosk/followers","following_url":"https://api.github.com/users/ppoulosk/following{/other_user}","gists_url":"https://api.github.com/users/ppoulosk/gists{/gist_id}","starred_url":"https://api.github.com/users/ppoulosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppoulosk/subscriptions","organizations_url":"https://api.github.com/users/ppoulosk/orgs","repos_url":"https://api.github.com/users/ppoulosk/repos","events_url":"https://api.github.com/users/ppoulosk/events{/privacy}","received_events_url":"https://api.github.com/users/ppoulosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T20:53:24Z","updated_at":"2016-02-16T20:53:24Z","author_association":"CONTRIBUTOR","body":"+1, non-binding\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184871174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650897","html_url":"https://github.com/apache/storm/issues/5099#issuecomment-2612650897","issue_url":"https://api.github.com/repos/apache/storm/issues/5099","id":2612650897,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTA4OTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T20:53:25Z","updated_at":"2025-01-24T14:22:58Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user ppoulosk commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1113#issuecomment-184871174\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1113#issuecomment-184871174</a></p>\n\n<p>    +1, non-binding</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184879965","html_url":"https://github.com/apache/storm/pull/1112#issuecomment-184879965","issue_url":"https://api.github.com/repos/apache/storm/issues/1112","id":184879965,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDg3OTk2NQ==","user":{"login":"ppoulosk","id":4550393,"node_id":"MDQ6VXNlcjQ1NTAzOTM=","avatar_url":"https://avatars.githubusercontent.com/u/4550393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppoulosk","html_url":"https://github.com/ppoulosk","followers_url":"https://api.github.com/users/ppoulosk/followers","following_url":"https://api.github.com/users/ppoulosk/following{/other_user}","gists_url":"https://api.github.com/users/ppoulosk/gists{/gist_id}","starred_url":"https://api.github.com/users/ppoulosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppoulosk/subscriptions","organizations_url":"https://api.github.com/users/ppoulosk/orgs","repos_url":"https://api.github.com/users/ppoulosk/repos","events_url":"https://api.github.com/users/ppoulosk/events{/privacy}","received_events_url":"https://api.github.com/users/ppoulosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T21:22:19Z","updated_at":"2016-02-16T21:22:19Z","author_association":"CONTRIBUTOR","body":"+1, NB\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184879965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870884","html_url":"https://github.com/apache/storm/issues/5375#issuecomment-2612870884","issue_url":"https://api.github.com/repos/apache/storm/issues/5375","id":2612870884,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzA4ODQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T21:22:20Z","updated_at":"2025-01-24T16:01:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user ppoulosk commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1112#issuecomment-184879965\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1112#issuecomment-184879965</a></p>\n\n<p>    +1, NB</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184905183","html_url":"https://github.com/apache/storm/pull/1112#issuecomment-184905183","issue_url":"https://api.github.com/repos/apache/storm/issues/1112","id":184905183,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDkwNTE4Mw==","user":{"login":"ptgoetz","id":260896,"node_id":"MDQ6VXNlcjI2MDg5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/260896?v=4","gravatar_id":"","url":"https://api.github.com/users/ptgoetz","html_url":"https://github.com/ptgoetz","followers_url":"https://api.github.com/users/ptgoetz/followers","following_url":"https://api.github.com/users/ptgoetz/following{/other_user}","gists_url":"https://api.github.com/users/ptgoetz/gists{/gist_id}","starred_url":"https://api.github.com/users/ptgoetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptgoetz/subscriptions","organizations_url":"https://api.github.com/users/ptgoetz/orgs","repos_url":"https://api.github.com/users/ptgoetz/repos","events_url":"https://api.github.com/users/ptgoetz/events{/privacy}","received_events_url":"https://api.github.com/users/ptgoetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T22:44:19Z","updated_at":"2016-02-16T22:44:19Z","author_association":"MEMBER","body":"+0 at this time just because I'd like to do some additional testing and verification.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184905183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870889","html_url":"https://github.com/apache/storm/issues/5375#issuecomment-2612870889","issue_url":"https://api.github.com/repos/apache/storm/issues/5375","id":2612870889,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzA4ODk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T22:44:20Z","updated_at":"2025-01-24T16:01:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user ptgoetz commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1112#issuecomment-184905183\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1112#issuecomment-184905183</a></p>\n\n<p>    +0 at this time just because I'd like to do some additional testing and verification.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184966911","html_url":"https://github.com/apache/storm/pull/1053#issuecomment-184966911","issue_url":"https://api.github.com/repos/apache/storm/issues/1053","id":184966911,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDk2NjkxMQ==","user":{"login":"d2r","id":905298,"node_id":"MDQ6VXNlcjkwNTI5OA==","avatar_url":"https://avatars.githubusercontent.com/u/905298?v=4","gravatar_id":"","url":"https://api.github.com/users/d2r","html_url":"https://github.com/d2r","followers_url":"https://api.github.com/users/d2r/followers","following_url":"https://api.github.com/users/d2r/following{/other_user}","gists_url":"https://api.github.com/users/d2r/gists{/gist_id}","starred_url":"https://api.github.com/users/d2r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d2r/subscriptions","organizations_url":"https://api.github.com/users/d2r/orgs","repos_url":"https://api.github.com/users/d2r/repos","events_url":"https://api.github.com/users/d2r/events{/privacy}","received_events_url":"https://api.github.com/users/d2r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T01:36:42Z","updated_at":"2016-02-17T01:36:42Z","author_association":"NONE","body":"Travis CI [error](https://travis-ci.org/apache/storm/jobs/109239992#L1570) does not seem related. Created [STORM-1555](https://issues.apache.org/jira/browse/STORM-1555)\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184966911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184968903","html_url":"https://github.com/apache/storm/pull/1111#issuecomment-184968903","issue_url":"https://api.github.com/repos/apache/storm/issues/1111","id":184968903,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDk2ODkwMw==","user":{"login":"hustfxj","id":7270212,"node_id":"MDQ6VXNlcjcyNzAyMTI=","avatar_url":"https://avatars.githubusercontent.com/u/7270212?v=4","gravatar_id":"","url":"https://api.github.com/users/hustfxj","html_url":"https://github.com/hustfxj","followers_url":"https://api.github.com/users/hustfxj/followers","following_url":"https://api.github.com/users/hustfxj/following{/other_user}","gists_url":"https://api.github.com/users/hustfxj/gists{/gist_id}","starred_url":"https://api.github.com/users/hustfxj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hustfxj/subscriptions","organizations_url":"https://api.github.com/users/hustfxj/orgs","repos_url":"https://api.github.com/users/hustfxj/repos","events_url":"https://api.github.com/users/hustfxj/events{/privacy}","received_events_url":"https://api.github.com/users/hustfxj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T01:44:14Z","updated_at":"2016-02-17T01:44:14Z","author_association":"CONTRIBUTOR","body":"@revans2  Thank you\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184968903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646597","html_url":"https://github.com/apache/storm/issues/5080#issuecomment-2612646597","issue_url":"https://api.github.com/repos/apache/storm/issues/5080","id":2612646597,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDY1OTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T01:44:15Z","updated_at":"2025-01-24T14:21:09Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user hustfxj commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1111#issuecomment-184968903\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1111#issuecomment-184968903</a></p>\n\n<p>    @revans2  Thank you</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612646597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648981","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648981","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648981,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5ODE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T01:45:32Z","updated_at":"2025-01-24T14:22:06Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user harshach commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#discussion_r53110634\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#discussion_r53110634</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/StormTimer.java &#8212;<br/>\n    @@ -0,0 +1,240 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm;<br/>\n    +<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.Comparator;<br/>\n    +import java.util.Random;<br/>\n    +import java.util.concurrent.PriorityBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +/**<br/>\n    + * The timer defined in this file is very similar to java.util.Timer, except<br/>\n    + * it integrates with Storm's time simulation capabilities. This lets us test<br/>\n    + * code that does asynchronous work on the timer thread<br/>\n    + */<br/>\n    +<br/>\n    +public class StormTimer implements AutoCloseable{<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    space after AutoCloseable</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648988","html_url":"https://github.com/apache/storm/issues/5090#issuecomment-2612648988","issue_url":"https://api.github.com/repos/apache/storm/issues/5090","id":2612648988,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDg5ODg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T01:47:05Z","updated_at":"2025-01-24T14:22:06Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user harshach commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1098#discussion_r53110748\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1098#discussion_r53110748</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/StormTimer.java &#8212;<br/>\n    @@ -0,0 +1,240 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm;<br/>\n    +<br/>\n    +import org.apache.storm.utils.Time;<br/>\n    +import org.apache.storm.utils.Utils;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import java.util.Comparator;<br/>\n    +import java.util.Random;<br/>\n    +import java.util.concurrent.PriorityBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +/**<br/>\n    + * The timer defined in this file is very similar to java.util.Timer, except<br/>\n    + * it integrates with Storm's time simulation capabilities. This lets us test<br/>\n    + * code that does asynchronous work on the timer thread<br/>\n    + */<br/>\n    +<br/>\n    +public class StormTimer implements AutoCloseable{<br/>\n    +    private static final Logger LOG = LoggerFactory.getLogger(StormTimer.class);<br/>\n    +<br/>\n    +    public static class QueueEntry {<br/>\n    +public final Long endTimeMs;<br/>\n    +public final Runnable func;<br/>\n    +public final String id;<br/>\n    +<br/>\n    +public QueueEntry(Long endTimeMs, Runnable func, String id) </p>\n{\n    +    this.endTimeMs = endTimeMs;\n    +    this.func = func;\n    +    this.id = id;\n    +}\n<p>    +    }<br/>\n    +<br/>\n    +    public static class StormTimerTask extends Thread {<br/>\n    +<br/>\n    +private PriorityBlockingQueue<QueueEntry> queue = new PriorityBlockingQueue<QueueEntry>(10, new Comparator<QueueEntry>() {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    can you add comment about why the initialCapacity is 10</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612648988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870696","html_url":"https://github.com/apache/storm/issues/5374#issuecomment-2612870696","issue_url":"https://api.github.com/repos/apache/storm/issues/5374","id":2612870696,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NzA2OTY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T01:49:45Z","updated_at":"2025-01-24T16:01:28Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1101\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1101</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612870696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184970451","html_url":"https://github.com/apache/storm/pull/1094#issuecomment-184970451","issue_url":"https://api.github.com/repos/apache/storm/issues/1094","id":184970451,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDk3MDQ1MQ==","user":{"login":"harshach","id":38649,"node_id":"MDQ6VXNlcjM4NjQ5","avatar_url":"https://avatars.githubusercontent.com/u/38649?v=4","gravatar_id":"","url":"https://api.github.com/users/harshach","html_url":"https://github.com/harshach","followers_url":"https://api.github.com/users/harshach/followers","following_url":"https://api.github.com/users/harshach/following{/other_user}","gists_url":"https://api.github.com/users/harshach/gists{/gist_id}","starred_url":"https://api.github.com/users/harshach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harshach/subscriptions","organizations_url":"https://api.github.com/users/harshach/orgs","repos_url":"https://api.github.com/users/harshach/repos","events_url":"https://api.github.com/users/harshach/events{/privacy}","received_events_url":"https://api.github.com/users/harshach/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T01:53:22Z","updated_at":"2016-02-17T01:53:22Z","author_association":"CONTRIBUTOR","body":"+1. @arunmahadevan this should go into 1.x-branch as well.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184970451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612869474","html_url":"https://github.com/apache/storm/issues/5367#issuecomment-2612869474","issue_url":"https://api.github.com/repos/apache/storm/issues/5367","id":2612869474,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4Njk0NzQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T01:53:24Z","updated_at":"2025-01-24T16:00:55Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user harshach commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1094#issuecomment-184970451\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1094#issuecomment-184970451</a></p>\n\n<p>    +1. @arunmahadevan this should go into 1.x-branch as well.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612869474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612869479","html_url":"https://github.com/apache/storm/issues/5367#issuecomment-2612869479","issue_url":"https://api.github.com/repos/apache/storm/issues/5367","id":2612869479,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4Njk0Nzk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T02:32:24Z","updated_at":"2025-01-24T16:00:55Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1094\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1094</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612869479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184982673","html_url":"https://github.com/apache/storm/pull/1086#issuecomment-184982673","issue_url":"https://api.github.com/repos/apache/storm/issues/1086","id":184982673,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDk4MjY3Mw==","user":{"login":"harshach","id":38649,"node_id":"MDQ6VXNlcjM4NjQ5","avatar_url":"https://avatars.githubusercontent.com/u/38649?v=4","gravatar_id":"","url":"https://api.github.com/users/harshach","html_url":"https://github.com/harshach","followers_url":"https://api.github.com/users/harshach/followers","following_url":"https://api.github.com/users/harshach/following{/other_user}","gists_url":"https://api.github.com/users/harshach/gists{/gist_id}","starred_url":"https://api.github.com/users/harshach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harshach/subscriptions","organizations_url":"https://api.github.com/users/harshach/orgs","repos_url":"https://api.github.com/users/harshach/repos","events_url":"https://api.github.com/users/harshach/events{/privacy}","received_events_url":"https://api.github.com/users/harshach/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T02:33:51Z","updated_at":"2016-02-17T02:33:51Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184982673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612865847","html_url":"https://github.com/apache/storm/issues/5346#issuecomment-2612865847","issue_url":"https://api.github.com/repos/apache/storm/issues/5346","id":2612865847,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NjU4NDc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T02:33:53Z","updated_at":"2025-01-24T15:59:21Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user harshach commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1086#issuecomment-184982673\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1086#issuecomment-184982673</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612865847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/184983036","html_url":"https://github.com/apache/storm/pull/1113#issuecomment-184983036","issue_url":"https://api.github.com/repos/apache/storm/issues/1113","id":184983036,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDk4MzAzNg==","user":{"login":"longdafeng","id":374091,"node_id":"MDQ6VXNlcjM3NDA5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/374091?v=4","gravatar_id":"","url":"https://api.github.com/users/longdafeng","html_url":"https://github.com/longdafeng","followers_url":"https://api.github.com/users/longdafeng/followers","following_url":"https://api.github.com/users/longdafeng/following{/other_user}","gists_url":"https://api.github.com/users/longdafeng/gists{/gist_id}","starred_url":"https://api.github.com/users/longdafeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/longdafeng/subscriptions","organizations_url":"https://api.github.com/users/longdafeng/orgs","repos_url":"https://api.github.com/users/longdafeng/repos","events_url":"https://api.github.com/users/longdafeng/events{/privacy}","received_events_url":"https://api.github.com/users/longdafeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T02:35:57Z","updated_at":"2016-02-17T02:35:57Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/184983036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650904","html_url":"https://github.com/apache/storm/issues/5099#issuecomment-2612650904","issue_url":"https://api.github.com/repos/apache/storm/issues/5099","id":2612650904,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NTA5MDQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T02:35:58Z","updated_at":"2025-01-24T14:22:58Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user longdafeng commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1113#issuecomment-184983036\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1113#issuecomment-184983036</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612650904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612865852","html_url":"https://github.com/apache/storm/issues/5346#issuecomment-2612865852","issue_url":"https://api.github.com/repos/apache/storm/issues/5346","id":2612865852,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI4NjU4NTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-17T02:40:23Z","updated_at":"2025-01-24T15:59:21Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1086\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1086</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612865852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]