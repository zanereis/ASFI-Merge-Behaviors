[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989404670","html_url":"https://github.com/apache/iceberg/pull/3687#issuecomment-989404670","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3687","id":989404670,"node_id":"IC_kwDOCW7NX846-R3-","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T01:37:14Z","updated_at":"2021-12-09T01:37:14Z","author_association":"MEMBER","body":"Get this merged, Thanks @jackye1995 for the reviewing !","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989404670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989445783","html_url":"https://github.com/apache/iceberg/pull/3685#issuecomment-989445783","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3685","id":989445783,"node_id":"IC_kwDOCW7NX846-b6X","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T02:26:29Z","updated_at":"2021-12-09T02:27:03Z","author_association":"MEMBER","body":"> Can we revert the change that removed the old rewrite files in 2.4 only? That seems like the safest way to fix the regression ahead of the 0.13.0 release.\r\n\r\nagree on this considering the 0.13.0 release timeline. Next version we can rework on this again may be if required. I will raise a revert PR for it now. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989445783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989497403","html_url":"https://github.com/apache/iceberg/pull/3663#issuecomment-989497403","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3663","id":989497403,"node_id":"IC_kwDOCW7NX846-og7","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T04:20:58Z","updated_at":"2021-12-09T04:22:04Z","author_association":"CONTRIBUTOR","body":"This is actually interesting development. In the recent announcement related to AWS Athena support for Iceberg, we mentioned that the Glue catalog integration uses Glue native optimistic locking and no longer require any lock such as DynamoLockManager. So we are planning to deprecate the lock manager once the new Glue SDK with that feature is released in a few weeks. \r\n\r\nWe can move the LockManager interface and in-memory implementation to core if that is the place which needs this feature the most. If you want to use the DynamoLockManager, we can keep that in the `iceberg-aws` module for dynamic loading.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989497403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989498119","html_url":"https://github.com/apache/iceberg/pull/3685#issuecomment-989498119","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3685","id":989498119,"node_id":"IC_kwDOCW7NX846-osH","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T04:22:40Z","updated_at":"2021-12-09T04:22:40Z","author_association":"MEMBER","body":"@rdblue , @RussellSpitzer , @jackye1995 , @puneetzaroo : \r\nReverted the #3587 as suggested. Spark2.4 deprecated class removal will be handled again in the next version after 0.13.0 release. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989498119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989498726","html_url":"https://github.com/apache/iceberg/pull/3672#issuecomment-989498726","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3672","id":989498726,"node_id":"IC_kwDOCW7NX846-o1m","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T04:24:09Z","updated_at":"2021-12-09T04:24:09Z","author_association":"MEMBER","body":"@jackye1995 : could you please add 0.13.0 milestone for this PR ?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989498726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989498915","html_url":"https://github.com/apache/iceberg/pull/3671#issuecomment-989498915","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3671","id":989498915,"node_id":"IC_kwDOCW7NX846-o4j","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T04:24:30Z","updated_at":"2021-12-09T04:24:30Z","author_association":"MEMBER","body":"@jackye1995 : could you please add 0.13.0 milestone for this PR ?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989498915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989500488","html_url":"https://github.com/apache/iceberg/pull/3684#issuecomment-989500488","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3684","id":989500488,"node_id":"IC_kwDOCW7NX846-pRI","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T04:27:48Z","updated_at":"2021-12-09T04:27:48Z","author_association":"CONTRIBUTOR","body":"Ryan replied the email thread and I think the concern is that it brings a lot of legal liability for Apache foundation to maintain vendor runtime jars. If the vendor prefers to have such a jar, they should publish on their own. \r\n\r\nIn the community meeting today we have some agreement that this is the most reasonable way to go. We did not have the license issue for AWS and Nessie because they did not bring any bundled vendor dependency, but in general we should discourage the practice for new vendors going forward.\r\n\r\nWould you like to reply that thread with what you think is the best way forward?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989500488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989502403","html_url":"https://github.com/apache/iceberg/pull/3642#issuecomment-989502403","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3642","id":989502403,"node_id":"IC_kwDOCW7NX846-pvD","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T04:32:17Z","updated_at":"2021-12-09T04:32:17Z","author_association":"CONTRIBUTOR","body":"thanks @racevedoo ! It looks like we can just exclude the dependency in the related runtime jars, could you try with that approach?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989502403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989504872","html_url":"https://github.com/apache/iceberg/issues/3236#issuecomment-989504872","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3236","id":989504872,"node_id":"IC_kwDOCW7NX846-qVo","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T04:38:21Z","updated_at":"2021-12-09T04:38:21Z","author_association":"MEMBER","body":"We are talking about \"potential groups\" whose contents, if re-written would not create a different file than the groups contents before the rewrite.\r\n\r\nSo the easy example is:\r\nA group which contains a single file that is unaffected by deletes and which cannot be split into multiple files\r\nA group with a single file that is modified by deletes should be rewritten (if the rewrite deletes filter is on)\r\nA group with a single very large file should be rewritten (but only if we can split it into target size files)\r\n\r\nMore complicated examples which you don't have to cover in this PR are things like:\r\nA group which contains multiple files which cannot be combined into more efficent files, For example we currently do not support binpacking portions of row groups, so if you have 3 files and each has a single 100 MB row group, we won't be able to rewrite that into say, 2 150 MB files since the original files cannot be split except on row group boundaries.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989504872/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989522003","html_url":"https://github.com/apache/iceberg/issues/3669#issuecomment-989522003","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3669","id":989522003,"node_id":"IC_kwDOCW7NX846-uhT","user":{"login":"felixYyu","id":3785228,"node_id":"MDQ6VXNlcjM3ODUyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3785228?v=4","gravatar_id":"","url":"https://api.github.com/users/felixYyu","html_url":"https://github.com/felixYyu","followers_url":"https://api.github.com/users/felixYyu/followers","following_url":"https://api.github.com/users/felixYyu/following{/other_user}","gists_url":"https://api.github.com/users/felixYyu/gists{/gist_id}","starred_url":"https://api.github.com/users/felixYyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixYyu/subscriptions","organizations_url":"https://api.github.com/users/felixYyu/orgs","repos_url":"https://api.github.com/users/felixYyu/repos","events_url":"https://api.github.com/users/felixYyu/events{/privacy}","received_events_url":"https://api.github.com/users/felixYyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T05:18:15Z","updated_at":"2021-12-09T05:18:15Z","author_association":"CONTRIBUTOR","body":"try test again.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989522003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989555733","html_url":"https://github.com/apache/iceberg/pull/3685#issuecomment-989555733","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3685","id":989555733,"node_id":"IC_kwDOCW7NX846-2wV","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T06:30:47Z","updated_at":"2021-12-09T06:31:23Z","author_association":"MEMBER","body":"After a direct revert, one test case failed [org.apache.iceberg.actions.TestRewriteDataFilesAction > testRewriteDataFilesForLargeFile FAILED]\r\nI have analyzed and found it is from #3666 (which is merged after my PR), pushed the modified test case in the new commit.\r\n\r\nPR is ready now.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989555733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989592089","html_url":"https://github.com/apache/iceberg/pull/3671#issuecomment-989592089","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3671","id":989592089,"node_id":"IC_kwDOCW7NX846-_oZ","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T07:40:57Z","updated_at":"2021-12-09T07:40:57Z","author_association":"CONTRIBUTOR","body":"thanks for reminding, I am planning to review tomorrow morning","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989592089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989631070","html_url":"https://github.com/apache/iceberg/pull/3270#issuecomment-989631070","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3270","id":989631070,"node_id":"IC_kwDOCW7NX846_JJe","user":{"login":"xingbowu","id":12458911,"node_id":"MDQ6VXNlcjEyNDU4OTEx","avatar_url":"https://avatars.githubusercontent.com/u/12458911?v=4","gravatar_id":"","url":"https://api.github.com/users/xingbowu","html_url":"https://github.com/xingbowu","followers_url":"https://api.github.com/users/xingbowu/followers","following_url":"https://api.github.com/users/xingbowu/following{/other_user}","gists_url":"https://api.github.com/users/xingbowu/gists{/gist_id}","starred_url":"https://api.github.com/users/xingbowu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xingbowu/subscriptions","organizations_url":"https://api.github.com/users/xingbowu/orgs","repos_url":"https://api.github.com/users/xingbowu/repos","events_url":"https://api.github.com/users/xingbowu/events{/privacy}","received_events_url":"https://api.github.com/users/xingbowu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T08:40:30Z","updated_at":"2021-12-09T08:40:30Z","author_association":"CONTRIBUTOR","body":"I will close this PR if no further discussion","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989631070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989684278","html_url":"https://github.com/apache/iceberg/pull/3323#issuecomment-989684278","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3323","id":989684278,"node_id":"IC_kwDOCW7NX846_WI2","user":{"login":"hameizi","id":18445460,"node_id":"MDQ6VXNlcjE4NDQ1NDYw","avatar_url":"https://avatars.githubusercontent.com/u/18445460?v=4","gravatar_id":"","url":"https://api.github.com/users/hameizi","html_url":"https://github.com/hameizi","followers_url":"https://api.github.com/users/hameizi/followers","following_url":"https://api.github.com/users/hameizi/following{/other_user}","gists_url":"https://api.github.com/users/hameizi/gists{/gist_id}","starred_url":"https://api.github.com/users/hameizi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hameizi/subscriptions","organizations_url":"https://api.github.com/users/hameizi/orgs","repos_url":"https://api.github.com/users/hameizi/repos","events_url":"https://api.github.com/users/hameizi/events{/privacy}","received_events_url":"https://api.github.com/users/hameizi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T09:50:28Z","updated_at":"2021-12-09T09:50:28Z","author_association":"CONTRIBUTOR","body":"> The key idea is that we leave the equality delete files in the table so we don't have to worry about existing data files that aren't part of the stream we are compacting.\r\n\r\n@rdblue If there is too much equality delete files will cause memory pressure when read table.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989684278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989896322","html_url":"https://github.com/apache/iceberg/pull/3642#issuecomment-989896322","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3642","id":989896322,"node_id":"IC_kwDOCW7NX847AJ6C","user":{"login":"racevedoo","id":5193063,"node_id":"MDQ6VXNlcjUxOTMwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/5193063?v=4","gravatar_id":"","url":"https://api.github.com/users/racevedoo","html_url":"https://github.com/racevedoo","followers_url":"https://api.github.com/users/racevedoo/followers","following_url":"https://api.github.com/users/racevedoo/following{/other_user}","gists_url":"https://api.github.com/users/racevedoo/gists{/gist_id}","starred_url":"https://api.github.com/users/racevedoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/racevedoo/subscriptions","organizations_url":"https://api.github.com/users/racevedoo/orgs","repos_url":"https://api.github.com/users/racevedoo/repos","events_url":"https://api.github.com/users/racevedoo/events{/privacy}","received_events_url":"https://api.github.com/users/racevedoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T14:20:45Z","updated_at":"2021-12-09T14:20:45Z","author_association":"CONTRIBUTOR","body":"@jackye1995 just updated the PR. Could you take a look please?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989896322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989905405","html_url":"https://github.com/apache/iceberg/pull/3642#issuecomment-989905405","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3642","id":989905405,"node_id":"IC_kwDOCW7NX847AMH9","user":{"login":"racevedoo","id":5193063,"node_id":"MDQ6VXNlcjUxOTMwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/5193063?v=4","gravatar_id":"","url":"https://api.github.com/users/racevedoo","html_url":"https://github.com/racevedoo","followers_url":"https://api.github.com/users/racevedoo/followers","following_url":"https://api.github.com/users/racevedoo/following{/other_user}","gists_url":"https://api.github.com/users/racevedoo/gists{/gist_id}","starred_url":"https://api.github.com/users/racevedoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/racevedoo/subscriptions","organizations_url":"https://api.github.com/users/racevedoo/orgs","repos_url":"https://api.github.com/users/racevedoo/repos","events_url":"https://api.github.com/users/racevedoo/events{/privacy}","received_events_url":"https://api.github.com/users/racevedoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T14:31:29Z","updated_at":"2021-12-09T14:31:29Z","author_association":"CONTRIBUTOR","body":"> changes LGTM, just curious, did you try and see if the original problem is fixed by this or do we need to wait until this is merged and pushed to the snapshot repo to try it out?\r\n\r\nYep, I tested it by publishing to a local maven repo and it works :D","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/989905405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990022785","html_url":"https://github.com/apache/iceberg/pull/3039#issuecomment-990022785","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3039","id":990022785,"node_id":"IC_kwDOCW7NX847AoyB","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T16:40:35Z","updated_at":"2021-12-09T16:40:35Z","author_association":"MEMBER","body":"Thanks @daksha121 + @zhengzengprc  + @rajarshisarkar for all your hard work. Thanks also to all the reviewers for making this possible. Streaming in Iceberg is getting much better thanks to work like this!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990022785/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990117010","html_url":"https://github.com/apache/iceberg/pull/3601#issuecomment-990117010","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3601","id":990117010,"node_id":"IC_kwDOCW7NX847A_yS","user":{"login":"CircArgs","id":35903677,"node_id":"MDQ6VXNlcjM1OTAzNjc3","avatar_url":"https://avatars.githubusercontent.com/u/35903677?v=4","gravatar_id":"","url":"https://api.github.com/users/CircArgs","html_url":"https://github.com/CircArgs","followers_url":"https://api.github.com/users/CircArgs/followers","following_url":"https://api.github.com/users/CircArgs/following{/other_user}","gists_url":"https://api.github.com/users/CircArgs/gists{/gist_id}","starred_url":"https://api.github.com/users/CircArgs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CircArgs/subscriptions","organizations_url":"https://api.github.com/users/CircArgs/orgs","repos_url":"https://api.github.com/users/CircArgs/repos","events_url":"https://api.github.com/users/CircArgs/events{/privacy}","received_events_url":"https://api.github.com/users/CircArgs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T18:34:58Z","updated_at":"2021-12-09T18:34:58Z","author_association":"CONTRIBUTOR","body":"@samredai thanks for this suggestion. I'll split it into a few sequential PRs and reference them here","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990117010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990132501","html_url":"https://github.com/apache/iceberg/pull/3685#issuecomment-990132501","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3685","id":990132501,"node_id":"IC_kwDOCW7NX847BDkV","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T18:56:20Z","updated_at":"2021-12-09T18:56:20Z","author_association":"MEMBER","body":"We shouldn't revert this I think, instead we should implement the 2.4 version of the new api. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990132501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990133555","html_url":"https://github.com/apache/iceberg/pull/3671#issuecomment-990133555","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3671","id":990133555,"node_id":"IC_kwDOCW7NX847BD0z","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T18:57:49Z","updated_at":"2021-12-09T18:57:49Z","author_association":"MEMBER","body":"@ajantha-bhat Are there any specific changes here from 3.2 that I should look out for?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990133555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990147673","html_url":"https://github.com/apache/iceberg/pull/3561#issuecomment-990147673","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3561","id":990147673,"node_id":"IC_kwDOCW7NX847BHRZ","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T19:16:24Z","updated_at":"2021-12-09T19:16:24Z","author_association":"CONTRIBUTOR","body":"I appreciate all of the feedback so far. Wanted to let you all know that I've been out sick so I might be a little slow in getting back to you, but I will!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990147673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990171336","html_url":"https://github.com/apache/iceberg/pull/3642#issuecomment-990171336","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3642","id":990171336,"node_id":"IC_kwDOCW7NX847BNDI","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T19:37:48Z","updated_at":"2021-12-09T19:37:48Z","author_association":"CONTRIBUTOR","body":"I looked into this a bit more since @racevedoo mentioned that this affects other Spark versions. It looks like something caused the runtime Jars to start declaring dependencies and that's the problem. The 0.12.1 runtime Jar doesn't declare any dependencies, which is correct: https://repo1.maven.org/maven2/org/apache/iceberg/iceberg-spark3-runtime/0.12.1/iceberg-spark3-runtime-0.12.1.pom. But the 0.13.0-SNAPSHOT runtime Jar does have dependencies: https://repository.apache.org/content/repositories/snapshots/org/apache/iceberg/iceberg-spark-runtime-3.2_2.12/0.13.0-SNAPSHOT/iceberg-spark-runtime-3.2_2.12-0.13.0-20211209.000820-7.pom\r\n\r\nMy guess is that the move to gradle 7 changed this and we didn't notice at the time. That PR updated the configuration of the shadow plugin that we use to create the Jars. We'll need to remove the bundled dependencies from being listed in the POM file.\r\n\r\nI don't think that this PR is the right path forward. It isn't that the version isn't populated, it is that the dependency is declared even though the code is bundled in the runtime Jar.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990171336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990175208","html_url":"https://github.com/apache/iceberg/pull/3642#issuecomment-990175208","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3642","id":990175208,"node_id":"IC_kwDOCW7NX847BN_o","user":{"login":"racevedoo","id":5193063,"node_id":"MDQ6VXNlcjUxOTMwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/5193063?v=4","gravatar_id":"","url":"https://api.github.com/users/racevedoo","html_url":"https://github.com/racevedoo","followers_url":"https://api.github.com/users/racevedoo/followers","following_url":"https://api.github.com/users/racevedoo/following{/other_user}","gists_url":"https://api.github.com/users/racevedoo/gists{/gist_id}","starred_url":"https://api.github.com/users/racevedoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/racevedoo/subscriptions","organizations_url":"https://api.github.com/users/racevedoo/orgs","repos_url":"https://api.github.com/users/racevedoo/repos","events_url":"https://api.github.com/users/racevedoo/events{/privacy}","received_events_url":"https://api.github.com/users/racevedoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T19:42:17Z","updated_at":"2021-12-09T19:44:43Z","author_association":"CONTRIBUTOR","body":"Nice finding @rdblue! The move to gradle 7 is probably the reason.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990175208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990176433","html_url":"https://github.com/apache/iceberg/issues/3700#issuecomment-990176433","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3700","id":990176433,"node_id":"IC_kwDOCW7NX847BOSx","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T19:43:33Z","updated_at":"2021-12-09T19:43:33Z","author_association":"CONTRIBUTOR","body":"I am not totally familiar with the PR, after reading it just now, it seems like the quickest fix is to move the `spec_id` column back as the last column, given this is not released yet in past versions. Would that be enough? @rdblue ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990176433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990204587","html_url":"https://github.com/apache/iceberg/pull/3671#issuecomment-990204587","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3671","id":990204587,"node_id":"IC_kwDOCW7NX847BVKr","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T20:07:31Z","updated_at":"2021-12-09T20:07:31Z","author_association":"MEMBER","body":"Merged! I'll go take a look at the 3.0 backport","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990204587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990243985","html_url":"https://github.com/apache/iceberg/pull/3642#issuecomment-990243985","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3642","id":990243985,"node_id":"IC_kwDOCW7NX847BeyR","user":{"login":"racevedoo","id":5193063,"node_id":"MDQ6VXNlcjUxOTMwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/5193063?v=4","gravatar_id":"","url":"https://api.github.com/users/racevedoo","html_url":"https://github.com/racevedoo","followers_url":"https://api.github.com/users/racevedoo/followers","following_url":"https://api.github.com/users/racevedoo/following{/other_user}","gists_url":"https://api.github.com/users/racevedoo/gists{/gist_id}","starred_url":"https://api.github.com/users/racevedoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/racevedoo/subscriptions","organizations_url":"https://api.github.com/users/racevedoo/orgs","repos_url":"https://api.github.com/users/racevedoo/repos","events_url":"https://api.github.com/users/racevedoo/events{/privacy}","received_events_url":"https://api.github.com/users/racevedoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T20:54:57Z","updated_at":"2021-12-09T20:54:57Z","author_association":"CONTRIBUTOR","body":"Actually this does not seem to be related with the gradle 7 upgrade. The pom file generated in 57477c3f is fine (no dependencies). I'm trying to dig into this a bit more","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990243985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990249759","html_url":"https://github.com/apache/iceberg/pull/3642#issuecomment-990249759","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3642","id":990249759,"node_id":"IC_kwDOCW7NX847BgMf","user":{"login":"racevedoo","id":5193063,"node_id":"MDQ6VXNlcjUxOTMwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/5193063?v=4","gravatar_id":"","url":"https://api.github.com/users/racevedoo","html_url":"https://github.com/racevedoo","followers_url":"https://api.github.com/users/racevedoo/followers","following_url":"https://api.github.com/users/racevedoo/following{/other_user}","gists_url":"https://api.github.com/users/racevedoo/gists{/gist_id}","starred_url":"https://api.github.com/users/racevedoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/racevedoo/subscriptions","organizations_url":"https://api.github.com/users/racevedoo/orgs","repos_url":"https://api.github.com/users/racevedoo/repos","events_url":"https://api.github.com/users/racevedoo/events{/privacy}","received_events_url":"https://api.github.com/users/racevedoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T21:02:03Z","updated_at":"2021-12-09T21:02:03Z","author_association":"CONTRIBUTOR","body":"The cause seems to be 811af434. e7e932e7 (the previous commit) generates the pom correctly","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990249759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990267862","html_url":"https://github.com/apache/iceberg/pull/3685#issuecomment-990267862","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3685","id":990267862,"node_id":"IC_kwDOCW7NX847BknW","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T21:20:09Z","updated_at":"2021-12-09T21:20:09Z","author_association":"CONTRIBUTOR","body":"Instead of reverting the entire `Actions`, can we only revert the ones we have not provided implementations in Spark24? I think the list is `snapshotTable`, `migrateTable`, `rewriteDataFiles`, which corresponds to `CreateAction`, `SnapshotAction` and `RewriteDataFilesAction`.\r\n\r\n@RussellSpitzer I think what you said is definitely the right way to fix this, but I feel we should not try to implement that just for the sake of fixing feature regression across releases. People who actually want to use these actions in Spark24 should do the backport.\r\n\r\nAny thoughts? @ajantha-bhat @rdblue ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990267862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990295613","html_url":"https://github.com/apache/iceberg/issues/3699#issuecomment-990295613","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3699","id":990295613,"node_id":"IC_kwDOCW7NX847BrY9","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T21:38:54Z","updated_at":"2021-12-09T21:38:54Z","author_association":"CONTRIBUTOR","body":"@rajarshisarkar would you like to add the documentation?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990295613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990320328","html_url":"https://github.com/apache/iceberg/issues/430#issuecomment-990320328","issue_url":"https://api.github.com/repos/apache/iceberg/issues/430","id":990320328,"node_id":"IC_kwDOCW7NX847BxbI","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T21:59:46Z","updated_at":"2021-12-09T21:59:46Z","author_association":"CONTRIBUTOR","body":"@sunchao @rdblue is this still being worked upon?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990320328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990367376","html_url":"https://github.com/apache/iceberg/issues/430#issuecomment-990367376","issue_url":"https://api.github.com/repos/apache/iceberg/issues/430","id":990367376,"node_id":"IC_kwDOCW7NX847B86Q","user":{"login":"sunchao","id":506679,"node_id":"MDQ6VXNlcjUwNjY3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/506679?v=4","gravatar_id":"","url":"https://api.github.com/users/sunchao","html_url":"https://github.com/sunchao","followers_url":"https://api.github.com/users/sunchao/followers","following_url":"https://api.github.com/users/sunchao/following{/other_user}","gists_url":"https://api.github.com/users/sunchao/gists{/gist_id}","starred_url":"https://api.github.com/users/sunchao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunchao/subscriptions","organizations_url":"https://api.github.com/users/sunchao/orgs","repos_url":"https://api.github.com/users/sunchao/repos","events_url":"https://api.github.com/users/sunchao/events{/privacy}","received_events_url":"https://api.github.com/users/sunchao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T22:43:29Z","updated_at":"2021-12-09T22:43:29Z","author_association":"MEMBER","body":"Yes I'm working on this right now, and the bulk of the work is on Spark side. Please track https://issues.apache.org/jira/browse/SPARK-37375 for progress.\r\n\r\nBTW good to see you here @SinghAsDev !","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990367376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990388182","html_url":"https://github.com/apache/iceberg/pull/3573#issuecomment-990388182","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3573","id":990388182,"node_id":"IC_kwDOCW7NX847CB_W","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T23:11:33Z","updated_at":"2021-12-09T23:11:33Z","author_association":"CONTRIBUTOR","body":"Closing this PR in favor of https://github.com/apache/iceberg/pull/3701 since there was a lot of on going pushing to this and it has fallen somewhat behind without many people who contribute to Iceberg looking at it.\r\n\r\nI will move the conversation there but link to this so that your comments here are seen @pan3793.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990388182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990389530","html_url":"https://github.com/apache/iceberg/pull/3701#issuecomment-990389530","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3701","id":990389530,"node_id":"IC_kwDOCW7NX847CCUa","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T23:13:35Z","updated_at":"2021-12-09T23:13:35Z","author_association":"CONTRIBUTOR","body":"This new PR to respect `CASCADE` in Spark Catalog's `dropNamespace` replaces https://github.com/apache/iceberg/pull/3573, which @pan3793 had approved via a comment.\r\n\r\nI am opening a new PR as the old one fell behind and had a lot of edits. This will be cleaner.\r\n\r\ncc @rdblue @pan3793 @aokolnychyi @RussellSpitzer @flyrain @nastra ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990389530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990456196","html_url":"https://github.com/apache/iceberg/pull/3702#issuecomment-990456196","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3702","id":990456196,"node_id":"IC_kwDOCW7NX847CSmE","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T00:41:52Z","updated_at":"2021-12-10T00:41:52Z","author_association":"CONTRIBUTOR","body":"Thanks, @jackye1995!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990456196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990456545","html_url":"https://github.com/apache/iceberg/pull/3698#issuecomment-990456545","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3698","id":990456545,"node_id":"IC_kwDOCW7NX847CSrh","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T00:42:22Z","updated_at":"2021-12-10T00:42:22Z","author_association":"CONTRIBUTOR","body":"@jackye1995 can you review?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990456545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990529946","html_url":"https://github.com/apache/iceberg/issues/3700#issuecomment-990529946","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3700","id":990529946,"node_id":"IC_kwDOCW7NX847Ckma","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T02:00:33Z","updated_at":"2021-12-10T02:00:33Z","author_association":"MEMBER","body":"I think I missed the previous comment from @stevenzwu  before, sorry for that. recently, I have been busy with some internal affairs from the company and don't have the enough bandwidth to check all the maillist and github notifications. \r\n\r\nI don't see the root cause when I initially check the whole flink manifest read/write path, I will need to reproduce this bug in my localhost to locate the root cause.  Will update this issue if there is any progress. \r\n\r\nThanks.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990529946/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990551155","html_url":"https://github.com/apache/iceberg/pull/3685#issuecomment-990551155","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3685","id":990551155,"node_id":"IC_kwDOCW7NX847Cpxz","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T02:35:02Z","updated_at":"2021-12-10T02:35:02Z","author_association":"MEMBER","body":"Considering 0.13.0 release timeline @rdblue suggested that we revert this change and I too think it as the right step to do.\r\n\r\n@RussellSpitzer : \r\n> instead we should implement the 2.4 version of the new api.\r\n\r\na) For this we should have similar classes of Spark3BinPackStrategy, Spark3SortStrategy and then we need 2.4 version of \r\nDistributionAndOrderingUtils etc. May take time for me to analyze and handle. So, may be next version we can handle this.\r\nb) It seems snapshotTable, migrateTable also missing after removing the deprecated actions [as they don't have alternate implementations]\r\n\r\n@jackye1995 : \r\nInstead of reverting whole changes, just brining back  snapshotTable, migrateTable, rewriteDataFiles with Actions package makes sense to me. But we also need to remove deprecated annotations from Actions package I guess as it is not really having alternate implementations.\r\n\r\n@RussellSpitzer , @rdblue : Can we conclude on this ?\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990551155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990586810","html_url":"https://github.com/apache/iceberg/pull/3685#issuecomment-990586810","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3685","id":990586810,"node_id":"IC_kwDOCW7NX847Cye6","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T03:50:00Z","updated_at":"2021-12-10T03:50:00Z","author_association":"MEMBER","body":"If we are reverting all the deprecation messages also need to be changed, they currently say the function will be removed in 0.13. \r\n\r\nWe also don't need to support Sort in 2.4, it never was supported before in 2.4. I mainly don't want to keep this around because the old api had some odd behaviors, if we bring it back we then have two different apis depending on the Spark version which will do materially different things. Although if we want to maintain that as a long term support I think that could be fine. \r\n\r\nThe main issue is many of the 3.0 actions are just very difficult to implement in 2.4 (like snapshot and migrate) which I only originally implemented for Spark 3. https://github.com/apache/iceberg/pull/1525/files\r\n\r\nSo if we do revert, it probably only makes sense to move back `rewriteDataFiles` as I don't think any of the other actions had implementations","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990586810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990623655","html_url":"https://github.com/apache/iceberg/pull/3685#issuecomment-990623655","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3685","id":990623655,"node_id":"IC_kwDOCW7NX847C7en","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T05:12:02Z","updated_at":"2021-12-10T05:12:32Z","author_association":"CONTRIBUTOR","body":"> So if we do revert, it probably only makes sense to move back `rewriteDataFiles` as I don't think any of the other actions had implementations\r\n\r\nYes totally agree, I mentioned `CreateAction` and `SnapshotAction` because we also don't have alternative implementations for Spark 2.4 for those, but they don't have original implementations either. So that boils down to only the `rewriteDataFiles`.\r\n\r\n> For this we should have similar classes of Spark3BinPackStrategy, Spark3SortStrategy and then we need 2.4 version of\r\nDistributionAndOrderingUtils etc.\r\n\r\nFor the future work, I really don't think we should spend effort in re-implementing the action in 2.4. We can mark that as deprecated, never remove it, and add a note \"please move to Spark 3.x for the new implementation\".\r\n\r\nAs Russell said it does not support sort strategy anyway, so it's only gonna be partial support even if implemented. I think only people who absolutely want that should try to backport, and hopefully this can push people to continuously move forward in Spark versions. That's the best way for us to support new Spark versions in the current architecture, by gradually dropping support of features in old versions, otherwise it would be too much burden for developers to maintain all the Spark versions, especially 2.4 because it's so different from the 3.x versions.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990623655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990628291","html_url":"https://github.com/apache/iceberg/issues/430#issuecomment-990628291","issue_url":"https://api.github.com/repos/apache/iceberg/issues/430","id":990628291,"node_id":"IC_kwDOCW7NX847C8nD","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T05:23:40Z","updated_at":"2021-12-10T05:23:40Z","author_association":"CONTRIBUTOR","body":"Great to e-see you too as well Chao!\n\nOn Thu, Dec 9, 2021 at 2:43 PM Chao Sun ***@***.***> wrote:\n\n> Yes I'm working on this right now, and the bulk of the work is on Spark\n> side. Please track https://issues.apache.org/jira/browse/SPARK-37375 for\n> progress.\n>\n> BTW good to see you here @SinghAsDev <https://github.com/SinghAsDev> !\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/iceberg/issues/430#issuecomment-990367376>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ABFQCZJLT6TG7KVST6AL5D3UQEWJ3ANCNFSM4ISKXHYQ>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n>\n-- \n- Ashish\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990628291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990629109","html_url":"https://github.com/apache/iceberg/pull/3029#issuecomment-990629109","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3029","id":990629109,"node_id":"IC_kwDOCW7NX847C8z1","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T05:25:41Z","updated_at":"2021-12-10T05:25:41Z","author_association":"CONTRIBUTOR","body":"@nastra does this still need to be reviewed?\r\n\r\nSomebody mentioned on slack this week (on Tuesday) that they had issues writing a fixed item as a truncated partition column. So they used Binary.\r\n\r\nI’ve been out sick but I’ll gather the details into an issue.\r\n\r\nI doubt this will directly solve that but made me think of this PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990629109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990661085","html_url":"https://github.com/apache/iceberg/pull/3685#issuecomment-990661085","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3685","id":990661085,"node_id":"IC_kwDOCW7NX847DEnd","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T06:46:15Z","updated_at":"2021-12-10T06:46:15Z","author_association":"MEMBER","body":"@RussellSpitzer , @jackye1995 : thanks for your inputs.\r\nI have added back the rewrite data files action for spark-2.4 and removed its deprecated annotations. \r\n\r\nPR is ready. Please help for review and merge. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990661085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990765599","html_url":"https://github.com/apache/iceberg/pull/3029#issuecomment-990765599","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3029","id":990765599,"node_id":"IC_kwDOCW7NX847DeIf","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T09:19:40Z","updated_at":"2021-12-10T09:19:40Z","author_association":"CONTRIBUTOR","body":"@kbendick yes this still needs to be reviewed and at this point TBH I'm uncertain the approach is correct or not because I'm not sure if this statement is still correct (https://github.com/apache/iceberg/pull/3029/files#diff-80bc724de9a4dd358c4544fcf00e00139145c6763a5d0280e0bd0793a0fd4003L366-L368):\r\n> Spark does not support fixed width binary data type. To work around this limitation, the data is read as fixed width binary from parquet and stored in a {@link VarBinaryVector} in Arrow.\r\n\r\nFWIW the PR itself is not related to the issue that was reported on Slack.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990765599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990858658","html_url":"https://github.com/apache/iceberg/pull/3706#issuecomment-990858658","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3706","id":990858658,"node_id":"IC_kwDOCW7NX847D02i","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T10:49:40Z","updated_at":"2021-12-10T10:49:40Z","author_association":"MEMBER","body":"Let's please track doc changes while bumping the Nessie version.\r\ncc: @nastra , @rymurr , @snazy ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/990858658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991079023","html_url":"https://github.com/apache/iceberg/issues/3709#issuecomment-991079023","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3709","id":991079023,"node_id":"IC_kwDOCW7NX847Eqpv","user":{"login":"Kyo91","id":4249289,"node_id":"MDQ6VXNlcjQyNDkyODk=","avatar_url":"https://avatars.githubusercontent.com/u/4249289?v=4","gravatar_id":"","url":"https://api.github.com/users/Kyo91","html_url":"https://github.com/Kyo91","followers_url":"https://api.github.com/users/Kyo91/followers","following_url":"https://api.github.com/users/Kyo91/following{/other_user}","gists_url":"https://api.github.com/users/Kyo91/gists{/gist_id}","starred_url":"https://api.github.com/users/Kyo91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kyo91/subscriptions","organizations_url":"https://api.github.com/users/Kyo91/orgs","repos_url":"https://api.github.com/users/Kyo91/repos","events_url":"https://api.github.com/users/Kyo91/events{/privacy}","received_events_url":"https://api.github.com/users/Kyo91/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T15:44:42Z","updated_at":"2021-12-10T15:44:42Z","author_association":"NONE","body":"Quick update: can confirm that this bug exists within `0.12.0` as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991079023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991083894","html_url":"https://github.com/apache/iceberg/issues/3062#issuecomment-991083894","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3062","id":991083894,"node_id":"IC_kwDOCW7NX847Er12","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T15:51:03Z","updated_at":"2021-12-10T15:51:03Z","author_association":"CONTRIBUTOR","body":"After some more investigation we'v tracked this down to Spark DSv2 API issues. Here are the relevant Spark jiras  [SPARK-37578](https://issues.apache.org/jira/browse/SPARK-37578) and [SPARK-37585 ](https://issues.apache.org/jira/browse/SPARK-37585)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991083894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991101986","html_url":"https://github.com/apache/iceberg/issues/3703#issuecomment-991101986","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3703","id":991101986,"node_id":"IC_kwDOCW7NX847EwQi","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T16:13:08Z","updated_at":"2021-12-10T16:13:08Z","author_association":"MEMBER","body":"We have considered this but we were worried about overwhelming distributed file systems and losing control over the parallelism of the job. That said have you tried just increasing driver memory, we have folks doing some rather large remove orphan and expire snapshot jobs and they just use larger drivers when required (they also usually increase the parallelism of the driver delete process as well.)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991101986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991160877","html_url":"https://github.com/apache/iceberg/pull/3698#issuecomment-991160877","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3698","id":991160877,"node_id":"IC_kwDOCW7NX847E-ot","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T17:32:13Z","updated_at":"2021-12-10T17:32:13Z","author_association":"CONTRIBUTOR","body":"I was holding on this review because I thought it's related to the discussion in #3668 , but more test is always better. Where were you trying to make change? Could you describe in more details? Maybe we missed some test cases somewhere else.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991160877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991161594","html_url":"https://github.com/apache/iceberg/pull/3702#issuecomment-991161594","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3702","id":991161594,"node_id":"IC_kwDOCW7NX847E-z6","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T17:33:18Z","updated_at":"2021-12-10T17:33:18Z","author_association":"CONTRIBUTOR","body":"Thanks for the reviews!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991161594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991164029","html_url":"https://github.com/apache/iceberg/pull/3658#issuecomment-991164029","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3658","id":991164029,"node_id":"IC_kwDOCW7NX847E_Z9","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T17:36:54Z","updated_at":"2021-12-10T17:36:54Z","author_association":"CONTRIBUTOR","body":"Thanks for the review Daniel! \r\n\r\nFor anyone looking into this, we are adding these configs for users who want to use S3 compatible storage services and frameworks such as MinIO through the AWS S3 client. But ultimately the right way to go is to have a native FileIO, like in the case of GCS, which can unlock all the features of a storage service.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991164029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991188032","html_url":"https://github.com/apache/iceberg/pull/3477#issuecomment-991188032","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3477","id":991188032,"node_id":"IC_kwDOCW7NX847FFRA","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T18:12:49Z","updated_at":"2021-12-10T18:12:49Z","author_association":"CONTRIBUTOR","body":"Thanks, @openinx! I think we also need to port these tests to 1.14 as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991188032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991188232","html_url":"https://github.com/apache/iceberg/pull/3477#issuecomment-991188232","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3477","id":991188232,"node_id":"IC_kwDOCW7NX847FFUI","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T18:13:09Z","updated_at":"2021-12-10T18:13:09Z","author_association":"CONTRIBUTOR","body":"Oh woops. I clicked request changes when I meant to click approve. Sorry about that! It was merged anyway 🙂 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991188232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991252584","html_url":"https://github.com/apache/iceberg/issues/3700#issuecomment-991252584","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3700","id":991252584,"node_id":"IC_kwDOCW7NX847FVBo","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T19:53:42Z","updated_at":"2021-12-10T19:53:42Z","author_association":"CONTRIBUTOR","body":"@jackye1995, a way to \"fix\" the problem is to move `spec_id` so that the original column ordinals match. The problem with doing that is that we leave a known bug in the codebase. And it's very unlikely that we'll get lucky and have someone catch it before release next time. There was no test that caught this.\r\n\r\nAnother reason not to is that we state that Iceberg metadata files follow Iceberg schema evolution rules. If we violate that here and start avoiding certain valid changes because of fear something might break, then we're back to Hadoop usability: you have to know what not to do and you're artificially limited. We don't want Iceberg developers to be afraid of using tools that are perfectly valid according to the spec.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991252584/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991264285","html_url":"https://github.com/apache/iceberg/pull/3713#issuecomment-991264285","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3713","id":991264285,"node_id":"IC_kwDOCW7NX847FX4d","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T20:13:23Z","updated_at":"2021-12-10T20:13:23Z","author_association":"CONTRIBUTOR","body":"Looks good to me. @openinx and @stevenzwu, any objections?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991264285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991274224","html_url":"https://github.com/apache/iceberg/issues/3707#issuecomment-991274224","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3707","id":991274224,"node_id":"IC_kwDOCW7NX847FaTw","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T20:30:23Z","updated_at":"2021-12-10T20:30:23Z","author_association":"CONTRIBUTOR","body":"@xiaotianzhang01, does it work to order by the columns? Using the truncate function should give you the same clustering as sorting by the column itself, I think.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991274224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991294117","html_url":"https://github.com/apache/iceberg/pull/3601#issuecomment-991294117","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3601","id":991294117,"node_id":"IC_kwDOCW7NX847FfKl","user":{"login":"CircArgs","id":35903677,"node_id":"MDQ6VXNlcjM1OTAzNjc3","avatar_url":"https://avatars.githubusercontent.com/u/35903677?v=4","gravatar_id":"","url":"https://api.github.com/users/CircArgs","html_url":"https://github.com/CircArgs","followers_url":"https://api.github.com/users/CircArgs/followers","following_url":"https://api.github.com/users/CircArgs/following{/other_user}","gists_url":"https://api.github.com/users/CircArgs/gists{/gist_id}","starred_url":"https://api.github.com/users/CircArgs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CircArgs/subscriptions","organizations_url":"https://api.github.com/users/CircArgs/orgs","repos_url":"https://api.github.com/users/CircArgs/repos","events_url":"https://api.github.com/users/CircArgs/events{/privacy}","received_events_url":"https://api.github.com/users/CircArgs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T21:08:11Z","updated_at":"2021-12-10T21:08:11Z","author_association":"CONTRIBUTOR","body":"Converted to draft based on suggestion by @samredai.\r\n\r\nSee [#3714](https://github.com/apache/iceberg/pull/3714) and [#3715](https://github.com/apache/iceberg/pull/3715)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991294117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991357906","html_url":"https://github.com/apache/iceberg/issues/3700#issuecomment-991357906","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3700","id":991357906,"node_id":"IC_kwDOCW7NX847FuvS","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T22:55:31Z","updated_at":"2021-12-10T22:55:31Z","author_association":"CONTRIBUTOR","body":"Had some discussion with Steven and Ryan in Slack, the Flink checkpoint serialization is handled by `FlinkManifestUtil`, which calls the core library for serdes:\r\n\r\n```java\r\n  static ManifestFile writeDataFiles(OutputFile outputFile, PartitionSpec spec, List<DataFile> dataFiles)\r\n      throws IOException {\r\n    ManifestWriter<DataFile> writer = ManifestFiles.write(FORMAT_V2, spec, outputFile, DUMMY_SNAPSHOT_ID);\r\n\r\n    try (ManifestWriter<DataFile> closeableWriter = writer) {\r\n      closeableWriter.addAll(dataFiles);\r\n    }\r\n\r\n    return writer.toManifestFile();\r\n  }\r\n\r\n  static List<DataFile> readDataFiles(ManifestFile manifestFile, FileIO io) throws IOException {\r\n    try (CloseableIterable<DataFile> dataFiles = ManifestFiles.read(manifestFile, io)) {\r\n      return Lists.newArrayList(dataFiles);\r\n    }\r\n  }\r\n```\r\n\r\nThe schema at write time is fixed through `MetadataV1/2` even when we add new fields in `DataFile`, so there should not be any compatibility issue.\r\n\r\nI tried the following using 0.12 and 0.13:\r\n\r\nIn 0.12:\r\n\r\n```\r\nOutputFile outputFile = icebergTable.io().newOutputFile(\"file:/Users/yzhaoqin/0.12-out.avro\");\r\nFlinkManifestUtil.writeDataFiles(outputFile, icebergTable.spec(), Lists.newArrayList(icebergTable.currentSnapshot().addedFiles()));\r\n```\r\n\r\nIn 0.13:\r\n\r\n```\r\nList<DataFile> dataFiles = FlinkManifestUtil.readDataFiles(\r\n    new GenericManifestFile(icebergTable.io().newInputFile(\"file:/Users/yzhaoqin/0.12-out.avro\"), icebergTable.spec().specId()),\r\n    icebergTable.io());\r\n```\r\n\r\nand it worked.\r\n\r\nSo so far I am not able to reproduce the issue, @stevenzwu @openinx please let me know if you are able to have a repro.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991357906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991401205","html_url":"https://github.com/apache/iceberg/pull/3713#issuecomment-991401205","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3713","id":991401205,"node_id":"IC_kwDOCW7NX847F5T1","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-11T01:16:45Z","updated_at":"2021-12-11T01:16:45Z","author_association":"CONTRIBUTOR","body":"LGTM. this makes sense. and since we haven't release 0.13, now it is a good time to change/fix this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991401205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991410490","html_url":"https://github.com/apache/iceberg/issues/3710#issuecomment-991410490","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3710","id":991410490,"node_id":"IC_kwDOCW7NX847F7k6","user":{"login":"jzhuge","id":1883812,"node_id":"MDQ6VXNlcjE4ODM4MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1883812?v=4","gravatar_id":"","url":"https://api.github.com/users/jzhuge","html_url":"https://github.com/jzhuge","followers_url":"https://api.github.com/users/jzhuge/followers","following_url":"https://api.github.com/users/jzhuge/following{/other_user}","gists_url":"https://api.github.com/users/jzhuge/gists{/gist_id}","starred_url":"https://api.github.com/users/jzhuge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzhuge/subscriptions","organizations_url":"https://api.github.com/users/jzhuge/orgs","repos_url":"https://api.github.com/users/jzhuge/repos","events_url":"https://api.github.com/users/jzhuge/events{/privacy}","received_events_url":"https://api.github.com/users/jzhuge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-11T02:02:11Z","updated_at":"2021-12-11T02:02:11Z","author_association":"MEMBER","body":"Found log4j-core 2.11.2 in `zinc` configuration. Probably ok?\r\n```\r\n$ ./gradlew :iceberg-spark:iceberg-spark-extensions-3.2_2.12:dependencyInsight --dependency org.apache.logging.log4j:log4j-core --configuration zinc\r\n\r\n> Task :iceberg-spark:iceberg-spark-extensions-3.2_2.12:dependencyInsight\r\norg.apache.logging.log4j:log4j-core:2.11.2\r\n   variant \"runtime\" [\r\n      org.gradle.status          = release (not requested)\r\n      org.gradle.usage           = java-runtime (not requested)\r\n      org.gradle.libraryelements = jar (not requested)\r\n      org.gradle.category        = library (not requested)\r\n   ]\r\n\r\norg.apache.logging.log4j:log4j-core:2.11.2\r\n\\--- org.scala-sbt:util-logging_2.12:1.3.0\r\n     +--- org.scala-sbt:zinc-core_2.12:1.3.5\r\n     |    +--- org.scala-sbt:zinc_2.12:1.3.5\r\n     |    |    \\--- zinc\r\n     |    \\--- org.scala-sbt:zinc-persist_2.12:1.3.5\r\n     |         \\--- org.scala-sbt:zinc_2.12:1.3.5 (*)\r\n     +--- org.scala-sbt:zinc-compile-core_2.12:1.3.5\r\n     |    \\--- org.scala-sbt:zinc_2.12:1.3.5 (*)\r\n     \\--- org.scala-sbt:zinc-classfile_2.12:1.3.5\r\n          +--- org.scala-sbt:zinc_2.12:1.3.5 (*)\r\n          +--- org.scala-sbt:zinc-compile-core_2.12:1.3.5 (*)\r\n          \\--- org.scala-sbt:zinc-apiinfo_2.12:1.3.5\r\n               +--- org.scala-sbt:zinc-core_2.12:1.3.5 (*)\r\n               \\--- org.scala-sbt:zinc-compile-core_2.12:1.3.5 (*)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991410490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991418396","html_url":"https://github.com/apache/iceberg/pull/3543#issuecomment-991418396","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3543","id":991418396,"node_id":"IC_kwDOCW7NX847F9gc","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-11T02:47:58Z","updated_at":"2021-12-11T21:30:49Z","author_association":"CONTRIBUTOR","body":"Ok everything should be done now @rdblue.\r\n\r\nIf we approve this, let me know and I'll back port the changes to the other Spark Catalog versions. I will also update Flink as well in a separate PR.\r\n\r\nEDIT: Sorry didn't see there were checkstyle issues. Fixing those now.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991418396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991432229","html_url":"https://github.com/apache/iceberg/pull/3701#issuecomment-991432229","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3701","id":991432229,"node_id":"IC_kwDOCW7NX847GA4l","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-11T03:26:33Z","updated_at":"2021-12-11T03:26:33Z","author_association":"CONTRIBUTOR","body":"I will come back to this tomorrow with fresher eyes. There are possibly a few corner cases I didn't consider around `IF EXISTS`.\r\n\r\nIt's relatively complicated as we have to check on things to account for `IF EXISTS`, as well as `CASCADE`.\r\n\r\nThis relies heavily on the unit tests (as well as reading through the code).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991432229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991475808","html_url":"https://github.com/apache/iceberg/pull/3663#issuecomment-991475808","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3663","id":991475808,"node_id":"IC_kwDOCW7NX847GLhg","user":{"login":"CodingCat","id":678008,"node_id":"MDQ6VXNlcjY3ODAwOA==","avatar_url":"https://avatars.githubusercontent.com/u/678008?v=4","gravatar_id":"","url":"https://api.github.com/users/CodingCat","html_url":"https://github.com/CodingCat","followers_url":"https://api.github.com/users/CodingCat/followers","following_url":"https://api.github.com/users/CodingCat/following{/other_user}","gists_url":"https://api.github.com/users/CodingCat/gists{/gist_id}","starred_url":"https://api.github.com/users/CodingCat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CodingCat/subscriptions","organizations_url":"https://api.github.com/users/CodingCat/orgs","repos_url":"https://api.github.com/users/CodingCat/repos","events_url":"https://api.github.com/users/CodingCat/events{/privacy}","received_events_url":"https://api.github.com/users/CodingCat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-11T06:14:08Z","updated_at":"2021-12-11T06:14:08Z","author_association":"CONTRIBUTOR","body":"@rdblue @jackye1995 @kbendick I have moved LockManagers to core and added the capability for HadoopTableOperations to leverage that. Specifically, users can pass in lock configuration via Hadoop Configuration (prefix with `iceberg.`)  , please let me know if this is the approach you like. And also I reduced the number of threads in tests\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991475808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991634962","html_url":"https://github.com/apache/iceberg/issues/3710#issuecomment-991634962","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3710","id":991634962,"node_id":"IC_kwDOCW7NX847GyYS","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-11T12:58:33Z","updated_at":"2021-12-11T12:58:33Z","author_association":"MEMBER","body":"@jzhuge I think that would only be an issue for folks running CI and using Zinc for incremental compilation if that internal compilation service can receive a request via some outside source and get SBT to log it. So basically you have to run Gradle as a service, have gradle run zinc when you run  the Scala compilation and have zinc open a port to receive external communications. As far as I know Zinc doesn't host an public services\r\n\r\nThat said we should probably upgrade Gradle whenever it has an update for the Scala plugin. I agree that this is probably ok and not a real vulnerability.\r\n\r\nTracking for the Zinc upgrade\r\nhttps://github.com/sbt/sbt/issues/6742 - Patched in SBT\r\n\r\nNo patch in gradle yet as far as I can see (probably because no SBT release yet)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991634962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991794558","html_url":"https://github.com/apache/iceberg/pull/3543#issuecomment-991794558","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3543","id":991794558,"node_id":"IC_kwDOCW7NX847HZV-","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-11T21:58:17Z","updated_at":"2021-12-11T21:58:17Z","author_association":"CONTRIBUTOR","body":"Ok. Sorry about the previous alert @rdblue. All of the test should be passing now for this one.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991794558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991831065","html_url":"https://github.com/apache/iceberg/pull/3713#issuecomment-991831065","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3713","id":991831065,"node_id":"IC_kwDOCW7NX847HiQZ","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T04:02:10Z","updated_at":"2021-12-12T04:02:10Z","author_association":"CONTRIBUTOR","body":"The change makes sense. LGTM.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991831065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991839606","html_url":"https://github.com/apache/iceberg/pull/3450#issuecomment-991839606","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3450","id":991839606,"node_id":"IC_kwDOCW7NX847HkV2","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T05:53:09Z","updated_at":"2021-12-12T05:53:16Z","author_association":"COLLABORATOR","body":"@rdblue Wondering if there are any additional comments on it? Thanks.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991839606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991892836","html_url":"https://github.com/apache/iceberg/pull/3501#issuecomment-991892836","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3501","id":991892836,"node_id":"IC_kwDOCW7NX847HxVk","user":{"login":"chethanuk","id":16241795,"node_id":"MDQ6VXNlcjE2MjQxNzk1","avatar_url":"https://avatars.githubusercontent.com/u/16241795?v=4","gravatar_id":"","url":"https://api.github.com/users/chethanuk","html_url":"https://github.com/chethanuk","followers_url":"https://api.github.com/users/chethanuk/followers","following_url":"https://api.github.com/users/chethanuk/following{/other_user}","gists_url":"https://api.github.com/users/chethanuk/gists{/gist_id}","starred_url":"https://api.github.com/users/chethanuk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chethanuk/subscriptions","organizations_url":"https://api.github.com/users/chethanuk/orgs","repos_url":"https://api.github.com/users/chethanuk/repos","events_url":"https://api.github.com/users/chethanuk/events{/privacy}","received_events_url":"https://api.github.com/users/chethanuk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T12:50:41Z","updated_at":"2021-12-12T12:50:41Z","author_association":"NONE","body":"@stevenzwu does this work with Flink 1.14?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991892836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991948588","html_url":"https://github.com/apache/iceberg/pull/3717#issuecomment-991948588","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3717","id":991948588,"node_id":"IC_kwDOCW7NX847H-8s","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T18:36:28Z","updated_at":"2021-12-12T18:36:28Z","author_association":"CONTRIBUTOR","body":"I think this is correct. Another case is where the initial commit times out, but it succeeds on the server side, then another commit is successful. The metadata location would not match, but the commit was valid.\r\n\r\n@RussellSpitzer, can you take a look at this as well? Good to get more than just one person looking at these.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991948588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991948630","html_url":"https://github.com/apache/iceberg/pull/3717#issuecomment-991948630","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3717","id":991948630,"node_id":"IC_kwDOCW7NX847H-9W","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T18:36:45Z","updated_at":"2021-12-12T18:36:45Z","author_association":"CONTRIBUTOR","body":"Thanks for catching this, @jfz!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991948630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991949009","html_url":"https://github.com/apache/iceberg/pull/3718#issuecomment-991949009","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3718","id":991949009,"node_id":"IC_kwDOCW7NX847H_DR","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T18:39:18Z","updated_at":"2021-12-12T18:39:18Z","author_association":"CONTRIBUTOR","body":"@ajantha-bhat, what is the use case for exposing this?\r\n\r\nExpiring individual snapshots by ID is not a recommended operation because it can break certain operations that use table history. Unless there's a reason to expose this to SQL users, I would rather not.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991949009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991949219","html_url":"https://github.com/apache/iceberg/pull/3713#issuecomment-991949219","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3713","id":991949219,"node_id":"IC_kwDOCW7NX847H_Gj","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T18:40:50Z","updated_at":"2021-12-12T18:40:50Z","author_association":"CONTRIBUTOR","body":"Thanks, @kbendick!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991949219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991949701","html_url":"https://github.com/apache/iceberg/pull/3694#issuecomment-991949701","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3694","id":991949701,"node_id":"IC_kwDOCW7NX847H_OF","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T18:44:14Z","updated_at":"2021-12-12T18:44:14Z","author_association":"CONTRIBUTOR","body":"Thanks, @q977734161!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991949701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991950250","html_url":"https://github.com/apache/iceberg/pull/3681#issuecomment-991950250","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3681","id":991950250,"node_id":"IC_kwDOCW7NX847H_Wq","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T18:47:36Z","updated_at":"2021-12-12T18:47:36Z","author_association":"CONTRIBUTOR","body":"@stevenzwu, can you take a look at this one?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991950250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991951322","html_url":"https://github.com/apache/iceberg/pull/3663#issuecomment-991951322","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3663","id":991951322,"node_id":"IC_kwDOCW7NX847H_na","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T18:54:33Z","updated_at":"2021-12-12T18:54:33Z","author_association":"CONTRIBUTOR","body":"Looks like there are Javadoc/build problems, but tests are passing so we can review while you fix those in parallel.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991951322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991956860","html_url":"https://github.com/apache/iceberg/pull/3717#issuecomment-991956860","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3717","id":991956860,"node_id":"IC_kwDOCW7NX847IA98","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T19:31:59Z","updated_at":"2021-12-12T19:31:59Z","author_association":"CONTRIBUTOR","body":"Thanks, @jfz! And thanks for the additional review, @RussellSpitzer!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991956860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991957594","html_url":"https://github.com/apache/iceberg/pull/3714#issuecomment-991957594","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3714","id":991957594,"node_id":"IC_kwDOCW7NX847IBJa","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T19:37:33Z","updated_at":"2021-12-12T19:37:33Z","author_association":"CONTRIBUTOR","body":"@CircArgs, I think that the request to break down these changes wasn't just that there were too many types done in a single PR, it was that too many features were done in a single PR. That's what makes it hard to review. Could you do just one feature in a PR?\r\n\r\nFor example, I know you'd like to clean up type classes so that you can use `isinstance` the same way for all of them. Could you do that in a single PR? I don't think that we want to add literals and change types in the same PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991957594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991962318","html_url":"https://github.com/apache/iceberg/pull/3714#issuecomment-991962318","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3714","id":991962318,"node_id":"IC_kwDOCW7NX847ICTO","user":{"login":"samredai","id":43911210,"node_id":"MDQ6VXNlcjQzOTExMjEw","avatar_url":"https://avatars.githubusercontent.com/u/43911210?v=4","gravatar_id":"","url":"https://api.github.com/users/samredai","html_url":"https://github.com/samredai","followers_url":"https://api.github.com/users/samredai/followers","following_url":"https://api.github.com/users/samredai/following{/other_user}","gists_url":"https://api.github.com/users/samredai/gists{/gist_id}","starred_url":"https://api.github.com/users/samredai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samredai/subscriptions","organizations_url":"https://api.github.com/users/samredai/orgs","repos_url":"https://api.github.com/users/samredai/repos","events_url":"https://api.github.com/users/samredai/events{/privacy}","received_events_url":"https://api.github.com/users/samredai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T20:09:06Z","updated_at":"2021-12-12T20:09:06Z","author_association":"CONTRIBUTOR","body":"@rdblue that's my bad, I suggested splitting out the primitives and generics since the primitives don't use any of the metaclass logic in the original PR. I'm still learning the right chunk size, would something like the below work better where each line item is a single PR and they're opened in this sequence?\r\n\r\n1. Converting instances to classes in types.py\r\n2. Primitives:\r\n  a. Allowing types to be instantiated with a value (combining literals with types)\r\n  b. Byte casting and hashing\r\n  c. Conversions between types\r\n  d. Comparisons between types\r\n3. Generics:\r\n  a. Allowing types to be instantiated with a value, (this would include some of the metaclass logic)\r\n  b. Byte casting and hashing\r\n  c. Conversions between types\r\n  d. Comparisons between types\r\n\r\n@CircArgs let me know if I've missed any features in the original PR","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991962318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991980796","html_url":"https://github.com/apache/iceberg/pull/3543#issuecomment-991980796","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3543","id":991980796,"node_id":"IC_kwDOCW7NX847IGz8","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T22:17:12Z","updated_at":"2021-12-12T22:36:25Z","author_association":"CONTRIBUTOR","body":"> Overall I like the approach of using interval to decide if cache is enabled or not, I have 2 major discussion points around the implementation.\r\n> \r\n> Another thing is about the style. I feel there are too many javadocs and line comments, usually more javadoc is recommended to improve the experience of other developers, but I feel a bit lost with that many explanations, I don't know if it's just me or if others have similar feelings. I think the code you wrote is already pretty self-explanatory (which is great), and reading the code is faster for me to understand comparing to reading the comments. I would suggest:\r\n> \r\n> 1. make comments in tests just messages in assertions if you would like people to know what you are testing\r\n> 2. if possible, make the code itself more readable, and only add comments when additional explanation is needed\r\n\r\nI agree about the comments. Especially in the tests. A lot of the test comments came from a request to use Assert4J (which definitely made sense), which I'm not quite familiar working with. Some of the tests comments are simply not needed and will be removed. Others I'll either leave in or switch to something that allows for an assertion message.\r\n\r\nThanks for your feedback.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991980796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991993169","html_url":"https://github.com/apache/iceberg/issues/3700#issuecomment-991993169","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3700","id":991993169,"node_id":"IC_kwDOCW7NX847IJ1R","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T23:32:23Z","updated_at":"2021-12-12T23:32:23Z","author_association":"CONTRIBUTOR","body":"I also tried to reproduce the issue and wasn't able to reproduce it.\nhttps://gist.github.com/stevenzwu/62198e32b1174f6ea6d093fdc45b161c\n\nNow I realized that our users also reported some other issue with both 0.12\nand 0.13 Iceberg jars in the classpath. Maybe that was also the cause of\nthe exception I reported in\nhttps://github.com/apache/iceberg/pull/3015/files#r753631713.\n\nIn summary, this is a non-issue and we can remove it as a blocker for 0.13.\n\nOn Fri, Dec 10, 2021 at 2:55 PM Jack Ye ***@***.***> wrote:\n\n> Had some discussion with Steven and Ryan in Slack, the Flink checkpoint\n> serialization is handled by FlinkManifestUtil, which calls the core\n> library for serdes:\n>\n>   static ManifestFile writeDataFiles(OutputFile outputFile, PartitionSpec spec, List<DataFile> dataFiles)\n>       throws IOException {\n>     ManifestWriter<DataFile> writer = ManifestFiles.write(FORMAT_V2, spec, outputFile, DUMMY_SNAPSHOT_ID);\n>\n>     try (ManifestWriter<DataFile> closeableWriter = writer) {\n>       closeableWriter.addAll(dataFiles);\n>     }\n>\n>     return writer.toManifestFile();\n>   }\n>\n>   static List<DataFile> readDataFiles(ManifestFile manifestFile, FileIO io) throws IOException {\n>     try (CloseableIterable<DataFile> dataFiles = ManifestFiles.read(manifestFile, io)) {\n>       return Lists.newArrayList(dataFiles);\n>     }\n>   }\n>\n> The schema at write time is fixed through MetadataV1/2 even when we add\n> new fields in DataFile, so there should not be any compatibility issue.\n>\n> I tried the following using 0.12 and 0.13:\n>\n> In 0.12:\n>\n> OutputFile outputFile = icebergTable.io().newOutputFile(\"file:/Users/yzhaoqin/0.12-out.avro\");\n> FlinkManifestUtil.writeDataFiles(outputFile, icebergTable.spec(), Lists.newArrayList(icebergTable.currentSnapshot().addedFiles()));\n>\n> In 0.13:\n>\n> List<DataFile> dataFiles = FlinkManifestUtil.readDataFiles(\n>     new GenericManifestFile(icebergTable.io().newInputFile(\"file:/Users/yzhaoqin/0.12-out.avro\"), icebergTable.spec().specId()),\n>     icebergTable.io());\n>\n> and it worked.\n>\n> So so far I am not able to reproduce the issue, @stevenzwu\n> <https://github.com/stevenzwu> @openinx <https://github.com/openinx>\n> please let me know if you are able to have a repro.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/iceberg/issues/3700#issuecomment-991357906>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AALZLP23JRVNLWCIJ373KYTUQKAO5ANCNFSM5JXJW3PA>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/991993169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992001873","html_url":"https://github.com/apache/iceberg/pull/3717#issuecomment-992001873","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3717","id":992001873,"node_id":"IC_kwDOCW7NX847IL9R","user":{"login":"jfz","id":1302547,"node_id":"MDQ6VXNlcjEzMDI1NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1302547?v=4","gravatar_id":"","url":"https://api.github.com/users/jfz","html_url":"https://github.com/jfz","followers_url":"https://api.github.com/users/jfz/followers","following_url":"https://api.github.com/users/jfz/following{/other_user}","gists_url":"https://api.github.com/users/jfz/gists{/gist_id}","starred_url":"https://api.github.com/users/jfz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jfz/subscriptions","organizations_url":"https://api.github.com/users/jfz/orgs","repos_url":"https://api.github.com/users/jfz/repos","events_url":"https://api.github.com/users/jfz/events{/privacy}","received_events_url":"https://api.github.com/users/jfz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T00:17:55Z","updated_at":"2021-12-13T00:17:55Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue and @RussellSpitzer for the review!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992001873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992004729","html_url":"https://github.com/apache/iceberg/pull/3723#issuecomment-992004729","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3723","id":992004729,"node_id":"IC_kwDOCW7NX847IMp5","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T00:28:43Z","updated_at":"2021-12-13T00:28:43Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer @rdblue what do you think about this, while I work on adding backwards compatibility support?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992004729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992026429","html_url":"https://github.com/apache/iceberg/pull/3722#issuecomment-992026429","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3722","id":992026429,"node_id":"IC_kwDOCW7NX847IR89","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T01:21:39Z","updated_at":"2021-12-13T18:41:52Z","author_association":"CONTRIBUTOR","body":"@rdblue @jackye1995  please take a look. This incorporates #3269 (updated). It would be nice if this could make it into 0.13, as using the snapshot schema is already implemented in the Spark 2.4 support.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992026429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992053535","html_url":"https://github.com/apache/iceberg/pull/3723#issuecomment-992053535","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3723","id":992053535,"node_id":"IC_kwDOCW7NX847IYkf","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T02:28:25Z","updated_at":"2021-12-13T02:30:13Z","author_association":"CONTRIBUTOR","body":"@kbendick thanks for quick review.\r\n\r\n> Does this also happen with OSS Iceberg?\r\n\r\nYes.\r\n\r\n> It would be great if instead of using a checked in file, Spark was used to generate the data instead (although I know that doesn't capture every case).\r\n\r\nYea, the issue is that this issue only happens for parquet files generated from old non iceberg parquet writer. I have also mentioned this as a comment in the test file.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992053535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992060629","html_url":"https://github.com/apache/iceberg/pull/3723#issuecomment-992060629","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3723","id":992060629,"node_id":"IC_kwDOCW7NX847IaTV","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T02:51:17Z","updated_at":"2021-12-13T02:52:38Z","author_association":"MEMBER","body":"I think it's worthwhile to add backwards compatibility. For reference we discussed this on slack and I noted the one case where we hit this internally #2167 but there we ended up just writing our files without the old structure in the source of the files. We hadn't hit it since then even with various other older hadoop distributions lying around.\r\n\r\nThat said if other folks are hitting this we should fix it.\r\n\r\nIt would be great to know the exact versions of hive/parquet that are generating this structure.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992060629/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992066895","html_url":"https://github.com/apache/iceberg/pull/3543#issuecomment-992066895","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3543","id":992066895,"node_id":"IC_kwDOCW7NX847Ib1P","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T03:08:19Z","updated_at":"2021-12-13T03:08:19Z","author_association":"CONTRIBUTOR","body":"For reference, the use of -1 for “off” in the interval (or really any negative value) is:\r\n1) It’s in-line with the value Spark added for not expiring entries from the table relation cache (added in Spark 3.1)\r\n2) We have some precedence of using -1 as the value for turning things off in some places.\r\n3) When I used 1 year, the exact duration that it had to be greater than was a rather specific number. I personally feel it’s easier to remember -1 vs 3.1563e10 or greater.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992066895/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992079054","html_url":"https://github.com/apache/iceberg/pull/3718#issuecomment-992079054","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3718","id":992079054,"node_id":"IC_kwDOCW7NX847IezO","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T03:33:09Z","updated_at":"2021-12-13T03:33:09Z","author_association":"MEMBER","body":"> @ajantha-bhat, what is the use case for exposing this?\r\n\r\n> Expiring individual snapshots by ID is not a recommended operation because it can break certain operations that use table history. Unless there's a reason to expose this to SQL users, I would rather not.\r\n\r\n@rdblue \r\na) I am not newly exposing this feature to the user, it was already exposed in the Spark Actions. I am just supporting from SQL also to be in sync.\r\nb) I see the code to handle snapshot history log file also present in expireSnapshots. So, can you elaborate what operations it can break ? If it is really issue, do we need to handle this for spark actions also ?\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992079054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992079085","html_url":"https://github.com/apache/iceberg/pull/3723#issuecomment-992079085","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3723","id":992079085,"node_id":"IC_kwDOCW7NX847Iezt","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T03:33:14Z","updated_at":"2021-12-13T03:46:55Z","author_association":"CONTRIBUTOR","body":"`bag` is added by hive's [schema converter](https://github.com/apache/hive/blob/release-1.2.1/ql/src/java/org/apache/hadoop/hive/ql/io/parquet/convert/HiveSchemaConverter.java#L125) (defined [here](https://github.com/apache/hive/blob/release-1.2.1/ql/src/java/org/apache/hadoop/hive/ql/io/parquet/serde/ParquetHiveSerDe.java#L53). We use this serde from hive's 1.2.1 version. However, even latest versions still use `bag` [here](https://github.com/apache/hive/blob/master/ql/src/java/org/apache/hadoop/hive/ql/io/parquet/convert/HiveSchemaConverter.java#L155).\r\n\r\nAnother thing to note here is that even if we use `list` as name for repeated group of a list, I think Iceberg returns just empty list. I am working on a fix for this, along with backward compatibility support. Would love to get your reviews on that as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992079085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992081066","html_url":"https://github.com/apache/iceberg/pull/3501#issuecomment-992081066","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3501","id":992081066,"node_id":"IC_kwDOCW7NX847IfSq","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T03:39:51Z","updated_at":"2021-12-13T03:39:51Z","author_association":"CONTRIBUTOR","body":"> @stevenzwu does this work with Flink 1.14?\r\n\r\nThis should work for 1.14. The convention in the repo is to do large PRs against one version and then back port in another PR (usually we apply it on the latest supported version, but this has existed for a while so latest at the time was 1.13).\r\n\r\nUnless you’re aware of a specific reason this would not work wirh 1.14, I’m fairly certain it will given that we’re using the newer interfaces. And on top of that, we’re using one of the higher level split interfaces.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992081066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992082883","html_url":"https://github.com/apache/iceberg/pull/3723#issuecomment-992082883","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3723","id":992082883,"node_id":"IC_kwDOCW7NX847IfvD","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T03:46:20Z","updated_at":"2021-12-13T03:46:20Z","author_association":"CONTRIBUTOR","body":"> \"bag\" is added by hive's parquet serde, ql/src/java/org/apache/hadoop/hive/ql/io/parquet/serde/ParquetHiveSerDe.java. https://github.com/apache/hive/blob/release-1.2.1/ql/src/java/org/apache/hadoop/hive/ql/io/parquet/serde/ParquetHiveSerDe.java#L53. We use this serde from hive's 1.2.1 version. However, even latest versions still use \"bag\", https://github.com/apache/hive/blob/master/ql/src/java/org/apache/hadoop/hive/ql/io/parquet/serde/ParquetHiveSerDe.java.\r\n> \r\n> Another thing to note here is that even if we use `list` as name for repeated group of a list, I think Iceberg returns just empty list. I am working on a fix for this, along with backward compatibility support. Would love to get your reviews on that as well.\r\n\r\nI’d be happy to take a look when you have a fix. We applied a fix for Iceberg 0.12.1 where we stopped relying on the name provided in the parquet-schema for map fields.\r\n\r\nI think something like that would be the best route forward so that we aren’t imposing any restrictions on the parquet provided names as we’ve observed these change across systems and parquet versions.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992082883/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992086575","html_url":"https://github.com/apache/iceberg/pull/3685#issuecomment-992086575","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3685","id":992086575,"node_id":"IC_kwDOCW7NX847Igov","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T03:58:58Z","updated_at":"2021-12-13T03:58:58Z","author_association":"MEMBER","body":"@jackye1995 , @RussellSpitzer : Updated the deprecated annotations also. Please have a look. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992086575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992286915","html_url":"https://github.com/apache/iceberg/pull/3696#issuecomment-992286915","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3696","id":992286915,"node_id":"IC_kwDOCW7NX847JRjD","user":{"login":"rawataaryan9","id":4738144,"node_id":"MDQ6VXNlcjQ3MzgxNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/4738144?v=4","gravatar_id":"","url":"https://api.github.com/users/rawataaryan9","html_url":"https://github.com/rawataaryan9","followers_url":"https://api.github.com/users/rawataaryan9/followers","following_url":"https://api.github.com/users/rawataaryan9/following{/other_user}","gists_url":"https://api.github.com/users/rawataaryan9/gists{/gist_id}","starred_url":"https://api.github.com/users/rawataaryan9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rawataaryan9/subscriptions","organizations_url":"https://api.github.com/users/rawataaryan9/orgs","repos_url":"https://api.github.com/users/rawataaryan9/repos","events_url":"https://api.github.com/users/rawataaryan9/events{/privacy}","received_events_url":"https://api.github.com/users/rawataaryan9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T09:48:51Z","updated_at":"2021-12-13T13:46:31Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue for the review and the comments. Have made the changes accordingly, please take a look.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992286915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992304112","html_url":"https://github.com/apache/iceberg/pull/3723#issuecomment-992304112","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3723","id":992304112,"node_id":"IC_kwDOCW7NX847JVvw","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T10:09:13Z","updated_at":"2021-12-13T10:09:13Z","author_association":"CONTRIBUTOR","body":"@kbendick @RussellSpitzer I updated the PR with fix for this issue. However, the fix is only for 3-level lists and I will work on compatibility support in a separate diff. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992304112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992323276","html_url":"https://github.com/apache/iceberg/issues/3726#issuecomment-992323276","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3726","id":992323276,"node_id":"IC_kwDOCW7NX847JabM","user":{"login":"alexkingli","id":20436684,"node_id":"MDQ6VXNlcjIwNDM2Njg0","avatar_url":"https://avatars.githubusercontent.com/u/20436684?v=4","gravatar_id":"","url":"https://api.github.com/users/alexkingli","html_url":"https://github.com/alexkingli","followers_url":"https://api.github.com/users/alexkingli/followers","following_url":"https://api.github.com/users/alexkingli/following{/other_user}","gists_url":"https://api.github.com/users/alexkingli/gists{/gist_id}","starred_url":"https://api.github.com/users/alexkingli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexkingli/subscriptions","organizations_url":"https://api.github.com/users/alexkingli/orgs","repos_url":"https://api.github.com/users/alexkingli/repos","events_url":"https://api.github.com/users/alexkingli/events{/privacy}","received_events_url":"https://api.github.com/users/alexkingli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T10:31:07Z","updated_at":"2021-12-13T10:31:07Z","author_association":"NONE","body":"I make a pull request to fix this problem. https://github.com/apache/iceberg/pull/3730","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992323276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992450331","html_url":"https://github.com/apache/iceberg/pull/3698#issuecomment-992450331","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3698","id":992450331,"node_id":"IC_kwDOCW7NX847J5cb","user":{"login":"rajarshisarkar","id":4561678,"node_id":"MDQ6VXNlcjQ1NjE2Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/4561678?v=4","gravatar_id":"","url":"https://api.github.com/users/rajarshisarkar","html_url":"https://github.com/rajarshisarkar","followers_url":"https://api.github.com/users/rajarshisarkar/followers","following_url":"https://api.github.com/users/rajarshisarkar/following{/other_user}","gists_url":"https://api.github.com/users/rajarshisarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/rajarshisarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajarshisarkar/subscriptions","organizations_url":"https://api.github.com/users/rajarshisarkar/orgs","repos_url":"https://api.github.com/users/rajarshisarkar/repos","events_url":"https://api.github.com/users/rajarshisarkar/events{/privacy}","received_events_url":"https://api.github.com/users/rajarshisarkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T12:56:43Z","updated_at":"2021-12-13T12:56:43Z","author_association":"CONTRIBUTOR","body":"Hi @jackye1995, This change is independent of https://github.com/apache/iceberg/pull/3668. \r\n\r\n- I changed `GlueCatalog.isValidIdentifier` to return `false` always and then ran `TestGlueCatalog` (all 21 test cases passed).\r\n- I changed `GlueCatalog.isValidIdentifier` to return `true` always and then ran `TestGlueCatalog` (all 21 test cases passed).\r\n\r\nThe current master doesn't seem to have unit tests to check the behaviour of `GlueCatalog.isValidIdentifier`. Hence, this PR adds few unit tests.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992450331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992455332","html_url":"https://github.com/apache/iceberg/pull/3727#issuecomment-992455332","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3727","id":992455332,"node_id":"IC_kwDOCW7NX847J6qk","user":{"login":"rajarshisarkar","id":4561678,"node_id":"MDQ6VXNlcjQ1NjE2Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/4561678?v=4","gravatar_id":"","url":"https://api.github.com/users/rajarshisarkar","html_url":"https://github.com/rajarshisarkar","followers_url":"https://api.github.com/users/rajarshisarkar/followers","following_url":"https://api.github.com/users/rajarshisarkar/following{/other_user}","gists_url":"https://api.github.com/users/rajarshisarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/rajarshisarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajarshisarkar/subscriptions","organizations_url":"https://api.github.com/users/rajarshisarkar/orgs","repos_url":"https://api.github.com/users/rajarshisarkar/repos","events_url":"https://api.github.com/users/rajarshisarkar/events{/privacy}","received_events_url":"https://api.github.com/users/rajarshisarkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T13:03:16Z","updated_at":"2021-12-13T13:03:16Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer Request you to please review once you get time.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992455332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992455431","html_url":"https://github.com/apache/iceberg/pull/3729#issuecomment-992455431","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3729","id":992455431,"node_id":"IC_kwDOCW7NX847J6sH","user":{"login":"rajarshisarkar","id":4561678,"node_id":"MDQ6VXNlcjQ1NjE2Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/4561678?v=4","gravatar_id":"","url":"https://api.github.com/users/rajarshisarkar","html_url":"https://github.com/rajarshisarkar","followers_url":"https://api.github.com/users/rajarshisarkar/followers","following_url":"https://api.github.com/users/rajarshisarkar/following{/other_user}","gists_url":"https://api.github.com/users/rajarshisarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/rajarshisarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajarshisarkar/subscriptions","organizations_url":"https://api.github.com/users/rajarshisarkar/orgs","repos_url":"https://api.github.com/users/rajarshisarkar/repos","events_url":"https://api.github.com/users/rajarshisarkar/events{/privacy}","received_events_url":"https://api.github.com/users/rajarshisarkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T13:03:23Z","updated_at":"2021-12-13T13:03:23Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer Request you to please review once you get time.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992455431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992483824","html_url":"https://github.com/apache/iceberg/issues/3731#issuecomment-992483824","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3731","id":992483824,"node_id":"IC_kwDOCW7NX847KBnw","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T13:37:05Z","updated_at":"2021-12-13T13:37:05Z","author_association":"MEMBER","body":"There are a few approaches here. The key code is that the Spark implementation of the rewrite strategy uses \r\n\r\nhttps://github.com/apache/iceberg/blob/551bda56db428037373efaae2bf8fc6e7b0be95a/spark/v3.2/spark/src/main/java/org/apache/iceberg/spark/actions/Spark3BinPackStrategy.java#L64-L68\r\n\r\nTo read and write to the table, which assumes that the correct catalog identifier is included in the `name` of the table which has been passed to the action. We do this because we are using a Spark Reader and Writer to do the work here, so we need to know how to load the Table in a Spark context. When you pass in a table identifier that is loaded by an anonymous Iceberg catalog like ``` val tables = new HadoopTables(spark.sparkContext.hadoopConfiguration)``` it has to guess what the catalog name should be, and uses \"default_catalog\"\r\n\r\nTo fix this we have a few options:\r\n\r\n1. Load the table via our helper method, here you can pass in the \"catalog.database.name\" of the Hadoop catalog https://github.com/apache/iceberg/blob/827b6c86108eec7b6de25f61022c7f8b5dda481c/spark/v3.2/spark/src/main/java/org/apache/iceberg/spark/Spark3Util.java#L628-L635\r\n2.  As you showed above, setting the default-iceberg catalog up, this way any identifiers that don't have a catalog will be checked there. There is no problem with this\r\n3. Load the table manually via Spark, basically doing *1.* on your own\r\n    ```scala\r\n     spark.sessionState.catalogManager.catalog(\"YourCatalogName\").asInstanceOf[TableCatalog]\r\n      .loadTable(tableName).asInstanceOf[org.apache.iceberg.spark.source.SparkTable]\r\n      .table()\r\n    ```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992483824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992485770","html_url":"https://github.com/apache/iceberg/pull/3730#issuecomment-992485770","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3730","id":992485770,"node_id":"IC_kwDOCW7NX847KCGK","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T13:39:29Z","updated_at":"2021-12-13T13:39:29Z","author_association":"CONTRIBUTOR","body":"@alexkingli: Could you please explain exactly what happened?\r\nWhat I understand is:\r\n1. Drop table (wrong user) - metadata dropped, deleting data failed\r\n2. Drop table (correct user) - drop table failed\r\n\r\nWhat I do no understand is that at the 2nd try we do not have metadata for the table. How is it possible to drop a table in this case?\r\n\r\n#2583 is somewhat related. Could it help you?\r\n\r\nThanks,\r\nPeter","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992485770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992488034","html_url":"https://github.com/apache/iceberg/pull/3724#issuecomment-992488034","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3724","id":992488034,"node_id":"IC_kwDOCW7NX847KCpi","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T13:42:25Z","updated_at":"2021-12-13T13:42:25Z","author_association":"MEMBER","body":"If understand correctly, the goal here is to fix RewriteData so that files which have been made completely because of deletes being applied should be removed. Currently this is an issue because the core RewriteOperation doesn't allow addedFiles to be empty.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992488034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992497012","html_url":"https://github.com/apache/iceberg/pull/3724#issuecomment-992497012","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3724","id":992497012,"node_id":"IC_kwDOCW7NX847KE10","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T13:53:28Z","updated_at":"2021-12-13T13:53:28Z","author_association":"MEMBER","body":"I think we definitely should fix this use case but I'm not sure about the approach here or the requirement for dealing with files without split offsets.\r\n\r\nCan we also change the title to something like ```Support RewriteDataFiles when Files are Completely Eliminated by Deletes```?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/992497012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]