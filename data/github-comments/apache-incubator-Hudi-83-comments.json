[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698161234","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-698161234","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":698161234,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODE2MTIzNA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T07:12:19Z","updated_at":"2020-09-24T09:32:20Z","author_association":"CONTRIBUTOR","body":"> @wangxianghu Looks like we have much less class splitting now. I want to try and reduce this further if possible.\r\n> If its alright with you, I can take over from here, make some changes and push another commit on top of yours, to try and get this across the finish line. Want to coordinate so that we are not making parallel changes,\r\n\r\n@vinothchandar, Yeah, Of course, you can take over from here, this will greatly facilitate the process\r\nthanks üëç ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698161234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698296175","html_url":"https://github.com/apache/hudi/issues/143#issuecomment-698296175","issue_url":"https://api.github.com/repos/apache/hudi/issues/143","id":698296175,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODI5NjE3NQ==","user":{"login":"ShortFinger","id":13446765,"node_id":"MDQ6VXNlcjEzNDQ2NzY1","avatar_url":"https://avatars.githubusercontent.com/u/13446765?v=4","gravatar_id":"","url":"https://api.github.com/users/ShortFinger","html_url":"https://github.com/ShortFinger","followers_url":"https://api.github.com/users/ShortFinger/followers","following_url":"https://api.github.com/users/ShortFinger/following{/other_user}","gists_url":"https://api.github.com/users/ShortFinger/gists{/gist_id}","starred_url":"https://api.github.com/users/ShortFinger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShortFinger/subscriptions","organizations_url":"https://api.github.com/users/ShortFinger/orgs","repos_url":"https://api.github.com/users/ShortFinger/repos","events_url":"https://api.github.com/users/ShortFinger/events{/privacy}","received_events_url":"https://api.github.com/users/ShortFinger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T11:54:21Z","updated_at":"2020-09-24T11:54:21Z","author_association":"NONE","body":"please add linfour.dev@gmail.com\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698296175/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698449771","html_url":"https://github.com/apache/hudi/issues/2072#issuecomment-698449771","issue_url":"https://api.github.com/repos/apache/hudi/issues/2072","id":698449771,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODQ0OTc3MQ==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T16:24:37Z","updated_at":"2020-09-24T16:24:56Z","author_association":"NONE","body":"I tried again to test the scenario but now the spark job which gets triggered as part of create savepoint is causing problem :\r\n\r\n20/09/24 16:17:52 INFO RMProxy: Connecting to ResourceManager at /0.0.0.0:8032\r\n20/09/24 16:17:54 INFO Client: Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 0 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)\r\n20/09/24 16:17:55 INFO Client: Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 1 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)\r\n20/09/24 16:17:56 INFO Client: Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 2 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)\r\n20/09/24 16:17:57 INFO Client: Retrying connect to server: 0.0.0.0/0.0.0.0:8032. Already tried 3 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698449771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698469152","html_url":"https://github.com/apache/hudi/issues/2072#issuecomment-698469152","issue_url":"https://api.github.com/repos/apache/hudi/issues/2072","id":698469152,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODQ2OTE1Mg==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T17:02:17Z","updated_at":"2020-09-24T17:02:17Z","author_association":"NONE","body":"solved it by providing sparkMaster parameter to local ... But still \"show rollbacks\" command is not showing anything ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698469152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698472403","html_url":"https://github.com/apache/hudi/issues/2072#issuecomment-698472403","issue_url":"https://api.github.com/repos/apache/hudi/issues/2072","id":698472403,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODQ3MjQwMw==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T17:08:35Z","updated_at":"2020-09-24T17:09:03Z","author_association":"NONE","body":"@bvaradar  @n3nash I can see that the rollback commands are looking for <instant>.rollback files in .hoodie folder but all i can see is <instant>.restore files\r\n\r\nThe above scenario happens when I issue show rollback --instant <instant_name>\r\n\r\nBut returns empty dataframe for show rollbacks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698472403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698567986","html_url":"https://github.com/apache/hudi/issues/2104#issuecomment-698567986","issue_url":"https://api.github.com/repos/apache/hudi/issues/2104","id":698567986,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODU2Nzk4Ng==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T20:20:30Z","updated_at":"2020-09-24T20:21:57Z","author_association":"NONE","body":"@n3nash  : The following is the stacktrace I got when I queried on Hive CLI\r\n\r\n`2020-09-24 20:17:49,028 ERROR [39f399ee-de3f-4d33-a1cd-407d2e252f20 main] log.AbstractHoodieLogRecordScanner: Got exception when reading log file\r\norg.apache.hudi.exception.HoodieException: Unable to load class\r\n        at org.apache.hudi.common.util.ReflectionUtils.getClass(ReflectionUtils.java:42)\r\n        at org.apache.hudi.common.util.ReflectionUtils.loadPayload(ReflectionUtils.java:62)\r\n        at org.apache.hudi.common.util.SpillableMapUtils.convertToHoodieRecordPayload(SpillableMapUtils.java:110)\r\n        at org.apache.hudi.common.table.log.AbstractHoodieLogRecordScanner.processAvroDataBlock(AbstractHoodieLogRecordScanner.java:274)\r\n        at org.apache.hudi.common.table.log.AbstractHoodieLogRecordScanner.processQueuedBlocksForInstant(AbstractHoodieLogRecordScanner.java:303)\r\n        at org.apache.hudi.common.table.log.AbstractHoodieLogRecordScanner.scan(AbstractHoodieLogRecordScanner.java:236)\r\n        at org.apache.hudi.common.table.log.HoodieMergedLogRecordScanner.<init>(HoodieMergedLogRecordScanner.java:79)\r\n        at org.apache.hudi.hadoop.realtime.RealtimeCompactedRecordReader.getMergedLogRecordScanner(RealtimeCompactedRecordReader.java:67)\r\n        at org.apache.hudi.hadoop.realtime.RealtimeCompactedRecordReader.<init>(RealtimeCompactedRecordReader.java:50)\r\n        at org.apache.hudi.hadoop.realtime.HoodieRealtimeRecordReader.constructRecordReader(HoodieRealtimeRecordReader.java:67)\r\n        at org.apache.hudi.hadoop.realtime.HoodieRealtimeRecordReader.<init>(HoodieRealtimeRecordReader.java:45)\r\n        at org.apache.hudi.hadoop.realtime.HoodieParquetRealtimeInputFormat.getRecordReader(HoodieParquetRealtimeInputFormat.java:242)\r\n        at org.apache.hadoop.hive.ql.exec.FetchOperator$FetchInputFormatSplit.getRecordReader(FetchOperator.java:776)\r\n        at org.apache.hadoop.hive.ql.exec.FetchOperator.getRecordReader(FetchOperator.java:344)\r\n        at org.apache.hadoop.hive.ql.exec.FetchOperator.getNextRow(FetchOperator.java:540)\r\n        at org.apache.hadoop.hive.ql.exec.FetchOperator.pushRow(FetchOperator.java:509)\r\n        at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:146)\r\n        at org.apache.hadoop.hive.ql.Driver.getResults(Driver.java:2691)\r\n        at org.apache.hadoop.hive.ql.reexec.ReExecDriver.getResults(ReExecDriver.java:229)\r\n        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:259)\r\n        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:188)\r\n        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:402)\r\n        at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:821)\r\n        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:759)\r\n        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:683)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.hadoop.util.RunJar.run(RunJar.java:323)\r\n        at org.apache.hadoop.util.RunJar.main(RunJar.java:236)\r\n\r\nCaused by: java.lang.ClassNotFoundException: org.apache.hudi.common.model.OverwriteWithLatestAvroPayload\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:419)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:352)\r\n        at java.lang.Class.forName0(Native Method)\r\n        at java.lang.Class.forName(Class.java:264)\r\n        at org.apache.hudi.common.util.ReflectionUtils.getClass(ReflectionUtils.java:39)\r\n        ... 30 more\r\nFailed with exception java.io.IOException:org.apache.hudi.exception.HoodieIOException: IOException when reading log file `","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698567986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698619431","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-698619431","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":698619431,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODYxOTQzMQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T22:23:36Z","updated_at":"2020-09-24T22:23:36Z","author_association":"MEMBER","body":"Alright, taking over the wheel :) thanks @wangxianghu . This is true champion effort! ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698619431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698658606","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-698658606","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":698658606,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODY1ODYwNg==","user":{"login":"SteNicholas","id":10048174,"node_id":"MDQ6VXNlcjEwMDQ4MTc0","avatar_url":"https://avatars.githubusercontent.com/u/10048174?v=4","gravatar_id":"","url":"https://api.github.com/users/SteNicholas","html_url":"https://github.com/SteNicholas","followers_url":"https://api.github.com/users/SteNicholas/followers","following_url":"https://api.github.com/users/SteNicholas/following{/other_user}","gists_url":"https://api.github.com/users/SteNicholas/gists{/gist_id}","starred_url":"https://api.github.com/users/SteNicholas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SteNicholas/subscriptions","organizations_url":"https://api.github.com/users/SteNicholas/orgs","repos_url":"https://api.github.com/users/SteNicholas/repos","events_url":"https://api.github.com/users/SteNicholas/events{/privacy}","received_events_url":"https://api.github.com/users/SteNicholas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T00:40:58Z","updated_at":"2020-09-25T00:40:58Z","author_association":"MEMBER","body":"@leesf @bvaradar Could you please review this pull request?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698658606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698715649","html_url":"https://github.com/apache/hudi/pull/1567#issuecomment-698715649","issue_url":"https://api.github.com/repos/apache/hudi/issues/1567","id":698715649,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODcxNTY0OQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T04:38:59Z","updated_at":"2020-09-25T04:38:59Z","author_association":"CONTRIBUTOR","body":"@hddong : I went ahead and  redid this change in the interest of time :)\r\nInstead of deleting on close, I have made changes to lazily create the log file when appending next block. This should avoid creating empty files. \r\n(cc @vinothchandar )\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698715649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698761326","html_url":"https://github.com/apache/hudi/issues/2101#issuecomment-698761326","issue_url":"https://api.github.com/repos/apache/hudi/issues/2101","id":698761326,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODc2MTMyNg==","user":{"login":"getniz","id":29088488,"node_id":"MDQ6VXNlcjI5MDg4NDg4","avatar_url":"https://avatars.githubusercontent.com/u/29088488?v=4","gravatar_id":"","url":"https://api.github.com/users/getniz","html_url":"https://github.com/getniz","followers_url":"https://api.github.com/users/getniz/followers","following_url":"https://api.github.com/users/getniz/following{/other_user}","gists_url":"https://api.github.com/users/getniz/gists{/gist_id}","starred_url":"https://api.github.com/users/getniz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/getniz/subscriptions","organizations_url":"https://api.github.com/users/getniz/orgs","repos_url":"https://api.github.com/users/getniz/repos","events_url":"https://api.github.com/users/getniz/events{/privacy}","received_events_url":"https://api.github.com/users/getniz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T07:04:10Z","updated_at":"2020-09-25T07:04:10Z","author_association":"NONE","body":"@n3nash thanks for the response with details, 1 & 3 option I may not be able to consider as I need to build this layer as immediate target tables for further consumption in Reporting layer. If I use option 2, can I able to consume the topic and flatten the schema in deltastreamer with-out staging and then load directly to the immediate target layer using above Spark submit batch command.  Also, I came to know that Hudi supports Confluent schema registry, in that case if I get the JSON schema from Source and register with Confluent registry can I achieve in flattening the file. Sorry, my questions may be silly sometimes please bear with me, I'm a learner here : )  Objective of what I'm trying to do is to consume Data from several topics in near real-time(all the topics data are formatted/structured) and push to DataLake using Hudi. If I stage and transform it, then I may end up eating time. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698761326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698824053","html_url":"https://github.com/apache/hudi/pull/2106#issuecomment-698824053","issue_url":"https://api.github.com/repos/apache/hudi/issues/2106","id":698824053,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODgyNDA1Mw==","user":{"login":"Karl-WangSK","id":53078090,"node_id":"MDQ6VXNlcjUzMDc4MDkw","avatar_url":"https://avatars.githubusercontent.com/u/53078090?v=4","gravatar_id":"","url":"https://api.github.com/users/Karl-WangSK","html_url":"https://github.com/Karl-WangSK","followers_url":"https://api.github.com/users/Karl-WangSK/followers","following_url":"https://api.github.com/users/Karl-WangSK/following{/other_user}","gists_url":"https://api.github.com/users/Karl-WangSK/gists{/gist_id}","starred_url":"https://api.github.com/users/Karl-WangSK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Karl-WangSK/subscriptions","organizations_url":"https://api.github.com/users/Karl-WangSK/orgs","repos_url":"https://api.github.com/users/Karl-WangSK/repos","events_url":"https://api.github.com/users/Karl-WangSK/events{/privacy}","received_events_url":"https://api.github.com/users/Karl-WangSK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T09:22:56Z","updated_at":"2020-09-25T09:22:56Z","author_association":"CONTRIBUTOR","body":"cc @yanghua @leesf  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698824053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698882595","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-698882595","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":698882595,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODg4MjU5NQ==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T11:42:26Z","updated_at":"2020-09-25T11:42:26Z","author_association":"CONTRIBUTOR","body":"@SteNicholas would you please also add some tests to the new changes?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/698882595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699022804","html_url":"https://github.com/apache/hudi/issues/2108#issuecomment-699022804","issue_url":"https://api.github.com/repos/apache/hudi/issues/2108","id":699022804,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTAyMjgwNA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T16:20:58Z","updated_at":"2020-09-25T16:20:58Z","author_association":"CONTRIBUTOR","body":"@JiaDe-Wu Can you please list the entire `.hoodie` folder and show the contents ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699022804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699023400","html_url":"https://github.com/apache/hudi/issues/2104#issuecomment-699023400","issue_url":"https://api.github.com/repos/apache/hudi/issues/2104","id":699023400,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTAyMzQwMA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T16:22:08Z","updated_at":"2020-09-25T16:22:08Z","author_association":"CONTRIBUTOR","body":"@ashishmgofficial Looks like a `class not found` issue. Can you tell me which hoodie jar have you deployed on your Hive server ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699023400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699025467","html_url":"https://github.com/apache/hudi/issues/2110#issuecomment-699025467","issue_url":"https://api.github.com/repos/apache/hudi/issues/2110","id":699025467,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTAyNTQ2Nw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T16:26:13Z","updated_at":"2020-09-25T16:26:13Z","author_association":"CONTRIBUTOR","body":"@tooptoop4 If you're talking about executor memory, in this particular scenario, you can start with 2GB. In general, the upsert code performs a hash merge for which it uses a spillable map which has the following default setting -> https://github.com/apache/hudi/blob/master/hudi-client/src/main/java/org/apache/hudi/config/HoodieMemoryConfig.java#L89. \r\nIdeally, if your target file is not very large (<256 MB), you should be able to use 2GB executor memory. The driver memory depends on how many records you're ingesting and what is the size of them, in this case that you described, I think you can even set the driver memory to 2GB and see if it OOMs. \r\nFor better analysis of memory usage, you can use some open source tools such as https://github.com/uber-common/jvm-profiler or https://github.com/linkedin/dr-elephant","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699025467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699027470","html_url":"https://github.com/apache/hudi/issues/2104#issuecomment-699027470","issue_url":"https://api.github.com/repos/apache/hudi/issues/2104","id":699027470,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTAyNzQ3MA==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T16:30:23Z","updated_at":"2020-09-25T16:30:23Z","author_association":"NONE","body":"@n3nash Im using hudi 0.6.0 from maven","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699027470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699027752","html_url":"https://github.com/apache/hudi/issues/2101#issuecomment-699027752","issue_url":"https://api.github.com/repos/apache/hudi/issues/2101","id":699027752,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTAyNzc1Mg==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T16:30:59Z","updated_at":"2020-09-25T16:30:59Z","author_association":"CONTRIBUTOR","body":"@getniz Those are good questions, we're all learners here :) You can definitely create a schema in confluent schema registry but the flattening will depend on what is your schema structure. If you create a AVRO schema similar to your JSON structure, then you will have a nested column in your avro schema and you will have the same problem. If you want to create a flat schema in avro, then your JSON has to be flattened as well.\r\nI would recommend trying option 2 which is straight forward and see what performance penalty (if at all) is there.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699027752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699028582","html_url":"https://github.com/apache/hudi/issues/2104#issuecomment-699028582","issue_url":"https://api.github.com/repos/apache/hudi/issues/2104","id":699028582,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTAyODU4Mg==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T16:32:43Z","updated_at":"2020-09-25T16:32:43Z","author_association":"CONTRIBUTOR","body":"Okay, which jar have you deployed on the Hive server, is it [hoodie-hadoop-mr-bundle](https://github.com/apache/hudi/tree/master/packaging/hudi-hadoop-mr-bundle) ? For the Hive server to know how to load the Hudi classes, you need to drop this jar in the Hive server classpath.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699028582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699029537","html_url":"https://github.com/apache/hudi/pull/1978#issuecomment-699029537","issue_url":"https://api.github.com/repos/apache/hudi/issues/1978","id":699029537,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTAyOTUzNw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T16:34:44Z","updated_at":"2020-09-25T16:34:44Z","author_association":"CONTRIBUTOR","body":"@hj2016 Can you rebase and squash your commits please ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699029537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699031170","html_url":"https://github.com/apache/hudi/issues/1958#issuecomment-699031170","issue_url":"https://api.github.com/repos/apache/hudi/issues/1958","id":699031170,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTAzMTE3MA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T16:38:15Z","updated_at":"2020-09-25T16:38:15Z","author_association":"CONTRIBUTOR","body":"We're waiting on the PR to be landed after which we can close this.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699031170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699071257","html_url":"https://github.com/apache/hudi/issues/2110#issuecomment-699071257","issue_url":"https://api.github.com/repos/apache/hudi/issues/2110","id":699071257,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTA3MTI1Nw==","user":{"login":"tooptoop4","id":33283496,"node_id":"MDQ6VXNlcjMzMjgzNDk2","avatar_url":"https://avatars.githubusercontent.com/u/33283496?v=4","gravatar_id":"","url":"https://api.github.com/users/tooptoop4","html_url":"https://github.com/tooptoop4","followers_url":"https://api.github.com/users/tooptoop4/followers","following_url":"https://api.github.com/users/tooptoop4/following{/other_user}","gists_url":"https://api.github.com/users/tooptoop4/gists{/gist_id}","starred_url":"https://api.github.com/users/tooptoop4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tooptoop4/subscriptions","organizations_url":"https://api.github.com/users/tooptoop4/orgs","repos_url":"https://api.github.com/users/tooptoop4/repos","events_url":"https://api.github.com/users/tooptoop4/events{/privacy}","received_events_url":"https://api.github.com/users/tooptoop4/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T18:00:17Z","updated_at":"2020-09-25T18:00:17Z","author_association":"NONE","body":"@n3nash \" if your target file is not very large (<256 MB)\" do you mean the size of the incoming CSV or the size of the existing table? Does the size of the existing table matter at all if you mention 2GB could be ok on 20GB table?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699071257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699219984","html_url":"https://github.com/apache/hudi/pull/2092#issuecomment-699219984","issue_url":"https://api.github.com/repos/apache/hudi/issues/2092","id":699219984,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTIxOTk4NA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T23:40:42Z","updated_at":"2020-09-25T23:40:42Z","author_association":"CONTRIBUTOR","body":"@n3nash : I tested this patch and looks good. once you remove the rollback node, we can merge it. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699219984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699251448","html_url":"https://github.com/apache/hudi/pull/2105#issuecomment-699251448","issue_url":"https://api.github.com/repos/apache/hudi/issues/2105","id":699251448,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTI1MTQ0OA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T00:54:12Z","updated_at":"2020-09-26T00:54:12Z","author_association":"CONTRIBUTOR","body":"> LGTM. I believe this change was introduced a week back or so from this pr - #2071\r\n\r\nyes, it's a small oversight.\r\nthanks for your review","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699251448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699388007","html_url":"https://github.com/apache/hudi/pull/2074#issuecomment-699388007","issue_url":"https://api.github.com/repos/apache/hudi/issues/2074","id":699388007,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTM4ODAwNw==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T04:35:29Z","updated_at":"2020-09-26T04:35:29Z","author_association":"CONTRIBUTOR","body":"@yanghua  please help review","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699388007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699436698","html_url":"https://github.com/apache/hudi/pull/2074#issuecomment-699436698","issue_url":"https://api.github.com/repos/apache/hudi/issues/2074","id":699436698,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTQzNjY5OA==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T06:16:38Z","updated_at":"2020-09-26T06:16:38Z","author_association":"CONTRIBUTOR","body":"@wangxianghu Can you help to review this PR firstly?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699436698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699444753","html_url":"https://github.com/apache/hudi/pull/2064#issuecomment-699444753","issue_url":"https://api.github.com/repos/apache/hudi/issues/2064","id":699444753,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTQ0NDc1Mw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T07:04:25Z","updated_at":"2020-09-26T07:04:25Z","author_association":"CONTRIBUTOR","body":"I instrumented the code to track writeConfig.useFileListingMetadata. It looks like it is being disabled for a dataset that has the metadata dataset\r\n\r\n20/09/26 02:58:11 ERROR HoodieMetadata: writeConfig.useFileListingMetadata() =true\r\n20/09/26 02:58:14 ERROR HoodieMetadata: writeConfig.useFileListingMetadata() =false\r\n\r\nThe above line is coming from HoodieMetadata.init() method.  I am unable to test using spark.write() as it seems to fallback to listing \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699444753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699491158","html_url":"https://github.com/apache/hudi/pull/2106#issuecomment-699491158","issue_url":"https://api.github.com/repos/apache/hudi/issues/2106","id":699491158,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTQ5MTE1OA==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T12:46:31Z","updated_at":"2020-09-26T12:46:31Z","author_association":"CONTRIBUTOR","body":"@Karl-WangSK Hi, sorry for the late reply, I don't fully get the point of this changes, would you please describe in more details in which cases we need these changes?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699491158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699492164","html_url":"https://github.com/apache/hudi/pull/2106#issuecomment-699492164","issue_url":"https://api.github.com/repos/apache/hudi/issues/2106","id":699492164,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTQ5MjE2NA==","user":{"login":"Karl-WangSK","id":53078090,"node_id":"MDQ6VXNlcjUzMDc4MDkw","avatar_url":"https://avatars.githubusercontent.com/u/53078090?v=4","gravatar_id":"","url":"https://api.github.com/users/Karl-WangSK","html_url":"https://github.com/Karl-WangSK","followers_url":"https://api.github.com/users/Karl-WangSK/followers","following_url":"https://api.github.com/users/Karl-WangSK/following{/other_user}","gists_url":"https://api.github.com/users/Karl-WangSK/gists{/gist_id}","starred_url":"https://api.github.com/users/Karl-WangSK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Karl-WangSK/subscriptions","organizations_url":"https://api.github.com/users/Karl-WangSK/orgs","repos_url":"https://api.github.com/users/Karl-WangSK/repos","events_url":"https://api.github.com/users/Karl-WangSK/events{/privacy}","received_events_url":"https://api.github.com/users/Karl-WangSK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T12:56:10Z","updated_at":"2020-09-26T12:56:10Z","author_association":"CONTRIBUTOR","body":"> @Karl-WangSK Hi, sorry for the late reply, I don't fully get the point of this changes, would you please describe in more details in which cases we need these changes?\r\n\r\nLike when we have 2 records with same id in a batch . and we need to retain all property like name and age in my Brief change log. But in default. HUDI just choose a record with biggest orderingVal.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699492164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699494445","html_url":"https://github.com/apache/hudi/pull/2106#issuecomment-699494445","issue_url":"https://api.github.com/repos/apache/hudi/issues/2106","id":699494445,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTQ5NDQ0NQ==","user":{"login":"Karl-WangSK","id":53078090,"node_id":"MDQ6VXNlcjUzMDc4MDkw","avatar_url":"https://avatars.githubusercontent.com/u/53078090?v=4","gravatar_id":"","url":"https://api.github.com/users/Karl-WangSK","html_url":"https://github.com/Karl-WangSK","followers_url":"https://api.github.com/users/Karl-WangSK/followers","following_url":"https://api.github.com/users/Karl-WangSK/following{/other_user}","gists_url":"https://api.github.com/users/Karl-WangSK/gists{/gist_id}","starred_url":"https://api.github.com/users/Karl-WangSK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Karl-WangSK/subscriptions","organizations_url":"https://api.github.com/users/Karl-WangSK/orgs","repos_url":"https://api.github.com/users/Karl-WangSK/repos","events_url":"https://api.github.com/users/Karl-WangSK/events{/privacy}","received_events_url":"https://api.github.com/users/Karl-WangSK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T13:15:40Z","updated_at":"2020-09-26T13:15:40Z","author_association":"CONTRIBUTOR","body":"oops ! in this pr  #2116 . lack of a period at  line 60 in `src/main/java/org/apache/hudi/common/util/queue/BoundedInMemoryQueue`. so test failed.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699494445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699496914","html_url":"https://github.com/apache/hudi/pull/2117#issuecomment-699496914","issue_url":"https://api.github.com/repos/apache/hudi/issues/2117","id":699496914,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTQ5NjkxNA==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T13:38:37Z","updated_at":"2020-09-26T13:38:37Z","author_association":"CONTRIBUTOR","body":"@yanghua Please merge, cause by merging old commits shortly after force-pushing by users with new commit.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699496914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699508859","html_url":"https://github.com/apache/hudi/issues/2083#issuecomment-699508859","issue_url":"https://api.github.com/repos/apache/hudi/issues/2083","id":699508859,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTUwODg1OQ==","user":{"login":"rnatarajan","id":2908985,"node_id":"MDQ6VXNlcjI5MDg5ODU=","avatar_url":"https://avatars.githubusercontent.com/u/2908985?v=4","gravatar_id":"","url":"https://api.github.com/users/rnatarajan","html_url":"https://github.com/rnatarajan","followers_url":"https://api.github.com/users/rnatarajan/followers","following_url":"https://api.github.com/users/rnatarajan/following{/other_user}","gists_url":"https://api.github.com/users/rnatarajan/gists{/gist_id}","starred_url":"https://api.github.com/users/rnatarajan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnatarajan/subscriptions","organizations_url":"https://api.github.com/users/rnatarajan/orgs","repos_url":"https://api.github.com/users/rnatarajan/repos","events_url":"https://api.github.com/users/rnatarajan/events{/privacy}","received_events_url":"https://api.github.com/users/rnatarajan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T15:18:49Z","updated_at":"2020-09-26T15:28:48Z","author_association":"NONE","body":"Sorry I did not update the ticket in the past week.\r\n\r\n1. Yes that is correct.\r\n2. I tried with both Spark Structured Streaming and DStream. But Since our source is Debezium/Kafka, we had to use ForEachRDD to convert few fields (days since epoch to date, unix time to timestamp) and then we are doing df.write.format(\"hudi\").....<few Hudi options that we had documented in the ticket>.mode(SaveMode.Append).save(\"<path>\")\r\n3. I am attaching the screenshot that shows that count takes most time in case of bulk_insert and countByKey in case of insert.\r\n\r\nStructured Streaming had a higher throughput. But with triggers in Spark, I cannot post granular details. Hence using DStream to illustrate thoughput issue.\r\n\r\nRegarding operation mode as insert, each DStream batch was about 434000 records. \r\nFor the first batch processing took 1.3mins batch but then the processing time drops to about 37s. \r\nAttached are the details that narrow down the bottleneck to CountByKey.\r\nPicture shows that first batch took 53s in countByKey where as for subsequent batches drops to about 28s. \r\nTime taken in CountByKey remains around 28s for each batch of 434000 records.\r\nIn this case DStream achieves a peak throughput of about 12K Rows per second.\r\n\r\n![insert_time_taken_by_each_batch](https://user-images.githubusercontent.com/2908985/94343943-77272500-ffe1-11ea-8c46-65c7b39959d3.png)\r\n![insert_for_each_rdd](https://user-images.githubusercontent.com/2908985/94343947-7bebd900-ffe1-11ea-8b6b-a802873d7d03.png)\r\n![insert_dag_details](https://user-images.githubusercontent.com/2908985/94343951-7f7f6000-ffe1-11ea-8f76-7caedb49ff5c.png)\r\n![insert_first_batch_bottleneck](https://user-images.githubusercontent.com/2908985/94343955-81e1ba00-ffe1-11ea-9fd7-1fe0c5c0c85a.png)\r\n![insert_expand_bottleneck_in_first_batch](https://user-images.githubusercontent.com/2908985/94343959-860dd780-ffe1-11ea-8d63-80836cb92ff7.png)\r\n![insert_subsequent_batch_bottleneck](https://user-images.githubusercontent.com/2908985/94343961-8ad28b80-ffe1-11ea-8890-0b11720fb460.png)\r\n\r\n\r\n\r\nRegarding operation mode as bulk_insert, each DStream batch was about 434000 records.\r\nFor the first batch processing took 1.2mins batch but then the processing time drops to about 34s. \r\nAttached are the details that narrow down the bottleneck to Count.\r\nPicture shows that first batch took 56s in Count where as for subsequent batches drops to about 32s. \r\nTime taken in Count remains around 32s for each batch of 434000 records.\r\nIn this case DStream achieves a peak throughput of about 12K Rows per second.\r\n\r\n\r\n![bulk_insert_time_taken_by_each_batch](https://user-images.githubusercontent.com/2908985/94343967-90c86c80-ffe1-11ea-9b75-a19b170f3a74.png)\r\n![bulk_insert_for_each_rdd](https://user-images.githubusercontent.com/2908985/94343968-93c35d00-ffe1-11ea-8d72-47a868f87195.png)\r\n![bulk_insert_dag_details](https://user-images.githubusercontent.com/2908985/94343971-96be4d80-ffe1-11ea-9f49-370d38619452.png)\r\n![bulk_insert_first_batch_bottleneck](https://user-images.githubusercontent.com/2908985/94343972-9920a780-ffe1-11ea-9ae1-506f9c41b4ae.png)\r\n![bulk_insert_expand_bottleneck_in_first_batch](https://user-images.githubusercontent.com/2908985/94343974-9c1b9800-ffe1-11ea-8b2a-5d317bb4495d.png)\r\n![bulk_insert_subsequent_batch_bottleneck](https://user-images.githubusercontent.com/2908985/94343976-9f168880-ffe1-11ea-9661-275e2425aced.png)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699508859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699552387","html_url":"https://github.com/apache/hudi/pull/1566#issuecomment-699552387","issue_url":"https://api.github.com/repos/apache/hudi/issues/1566","id":699552387,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU1MjM4Nw==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T21:52:06Z","updated_at":"2020-09-26T21:52:06Z","author_association":"CONTRIBUTOR","body":"@bvaradar few clarifications/comments. Rest looks good to me. :) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699552387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699569502","html_url":"https://github.com/apache/hudi/issues/2121#issuecomment-699569502","issue_url":"https://api.github.com/repos/apache/hudi/issues/2121","id":699569502,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU2OTUwMg==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T01:23:34Z","updated_at":"2020-09-27T01:23:34Z","author_association":"CONTRIBUTOR","body":"![c8c8e2dc28bab544e64134dd72afeff](https://user-images.githubusercontent.com/25769285/94353378-1829e480-00a3-11eb-870c-9951cee4f9aa.png)\r\n![f4b198d10fff41856df233cfc9c91d2](https://user-images.githubusercontent.com/25769285/94353379-1b24d500-00a3-11eb-987e-2c0282fae2ff.png)\r\n![Uploading ba70881938df751b78743217fc71b9b.png‚Ä¶]()\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699569502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699569580","html_url":"https://github.com/apache/hudi/issues/2121#issuecomment-699569580","issue_url":"https://api.github.com/repos/apache/hudi/issues/2121","id":699569580,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU2OTU4MA==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T01:24:44Z","updated_at":"2020-09-27T01:24:44Z","author_association":"CONTRIBUTOR","body":" \r\n![ee054d93a34b5d8c3c5660cc8c8d6b1](https://user-images.githubusercontent.com/25769285/94353397-43accf00-00a3-11eb-853a-e77364f0037e.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699569580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699576512","html_url":"https://github.com/apache/hudi/issues/2121#issuecomment-699576512","issue_url":"https://api.github.com/repos/apache/hudi/issues/2121","id":699576512,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU3NjUxMg==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T02:49:50Z","updated_at":"2020-09-27T02:49:50Z","author_association":"CONTRIBUTOR","body":"can you help meÔºåthanks\r\n@xushiyan ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699576512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699619814","html_url":"https://github.com/apache/hudi/pull/2074#issuecomment-699619814","issue_url":"https://api.github.com/repos/apache/hudi/issues/2074","id":699619814,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTYxOTgxNA==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T10:59:02Z","updated_at":"2020-09-27T10:59:02Z","author_association":"CONTRIBUTOR","body":"@liujinhui1994 When you are ready, ping me, please.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699619814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699621384","html_url":"https://github.com/apache/hudi/pull/2074#issuecomment-699621384","issue_url":"https://api.github.com/repos/apache/hudi/issues/2074","id":699621384,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTYyMTM4NA==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T11:14:33Z","updated_at":"2020-09-27T11:14:33Z","author_association":"CONTRIBUTOR","body":"Please help review @yanghua ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699621384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699625048","html_url":"https://github.com/apache/hudi/pull/2122#issuecomment-699625048","issue_url":"https://api.github.com/repos/apache/hudi/issues/2122","id":699625048,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTYyNTA0OA==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T11:49:41Z","updated_at":"2020-09-27T11:49:41Z","author_association":"CONTRIBUTOR","body":"@yanghua   please help review","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699625048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699712480","html_url":"https://github.com/apache/hudi/pull/2122#issuecomment-699712480","issue_url":"https://api.github.com/repos/apache/hudi/issues/2122","id":699712480,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTcxMjQ4MA==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T00:38:22Z","updated_at":"2020-09-28T00:38:22Z","author_association":"CONTRIBUTOR","body":"@wangxianghu Would you please help to review this PR?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699712480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699718019","html_url":"https://github.com/apache/hudi/pull/2122#issuecomment-699718019","issue_url":"https://api.github.com/repos/apache/hudi/issues/2122","id":699718019,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTcxODAxOQ==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T01:07:25Z","updated_at":"2020-09-28T01:07:25Z","author_association":"CONTRIBUTOR","body":"> @wangxianghu Would you please help to review this PR?\r\n\r\nsure will do","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699718019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699724973","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-699724973","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":699724973,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTcyNDk3Mw==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T01:41:54Z","updated_at":"2020-09-28T01:41:54Z","author_association":"CONTRIBUTOR","body":"@vinothchandar, Thanks for your patience and detailed review and fix. It's a really big help!\r\n Do you mean I take over the rest of the work from here? :)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699724973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699728335","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-699728335","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":699728335,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTcyODMzNQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T01:58:33Z","updated_at":"2020-09-28T01:58:33Z","author_association":"MEMBER","body":"@wangxianghu I will continue to work on this. Planning to get this landed this week. \r\nMay need some help testing once I am there. Will ping you here! ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699728335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699730167","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-699730167","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":699730167,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTczMDE2Nw==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T02:07:19Z","updated_at":"2020-09-28T02:07:19Z","author_association":"CONTRIBUTOR","body":"> testing\r\n\r\nOk, please ping me when it is ready.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699730167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699773578","html_url":"https://github.com/apache/hudi/issues/2121#issuecomment-699773578","issue_url":"https://api.github.com/repos/apache/hudi/issues/2121","id":699773578,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTc3MzU3OA==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T05:12:14Z","updated_at":"2020-09-28T05:12:14Z","author_association":"MEMBER","body":"@liujinhui1994 looks like the fields of `distance`, `eta`, etc are integer values but the schema says all strings. do you think this can be the cause?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699773578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699774198","html_url":"https://github.com/apache/hudi/issues/2121#issuecomment-699774198","issue_url":"https://api.github.com/repos/apache/hudi/issues/2121","id":699774198,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTc3NDE5OA==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T05:14:23Z","updated_at":"2020-09-28T05:14:23Z","author_association":"MEMBER","body":"and your schema root type should be `\"type\" : \"record\"`, not `array`","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699774198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699784611","html_url":"https://github.com/apache/hudi/pull/2048#issuecomment-699784611","issue_url":"https://api.github.com/repos/apache/hudi/issues/2048","id":699784611,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTc4NDYxMQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T05:45:29Z","updated_at":"2020-09-28T05:47:21Z","author_association":"CONTRIBUTOR","body":"@satishkotha : when the conflicts are resolved and comments addressed let me know and I will take a final pass to land.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699784611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699789768","html_url":"https://github.com/apache/hudi/issues/2119#issuecomment-699789768","issue_url":"https://api.github.com/repos/apache/hudi/issues/2119","id":699789768,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTc4OTc2OA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T05:58:56Z","updated_at":"2020-09-28T08:41:11Z","author_association":"CONTRIBUTOR","body":"Hi @dugenkui03, This `collect` function is useful,  it is a `terminal operation` and will traverse the stream to produce a side-effect. \r\n\r\nThe function in `Stream` can be divided into intermediate and terminal operations, the former is lazy, executing an intermediate operation such as map() does not actually perform any mapping until a terminal operation of the pipeline is executed, such as `collect`.\r\n\r\ndetails can be found here:\r\nhttps://docs.oracle.com/javase/8/docs/api/\r\n```\r\nStream operations and pipelines\r\nStream operations are divided into intermediate and terminal operations, and are combined to form stream pipelines. A stream pipeline consists of a source (such as a Collection, an array, a generator function, or an I/O channel); followed by zero or more intermediate operations such as Stream.filter or Stream.map; and a terminal operation such as Stream.forEach or Stream.reduce.\r\n\r\nIntermediate operations return a new stream. They are always lazy; executing an intermediate operation such as filter() does not actually perform any filtering, but instead creates a new stream that, when traversed, contains the elements of the initial stream that match the given predicate. Traversal of the pipeline source does not begin until the terminal operation of the pipeline is executed.\r\n\r\nTerminal operations, such as Stream.forEach or IntStream.sum, may traverse the stream to produce a result or a side-effect. After the terminal operation is performed, the stream pipeline is considered consumed, and can no longer be used; if you need to traverse the same data source again, you must return to the data source to get a new stream. In almost all cases, terminal operations are eager, completing their traversal of the data source and processing of the pipeline before returning. Only the terminal operations iterator() and spliterator() are not; these are provided as an \"escape hatch\" to enable arbitrary client-controlled pipeline traversals in the event that the existing operations are not sufficient to the task.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699789768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699796487","html_url":"https://github.com/apache/hudi/issues/2121#issuecomment-699796487","issue_url":"https://api.github.com/repos/apache/hudi/issues/2121","id":699796487,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTc5NjQ4Nw==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T06:15:26Z","updated_at":"2020-09-28T06:15:26Z","author_association":"CONTRIBUTOR","body":"> @liujinhui1994 looks like the fields of `distance`, `eta`, etc are integer values but the schema says all strings. do you think this can be the cause?\r\n\r\nThe reason is not this","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699796487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699796655","html_url":"https://github.com/apache/hudi/issues/2121#issuecomment-699796655","issue_url":"https://api.github.com/repos/apache/hudi/issues/2121","id":699796655,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTc5NjY1NQ==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T06:15:46Z","updated_at":"2020-09-28T06:15:46Z","author_association":"CONTRIBUTOR","body":"> and your schema root type should be `\"type\" : \"record\"`, not `array`\r\n\r\nBut how do I express a shcema of array type like this?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699796655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699796833","html_url":"https://github.com/apache/hudi/issues/2121#issuecomment-699796833","issue_url":"https://api.github.com/repos/apache/hudi/issues/2121","id":699796833,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTc5NjgzMw==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T06:16:08Z","updated_at":"2020-09-28T06:16:08Z","author_association":"CONTRIBUTOR","body":"{\r\n\t\"type\": \"array\",\r\n\t\"name\": \"t3_ts_odsrt_t_dispatch_log_v2\",\r\n\t\"items\": {\r\n\t\t\"type\": \"record\",\r\n\t\t\"name\": \"t3_ts_odsrt_t_dispatch_log_v2_array\",\r\n\t\t\"fields\": [{\r\n\t\t\t\t\"name\": \"distance\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"name\": \"eta\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"name\": \"orderId\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"name\": \"status\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"name\": \"time\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"name\": \"typeTime\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"name\": \"vin\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699796833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699798342","html_url":"https://github.com/apache/hudi/issues/2101#issuecomment-699798342","issue_url":"https://api.github.com/repos/apache/hudi/issues/2101","id":699798342,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTc5ODM0Mg==","user":{"login":"getniz","id":29088488,"node_id":"MDQ6VXNlcjI5MDg4NDg4","avatar_url":"https://avatars.githubusercontent.com/u/29088488?v=4","gravatar_id":"","url":"https://api.github.com/users/getniz","html_url":"https://github.com/getniz","followers_url":"https://api.github.com/users/getniz/followers","following_url":"https://api.github.com/users/getniz/following{/other_user}","gists_url":"https://api.github.com/users/getniz/gists{/gist_id}","starred_url":"https://api.github.com/users/getniz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/getniz/subscriptions","organizations_url":"https://api.github.com/users/getniz/orgs","repos_url":"https://api.github.com/users/getniz/repos","events_url":"https://api.github.com/users/getniz/events{/privacy}","received_events_url":"https://api.github.com/users/getniz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T06:19:44Z","updated_at":"2020-09-28T13:27:50Z","author_association":"NONE","body":"@n3nash Thanks for your inputs, while I'm experimenting this on the other side I saw there is another easy way to achieve this using ksql from Kafka receiving side which flattens the Kafka topics and post it to another topics by creating ksql streams. I can just plugin the Hudi source to the ksql stream topic which is flattened to my reqmts. Reference: https://www.confluent.io/stream-processing-cookbook/ksql-recipes/nested-json-data/ . I think this turns out to be the solution from Kafka side to interpret very nature of the kafka topics as they are always encapsulated with additional Kafka metadata like schema, offset, etc rather typical flattened files.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699798342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699805329","html_url":"https://github.com/apache/hudi/issues/2121#issuecomment-699805329","issue_url":"https://api.github.com/repos/apache/hudi/issues/2121","id":699805329,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTgwNTMyOQ==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T06:34:43Z","updated_at":"2020-09-28T06:34:43Z","author_association":"MEMBER","body":"> > and your schema root type should be `\"type\" : \"record\"`, not `array`\r\n> \r\n> But how do I express a shcema of array type like this?\r\n\r\nYou should be able to just wrap your array schema in a record schema, as a field.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699805329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699806535","html_url":"https://github.com/apache/hudi/issues/2121#issuecomment-699806535","issue_url":"https://api.github.com/repos/apache/hudi/issues/2121","id":699806535,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTgwNjUzNQ==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T06:37:17Z","updated_at":"2020-09-28T06:37:31Z","author_association":"CONTRIBUTOR","body":"But my data does not seem to fit this model. From the data, he does not have an outermost key @xushiyan ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699806535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699839103","html_url":"https://github.com/apache/hudi/issues/2100#issuecomment-699839103","issue_url":"https://api.github.com/repos/apache/hudi/issues/2100","id":699839103,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTgzOTEwMw==","user":{"login":"eigakow","id":18256970,"node_id":"MDQ6VXNlcjE4MjU2OTcw","avatar_url":"https://avatars.githubusercontent.com/u/18256970?v=4","gravatar_id":"","url":"https://api.github.com/users/eigakow","html_url":"https://github.com/eigakow","followers_url":"https://api.github.com/users/eigakow/followers","following_url":"https://api.github.com/users/eigakow/following{/other_user}","gists_url":"https://api.github.com/users/eigakow/gists{/gist_id}","starred_url":"https://api.github.com/users/eigakow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eigakow/subscriptions","organizations_url":"https://api.github.com/users/eigakow/orgs","repos_url":"https://api.github.com/users/eigakow/repos","events_url":"https://api.github.com/users/eigakow/events{/privacy}","received_events_url":"https://api.github.com/users/eigakow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T07:43:11Z","updated_at":"2020-09-28T07:43:11Z","author_association":"NONE","body":"Below the stack trace of the failure. I have removed hive-sync option to simplify troubleshooting.\r\n\r\n```\r\n20/09/28 07:27:54 WARN deltastreamer.SchedulerConfGenerator: Job Scheduling Configs will not be in effect as spark.scheduler.mode is not set to FAIR at instantiation time. Continuing without scheduling configs\r\n20/09/28 07:27:54 INFO spark.SparkContext: Running Spark version 2.4.0-cdh6.1.0\r\n20/09/28 07:27:54 INFO spark.SparkContext: Submitted application: delta-streamer_impl2\r\n20/09/28 07:27:54 INFO spark.SecurityManager: Changing view acls to: director,iga\r\n20/09/28 07:27:54 INFO spark.SecurityManager: Changing modify acls to: director,iga\r\n20/09/28 07:27:54 INFO spark.SecurityManager: Changing view acls groups to:\r\n20/09/28 07:27:54 INFO spark.SecurityManager: Changing modify acls groups to:\r\n20/09/28 07:27:54 INFO spark.SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users  with view permissions: Set(director, iga); groups with view permissions: Set(); users  with modify permissions: Set(director, iga); groups with modify permissions: Set()\r\n20/09/28 07:27:54 INFO util.Utils: Successfully started service 'sparkDriver' on port 38195.\r\n20/09/28 07:27:54 INFO spark.SparkEnv: Registering MapOutputTracker\r\n20/09/28 07:27:54 INFO spark.SparkEnv: Registering BlockManagerMaster\r\n20/09/28 07:27:54 INFO storage.BlockManagerMasterEndpoint: Using org.apache.spark.storage.DefaultTopologyMapper for getting topology information\r\n20/09/28 07:27:54 INFO storage.BlockManagerMasterEndpoint: BlockManagerMasterEndpoint up\r\n20/09/28 07:27:54 INFO storage.DiskBlockManager: Created local directory at /tmp/blockmgr-2d0abd3b-1755-43bc-9313-36a9cb19e802\r\n20/09/28 07:27:54 INFO memory.MemoryStore: MemoryStore started with capacity 366.3 MB\r\n20/09/28 07:27:54 INFO spark.SparkEnv: Registering OutputCommitCoordinator\r\n20/09/28 07:27:54 INFO util.log: Logging initialized @3357ms\r\n20/09/28 07:27:54 INFO server.Server: jetty-9.3.z-SNAPSHOT\r\n20/09/28 07:27:54 INFO server.Server: Started @3430ms\r\n20/09/28 07:27:54 INFO server.AbstractConnector: Started ServerConnector@108d55c4{HTTP/1.1,[http/1.1]}{0.0.0.0:4040}\r\n20/09/28 07:27:54 INFO util.Utils: Successfully started service 'SparkUI' on port 4040.\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@2eaef76d{/jobs,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@c6da8bb{/jobs/json,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@3bae64d0{/jobs/job,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@1fba386c{/jobs/job/json,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@7e736350{/stages,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@36b310aa{/stages/json,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@76c387f9{/stages/stage,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@736048ed{/stages/stage/json,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@1976f537{/stages/pool,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@45f421c{/stages/pool/json,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@1816e24a{/storage,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@6940f685{/storage/json,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@47b179d7{/storage/rdd,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@39008c9f{/storage/rdd/json,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@162b3d47{/environment,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@783115d9{/environment/json,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@3402b4c9{/executors,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@95bb2a2{/executors/json,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@46d567cb{/executors/threadDump,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@363a3d15{/executors/threadDump/json,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@173f73e7{/static,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@387bf2d9{/,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@74aa9c72{/api,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@c1fca2a{/jobs/job/kill,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO handler.ContextHandler: Started o.s.j.s.ServletContextHandler@5533dc72{/stages/stage/kill,null,AVAILABLE,@Spark}\r\n20/09/28 07:27:54 INFO ui.SparkUI: Bound SparkUI to 0.0.0.0, and started at http://biedva-worker-1.bigdatapoc.local:4040\r\n20/09/28 07:27:54 INFO Configuration.deprecation: mapred.output.compression.codec is deprecated. Instead, use mapreduce.output.fileoutputformat.compress.codec\r\n20/09/28 07:27:54 INFO Configuration.deprecation: mapred.output.compression.type is deprecated. Instead, use mapreduce.output.fileoutputformat.compress.type\r\n20/09/28 07:27:54 INFO Configuration.deprecation: mapred.output.compress is deprecated. Instead, use mapreduce.output.fileoutputformat.compress\r\n20/09/28 07:27:54 INFO spark.SparkContext: Added JAR hdfs:///app/ingestion/hudi/v0.6.0/hudi-utilities-bundle_2.11-0.6.0.jar at hdfs:///app/ingestion/hudi/v0.6.0/hudi-utilities-bundle_2.11-0.6.0.jar with timestamp 1601278074902\r\n20/09/28 07:27:54 INFO util.Utils: Using initial executors = 0, max of spark.dynamicAllocation.initialExecutors, spark.dynamicAllocation.minExecutors and spark.executor.instances\r\n20/09/28 07:27:55 INFO yarn.Client: Kerberos credentials: principal = iga@XXX, keytab = /home/director/XXX.keytab\r\n20/09/28 07:27:55 INFO client.RMProxy: Connecting to ResourceManager at biedva-master-1.bigdatapoc.local/172.18.157.17:8032\r\n20/09/28 07:27:55 INFO yarn.Client: Requesting a new application from cluster with 6 NodeManagers\r\n20/09/28 07:27:55 INFO conf.Configuration: resource-types.xml not found\r\n20/09/28 07:27:55 INFO resource.ResourceUtils: Unable to find 'resource-types.xml'.\r\n20/09/28 07:27:55 INFO yarn.Client: Verifying our application has not requested more than the maximum memory capability of the cluster (28672 MB per container)\r\n20/09/28 07:27:55 INFO yarn.Client: Will allocate AM container, with 896 MB memory including 384 MB overhead\r\n20/09/28 07:27:55 INFO yarn.Client: Setting up container launch context for our AM\r\n20/09/28 07:27:55 INFO yarn.Client: Setting up the launch environment for our AM container\r\n20/09/28 07:27:55 INFO yarn.Client: Preparing resources for our AM container\r\n20/09/28 07:27:55 INFO yarn.Client: To enable the AM to login from keytab, credentials are being copied over to the AM via the YARN Secure Distributed Cache.\r\n20/09/28 07:27:55 INFO yarn.Client: Uploading resource file:/home/director/XXX.keytab -> hdfs://nameservice1/user/iga/.sparkStaging/application_1601272990574_0015/XXX.keytab\r\n20/09/28 07:27:55 INFO yarn.Client: Source and destination file systems are the same. Not copying hdfs://nameservice1/app/ingestion/hudi/v0.3/hive-service-2.1.1-cdh6.1.0.jar\r\n20/09/28 07:27:55 INFO yarn.Client: Source and destination file systems are the same. Not copying hdfs://nameservice1/app/ingestion/hudi/v0.3/hive-jdbc-2.1.1-cdh6.1.0.jar\r\n20/09/28 07:27:55 INFO yarn.Client: Uploading resource file:/tmp/spark-431edee5-628f-4887-900b-ee4a354c574d/__spark_conf__2055697676300668872.zip -> hdfs://nameservice1/user/iga/.sparkStaging/application_1601272990574_0015/__spark_conf__.zip\r\n20/09/28 07:27:55 INFO spark.SecurityManager: Changing view acls to: director,iga\r\n20/09/28 07:27:55 INFO spark.SecurityManager: Changing modify acls to: director,iga\r\n20/09/28 07:27:55 INFO spark.SecurityManager: Changing view acls groups to:\r\n20/09/28 07:27:55 INFO spark.SecurityManager: Changing modify acls groups to:\r\n20/09/28 07:27:55 INFO spark.SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users  with view permissions: Set(director, iga); groups with view permissions: Set(); users  with modify permissions: Set(director, iga); groups with modify permissions: Set()\r\n20/09/28 07:27:55 INFO conf.HiveConf: Found configuration file file:/etc/hive/conf.cloudera.hive/hive-site.xml\r\n20/09/28 07:27:55 INFO security.HadoopFSDelegationTokenProvider: getting token for: DFS[DFSClient[clientName=DFSClient_NONMAPREDUCE_1511656334_1, ugi=iga@XXX (auth:KERBEROS)]]\r\n20/09/28 07:27:55 INFO hdfs.DFSClient: Created token for iga: HDFS_DELEGATION_TOKEN owner=iga@XXX, renewer=yarn, realUser=, issueDate=1601278075790, maxDate=1601882875790, sequenceNumber=26153, masterKeyId=880 on ha-hdfs:nameservice1\r\n20/09/28 07:27:55 INFO security.HadoopFSDelegationTokenProvider: getting token for: DFS[DFSClient[clientName=DFSClient_NONMAPREDUCE_1511656334_1, ugi=iga@XXX (auth:KERBEROS)]]\r\n20/09/28 07:27:55 INFO hdfs.DFSClient: Created token for iga: HDFS_DELEGATION_TOKEN owner=iga@XXX, renewer=iga, realUser=, issueDate=1601278075804, maxDate=1601882875804, sequenceNumber=26154, masterKeyId=880 on ha-hdfs:nameservice1\r\n20/09/28 07:27:55 INFO yarn.Client: Deleted staging directory hdfs://nameservice1/user/iga/.sparkStaging/application_1601272990574_0015\r\n20/09/28 07:27:55 ERROR spark.SparkContext: Error initializing SparkContext.\r\njava.util.ServiceConfigurationError: org.apache.hadoop.security.token.TokenIdentifier: Provider org.apache.hadoop.hbase.security.token.AuthenticationTokenIdentifier not found\r\n        at java.util.ServiceLoader.fail(ServiceLoader.java:239)\r\n        at java.util.ServiceLoader.access$300(ServiceLoader.java:185)\r\n        at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:372)\r\n        at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404)\r\n        at java.util.ServiceLoader$1.next(ServiceLoader.java:480)\r\n        at org.apache.hadoop.security.token.Token.getClassForIdentifier(Token.java:150)\r\n        at org.apache.hadoop.security.token.Token.decodeIdentifier(Token.java:171)\r\n        at org.apache.spark.deploy.security.HadoopFSDelegationTokenProvider$$anonfun$getTokenRenewalInterval$1$$anonfun$4.apply(HadoopFSDelegationTokenProvider.scala:116)\r\n        at org.apache.spark.deploy.security.HadoopFSDelegationTokenProvider$$anonfun$getTokenRenewalInterval$1$$anonfun$4.apply(HadoopFSDelegationTokenProvider.scala:116)\r\n        at scala.collection.TraversableLike$$anonfun$filterImpl$1.apply(TraversableLike.scala:248)\r\n        at scala.collection.Iterator$class.foreach(Iterator.scala:891)\r\n        at scala.collection.AbstractIterator.foreach(Iterator.scala:1334)\r\n        at scala.collection.IterableLike$class.foreach(IterableLike.scala:72)\r\n        at scala.collection.AbstractIterable.foreach(Iterable.scala:54)\r\n        at scala.collection.TraversableLike$class.filterImpl(TraversableLike.scala:247)\r\n        at scala.collection.TraversableLike$class.filter(TraversableLike.scala:259)\r\n        at scala.collection.AbstractTraversable.filter(Traversable.scala:104)\r\n        at org.apache.spark.deploy.security.HadoopFSDelegationTokenProvider$$anonfun$getTokenRenewalInterval$1.apply(HadoopFSDelegationTokenProvider.scala:115)\r\n        at org.apache.spark.deploy.security.HadoopFSDelegationTokenProvider$$anonfun$getTokenRenewalInterval$1.apply(HadoopFSDelegationTokenProvider.scala:111)\r\n        at scala.Option.flatMap(Option.scala:171)\r\n        at org.apache.spark.deploy.security.HadoopFSDelegationTokenProvider.getTokenRenewalInterval(HadoopFSDelegationTokenProvider.scala:111)\r\n        at org.apache.spark.deploy.security.HadoopFSDelegationTokenProvider.obtainDelegationTokens(HadoopFSDelegationTokenProvider.scala:53)\r\n        at org.apache.spark.deploy.security.HadoopDelegationTokenManager$$anonfun$obtainDelegationTokens$2.apply(HadoopDelegationTokenManager.scala:132)\r\n        at org.apache.spark.deploy.security.HadoopDelegationTokenManager$$anonfun$obtainDelegationTokens$2.apply(HadoopDelegationTokenManager.scala:130)\r\n        at scala.collection.TraversableLike$$anonfun$flatMap$1.apply(TraversableLike.scala:241)\r\n        at scala.collection.TraversableLike$$anonfun$flatMap$1.apply(TraversableLike.scala:241)\r\n        at scala.collection.Iterator$class.foreach(Iterator.scala:891)\r\n        at scala.collection.AbstractIterator.foreach(Iterator.scala:1334)\r\n        at scala.collection.MapLike$DefaultValuesIterable.foreach(MapLike.scala:206)\r\n        at scala.collection.TraversableLike$class.flatMap(TraversableLike.scala:241)\r\n        at scala.collection.AbstractTraversable.flatMap(Traversable.scala:104)\r\n        at org.apache.spark.deploy.security.HadoopDelegationTokenManager.obtainDelegationTokens(HadoopDelegationTokenManager.scala:130)\r\n        at org.apache.spark.deploy.yarn.security.YARNHadoopDelegationTokenManager.obtainDelegationTokens(YARNHadoopDelegationTokenManager.scala:59)\r\n        at org.apache.spark.deploy.yarn.Client.setupSecurityToken(Client.scala:322)\r\n        at org.apache.spark.deploy.yarn.Client.createContainerLaunchContext(Client.scala:1028)\r\n        at org.apache.spark.deploy.yarn.Client.submitApplication(Client.scala:180)\r\n        at org.apache.spark.scheduler.cluster.YarnClientSchedulerBackend.start(YarnClientSchedulerBackend.scala:57)\r\n        at org.apache.spark.scheduler.TaskSchedulerImpl.start(TaskSchedulerImpl.scala:179)\r\n        at org.apache.spark.SparkContext.<init>(SparkContext.scala:507)\r\n        at org.apache.spark.api.java.JavaSparkContext.<init>(JavaSparkContext.scala:58)\r\n        at org.apache.hudi.utilities.UtilHelpers.buildSparkContext(UtilHelpers.java:214)\r\n        at org.apache.hudi.utilities.deltastreamer.HoodieDeltaStreamer.main(HoodieDeltaStreamer.java:457)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\r\n        at org.apache.spark.deploy.SparkSubmit.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:849)\r\n        at org.apache.spark.deploy.SparkSubmit.doRunMain$1(SparkSubmit.scala:167)\r\n        at org.apache.spark.deploy.SparkSubmit.submit(SparkSubmit.scala:195)\r\n        at org.apache.spark.deploy.SparkSubmit.doSubmit(SparkSubmit.scala:86)\r\n        at org.apache.spark.deploy.SparkSubmit$$anon$2.doSubmit(SparkSubmit.scala:924)\r\n        at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:933)\r\n        at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\r\n20/09/28 07:27:55 INFO server.AbstractConnector: Stopped Spark@108d55c4{HTTP/1.1,[http/1.1]}{0.0.0.0:4040}\r\n20/09/28 07:27:55 INFO ui.SparkUI: Stopped Spark web UI at http://biedva-worker-1.bigdatapoc.local:4040\r\n20/09/28 07:27:55 WARN cluster.YarnSchedulerBackend$YarnSchedulerEndpoint: Attempted to request executors before the AM has registered!\r\n20/09/28 07:27:55 INFO cluster.YarnClientSchedulerBackend: Stopped\r\n20/09/28 07:27:55 INFO spark.MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\r\n20/09/28 07:27:55 INFO memory.MemoryStore: MemoryStore cleared\r\n20/09/28 07:27:55 INFO storage.BlockManager: BlockManager stopped\r\n20/09/28 07:27:55 INFO storage.BlockManagerMaster: BlockManagerMaster stopped\r\n20/09/28 07:27:55 WARN metrics.MetricsSystem: Stopping a MetricsSystem that is not running\r\n20/09/28 07:27:55 INFO scheduler.OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\r\n20/09/28 07:27:55 INFO spark.SparkContext: Successfully stopped SparkContext\r\nException in thread \"main\" java.util.ServiceConfigurationError: org.apache.hadoop.security.token.TokenIdentifier: Provider org.apache.hadoop.hbase.security.token.AuthenticationTokenIdentifier not found\r\n        at java.util.ServiceLoader.fail(ServiceLoader.java:239)\r\n        at java.util.ServiceLoader.access$300(ServiceLoader.java:185)\r\n        at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:372)\r\n        at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404)\r\n        at java.util.ServiceLoader$1.next(ServiceLoader.java:480)\r\n        at org.apache.hadoop.security.token.Token.getClassForIdentifier(Token.java:150)\r\n        at org.apache.hadoop.security.token.Token.decodeIdentifier(Token.java:171)\r\n        at org.apache.spark.deploy.security.HadoopFSDelegationTokenProvider$$anonfun$getTokenRenewalInterval$1$$anonfun$4.apply(HadoopFSDelegationTokenProvider.scala:116)\r\n        at org.apache.spark.deploy.security.HadoopFSDelegationTokenProvider$$anonfun$getTokenRenewalInterval$1$$anonfun$4.apply(HadoopFSDelegationTokenProvider.scala:116)\r\n        at scala.collection.TraversableLike$$anonfun$filterImpl$1.apply(TraversableLike.scala:248)\r\n        at scala.collection.Iterator$class.foreach(Iterator.scala:891)\r\n        at scala.collection.AbstractIterator.foreach(Iterator.scala:1334)\r\n        at scala.collection.IterableLike$class.foreach(IterableLike.scala:72)\r\n        at scala.collection.AbstractIterable.foreach(Iterable.scala:54)\r\n        at scala.collection.TraversableLike$class.filterImpl(TraversableLike.scala:247)\r\n        at scala.collection.TraversableLike$class.filter(TraversableLike.scala:259)\r\n        at scala.collection.AbstractTraversable.filter(Traversable.scala:104)\r\n        at org.apache.spark.deploy.security.HadoopFSDelegationTokenProvider$$anonfun$getTokenRenewalInterval$1.apply(HadoopFSDelegationTokenProvider.scala:115)\r\n        at org.apache.spark.deploy.security.HadoopFSDelegationTokenProvider$$anonfun$getTokenRenewalInterval$1.apply(HadoopFSDelegationTokenProvider.scala:111)\r\n        at scala.Option.flatMap(Option.scala:171)\r\n        at org.apache.spark.deploy.security.HadoopFSDelegationTokenProvider.getTokenRenewalInterval(HadoopFSDelegationTokenProvider.scala:111)\r\n        at org.apache.spark.deploy.security.HadoopFSDelegationTokenProvider.obtainDelegationTokens(HadoopFSDelegationTokenProvider.scala:53)\r\n        at org.apache.spark.deploy.security.HadoopDelegationTokenManager$$anonfun$obtainDelegationTokens$2.apply(HadoopDelegationTokenManager.scala:132)\r\n        at org.apache.spark.deploy.security.HadoopDelegationTokenManager$$anonfun$obtainDelegationTokens$2.apply(HadoopDelegationTokenManager.scala:130)\r\n        at scala.collection.TraversableLike$$anonfun$flatMap$1.apply(TraversableLike.scala:241)\r\n        at scala.collection.TraversableLike$$anonfun$flatMap$1.apply(TraversableLike.scala:241)\r\n        at scala.collection.Iterator$class.foreach(Iterator.scala:891)\r\n        at scala.collection.AbstractIterator.foreach(Iterator.scala:1334)\r\n        at scala.collection.MapLike$DefaultValuesIterable.foreach(MapLike.scala:206)\r\n        at scala.collection.TraversableLike$class.flatMap(TraversableLike.scala:241)\r\n        at scala.collection.AbstractTraversable.flatMap(Traversable.scala:104)\r\n        at org.apache.spark.deploy.security.HadoopDelegationTokenManager.obtainDelegationTokens(HadoopDelegationTokenManager.scala:130)\r\n        at org.apache.spark.deploy.yarn.security.YARNHadoopDelegationTokenManager.obtainDelegationTokens(YARNHadoopDelegationTokenManager.scala:59)\r\n        at org.apache.spark.deploy.yarn.Client.setupSecurityToken(Client.scala:322)\r\n        at org.apache.spark.deploy.yarn.Client.createContainerLaunchContext(Client.scala:1028)\r\n        at org.apache.spark.deploy.yarn.Client.submitApplication(Client.scala:180)\r\n        at org.apache.spark.scheduler.cluster.YarnClientSchedulerBackend.start(YarnClientSchedulerBackend.scala:57)\r\n        at org.apache.spark.scheduler.TaskSchedulerImpl.start(TaskSchedulerImpl.scala:179)\r\n        at org.apache.spark.SparkContext.<init>(SparkContext.scala:507)\r\n        at org.apache.spark.api.java.JavaSparkContext.<init>(JavaSparkContext.scala:58)\r\n        at org.apache.hudi.utilities.UtilHelpers.buildSparkContext(UtilHelpers.java:214)\r\n        at org.apache.hudi.utilities.deltastreamer.HoodieDeltaStreamer.main(HoodieDeltaStreamer.java:457)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52)\r\n        at org.apache.spark.deploy.SparkSubmit.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:849)\r\n        at org.apache.spark.deploy.SparkSubmit.doRunMain$1(SparkSubmit.scala:167)\r\n        at org.apache.spark.deploy.SparkSubmit.submit(SparkSubmit.scala:195)\r\n        at org.apache.spark.deploy.SparkSubmit.doSubmit(SparkSubmit.scala:86)\r\n        at org.apache.spark.deploy.SparkSubmit$$anon$2.doSubmit(SparkSubmit.scala:924)\r\n        at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:933)\r\n        at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\r\n20/09/28 07:27:55 INFO util.ShutdownHookManager: Shutdown hook called\r\n20/09/28 07:27:55 INFO util.ShutdownHookManager: Deleting directory /tmp/spark-431edee5-628f-4887-900b-ee4a354c574d\r\n20/09/28 07:27:55 INFO util.ShutdownHookManager: Deleting directory /tmp/spark-e18d8494-7656-405c-87e2-0c3d456a08e6\r\n```\r\n\r\nExactly the same start command, but using hudi 0.5.2 is working successfully, therefore I do not think it is related to the environment, but to the changes that were implemented between 0.5.2 and 0.6.0 versions of hudi.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699839103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699940435","html_url":"https://github.com/apache/hudi/issues/2119#issuecomment-699940435","issue_url":"https://api.github.com/repos/apache/hudi/issues/2119","id":699940435,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTk0MDQzNQ==","user":{"login":"dugenkui03","id":18216266,"node_id":"MDQ6VXNlcjE4MjE2MjY2","avatar_url":"https://avatars.githubusercontent.com/u/18216266?v=4","gravatar_id":"","url":"https://api.github.com/users/dugenkui03","html_url":"https://github.com/dugenkui03","followers_url":"https://api.github.com/users/dugenkui03/followers","following_url":"https://api.github.com/users/dugenkui03/following{/other_user}","gists_url":"https://api.github.com/users/dugenkui03/gists{/gist_id}","starred_url":"https://api.github.com/users/dugenkui03/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dugenkui03/subscriptions","organizations_url":"https://api.github.com/users/dugenkui03/orgs","repos_url":"https://api.github.com/users/dugenkui03/repos","events_url":"https://api.github.com/users/dugenkui03/events{/privacy}","received_events_url":"https://api.github.com/users/dugenkui03/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T11:09:52Z","updated_at":"2020-09-28T11:09:52Z","author_association":"CONTRIBUTOR","body":"> Hi @dugenkui03, This `collect` function is useful, it is a `terminal operation` and will traverse the stream to produce a side-effect.\r\n> \r\n> The function in `Stream` can be divided into intermediate and terminal operations, the former is lazy, executing an intermediate operation such as map() does not actually perform any mapping until a terminal operation of the pipeline is executed, such as `collect`.\r\n> \r\n> details can be found here:\r\n> https://docs.oracle.com/javase/8/docs/api/\r\n> \r\n> ```\r\n> Stream operations and pipelines\r\n> Stream operations are divided into intermediate and terminal operations, and are combined to form stream pipelines. A stream pipeline consists of a source (such as a Collection, an array, a generator function, or an I/O channel); followed by zero or more intermediate operations such as Stream.filter or Stream.map; and a terminal operation such as Stream.forEach or Stream.reduce.\r\n> \r\n> Intermediate operations return a new stream. They are always lazy; executing an intermediate operation such as filter() does not actually perform any filtering, but instead creates a new stream that, when traversed, contains the elements of the initial stream that match the given predicate. Traversal of the pipeline source does not begin until the terminal operation of the pipeline is executed.\r\n> \r\n> Terminal operations, such as Stream.forEach or IntStream.sum, may traverse the stream to produce a result or a side-effect. After the terminal operation is performed, the stream pipeline is considered consumed, and can no longer be used; if you need to traverse the same data source again, you must return to the data source to get a new stream. In almost all cases, terminal operations are eager, completing their traversal of the data source and processing of the pipeline before returning. Only the terminal operations iterator() and spliterator() are not; these are provided as an \"escape hatch\" to enable arbitrary client-controlled pipeline traversals in the event that the existing operations are not sufficient to the task.\r\n> ```\r\n\r\nThanks for your explanation!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699940435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699986102","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-699986102","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":699986102,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTk4NjEwMg==","user":{"login":"linshan-ma","id":23548282,"node_id":"MDQ6VXNlcjIzNTQ4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/23548282?v=4","gravatar_id":"","url":"https://api.github.com/users/linshan-ma","html_url":"https://github.com/linshan-ma","followers_url":"https://api.github.com/users/linshan-ma/followers","following_url":"https://api.github.com/users/linshan-ma/following{/other_user}","gists_url":"https://api.github.com/users/linshan-ma/gists{/gist_id}","starred_url":"https://api.github.com/users/linshan-ma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linshan-ma/subscriptions","organizations_url":"https://api.github.com/users/linshan-ma/orgs","repos_url":"https://api.github.com/users/linshan-ma/repos","events_url":"https://api.github.com/users/linshan-ma/events{/privacy}","received_events_url":"https://api.github.com/users/linshan-ma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T12:51:01Z","updated_at":"2020-09-28T12:51:01Z","author_association":"CONTRIBUTOR","body":"According to thisÔºàhttps://github.com/apache/hudi/issues/2051Ôºâ test„ÄÇI can't get the results I want„ÄÇWhen we set different valueÔºàhoodie.parquet.small.file.limitÔºâ, the results are still different","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/699986102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700137656","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-700137656","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":700137656,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDEzNzY1Ng==","user":{"login":"bschell","id":8600774,"node_id":"MDQ6VXNlcjg2MDA3NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/8600774?v=4","gravatar_id":"","url":"https://api.github.com/users/bschell","html_url":"https://github.com/bschell","followers_url":"https://api.github.com/users/bschell/followers","following_url":"https://api.github.com/users/bschell/following{/other_user}","gists_url":"https://api.github.com/users/bschell/gists{/gist_id}","starred_url":"https://api.github.com/users/bschell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bschell/subscriptions","organizations_url":"https://api.github.com/users/bschell/orgs","repos_url":"https://api.github.com/users/bschell/repos","events_url":"https://api.github.com/users/bschell/events{/privacy}","received_events_url":"https://api.github.com/users/bschell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T16:18:21Z","updated_at":"2020-09-28T16:18:21Z","author_association":"CONTRIBUTOR","body":"Looks like only integ tests are failing, but I'm not sure of the error. Will take a closer look.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700137656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700215315","html_url":"https://github.com/apache/hudi/pull/1566#issuecomment-700215315","issue_url":"https://api.github.com/repos/apache/hudi/issues/1566","id":700215315,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDIxNTMxNQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T18:47:45Z","updated_at":"2020-09-28T18:47:45Z","author_association":"CONTRIBUTOR","body":"@pratyakshsharma : I have answered your questions. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700215315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700343112","html_url":"https://github.com/apache/hudi/issues/1977#issuecomment-700343112","issue_url":"https://api.github.com/repos/apache/hudi/issues/1977","id":700343112,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDM0MzExMg==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T23:55:28Z","updated_at":"2020-09-28T23:55:28Z","author_association":"CONTRIBUTOR","body":"@KarthickAN closing this issue. Please re-open if you need help with any other question here.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700343112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700345425","html_url":"https://github.com/apache/hudi/issues/2086#issuecomment-700345425","issue_url":"https://api.github.com/repos/apache/hudi/issues/2086","id":700345425,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDM0NTQyNQ==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T00:03:51Z","updated_at":"2020-09-29T00:03:51Z","author_association":"CONTRIBUTOR","body":"@rajgowtham24 I believe that should work, as long as you are keeping your `reporting` bucket in sync with the `hudi write` bucket, by copying/replacing all the data files in `reporting` bucket on each ingestion.\r\n\r\nI will close this issue now. Please re-open if needed.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700345425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700348610","html_url":"https://github.com/apache/hudi/issues/2089#issuecomment-700348610","issue_url":"https://api.github.com/repos/apache/hudi/issues/2089","id":700348610,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDM0ODYxMA==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T00:14:23Z","updated_at":"2020-09-29T00:14:23Z","author_association":"CONTRIBUTOR","body":"@harishchanderramesh I don't quite understand what's going on. Does not seem like it is trying to instantiate EmrFS. Have you added some custom configurations on your EMR cluster and overridden default hadoop configs ?\r\n\r\nThis is actually going beyond the scope of Apache Hudi related issues, and more of an AWS ecosystem issue. I would request you to open a ticket with AWS Support if you are still hitting this. They should be able to work with you to dive deeper and help resolve.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700348610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700366616","html_url":"https://github.com/apache/hudi/pull/2129#issuecomment-700366616","issue_url":"https://api.github.com/repos/apache/hudi/issues/2129","id":700366616,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDM2NjYxNg==","user":{"login":"cdmikechen","id":12069428,"node_id":"MDQ6VXNlcjEyMDY5NDI4","avatar_url":"https://avatars.githubusercontent.com/u/12069428?v=4","gravatar_id":"","url":"https://api.github.com/users/cdmikechen","html_url":"https://github.com/cdmikechen","followers_url":"https://api.github.com/users/cdmikechen/followers","following_url":"https://api.github.com/users/cdmikechen/following{/other_user}","gists_url":"https://api.github.com/users/cdmikechen/gists{/gist_id}","starred_url":"https://api.github.com/users/cdmikechen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdmikechen/subscriptions","organizations_url":"https://api.github.com/users/cdmikechen/orgs","repos_url":"https://api.github.com/users/cdmikechen/repos","events_url":"https://api.github.com/users/cdmikechen/events{/privacy}","received_events_url":"https://api.github.com/users/cdmikechen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T01:16:15Z","updated_at":"2020-09-29T01:18:53Z","author_association":"CONTRIBUTOR","body":"Can you test on Hive to check if Hive can read data with hudi avro timestamp type? \r\nI think there are more test cases and other things to let Hive support timestamp type.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700366616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700399285","html_url":"https://github.com/apache/hudi/pull/2127#issuecomment-700399285","issue_url":"https://api.github.com/repos/apache/hudi/issues/2127","id":700399285,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDM5OTI4NQ==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T03:10:55Z","updated_at":"2020-09-29T03:10:55Z","author_association":"CONTRIBUTOR","body":"@vinothchandar hello, can you help review  ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700399285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700399441","html_url":"https://github.com/apache/hudi/pull/2125#issuecomment-700399441","issue_url":"https://api.github.com/repos/apache/hudi/issues/2125","id":700399441,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDM5OTQ0MQ==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T03:11:31Z","updated_at":"2020-09-29T03:11:31Z","author_association":"CONTRIBUTOR","body":"@vinothchandar @leesf hello, can you help review ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700399441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700418522","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-700418522","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":700418522,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDQxODUyMg==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T04:26:59Z","updated_at":"2020-09-29T04:26:59Z","author_association":"CONTRIBUTOR","body":"> According to thisÔºà[https://github.com/apache/hudi/issues/2051Ôºâ](https://github.com/apache/hudi/issues/2051%EF%BC%89) test„ÄÇI can't get the results I want„ÄÇWhen we set different valueÔºàhoodie.parquet.small.file.limitÔºâ, the results are still different\r\n\r\n@linshan-ma hi, you mean that after you apply this PR and insert records again, the results written before get updated, instead of inserting new records?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700418522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700452276","html_url":"https://github.com/apache/hudi/pull/2122#issuecomment-700452276","issue_url":"https://api.github.com/repos/apache/hudi/issues/2122","id":700452276,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDQ1MjI3Ng==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T05:46:19Z","updated_at":"2020-09-29T05:46:19Z","author_association":"CONTRIBUTOR","body":"@yanghua  please help reviewÔºåthanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700452276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700471110","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-700471110","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":700471110,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDQ3MTExMA==","user":{"login":"linshan-ma","id":23548282,"node_id":"MDQ6VXNlcjIzNTQ4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/23548282?v=4","gravatar_id":"","url":"https://api.github.com/users/linshan-ma","html_url":"https://github.com/linshan-ma","followers_url":"https://api.github.com/users/linshan-ma/followers","following_url":"https://api.github.com/users/linshan-ma/following{/other_user}","gists_url":"https://api.github.com/users/linshan-ma/gists{/gist_id}","starred_url":"https://api.github.com/users/linshan-ma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linshan-ma/subscriptions","organizations_url":"https://api.github.com/users/linshan-ma/orgs","repos_url":"https://api.github.com/users/linshan-ma/repos","events_url":"https://api.github.com/users/linshan-ma/events{/privacy}","received_events_url":"https://api.github.com/users/linshan-ma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T06:08:26Z","updated_at":"2020-09-29T06:08:26Z","author_association":"CONTRIBUTOR","body":"@leesf yes,it was updated.When we set hoodie.parquet.small.file.limit=0,  it was  inserted\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700471110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700475643","html_url":"https://github.com/apache/hudi/pull/1978#issuecomment-700475643","issue_url":"https://api.github.com/repos/apache/hudi/issues/1978","id":700475643,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDQ3NTY0Mw==","user":{"login":"hj2016","id":18521084,"node_id":"MDQ6VXNlcjE4NTIxMDg0","avatar_url":"https://avatars.githubusercontent.com/u/18521084?v=4","gravatar_id":"","url":"https://api.github.com/users/hj2016","html_url":"https://github.com/hj2016","followers_url":"https://api.github.com/users/hj2016/followers","following_url":"https://api.github.com/users/hj2016/following{/other_user}","gists_url":"https://api.github.com/users/hj2016/gists{/gist_id}","starred_url":"https://api.github.com/users/hj2016/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hj2016/subscriptions","organizations_url":"https://api.github.com/users/hj2016/orgs","repos_url":"https://api.github.com/users/hj2016/repos","events_url":"https://api.github.com/users/hj2016/events{/privacy}","received_events_url":"https://api.github.com/users/hj2016/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T06:19:48Z","updated_at":"2020-09-29T06:20:33Z","author_association":"CONTRIBUTOR","body":"@n3nash  I tried to  rebase and squash the commits but there are still two commits. Can you help me?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700475643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700532786","html_url":"https://github.com/apache/hudi/issues/2104#issuecomment-700532786","issue_url":"https://api.github.com/repos/apache/hudi/issues/2104","id":700532786,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDUzMjc4Ng==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T08:20:00Z","updated_at":"2020-09-29T08:20:00Z","author_association":"NONE","body":"@n3nash  I terminated the EMR 6.0.0 and started a new EMR Cluster ver. 5.30 and everything works fine here","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700532786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700597336","html_url":"https://github.com/apache/hudi/pull/2111#issuecomment-700597336","issue_url":"https://api.github.com/repos/apache/hudi/issues/2111","id":700597336,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDU5NzMzNg==","user":{"login":"linshan-ma","id":23548282,"node_id":"MDQ6VXNlcjIzNTQ4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/23548282?v=4","gravatar_id":"","url":"https://api.github.com/users/linshan-ma","html_url":"https://github.com/linshan-ma","followers_url":"https://api.github.com/users/linshan-ma/followers","following_url":"https://api.github.com/users/linshan-ma/following{/other_user}","gists_url":"https://api.github.com/users/linshan-ma/gists{/gist_id}","starred_url":"https://api.github.com/users/linshan-ma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linshan-ma/subscriptions","organizations_url":"https://api.github.com/users/linshan-ma/orgs","repos_url":"https://api.github.com/users/linshan-ma/repos","events_url":"https://api.github.com/users/linshan-ma/events{/privacy}","received_events_url":"https://api.github.com/users/linshan-ma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T09:54:01Z","updated_at":"2020-09-29T09:54:01Z","author_association":"CONTRIBUTOR","body":"> > According to thisÔºà[https://github.com/apache/hudi/issues/2051Ôºâ](https://github.com/apache/hudi/issues/2051%EF%BC%89) test„ÄÇI can't get the results I want„ÄÇWhen we set different valueÔºàhoodie.parquet.small.file.limitÔºâ, the results are still different\r\n> \r\n> @linshan-ma Could you please provide this test again? I couldn't visit the test you mentioned.\r\n\r\n@SteNicholas hi,this issue.https://github.com/apache/hudi/issues/2051","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700597336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700728117","html_url":"https://github.com/apache/hudi/issues/2101#issuecomment-700728117","issue_url":"https://api.github.com/repos/apache/hudi/issues/2101","id":700728117,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDcyODExNw==","user":{"login":"getniz","id":29088488,"node_id":"MDQ6VXNlcjI5MDg4NDg4","avatar_url":"https://avatars.githubusercontent.com/u/29088488?v=4","gravatar_id":"","url":"https://api.github.com/users/getniz","html_url":"https://github.com/getniz","followers_url":"https://api.github.com/users/getniz/followers","following_url":"https://api.github.com/users/getniz/following{/other_user}","gists_url":"https://api.github.com/users/getniz/gists{/gist_id}","starred_url":"https://api.github.com/users/getniz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/getniz/subscriptions","organizations_url":"https://api.github.com/users/getniz/orgs","repos_url":"https://api.github.com/users/getniz/repos","events_url":"https://api.github.com/users/getniz/events{/privacy}","received_events_url":"https://api.github.com/users/getniz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T14:05:15Z","updated_at":"2020-09-29T14:05:15Z","author_association":"NONE","body":"Closing this issue as I could use KSQL to flatten the incoming Nested JSON and then consume in HUDI instantaneously without staging.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700728117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700766623","html_url":"https://github.com/apache/hudi/pull/1567#issuecomment-700766623","issue_url":"https://api.github.com/repos/apache/hudi/issues/1567","id":700766623,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDc2NjYyMw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T15:02:00Z","updated_at":"2020-09-29T15:02:00Z","author_association":"MEMBER","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700766623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700783352","html_url":"https://github.com/apache/hudi/pull/1978#issuecomment-700783352","issue_url":"https://api.github.com/repos/apache/hudi/issues/1978","id":700783352,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDc4MzM1Mg==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T15:27:28Z","updated_at":"2020-09-29T15:27:28Z","author_association":"CONTRIBUTOR","body":"> @n3nash I tried to rebase and squash the commits but there are still two commits. Can you help me?\r\n\r\nSince @hj2016 has some problem in rebasing. If you @n3nash have no other concern, you would use `squash and merge` button to merge the PR.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700783352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700819993","html_url":"https://github.com/apache/hudi/pull/2129#issuecomment-700819993","issue_url":"https://api.github.com/repos/apache/hudi/issues/2129","id":700819993,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDgxOTk5Mw==","user":{"login":"satishkotha","id":2992755,"node_id":"MDQ6VXNlcjI5OTI3NTU=","avatar_url":"https://avatars.githubusercontent.com/u/2992755?v=4","gravatar_id":"","url":"https://api.github.com/users/satishkotha","html_url":"https://github.com/satishkotha","followers_url":"https://api.github.com/users/satishkotha/followers","following_url":"https://api.github.com/users/satishkotha/following{/other_user}","gists_url":"https://api.github.com/users/satishkotha/gists{/gist_id}","starred_url":"https://api.github.com/users/satishkotha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satishkotha/subscriptions","organizations_url":"https://api.github.com/users/satishkotha/orgs","repos_url":"https://api.github.com/users/satishkotha/repos","events_url":"https://api.github.com/users/satishkotha/events{/privacy}","received_events_url":"https://api.github.com/users/satishkotha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T16:26:20Z","updated_at":"2020-09-29T16:26:20Z","author_association":"MEMBER","body":"> Can you test on Hive to check if Hive can read data with hudi avro timestamp type?\r\n> I think there are more test cases and other things to let Hive support timestamp type.\r\n\r\nYes, additional changes are needed in Hive. For short term, we made a temporary patch to Hive to make it work (@s-sanjay plans to open a draft PR soon). \r\nI believe Hive4 also supports this in a different way.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700819993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700966424","html_url":"https://github.com/apache/hudi/issues/2123#issuecomment-700966424","issue_url":"https://api.github.com/repos/apache/hudi/issues/2123","id":700966424,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDk2NjQyNA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T20:25:08Z","updated_at":"2020-09-29T20:25:08Z","author_association":"CONTRIBUTOR","body":"@satishkotha can you please help here ? This seems like the same issue we encountered.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700966424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700996406","html_url":"https://github.com/apache/hudi/pull/2064#issuecomment-700996406","issue_url":"https://api.github.com/repos/apache/hudi/issues/2064","id":700996406,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDk5NjQwNg==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T21:18:46Z","updated_at":"2020-09-29T21:18:46Z","author_association":"MEMBER","body":"> Also see a lot of this polluting the test logs.  can we remove or avoid them on travis\r\n\r\nFiled https://github.com/apache/hudi/pull/2132 for this issue.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/700996406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701026945","html_url":"https://github.com/apache/hudi/pull/2064#issuecomment-701026945","issue_url":"https://api.github.com/repos/apache/hudi/issues/2064","id":701026945,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTAyNjk0NQ==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T22:31:30Z","updated_at":"2020-09-29T22:31:30Z","author_association":"MEMBER","body":"> I instrumented the code to track writeConfig.useFileListingMetadata. It looks like it is being disabled for a dataset that has the metadata dataset\r\n> \r\n> 20/09/26 02:58:11 ERROR HoodieMetadata: writeConfig.useFileListingMetadata() =true\r\n> 20/09/26 02:58:14 ERROR HoodieMetadata: writeConfig.useFileListingMetadata() =false\r\n> \r\n> The above line is coming from HoodieMetadata.init() method. I am unable to test using spark.write() as it seems to fallback to listing\r\n\r\n\r\nI think the second log (writeConfig.useFileListingMetadata() =false) is coming from the Hoodie Metadata Table's internal writeConfig. Since the HUDI Metadata Table is also a HUDI Table, it also has a HoodieWriteConfig wherein the useFileListingMetadata is disabled.  \r\n\r\nFallback to listing is by design to prevent issues during adoption.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701026945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701052206","html_url":"https://github.com/apache/hudi/pull/2064#issuecomment-701052206","issue_url":"https://api.github.com/repos/apache/hudi/issues/2064","id":701052206,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTA1MjIwNg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T23:48:30Z","updated_at":"2020-09-29T23:48:30Z","author_association":"CONTRIBUTOR","body":"@prashantwason : Also Have you been able to run metadata list commands successfully ? Did you encounter this issue : Caused by: java.lang.ClassNotFoundException: org.apache.hudi.org.apache.hadoop.hbase.KeyValue$KeyComparator ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701052206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701123956","html_url":"https://github.com/apache/hudi/pull/2125#issuecomment-701123956","issue_url":"https://api.github.com/repos/apache/hudi/issues/2125","id":701123956,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTEyMzk1Ng==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T02:42:23Z","updated_at":"2020-09-30T02:42:23Z","author_association":"CONTRIBUTOR","body":"@leesf  the comment have fixed","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701123956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701138200","html_url":"https://github.com/apache/hudi/pull/2133#issuecomment-701138200","issue_url":"https://api.github.com/repos/apache/hudi/issues/2133","id":701138200,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTEzODIwMA==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T03:39:51Z","updated_at":"2020-09-30T03:39:51Z","author_association":"CONTRIBUTOR","body":"@n3nash  hi,please help to review .","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701138200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701149391","html_url":"https://github.com/apache/hudi/pull/2092#issuecomment-701149391","issue_url":"https://api.github.com/repos/apache/hudi/issues/2092","id":701149391,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTE0OTM5MQ==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T04:27:55Z","updated_at":"2020-09-30T04:27:55Z","author_association":"CONTRIBUTOR","body":"@nsivabalan I actually fixed the rollback node as well, need a couple of days to add tests for it after which we can merge it and you will have a fully working DAG with all nodes","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701149391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701154113","html_url":"https://github.com/apache/hudi/issues/2123#issuecomment-701154113","issue_url":"https://api.github.com/repos/apache/hudi/issues/2123","id":701154113,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTE1NDExMw==","user":{"login":"satishkotha","id":2992755,"node_id":"MDQ6VXNlcjI5OTI3NTU=","avatar_url":"https://avatars.githubusercontent.com/u/2992755?v=4","gravatar_id":"","url":"https://api.github.com/users/satishkotha","html_url":"https://github.com/satishkotha","followers_url":"https://api.github.com/users/satishkotha/followers","following_url":"https://api.github.com/users/satishkotha/following{/other_user}","gists_url":"https://api.github.com/users/satishkotha/gists{/gist_id}","starred_url":"https://api.github.com/users/satishkotha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satishkotha/subscriptions","organizations_url":"https://api.github.com/users/satishkotha/orgs","repos_url":"https://api.github.com/users/satishkotha/repos","events_url":"https://api.github.com/users/satishkotha/events{/privacy}","received_events_url":"https://api.github.com/users/satishkotha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T04:48:23Z","updated_at":"2020-09-30T04:50:32Z","author_association":"MEMBER","body":"This is a bit complicated. Hudi uses spark converters to convert dataframe type into parquet type. Spark SchemaConverters converts timestamp to  [int64](https://github.com/apache/spark/blob/master/external/avro/src/main/scala/org/apache/spark/sql/avro/SchemaConverters.scala#L164) with logical type 'TIMESTAMP_MICROS'.\r\n\r\nThis is because int96 is no longer supported in [parquet](https://issues.apache.org/jira/browse/PARQUET-1883), especially parquet-avro module. In general, int96 is discouraged going forward. \r\n\r\nTo make timestamp work, we had to \r\n1) Change query engines to support reading parquet logical type. Example for [presto](https://github.com/prestodb/presto/pull/15074/files). We did similar change for Hive. You probably need similar change in Athena\r\n2) Change DLASync/HiveSync to convert logical type TIMESTAMP_MICROS as  hive type 'timestamp'. [PR here](https://github.com/apache/hudi/pull/2129)\r\n\r\nUnfortunately, there is no clean workaround. As i mentioned, this is a bit complicated. Please don't hesitate to ping me if you have any questions.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701154113/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701414946","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-701414946","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":701414946,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTQxNDk0Ng==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T14:08:09Z","updated_at":"2020-09-30T14:08:09Z","author_association":"MEMBER","body":"rebasing against master now, its a pretty tricky one, given #2048 has introduced a new action and made changes on top of WriteClient ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701414946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701529641","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-701529641","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":701529641,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTUyOTY0MQ==","user":{"login":"bschell","id":8600774,"node_id":"MDQ6VXNlcjg2MDA3NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/8600774?v=4","gravatar_id":"","url":"https://api.github.com/users/bschell","html_url":"https://github.com/bschell","followers_url":"https://api.github.com/users/bschell/followers","following_url":"https://api.github.com/users/bschell/following{/other_user}","gists_url":"https://api.github.com/users/bschell/gists{/gist_id}","starred_url":"https://api.github.com/users/bschell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bschell/subscriptions","organizations_url":"https://api.github.com/users/bschell/orgs","repos_url":"https://api.github.com/users/bschell/repos","events_url":"https://api.github.com/users/bschell/events{/privacy}","received_events_url":"https://api.github.com/users/bschell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T17:21:27Z","updated_at":"2020-09-30T17:21:27Z","author_association":"CONTRIBUTOR","body":"In our testing we've found some larger scale issues with this approach and conflicts with hudi-0.6.0 refactors. Mainly with spark datasource api interface changes, need to reevaluate this.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701529641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701531946","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-701531946","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":701531946,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTUzMTk0Ng==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T17:25:37Z","updated_at":"2020-09-30T17:25:37Z","author_association":"MEMBER","body":"@bschell if you could expand on them, we can hash out a solution. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701531946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701540715","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-701540715","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":701540715,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTU0MDcxNQ==","user":{"login":"bschell","id":8600774,"node_id":"MDQ6VXNlcjg2MDA3NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/8600774?v=4","gravatar_id":"","url":"https://api.github.com/users/bschell","html_url":"https://github.com/bschell","followers_url":"https://api.github.com/users/bschell/followers","following_url":"https://api.github.com/users/bschell/following{/other_user}","gists_url":"https://api.github.com/users/bschell/gists{/gist_id}","starred_url":"https://api.github.com/users/bschell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bschell/subscriptions","organizations_url":"https://api.github.com/users/bschell/orgs","repos_url":"https://api.github.com/users/bschell/repos","events_url":"https://api.github.com/users/bschell/events{/privacy}","received_events_url":"https://api.github.com/users/bschell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T17:42:01Z","updated_at":"2020-09-30T17:42:01Z","author_association":"CONTRIBUTOR","body":"@vinothchandar We are compiling the issues right now. I will update here once we are finished later today/tomorrow","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701540715/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701575440","html_url":"https://github.com/apache/hudi/pull/1566#issuecomment-701575440","issue_url":"https://api.github.com/repos/apache/hudi/issues/1566","id":701575440,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTU3NTQ0MA==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T18:47:13Z","updated_at":"2020-09-30T18:47:13Z","author_association":"CONTRIBUTOR","body":"LGTM! @bvaradar Thank you for providing the clarifications. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701575440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701876786","html_url":"https://github.com/apache/hudi/pull/2137#issuecomment-701876786","issue_url":"https://api.github.com/repos/apache/hudi/issues/2137","id":701876786,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTg3Njc4Ng==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T04:29:08Z","updated_at":"2020-10-01T04:29:08Z","author_association":"MEMBER","body":"Thanks @xushiyan for the initiative! ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701876786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701903486","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-701903486","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":701903486,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTkwMzQ4Ng==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T05:52:48Z","updated_at":"2020-10-01T05:52:48Z","author_association":"MEMBER","body":"@wangxianghu @yanghua I have rebased this against master. Please take a look at my changes.\r\n\r\nHigh level, we could re-use more code, but it needs an abstraction that can wrap `RDD` or `DataSet` or `DataStream` adequately and support basic operations like `.map()`, `reduceByKey()` etc. We can do this in a second pass once we have a working Flink impl.  For now this will do. \r\n\r\nI am trying to get the tests to pass. if they do, we could go ahead and merge","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701903486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701949671","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-701949671","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":701949671,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTk0OTY3MQ==","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T07:35:46Z","updated_at":"2020-10-01T07:35:46Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/1827?src=pr&el=h1) Report\n> Merging [#1827](https://codecov.io/gh/apache/hudi/pull/1827?src=pr&el=desc) into [master](https://codecov.io/gh/apache/hudi/commit/a99e93bed542c8ae30a641d1df616cc2cd5798e1?el=desc) will **decrease** coverage by `3.75%`.\n> The diff coverage is `30.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/1827/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/1827?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1827      +/-   ##\n============================================\n- Coverage     59.89%   56.14%   -3.76%     \n+ Complexity     4454     2658    -1796     \n============================================\n  Files           558      324     -234     \n  Lines         23378    14775    -8603     \n  Branches       2348     1539     -809     \n============================================\n- Hits          14003     8295    -5708     \n+ Misses         8355     5783    -2572     \n+ Partials       1020      697     -323     \n```\n\n| Flag | Coverage Œî | Complexity Œî | |\n|---|---|---|---|\n| #hudicli | `38.37% <30.00%> (-27.83%)` | `193.00 <0.00> (-1615.00)` | |\n| #hudiclient | `100.00% <√∏> (+25.46%)` | `0.00 <√∏> (-1615.00)` | :arrow_up: |\n| #hudicommon | `54.74% <√∏> (√∏)` | `1793.00 <√∏> (√∏)` | |\n| #hudihadoopmr | `?` | `?` | |\n| #hudispark | `67.18% <√∏> (-0.02%)` | `311.00 <√∏> (√∏)` | |\n| #huditimelineservice | `64.43% <√∏> (√∏)` | `49.00 <√∏> (√∏)` | |\n| #hudiutilities | `69.43% <√∏> (+0.05%)` | `312.00 <√∏> (√∏)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/1827?src=pr&el=tree) | Coverage Œî | Complexity Œî | |\n|---|---|---|---|\n| [...rg/apache/hudi/cli/commands/SavepointsCommand.java](https://codecov.io/gh/apache/hudi/pull/1827/diff?src=pr&el=tree#diff-aHVkaS1jbGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpL2NvbW1hbmRzL1NhdmVwb2ludHNDb21tYW5kLmphdmE=) | `14.28% <0.00%> (√∏)` | `3.00 <0.00> (√∏)` | |\n| [...main/java/org/apache/hudi/cli/utils/SparkUtil.java](https://codecov.io/gh/apache/hudi/pull/1827/diff?src=pr&el=tree#diff-aHVkaS1jbGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpL3V0aWxzL1NwYXJrVXRpbC5qYXZh) | `0.00% <0.00%> (√∏)` | `0.00 <0.00> (√∏)` | |\n| [...n/java/org/apache/hudi/cli/commands/SparkMain.java](https://codecov.io/gh/apache/hudi/pull/1827/diff?src=pr&el=tree#diff-aHVkaS1jbGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpL2NvbW1hbmRzL1NwYXJrTWFpbi5qYXZh) | `6.43% <37.50%> (+0.40%)` | `4.00 <0.00> (√∏)` | |\n| [...src/main/java/org/apache/hudi/DataSourceUtils.java](https://codecov.io/gh/apache/hudi/pull/1827/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9EYXRhU291cmNlVXRpbHMuamF2YQ==) | `45.36% <0.00%> (√∏)` | `21.00% <0.00%> (√∏%)` | |\n| [...in/scala/org/apache/hudi/HoodieStreamingSink.scala](https://codecov.io/gh/apache/hudi/pull/1827/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2h1ZGkvSG9vZGllU3RyZWFtaW5nU2luay5zY2FsYQ==) | `24.00% <0.00%> (√∏)` | `10.00% <0.00%> (√∏%)` | |\n| [...n/scala/org/apache/hudi/HoodieSparkSqlWriter.scala](https://codecov.io/gh/apache/hudi/pull/1827/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2h1ZGkvSG9vZGllU3BhcmtTcWxXcml0ZXIuc2NhbGE=) | `56.20% <0.00%> (√∏)` | `0.00% <0.00%> (√∏%)` | |\n| [...in/java/org/apache/hudi/utilities/UtilHelpers.java](https://codecov.io/gh/apache/hudi/pull/1827/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL1V0aWxIZWxwZXJzLmphdmE=) | `64.59% <0.00%> (√∏)` | `30.00% <0.00%> (√∏%)` | |\n| [...apache/hudi/utilities/deltastreamer/DeltaSync.java](https://codecov.io/gh/apache/hudi/pull/1827/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvRGVsdGFTeW5jLmphdmE=) | `68.16% <0.00%> (√∏)` | `39.00% <0.00%> (√∏%)` | |\n| [.../hudi/async/SparkStreamingAsyncCompactService.java](https://codecov.io/gh/apache/hudi/pull/1827/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9hc3luYy9TcGFya1N0cmVhbWluZ0FzeW5jQ29tcGFjdFNlcnZpY2UuamF2YQ==) | `0.00% <0.00%> (√∏)` | `0.00% <0.00%> (√∏%)` | |\n| [.../hudi/internal/HoodieDataSourceInternalWriter.java](https://codecov.io/gh/apache/hudi/pull/1827/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9pbnRlcm5hbC9Ib29kaWVEYXRhU291cmNlSW50ZXJuYWxXcml0ZXIuamF2YQ==) | `87.50% <0.00%> (√∏)` | `8.00% <0.00%> (√∏%)` | |\n| ... and [46 more](https://codecov.io/gh/apache/hudi/pull/1827/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701949671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701951988","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-701951988","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":701951988,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTk1MTk4OA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T07:40:09Z","updated_at":"2020-10-01T07:40:09Z","author_association":"CONTRIBUTOR","body":"> @wangxianghu @yanghua I have rebased this against master. Please take a look at my changes.\r\n> \r\n> High level, we could re-use more code, but it needs an abstraction that can wrap `RDD` or `DataSet` or `D\r\n\r\n> @wangxianghu @yanghua I have rebased this against master. Please take a look at my changes.\r\n> \r\n> High level, we could re-use more code, but it needs an abstraction that can wrap `RDD` or `DataSet` or `DataStream` adequately and support basic operations like `.map()`, `reduceByKey()` etc. We can do this in a second pass once we have a working Flink impl. For now this will do.\r\n> \r\n> I am trying to get the tests to pass. if they do, we could go ahead and merge\r\n\r\nThanks, @vinothchandar, this is really great work! \r\nYes, we can do more abstractions about basic `map`, `reduceByKey` methods in `HoodieEngineContext`, or some Util classes next.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701951988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701963298","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-701963298","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":701963298,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTk2MzI5OA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T08:01:02Z","updated_at":"2020-10-01T08:01:02Z","author_association":"MEMBER","body":"I actually figured out that we can remove `P` altogether. since `HoodieIndex#fetchRecordLocation` is not used much outside of internal APIs. So will push a final change for that . tests are passing now ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701963298/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":2,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701989092","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-701989092","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":701989092,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTk4OTA5Mg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T08:49:07Z","updated_at":"2020-10-01T08:49:07Z","author_association":"MEMBER","body":"@wangxianghu Please help test this out if possible. Once the tests pass again, planning to merge this, morning PST \r\n\r\ncc @yanghua ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/701989092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702062546","html_url":"https://github.com/apache/hudi/issues/2130#issuecomment-702062546","issue_url":"https://api.github.com/repos/apache/hudi/issues/2130","id":702062546,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjA2MjU0Ng==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T11:10:55Z","updated_at":"2020-10-01T11:10:55Z","author_association":"CONTRIBUTOR","body":"@Trevor-zhang : IIUC, this is not specific to Hudi. Did you get the full exception stack trace from the server logs ? Are you sure this due to hive.input.format setting ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702062546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702072024","html_url":"https://github.com/apache/hudi/issues/2131#issuecomment-702072024","issue_url":"https://api.github.com/repos/apache/hudi/issues/2131","id":702072024,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjA3MjAyNA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T11:31:00Z","updated_at":"2020-10-01T11:31:00Z","author_association":"CONTRIBUTOR","body":"@tandonraghavs : For compaction, the payload class defined in hoodie.properties is used for pre-combining. Can you check what is the payload class configured in hoodie.properties ?\r\n\r\nAs you would have noticed, compaction would first pre-combines all delta records first before merging using combineAndGetUpdateValue. So, you would need to implement custom merging in preCombine method in your payload class. \r\n\r\nIIUC, Oplogs are partial row image(updates). Wouldn't it be possible to employ the same merging logic that you were doing as part of combineAndGetUpdateValue ?\r\n\r\nAlso, which version of Hudi are you using ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702072024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702082811","html_url":"https://github.com/apache/hudi/issues/2131#issuecomment-702082811","issue_url":"https://api.github.com/repos/apache/hudi/issues/2131","id":702082811,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjA4MjgxMQ==","user":{"login":"tandonraghavs","id":53559945,"node_id":"MDQ6VXNlcjUzNTU5OTQ1","avatar_url":"https://avatars.githubusercontent.com/u/53559945?v=4","gravatar_id":"","url":"https://api.github.com/users/tandonraghavs","html_url":"https://github.com/tandonraghavs","followers_url":"https://api.github.com/users/tandonraghavs/followers","following_url":"https://api.github.com/users/tandonraghavs/following{/other_user}","gists_url":"https://api.github.com/users/tandonraghavs/gists{/gist_id}","starred_url":"https://api.github.com/users/tandonraghavs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tandonraghavs/subscriptions","organizations_url":"https://api.github.com/users/tandonraghavs/orgs","repos_url":"https://api.github.com/users/tandonraghavs/repos","events_url":"https://api.github.com/users/tandonraghavs/events{/privacy}","received_events_url":"https://api.github.com/users/tandonraghavs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T11:54:04Z","updated_at":"2020-10-01T16:15:47Z","author_association":"NONE","body":"@bvaradar I am using my Custom class as `PAYLOAD_CLASS_OPT_KEY` key -> But the problem is **preCombine** doesnt have reference to **Schema** and it is giving me bytes , so how do i get the Generic Record out of it? \r\nWhich is the reason I am not able to implement any custom logic in _preCombine_ as I did in _combineAndGetUpdateValue_.\r\n\r\nI am using hudi via Spark Datasource (0.5.3).\r\n\r\nAnd due to the scale of data I dont want to run Compaction after every commit, so using _INLINE_COMPACT_NUM_DELTA_COMMITS_PROP_\r\n\r\n- How do i get hold of Schema in preCombine?\r\n\r\nSample Code of my Spark job. \r\n**jsonDf** -> This is a simple Json String which contains the resords.\r\n\r\n````\r\n               Dataset<GenericRecord> data=jsonDf.map((MapFunction<String, GenericRecord>) record ->\r\n                                        generateHoodieRecord(record, schemaStr),Encoders.bean(GenericRecord.class));\r\n                \r\n               Dataset<Row> ds= AvroConversionUtils.createDataFrame(data.rdd(),\r\n                                                schemaStr,sparkSession);\r\n               \r\n               ds\r\n                    .write().format(\"org.apache.hudi\").\r\n                    .options ()...\r\n                    .mode(SaveMode.Append)\r\n                    .save(tablePath);\r\n\r\n\r\n````\r\nThis Ticket also talks about the same - https://issues.apache.org/jira/browse/HUDI-898\r\n\r\n- Also, i think we cannot add/remove any field values in preCombine, as doing it manually is causing _EOFException in reading log file._\r\n\r\n- Am i missing something here? So, i dont think we can use Hudi if we have partial Records coming in for oplogs and we have to apply all the oplogs to the existing dataset.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702082811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702125051","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-702125051","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":702125051,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjEyNTA1MQ==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T13:12:51Z","updated_at":"2020-10-01T14:10:50Z","author_association":"CONTRIBUTOR","body":"1. Run quickstart demo: found the warn log: \r\n`20/10/01 21:11:18 WARN embedded.EmbeddedTimelineService: Unable to find driver bind address from spark config`, but works fine, the warn log is not found in 0.6.0. @vinothchandar @wangxianghu \r\n2. Ran my own unit tests, works fine.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702125051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702174407","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-702174407","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":702174407,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjE3NDQwNw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T14:28:10Z","updated_at":"2020-10-01T14:28:10Z","author_association":"MEMBER","body":"@leesf do you see the following exception? could not understand how you ll get the other one even. \r\n\r\n```\r\nLOG.info(\"Starting Timeline service !!\");\r\n        Option<String> hostAddr = context.getProperty(EngineProperty.EMBEDDED_SERVER_HOST);\r\n        if (!hostAddr.isPresent()) {\r\n          throw new HoodieException(\"Unable to find host address to bind timeline server to.\");\r\n        }\r\n        timelineServer = Option.of(new EmbeddedTimelineService(context, hostAddr.get(),\r\n            config.getClientSpecifiedViewStorageConfig()));\r\n```\r\n\r\nEither way, good pointer. the behavior has changed around this a bit actually. So will try and tweak and push a fix ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702174407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702222008","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-702222008","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":702222008,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjIyMjAwOA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T15:40:05Z","updated_at":"2020-10-01T15:40:05Z","author_association":"CONTRIBUTOR","body":"@vinothchandar @yanghua @leesf The demo runs well in my local, except the warning `WARN embedded.EmbeddedTimelineService: Unable to find driver bind address from spark config`","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702222008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702239474","html_url":"https://github.com/apache/hudi/issues/2110#issuecomment-702239474","issue_url":"https://api.github.com/repos/apache/hudi/issues/2110","id":702239474,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjIzOTQ3NA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-01T16:08:18Z","updated_at":"2020-10-01T16:08:18Z","author_association":"CONTRIBUTOR","body":"@tooptoop4 No, the size of the existing table should not matter.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/702239474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]