[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1911196932","html_url":"https://github.com/apache/accumulo/pull/4196#issuecomment-1911196932","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4196","id":1911196932,"node_id":"IC_kwDOACaFSM5x6o0E","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T00:06:38Z","updated_at":"2024-01-26T00:06:38Z","author_association":"CONTRIBUTOR","body":"Opened #4197 for the RowFilter bug that was found and fixed in this PR.  #4197 is against 2.1 and it adds a test that is not in this PR.  This PR only has the fix.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1911196932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1911218745","html_url":"https://github.com/apache/accumulo/pull/4158#issuecomment-1911218745","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4158","id":1911218745,"node_id":"IC_kwDOACaFSM5x6uI5","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T00:27:30Z","updated_at":"2024-01-26T00:27:30Z","author_association":"MEMBER","body":"> Additionally, if we want to allow the user to control the level of these compaction related messages, then we could put them in a class with a named logger specific to compaction information. This would allow the user to direct these specific compaction messages to a different file if they so choose.\r\n\r\n:+1: to that","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1911218745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1911247419","html_url":"https://github.com/apache/accumulo/pull/4098#issuecomment-1911247419","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4098","id":1911247419,"node_id":"IC_kwDOACaFSM5x61I7","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T01:04:47Z","updated_at":"2024-01-26T01:04:47Z","author_association":"MEMBER","body":"> Decided to not deprecate the table.file.max property in favor of #4127. However not going to close this PR for now, the changes to make all the test stop using the table.file.max prop in this PR still seem like good changes to make. So plan to make this no longer deprecate the prop, but still remove the unnecessary use of the prop in all of the test.\r\n\r\nThe description update to document how it works with the default strategy would be good to keep from this as well, if that's not already done as part of 4127.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1911247419/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1911285693","html_url":"https://github.com/apache/accumulo/pull/4194#issuecomment-1911285693","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4194","id":1911285693,"node_id":"IC_kwDOACaFSM5x6-e9","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T01:54:55Z","updated_at":"2024-01-26T02:30:25Z","author_association":"CONTRIBUTOR","body":"The primary driver for this change was to get it documented why the `:` and `+` conversion is being used.  I suspect that if we can change places where we use strings, but could use HostAndPort, the other locations will be uncovered / changed.\r\n\r\nThese changes (except for the test) are all places that I could find that were calling replace.  If there are other places, they are doing something other than calling replace.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1911285693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912023052","html_url":"https://github.com/apache/accumulo/issues/4190#issuecomment-1912023052","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4190","id":1912023052,"node_id":"IC_kwDOACaFSM5x9ygM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T12:51:36Z","updated_at":"2024-01-26T12:51:36Z","author_association":"CONTRIBUTOR","body":"@ivakegg  - are you setting `Property.TABLE_COMPACTION_DISPATCHER`, or using the default value?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912023052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912049261","html_url":"https://github.com/apache/accumulo/issues/4190#issuecomment-1912049261","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4190","id":1912049261,"node_id":"IC_kwDOACaFSM5x945t","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T13:13:00Z","updated_at":"2024-01-26T13:13:00Z","author_association":"CONTRIBUTOR","body":"Looking at the code, it appears that [TableConfiguration.createCompactionDispatcher](https://github.com/apache/accumulo/blob/2.1/server/base/src/main/java/org/apache/accumulo/server/conf/TableConfiguration.java#L178) will return null when the class fails to load, and so null is [stored](https://github.com/apache/accumulo/blob/main/server/base/src/main/java/org/apache/accumulo/server/conf/TableConfiguration.java#L77) in the Deriver.  When [CompactableImpl.getConfiguredService](https://github.com/apache/accumulo/blob/2.1/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/CompactableImpl.java#L1484) is called, it returns the default service. There are several places in CompactableImpl where nothing is done if the configured service that is returned from `getConfiguredService` does not match the expected value. I'm assuming that you are running into this.\r\n\r\nLooking at the [javadoc](https://github.com/apache/accumulo/blob/2.1/core/src/main/java/org/apache/accumulo/core/conf/AccumuloConfiguration.java#L546) for creating a new Deriver, it says that it is senstive to configuration changes.  I would try changing the context name to a new valid context and see if that resolves the issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912049261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912101522","html_url":"https://github.com/apache/accumulo/issues/4190#issuecomment-1912101522","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4190","id":1912101522,"node_id":"IC_kwDOACaFSM5x-FqS","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T13:51:30Z","updated_at":"2024-01-26T14:20:44Z","author_association":"CONTRIBUTOR","body":"The problem is that the class context is valid, but because of a thundering herd scenario, some of the tservers fail to load the context initially.  Subsequently the tservers gets stuck.  Simply changing the context to another one will results in the same scenario.  I need something here that retries to load the class via the context classloader and the subsequently the compaction dispatcher.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912101522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912102750","html_url":"https://github.com/apache/accumulo/issues/4190#issuecomment-1912102750","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4190","id":1912102750,"node_id":"IC_kwDOACaFSM5x-F9e","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T13:52:20Z","updated_at":"2024-01-26T14:32:34Z","author_association":"CONTRIBUTOR","body":"I do not believe we are not setting the dispatcher property.  If we are, then we are setting it to the default value.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912102750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912151168","html_url":"https://github.com/apache/accumulo/issues/4190#issuecomment-1912151168","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4190","id":1912151168,"node_id":"IC_kwDOACaFSM5x-RyA","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T14:25:20Z","updated_at":"2024-01-26T14:25:20Z","author_association":"CONTRIBUTOR","body":"If I set property via the shell or via the property editor to the same value, does that trigger the Deriver to reload ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912151168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912215222","html_url":"https://github.com/apache/accumulo/issues/4190#issuecomment-1912215222","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4190","id":1912215222,"node_id":"IC_kwDOACaFSM5x-ha2","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T15:04:54Z","updated_at":"2024-01-26T15:04:54Z","author_association":"CONTRIBUTOR","body":"> If I set property via the shell or via the property editor to the same value, does that trigger the Deriver to reload ?\r\n\r\nThat I am not sure of. @keith-turner or @EdColeman might be able to answer that. IIRC the Deriver functionality is new in 2.1 with the re-write of the configuration implementation.\r\n\r\n> The problem is that the class context is valid, but because of a thundering herd scenario\r\n\r\nI assume that you have set the replication on the HDFS classpath artifacts sufficiently high. Have you tried other mechanisms that VFS supports (e.g. http) for distributing the jars?\r\n\r\n> I need something here that retries to load the class via the context classloader and the subsequently the compaction dispatcher.\r\n\r\nI think the VFS classloader should retry. Presumably the VFS classloader is getting an exception from HDFS, so it should retry in that case. If we were to do something in Accumulo, then we would have to do it in a lot of places. Additionally, the contract for a ClassLoader is that you call it once and you either get a Class or an Exception. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912215222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912222065","html_url":"https://github.com/apache/accumulo/issues/4190#issuecomment-1912222065","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4190","id":1912222065,"node_id":"IC_kwDOACaFSM5x-jFx","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T15:09:24Z","updated_at":"2024-01-26T15:09:24Z","author_association":"CONTRIBUTOR","body":"Any change in ZooKeeper, either by the shell or the prop editor will trigger a property reload.  It is independent of the method used to change the values.  There is also a back-ground thread that sweeps through and will force an update if a watch notification was missed.  The sweep is printed in the logs if you think watches are being missed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912222065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912238064","html_url":"https://github.com/apache/accumulo/issues/4190#issuecomment-1912238064","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4190","id":1912238064,"node_id":"IC_kwDOACaFSM5x-m_w","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T15:19:52Z","updated_at":"2024-01-26T15:19:52Z","author_association":"CONTRIBUTOR","body":"I just confirmed that in a running instance.  This might provide the work around I am looking for.  Next time I have a chance I will reproduce the situation and then try this.  I would still like an attempt to recreate the dispatcher if it is null but a known work around is always good.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912238064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912243693","html_url":"https://github.com/apache/accumulo/issues/4190#issuecomment-1912243693","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4190","id":1912243693,"node_id":"IC_kwDOACaFSM5x-oXt","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T15:23:27Z","updated_at":"2024-01-26T15:23:27Z","author_association":"CONTRIBUTOR","body":"@ivakegg are you okay if this is removed as a blocker for 2.1.3 then?  We can keep the issue, but depending on the release schedule and any changes, the changes may not make 2.1.3.  Are you okay with that? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912243693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912247249","html_url":"https://github.com/apache/accumulo/issues/4190#issuecomment-1912247249","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4190","id":1912247249,"node_id":"IC_kwDOACaFSM5x-pPR","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T15:25:44Z","updated_at":"2024-01-26T15:25:44Z","author_association":"CONTRIBUTOR","body":"yes I am ok with that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912247249/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912576170","html_url":"https://github.com/apache/accumulo/pull/4199#issuecomment-1912576170","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4199","id":1912576170,"node_id":"IC_kwDOACaFSM5x_5iq","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T19:24:46Z","updated_at":"2024-01-26T19:24:46Z","author_association":"CONTRIBUTOR","body":"I'm going to merge this now and then create a follow on PR so that the same tests that run for the Accumulo store in `AccumuloStoreReadWriteIT` will be run against the Zoostore too","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912576170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912845279","html_url":"https://github.com/apache/accumulo/pull/4202#issuecomment-1912845279","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4202","id":1912845279,"node_id":"IC_kwDOACaFSM5yA7Pf","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T23:58:21Z","updated_at":"2024-01-26T23:58:21Z","author_association":"CONTRIBUTOR","body":"I was hoping git would detect the file rename (it did initially) but after adding more changes it no longer detected `AccumuloStoreReadWriteIT` being renamed to `FateStoreIT` so it shows up as a delete/create in the diff.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912845279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912855846","html_url":"https://github.com/apache/accumulo/pull/4202#issuecomment-1912855846","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4202","id":1912855846,"node_id":"IC_kwDOACaFSM5yA90m","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T00:12:23Z","updated_at":"2024-01-27T00:12:23Z","author_association":"CONTRIBUTOR","body":"> I was hoping git would detect the file rename (it did initially) but after adding more changes it no longer detected AccumuloStoreReadWriteIT being renamed to FateStoreIT so it shows up as a delete/create in the diff.\r\n\r\nThat would have been nice.  Were any changes made to the actual tests?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912855846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912858075","html_url":"https://github.com/apache/accumulo/pull/4202#issuecomment-1912858075","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4202","id":1912858075,"node_id":"IC_kwDOACaFSM5yA-Xb","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T00:15:10Z","updated_at":"2024-01-27T00:15:10Z","author_association":"CONTRIBUTOR","body":"> > I was hoping git would detect the file rename (it did initially) but after adding more changes it no longer detected AccumuloStoreReadWriteIT being renamed to FateStoreIT so it shows up as a delete/create in the diff.\r\n> \r\n> That would have been nice. Were any changes made to the actual tests?\r\n\r\nThere were some, I refactored the class a bit so it was abstract and uses the helper executor stuff so that the child classes handle the actual creation of the store. But the logic in the 3 tests themselves are basically identical so i was surprised it didn't detect the rename as so much of the file is the same.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912858075/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912859430","html_url":"https://github.com/apache/accumulo/pull/4202#issuecomment-1912859430","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4202","id":1912859430,"node_id":"IC_kwDOACaFSM5yA-sm","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T00:17:08Z","updated_at":"2024-01-27T00:17:08Z","author_association":"CONTRIBUTOR","body":"> But the logic in the 3 tests themselves are basically identical\r\n\r\nok, I didn't look at the actual test.  Just looked a the changes around the test to support both stores.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912859430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912860371","html_url":"https://github.com/apache/accumulo/pull/4202#issuecomment-1912860371","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4202","id":1912860371,"node_id":"IC_kwDOACaFSM5yA-7T","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T00:18:25Z","updated_at":"2024-01-27T00:18:25Z","author_association":"CONTRIBUTOR","body":"> ok, I didn't look at the actual test. Just looked a the changes around the test to support both stores.\r\n\r\nSounds good, yeah the tests didn't change so you already reviewed it. I could have done a separate rename commit first and pushed that to elasticity but not a big deal so i'll just merge this as.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1912860371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1913188213","html_url":"https://github.com/apache/accumulo/pull/4203#issuecomment-1913188213","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4203","id":1913188213,"node_id":"IC_kwDOACaFSM5yCO91","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T15:34:38Z","updated_at":"2024-01-27T15:34:38Z","author_association":"CONTRIBUTOR","body":"I bumped the sleep time to 50ms to give a small buffer to guarantee the timestamp definitely will change depending on the JVM, the test is very fast so it shouldn't be noticeable. We could use the waitFor() call but seems like overkill in this case and this should be fine.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1913188213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1914582089","html_url":"https://github.com/apache/accumulo/pull/3969#issuecomment-1914582089","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3969","id":1914582089,"node_id":"IC_kwDOACaFSM5yHjRJ","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-29T12:20:32Z","updated_at":"2024-01-29T12:20:32Z","author_association":"CONTRIBUTOR","body":"@dlmarion - I try to start taking a look at the conflicts today. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1914582089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1915155041","html_url":"https://github.com/apache/accumulo/pull/4204#issuecomment-1915155041","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4204","id":1915155041,"node_id":"IC_kwDOACaFSM5yJvJh","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-29T16:53:36Z","updated_at":"2024-01-29T16:53:36Z","author_association":"CONTRIBUTOR","body":"> However, we could also make the API more strongly typed and instead of a byte array as the key would create a new interface or class (maybe call it FateKey) and that could then contain an operation name and a KeyExtent and then handle the serialization. \r\n\r\nThere will only be two use cases (split and compaction commit) for the fate key at the moment.  So could have a class with static methods that support creating a FateKey object for the two uses case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1915155041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1916662253","html_url":"https://github.com/apache/accumulo/pull/4204#issuecomment-1916662253","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4204","id":1916662253,"node_id":"IC_kwDOACaFSM5yPfHt","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-30T11:41:50Z","updated_at":"2024-01-30T11:41:50Z","author_association":"CONTRIBUTOR","body":"> There will only be two use cases (split and compaction commit) for the fate key at the moment. So could have a class with static methods that support creating a FateKey object for the two uses case.\r\n\r\nThat sounds good, we can expand it if we end up with more use cases in the future. I will work on re-working the byte array into a FateKey object this week as I think that is cleaner.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1916662253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1917233925","html_url":"https://github.com/apache/accumulo/pull/4191#issuecomment-1917233925","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4191","id":1917233925,"node_id":"IC_kwDOACaFSM5yRqsF","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-30T15:32:38Z","updated_at":"2024-01-30T19:55:32Z","author_association":"MEMBER","body":"Update:\r\n- New fromThrift() method in FateId.\r\n- Fate now uses FateId and resolved issues stemming from these changes.\r\n- AdminUtil and Admin do not have FateId fully incorporated yet. Deferred for now. Marked \"TODO DEFERRED - ISSUE 4044\" in code. Need [#4168](https://github.com/apache/accumulo/issues/4168) completed first.\r\n- Resolved all compile errors.\r\n- Now that it compiles, I am able to run tests but have found that several hang indefinitely. Need to resolve this. (edit: Resolved)\r\n- Updated the main PR comment to better break down overall goal into smaller sub goals.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1917233925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1917834484","html_url":"https://github.com/apache/accumulo/pull/4206#issuecomment-1917834484","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4206","id":1917834484,"node_id":"IC_kwDOACaFSM5yT9T0","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-30T20:27:17Z","updated_at":"2024-01-30T20:27:17Z","author_association":"CONTRIBUTOR","body":"This won't build until apache/accumulo-access#37 is merged\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1917834484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1917888039","html_url":"https://github.com/apache/accumulo/issues/4087#issuecomment-1917888039","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4087","id":1917888039,"node_id":"IC_kwDOACaFSM5yUKYn","user":{"login":"ArbaazKhan1","id":29344877,"node_id":"MDQ6VXNlcjI5MzQ0ODc3","avatar_url":"https://avatars.githubusercontent.com/u/29344877?v=4","gravatar_id":"","url":"https://api.github.com/users/ArbaazKhan1","html_url":"https://github.com/ArbaazKhan1","followers_url":"https://api.github.com/users/ArbaazKhan1/followers","following_url":"https://api.github.com/users/ArbaazKhan1/following{/other_user}","gists_url":"https://api.github.com/users/ArbaazKhan1/gists{/gist_id}","starred_url":"https://api.github.com/users/ArbaazKhan1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArbaazKhan1/subscriptions","organizations_url":"https://api.github.com/users/ArbaazKhan1/orgs","repos_url":"https://api.github.com/users/ArbaazKhan1/repos","events_url":"https://api.github.com/users/ArbaazKhan1/events{/privacy}","received_events_url":"https://api.github.com/users/ArbaazKhan1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-30T21:02:31Z","updated_at":"2024-01-30T21:02:31Z","author_association":"CONTRIBUTOR","body":"I can take a look at this. \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1917888039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1918147933","html_url":"https://github.com/apache/accumulo/pull/4206#issuecomment-1918147933","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4206","id":1918147933,"node_id":"IC_kwDOACaFSM5yVJ1d","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T00:30:50Z","updated_at":"2024-01-31T00:30:50Z","author_association":"CONTRIBUTOR","body":"I opened #3746 a bit ago, but I have not updated it with the latest changes in accumulo-access. Need to reconcile this PR and #3746.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1918147933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919087365","html_url":"https://github.com/apache/accumulo/pull/4206#issuecomment-1919087365","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4206","id":1919087365,"node_id":"IC_kwDOACaFSM5yYvMF","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T13:17:55Z","updated_at":"2024-01-31T13:17:55Z","author_association":"CONTRIBUTOR","body":"> I opened #3746 a bit ago, but I have not updated it with the latest changes in accumulo-access. Need to reconcile this PR and #3746.\r\n\r\nI knew there was work done for this already, but could not find the issue. I agree that the two PRs need to be reconciled. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919087365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919501931","html_url":"https://github.com/apache/accumulo/pull/4206#issuecomment-1919501931","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4206","id":1919501931,"node_id":"IC_kwDOACaFSM5yaUZr","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T16:47:39Z","updated_at":"2024-01-31T16:48:10Z","author_association":"CONTRIBUTOR","body":"I merged this branch into #3746 and resolved conflicts as a way of reconciling the branches.  The following are the major diffs I uncovered while doing this.\r\n\r\n * Why make accumulo access optional jar in the assemble pom?\r\n * Should we deprecate ColumnVisibility.quote()?  There are two instances of that method (one for string and one for byte[]).  This branch deprecates one of those.  When I merged I removed the single deprecation and threw in a TODO.  If we want to deprecate, thinking we should do both or neither.\r\n * This branch had ColumnVis wrap and AccessExpression.  In #3746 ColVis was still wrapping a byte array instead of an AccessExpress.  I kept the byte[] to avoid going from byte[]->String->byte[] in some cases.  Also avoid an extra object allocation in some cases.  However I am not sure about this.  Wrapping the AccessExpression seems cleaner, but may be inefficient in some circumstances w/ more copies and object allocations.\r\n * The existing changes in #3746 did not need to add a new List<byte[]> constructor to AccessEvaluator, so I kept those.  So if we want to keep those, then may not need to add that method in accumulo-access.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919501931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919513093","html_url":"https://github.com/apache/accumulo/pull/4206#issuecomment-1919513093","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4206","id":1919513093,"node_id":"IC_kwDOACaFSM5yaXIF","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T16:53:42Z","updated_at":"2024-01-31T16:53:42Z","author_association":"CONTRIBUTOR","body":"> Why make accumulo access optional jar in the assemble pom?\r\n\r\nThat's just how the assemble pom dependencies are marked. This follows convention. The dependencies are copied to the resulting tarball.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919513093/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919564002","html_url":"https://github.com/apache/accumulo/pull/4206#issuecomment-1919564002","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4206","id":1919564002,"node_id":"IC_kwDOACaFSM5yajji","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T17:22:08Z","updated_at":"2024-01-31T17:22:08Z","author_association":"CONTRIBUTOR","body":"\r\n> * Should we deprecate ColumnVisibility.quote()?  There are two instances of that method (one for string and one for byte[]).  This branch deprecates one of those.  When I merged I removed the single deprecation and threw in a TODO.  If we want to deprecate, thinking we should do both or neither.\r\n\r\nI made a comment in apache/accumulo#3746 about this\r\n\r\n> * This branch had ColumnVis wrap and AccessExpression.  In [updates column visibility to use accumulo access library#3746](https://github.com/apache/accumulo/pull/3746) ColVis was still wrapping a byte array instead of an AccessExpress.  I kept the byte[] to avoid going from byte[]->String->byte[] in some cases.  Also avoid an extra object allocation in some cases.  However I am not sure about this.  Wrapping the AccessExpression seems cleaner, but may be inefficient in some circumstances w/ more copies and object allocations.\r\n\r\nI liked the simplicity of ColVis wrapping AccessExpression. The VisibilityEvaluator is changing to use AccessEvaluator, so the byte[] in ColVis *must* be a valid AccessExpression. In ColVis(byte[]) constructor, you are calling `AccessExpression.validate`, so I'm not sure that you are saving much w/r/t object creation. I wonder if the answer is for ColVis to have `AccessExpression` and `byte[]` members that are set in the constructor to avoid the runtime cost of calling `AccessExpression.getExpression`.\r\n\r\n> * The existing changes in [updates column visibility to use accumulo access library#3746](https://github.com/apache/accumulo/pull/3746) did not need to add a new List<byte[]> constructor to AccessEvaluator, so I kept those.  So if we want to keep those, then may not need to add that method in accumulo-access.\r\n\r\nFine by me, whatever works.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919564002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919781601","html_url":"https://github.com/apache/accumulo/issues/4209#issuecomment-1919781601","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4209","id":1919781601,"node_id":"IC_kwDOACaFSM5ybYrh","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T19:25:08Z","updated_at":"2024-01-31T19:25:08Z","author_association":"MEMBER","body":"I am able to reproduce this test failure.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919781601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919932526","html_url":"https://github.com/apache/accumulo/pull/3969#issuecomment-1919932526","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3969","id":1919932526,"node_id":"IC_kwDOACaFSM5yb9hu","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T20:49:44Z","updated_at":"2024-01-31T20:49:44Z","author_association":"CONTRIBUTOR","body":"I kicked off a full IT build for this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919932526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919974745","html_url":"https://github.com/apache/accumulo/pull/3983#issuecomment-1919974745","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3983","id":1919974745,"node_id":"IC_kwDOACaFSM5ycH1Z","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T21:13:25Z","updated_at":"2024-01-31T21:13:25Z","author_association":"CONTRIBUTOR","body":"Closing in favor of #4210\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1919974745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1920137353","html_url":"https://github.com/apache/accumulo/pull/4208#issuecomment-1920137353","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4208","id":1920137353,"node_id":"IC_kwDOACaFSM5ycviJ","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T23:01:55Z","updated_at":"2024-01-31T23:01:55Z","author_association":"CONTRIBUTOR","body":"With PR #4122 merged into 3.1, it would be interesting if the import of 2.1.3 files can go into elasticity (those changes need to be merged forward)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1920137353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1920241738","html_url":"https://github.com/apache/accumulo/pull/4206#issuecomment-1920241738","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4206","id":1920241738,"node_id":"IC_kwDOACaFSM5ydJBK","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T00:22:49Z","updated_at":"2024-02-01T00:23:56Z","author_association":"CONTRIBUTOR","body":"> I liked the simplicity of ColVis wrapping AccessExpression. The VisibilityEvaluator is changing to use AccessEvaluator, so the byte[] in ColVis must be a valid AccessExpression. In ColVis(byte[]) constructor, you are calling AccessExpression.validate, so I'm not sure that you are saving much w/r/t object creation. I wonder if the answer is for ColVis to have AccessExpression and byte[] members that are set in the constructor to avoid the runtime cost of calling AccessExpression.getExpression.\r\n\r\nI like ColVis wrapping AccessExpression too.  I have not fully worked this out, but wondering if another piece of this puzzle is deprecating `byte[] getExpression()` and replacing it with `AccessExpression getAccessExpression()` in ColVis.  Not sure about that though, would need to try to know what the implications are.  When thinking of that deprecation, I started wondering about a more general deprecation.   Could AccessExpression replace ColVis completely in the Accumulo API, I get completely lost when thinking through that though because there are so many things to consider.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1920241738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921269345","html_url":"https://github.com/apache/accumulo/pull/4208#issuecomment-1921269345","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4208","id":1921269345,"node_id":"IC_kwDOACaFSM5yhD5h","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T12:57:09Z","updated_at":"2024-02-01T12:57:09Z","author_association":"CONTRIBUTOR","body":"Suggest waiting to merge this until https://github.com/apache/accumulo/pull/3969 is merged. It will cause conflicts and should be merged here shortly.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921269345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921319477","html_url":"https://github.com/apache/accumulo/pull/3969#issuecomment-1921319477","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3969","id":1921319477,"node_id":"IC_kwDOACaFSM5yhQI1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T13:24:50Z","updated_at":"2024-02-01T13:24:50Z","author_association":"CONTRIBUTOR","body":"In the IT run that I kicked off last night, the following two tests failed:\r\n\r\n```\r\norg.opentest4j.AssertionFailedError: expected: <1> but was: <0>\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)\r\n\tat org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)\r\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:150)\r\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:145)\r\n\tat org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:531)\r\n\tat org.apache.accumulo.test.shell.ShellCreateTableIT.verifyTableWithTabletAvailability(ShellCreateTableIT.java:684)\r\n\tat org.apache.accumulo.test.shell.ShellCreateTableIT.testCreateTableWithInitialTabletAvailability(ShellCreateTableIT.java:646)\r\n```\r\n\r\n```\r\norg.opentest4j.AssertionFailedError: expected: <true> but was: <false>\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)\r\n\tat org.junit.jupiter.api.AssertTrue.failNotTrue(AssertTrue.java:63)\r\n\tat org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:36)\r\n\tat org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:31)\r\n\tat org.junit.jupiter.api.Assertions.assertTrue(Assertions.java:183)\r\n\tat org.apache.accumulo.test.shell.ShellServerIT.testGetAvailabilityCommand_DelayedSplits(ShellServerIT.java:1352)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921319477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921345577","html_url":"https://github.com/apache/accumulo/pull/4210#issuecomment-1921345577","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4210","id":1921345577,"node_id":"IC_kwDOACaFSM5yhWgp","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T13:38:00Z","updated_at":"2024-02-01T13:38:00Z","author_association":"CONTRIBUTOR","body":"I'll rework this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921345577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921511867","html_url":"https://github.com/apache/accumulo/pull/3969#issuecomment-1921511867","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3969","id":1921511867,"node_id":"IC_kwDOACaFSM5yh_G7","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T14:51:08Z","updated_at":"2024-02-01T14:51:08Z","author_association":"CONTRIBUTOR","body":"@dlmarion I'll take a look at those tests.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921511867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921585267","html_url":"https://github.com/apache/accumulo/pull/4196#issuecomment-1921585267","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4196","id":1921585267,"node_id":"IC_kwDOACaFSM5yiRBz","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T15:25:07Z","updated_at":"2024-02-01T15:25:07Z","author_association":"CONTRIBUTOR","body":"Noticed that SessionDurabilityIT was failing, suspect its caused by the bug fixed in this PR because the failure in that IT happens after log recovery.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921585267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921645531","html_url":"https://github.com/apache/accumulo/pull/3969#issuecomment-1921645531","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3969","id":1921645531,"node_id":"IC_kwDOACaFSM5yifvb","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T15:54:52Z","updated_at":"2024-02-01T15:54:52Z","author_association":"CONTRIBUTOR","body":"@dlmarion corrected the two failing ITs. The host:availability check had to be updated to ~tab:availability in both instances.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921645531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921724323","html_url":"https://github.com/apache/accumulo/issues/3859#issuecomment-1921724323","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3859","id":1921724323,"node_id":"IC_kwDOACaFSM5yiy-j","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T16:30:43Z","updated_at":"2024-02-01T16:30:43Z","author_association":"CONTRIBUTOR","body":"Closed by #3969 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921724323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921770882","html_url":"https://github.com/apache/accumulo/issues/4044#issuecomment-1921770882","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4044","id":1921770882,"node_id":"IC_kwDOACaFSM5yi-WC","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T16:52:56Z","updated_at":"2024-03-18T13:56:25Z","author_association":"MEMBER","body":"The end goal is to have the stronger type FateId replace the current representation of a transaction id (which is just a long). This was brought about from the addition of the AccumuloStore class - there are now two fate instance types associated with a transaction - META (for ZooStore) or USER (for AccumuloStore). FateId is a new class which includes the FateInstanceType and the transaction id.\r\n\r\nTODO list for this issue:\r\n\r\n- [x] Create new class FateId to replace FateTxId\r\n- [x] Change the stores to use FateId. Start with ReadOnlyFateStores. Resolve issues stemming from these changes.\r\n- [x] Change Fate to use FateId. Resolve issues stemming from these changes.\r\n\r\n(the above have been completed and merged in by [PR#4191](https://github.com/apache/accumulo/pull/4191))\r\n\r\n- [x] Change Repo to use FateId. Resolve issues stemming from these changes.\r\n\r\n(the above has been completed and merged in by [PR#4228](https://github.com/apache/accumulo/pull/4228))\r\n\r\n- [x] CompactionConfigStorage, SelectedFiles, TabletUpdates, TabletMetadata, Ample need to be updated to use FateId. Deferred for now. All the places these classes are used have been marked \"ELASTICITY_TODO DEFERRED - ISSUE 4044\"\r\n\r\n(the above has been completed and merged by [PR#4247](https://github.com/apache/accumulo/pull/4247))\r\n\r\n- [x] TabletOperationId, VolumeManager, TabletRefresher, TExternalCompactionJob, and Utils need to be updated to use FateId. Deferred for now. All the places these classes are used have been marked \"ELASTICITY_TODO DEFERRED - ISSUE 4044\"\r\n- [x] A couple of deferred changes to Compactor and CompactionCoordinator (in [PR#4258](https://github.com/apache/accumulo/pull/4258)) (need [PR#4247](https://github.com/apache/accumulo/pull/4247) merged first). Marked with \"ELASTICITY_TODO DEFERRED - ISSUE 4044\".\r\n\r\n(the above has been completed and merged by [PR#4258](https://github.com/apache/accumulo/pull/4258))\r\n\r\n- [x] AdminUtil and Admin need to use FateId. Deferred for now. Marked with \"ELASTICITY_TODO DEFERRED - ISSUE 4044\". ([issue#4168](https://github.com/apache/accumulo/issues/4168))\r\n\r\n(the above has been completed and merged by [PR#4350](https://github.com/apache/accumulo/pull/4350))\r\n\r\n- [x] Delete FateTxId when all uses have been replaced with FateId ([issue#4275](https://github.com/apache/accumulo/issues/4275))\r\n\r\n(the above has been completed and merged by [PR#4370](https://github.com/apache/accumulo/pull/4370))","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921770882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921780026","html_url":"https://github.com/apache/accumulo/pull/4210#issuecomment-1921780026","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4210","id":1921780026,"node_id":"IC_kwDOACaFSM5yjAk6","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T16:57:57Z","updated_at":"2024-02-01T16:57:57Z","author_association":"CONTRIBUTOR","body":"> Recently the ExternalCompactionMetricsIT has failed in Jenkins. The logs seem to indicate that the it cannot find the metrics.\r\n> \r\n> ```\r\n> 2024-01-31T06:20:26,199 [miniclusterImpl.MiniAccumuloClusterControl] DEBUG: Error getting running compactions from coordinator, message: Unable to get CompactionCoordinator address from ZooKeeper\r\n> ```\r\nThis log entry on its own does not imply anything. This will be emitted until the coordinator starts. This is a symptom, not a cause.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1921780026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1922092429","html_url":"https://github.com/apache/accumulo/pull/4213#issuecomment-1922092429","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4213","id":1922092429,"node_id":"IC_kwDOACaFSM5ykM2N","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T19:38:43Z","updated_at":"2024-02-01T19:38:43Z","author_association":"CONTRIBUTOR","body":"@dlmarion, @keith-turner this PR is in response to the suggestion to add an `IllegalStateException` to the `TabletColumnFamily` switch statement in the `TabletMetadata` class (as suggested in #3969 PR review).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1922092429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1922250824","html_url":"https://github.com/apache/accumulo/pull/4210#issuecomment-1922250824","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4210","id":1922250824,"node_id":"IC_kwDOACaFSM5ykzhI","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T21:10:16Z","updated_at":"2024-02-01T21:10:16Z","author_association":"CONTRIBUTOR","body":"This does not appear that it would correct the underlying issue that is causing the external compaction tests to fail.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1922250824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1922718285","html_url":"https://github.com/apache/accumulo/issues/4149#issuecomment-1922718285","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4149","id":1922718285,"node_id":"IC_kwDOACaFSM5ymlpN","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T03:03:02Z","updated_at":"2024-02-02T03:03:02Z","author_association":"CONTRIBUTOR","body":"> @keith-turner - I have reviewed the code around this error. It's not clear to me how this could be occurring. I'm wondering if an IsolatedScanner should be used in the TabletManagementScanner.\r\n\r\nI did not see anything either.  Looked at the code and did not see any place in the code where a tablet might be added twice in the TGW scan over all the tablets.  Opened #4214 to add the extent to the error message.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1922718285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924067507","html_url":"https://github.com/apache/accumulo/pull/4215#issuecomment-1924067507","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4215","id":1924067507,"node_id":"IC_kwDOACaFSM5yrvCz","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T15:07:54Z","updated_at":"2024-02-02T15:14:13Z","author_association":"CONTRIBUTOR","body":"Changing the id because the class changed is good.  However, if instances of the class are stored externally with java serialization, then we may need provisions that use the externally persisted data to accept multiple versions.  Externally persisted data could span across Accumulo versions.  \r\n\r\nThe key will be if the serialized forms are stored externally.  Currently I believe serialization is used with Fates and if that how this class is stored - that would not present a problem in this case because Fates are not allowed to span Accumulo version changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924067507/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924151773","html_url":"https://github.com/apache/accumulo/pull/4215#issuecomment-1924151773","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4215","id":1924151773,"node_id":"IC_kwDOACaFSM5ysDnd","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T15:53:02Z","updated_at":"2024-02-02T15:53:02Z","author_association":"CONTRIBUTOR","body":"> The key will be if the serialized forms are stored externally. Currently I believe serialization is used with Fates and if that how this class is stored - that would not present a problem in this case because Fates are not allowed to span Accumulo version changes.\r\n\r\n\r\nI think that is correct, I don't think this change will be a problem.  Looking at org.apache.accumulo.manager.tableOps.tableExport.WriteExportFiles that is what writes out data that would go across Accumulo versions.  I did not see it using the class changed in this PR.\r\n\r\nUnrelated to this issue, did notice that WriteExportFiles.exportConfig() could probably be improved to use the newer config code in 2.1 that would allow reading only the props explicitly set for a table.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924151773/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924483218","html_url":"https://github.com/apache/accumulo/pull/4218#issuecomment-1924483218","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4218","id":1924483218,"node_id":"IC_kwDOACaFSM5ytUiS","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T18:47:29Z","updated_at":"2024-02-02T18:47:29Z","author_association":"CONTRIBUTOR","body":"I'm torn on whether or not we should merge this. The IT doesn't really test anything, it uses MAC to generate the log entries. Maybe there is a better place to put this? Maybe we just mark the test as Disabled so that it doesn't increase the build times?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924483218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924555361","html_url":"https://github.com/apache/accumulo/pull/4218#issuecomment-1924555361","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4218","id":1924555361,"node_id":"IC_kwDOACaFSM5ytmJh","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T19:34:21Z","updated_at":"2024-02-02T19:34:21Z","author_association":"CONTRIBUTOR","body":"I've been working on a Prometheus example for metrics that will live in accumulo-examples.  I could expand that to also demo the LoggingMetrics.  That way it would exist, but not be part of the code base. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924555361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924559611","html_url":"https://github.com/apache/accumulo/issues/4221#issuecomment-1924559611","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4221","id":1924559611,"node_id":"IC_kwDOACaFSM5ytnL7","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T19:36:55Z","updated_at":"2024-02-02T19:36:55Z","author_association":"CONTRIBUTOR","body":"Also link relevant properties to the \"How-To\" `https://accumulo.apache.org/blog/2021/07/08/external-compactions.html` blog post for configuring external compactions. \r\n\r\nWe may need to publish an updated blog post with recent changes but that could be a future task.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924559611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924562949","html_url":"https://github.com/apache/accumulo/issues/4220#issuecomment-1924562949","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4220","id":1924562949,"node_id":"IC_kwDOACaFSM5ytoAF","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T19:38:42Z","updated_at":"2024-02-02T19:45:00Z","author_association":"CONTRIBUTOR","body":"This is a nice change because it makes the 3.1 release have the following\r\n\r\n *  removes the experimental status of external compaction \r\n * external compactions in 3.1 and 4.0 have a similar user experience\r\n\r\nThis avoids encouraging use of external compactions in 3.1 and changing the user experience for that feature in 4.0","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924562949/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924571329","html_url":"https://github.com/apache/accumulo/pull/4218#issuecomment-1924571329","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4218","id":1924571329,"node_id":"IC_kwDOACaFSM5ytqDB","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T19:44:32Z","updated_at":"2024-02-02T19:44:32Z","author_association":"CONTRIBUTOR","body":"Ok, I'm fine with parking this here for now until we have somewhere to put it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924571329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924575721","html_url":"https://github.com/apache/accumulo/issues/4220#issuecomment-1924575721","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4220","id":1924575721,"node_id":"IC_kwDOACaFSM5ytrHp","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T19:47:59Z","updated_at":"2024-02-02T19:47:59Z","author_association":"CONTRIBUTOR","body":"> This is a nice change because it makes the 3.1 release have the following\r\n> \r\n> * removes the experimental status of external compaction\r\n> * external compactions in 3.1 and 4.0 have a similar user experience\r\n> \r\n> This avoids encouraging use of external compactions in 3.1 and changing the user experience for that feature in 4.0\r\n\r\nTo expand on the user experience part:\r\n\r\nIn 2.1 we expect the user to configure a new server type of \"compaction-coordinator\" to use external compactions. This requires a modification to the cluster.yaml but is considered an `experimental` configuration change.\r\n\r\nIn `3.1` we change the feature to be supported and there are no direct user changes.\r\n\r\nIn `elasticity` we drastically change the cluster.yaml format and remove the concept of a separate compaction-coordinator server.\r\n\r\nBy moving the compaction-coordinator change down into `3.1`, we reduce a lot of the configuration churn for users and make it part of the expected step of a feature moving from `experimental` status to `supported`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924575721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924799450","html_url":"https://github.com/apache/accumulo/pull/4222#issuecomment-1924799450","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4222","id":1924799450,"node_id":"IC_kwDOACaFSM5yuhva","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T22:28:24Z","updated_at":"2024-02-02T22:28:24Z","author_association":"CONTRIBUTOR","body":"> So, I think we should either: remove the property, or restore the experimental annotation. Of these options, I would prefer to remove the property.\r\n\r\nI agree with the argument that we should remove the property or leave the experimental tag.  I am also in favor of removing the property.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924799450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924920177","html_url":"https://github.com/apache/accumulo/issues/4209#issuecomment-1924920177","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4209","id":1924920177,"node_id":"IC_kwDOACaFSM5yu_Nx","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-03T00:00:42Z","updated_at":"2024-02-03T00:02:03Z","author_association":"CONTRIBUTOR","body":"I looked into this a little bit with @keith-turner today as I saw the same thing. A thread dump shows stuck threads because the Manager is trying to scan the Tservers but they were shut down. Fate now uses the Accumulo store so it's stuck trying to scan and can't where was previously it was only trying to read from ZK.\r\n\r\n\r\n```\r\n\"manager\" #42 prio=5 os_prio=0 cpu=168.68ms elapsed=176.53s tid=0x00007f938860de60 nid=0x3305b in Object.wait()  [0x00007f93cef47000]\r\n   java.lang.Thread.State: WAITING (on object monitor)\r\n\tat java.lang.Object.wait(java.base@17.0.10/Native Method)\r\n\t- waiting on <no object reference available>\r\n\tat java.lang.Thread.join(java.base@17.0.10/Thread.java:1313)\r\n\t- locked <0x00000000f14f5d60> (a org.apache.accumulo.core.util.threads.Threads$AccumuloDaemonThread)\r\n\tat java.lang.Thread.join(java.base@17.0.10/Thread.java:1381)\r\n\tat org.apache.accumulo.core.fate.Fate.shutdown(Fate.java:472)\r\n\tat org.apache.accumulo.manager.Manager.lambda$run$7(Manager.java:1148)\r\n\tat org.apache.accumulo.manager.Manager$$Lambda$743/0x00007f93ec480248.accept(Unknown Source)\r\n\tat java.lang.Iterable.forEach(java.base@17.0.10/Iterable.java:75)\r\n\tat org.apache.accumulo.manager.Manager.run(Manager.java:1148)\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n\tat java.lang.Thread.run(java.base@17.0.10/Thread.java:840)\r\n\r\n   Locked ownable synchronizers:\r\n\t- None\r\n\r\n```\r\n```\r\n\"Fate work finder\" #67 daemon prio=5 os_prio=0 cpu=45.49ms elapsed=176.24s tid=0x00007f93540dfc20 nid=0x3309e waiting on condition  [0x00007f93cd82f000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat jdk.internal.misc.Unsafe.park(java.base@17.0.10/Native Method)\r\n\t- parking to wait for  <0x00000000f14e2a48> (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)\r\n\tat java.util.concurrent.locks.LockSupport.park(java.base@17.0.10/LockSupport.java:211)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(java.base@17.0.10/AbstractQueuedSynchronizer.java:715)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireShared(java.base@17.0.10/AbstractQueuedSynchronizer.java:1027)\r\n\tat java.util.concurrent.locks.ReentrantReadWriteLock$ReadLock.lock(java.base@17.0.10/ReentrantReadWriteLock.java:738)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCacheImpl._findTablet(ClientTabletCacheImpl.java:860)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCacheImpl.findTablet(ClientTabletCacheImpl.java:552)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCache.findTablet(ClientTabletCache.java:120)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCacheImpl.lookupTablet(ClientTabletCacheImpl.java:712)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCacheImpl.lookupTabletLocationAndCheckLock(ClientTabletCacheImpl.java:891)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCacheImpl._findTablet(ClientTabletCacheImpl.java:876)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCacheImpl.findTablet(ClientTabletCacheImpl.java:552)\r\n\tat org.apache.accumulo.core.clientImpl.ThriftScanner.getNextScanAddress(ThriftScanner.java:559)\r\n\tat org.apache.accumulo.core.clientImpl.ThriftScanner.scan(ThriftScanner.java:662)\r\n\tat org.apache.accumulo.core.clientImpl.ScannerIterator.readBatch(ScannerIterator.java:159)\r\n\t- locked <0x00000000f43e0938> (a org.apache.accumulo.core.clientImpl.ThriftScanner$ScanState)\r\n\tat org.apache.accumulo.core.clientImpl.ScannerIterator.getNextBatch(ScannerIterator.java:177)\r\n\tat org.apache.accumulo.core.clientImpl.ScannerIterator.hasNext(ScannerIterator.java:111)\r\n\tat java.util.Iterator.forEachRemaining(java.base@17.0.10/Iterator.java:132)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(java.base@17.0.10/Spliterators.java:1845)\r\n\tat java.util.stream.AbstractPipeline.copyInto(java.base@17.0.10/AbstractPipeline.java:509)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(java.base@17.0.10/AbstractPipeline.java:499)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(java.base@17.0.10/ForEachOps.java:150)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(java.base@17.0.10/ForEachOps.java:173)\r\n\tat java.util.stream.AbstractPipeline.evaluate(java.base@17.0.10/AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(java.base@17.0.10/ReferencePipeline.java:596)\r\n\tat org.apache.accumulo.core.fate.AbstractFateStore.runnable(AbstractFateStore.java:163)\r\n\tat org.apache.accumulo.core.logging.FateLogger$1.runnable(FateLogger.java:124)\r\n\tat org.apache.accumulo.core.fate.Fate$WorkFinder.run(Fate.java:93)\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n\tat java.lang.Thread.run(java.base@17.0.10/Thread.java:840)\r\n\r\n   Locked ownable synchronizers:\r\n\t- <0x00000000f1534078> (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)\r\n```\r\n\r\n```\r\n\"batch scanner 27--Worker-1\" #194 daemon prio=5 os_prio=0 cpu=178.97ms elapsed=158.34s tid=0x00007f931c00ed70 nid=0x33334 sleeping [0x00007f9297dfb000]\r\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\r\n\tat java.lang.Thread.sleep(java.base@17.0.10/Native Method)\r\n\tat java.lang.Thread.sleep(java.base@17.0.10/Thread.java:344)\r\n\tat java.util.concurrent.TimeUnit.sleep(java.base@17.0.10/TimeUnit.java:446)\r\n\tat com.google.common.util.concurrent.Uninterruptibles.sleepUninterruptibly(Uninterruptibles.java:406)\r\n\tat org.apache.accumulo.core.clientImpl.RootClientTabletCache.findTablet(RootClientTabletCache.java:149)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCache.findTablet(ClientTabletCache.java:120)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCacheImpl.lookupTablet(ClientTabletCacheImpl.java:712)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCacheImpl.lookupTabletLocationAndCheckLock(ClientTabletCacheImpl.java:891)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCacheImpl._findTablet(ClientTabletCacheImpl.java:881)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCacheImpl.findTablets(ClientTabletCacheImpl.java:340)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCacheImpl.findTablets(ClientTabletCacheImpl.java:450)\r\n\tat org.apache.accumulo.core.clientImpl.ClientTabletCache.binRanges(ClientTabletCache.java:174)\r\n\tat org.apache.accumulo.core.clientImpl.SyncingClientTabletCache.binRanges(SyncingClientTabletCache.java:97)\r\n\tat org.apache.accumulo.core.clientImpl.TimeoutClientTabletCache.binRanges(TimeoutClientTabletCache.java:110)\r\n\tat org.apache.accumulo.core.clientImpl.TabletServerBatchReaderIterator.binRanges(TabletServerBatchReaderIterator.java:275)\r\n\tat org.apache.accumulo.core.clientImpl.TabletServerBatchReaderIterator.processFailures(TabletServerBatchReaderIterator.java:375)\r\n\tat org.apache.accumulo.core.clientImpl.TabletServerBatchReaderIterator$QueryTask.run(TabletServerBatchReaderIterator.java:485)\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@17.0.10/ThreadPoolExecutor.java:1136)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@17.0.10/ThreadPoolExecutor.java:635)\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n\tat java.lang.Thread.run(java.base@17.0.10/Thread.java:840)\r\n\r\n   Locked ownable synchronizers:\r\n\t- <0x00000000f14e2a48> (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)\r\n\t- <0x00000000f3dad138> (a java.util.concurrent.ThreadPoolExecutor$Worker)\r\n\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1924920177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1925473256","html_url":"https://github.com/apache/accumulo/issues/4220#issuecomment-1925473256","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4220","id":1925473256,"node_id":"IC_kwDOACaFSM5yxGPo","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-03T22:35:36Z","updated_at":"2024-02-03T22:35:54Z","author_association":"CONTRIBUTOR","body":"While working on #4225 I found that MiniAccumulo has a compaction coordinator server type in its public API.  That will need to be deprecated and its use made to be a noop.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1925473256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1925474846","html_url":"https://github.com/apache/accumulo/pull/4225#issuecomment-1925474846","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4225","id":1925474846,"node_id":"IC_kwDOACaFSM5yxGoe","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-03T22:42:50Z","updated_at":"2024-02-03T22:42:50Z","author_association":"CONTRIBUTOR","body":"Hoping changes that address the problems mentioned will eventually support testing of multiple manager in a consistent way.  This is assuming that elasticity eventually supports multiple active managers.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1925474846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1925476053","html_url":"https://github.com/apache/accumulo/pull/4225#issuecomment-1925476053","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4225","id":1925476053,"node_id":"IC_kwDOACaFSM5yxG7V","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-03T22:47:38Z","updated_at":"2024-02-03T22:47:38Z","author_association":"CONTRIBUTOR","body":"Another goal of these changes is to deprecate Mini Accumulo APIs in 3.X so those could be remove in 4.0.0.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1925476053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1925875714","html_url":"https://github.com/apache/accumulo/issues/4209#issuecomment-1925875714","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4209","id":1925875714,"node_id":"IC_kwDOACaFSM5yyogC","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-04T18:35:23Z","updated_at":"2024-02-04T18:46:03Z","author_association":"CONTRIBUTOR","body":"I took a look at fixing this today and I still could not get the Manager to shutdown when the Tservers are offline. I tried the following in [Fate](https://github.com/apache/accumulo/blob/5f5cbd37a8efeaab4bc129c064680bbf4aa43be8/core/src/main/java/org/apache/accumulo/core/fate/Fate.java#L464) to try and make it shutdown but this did not work:\r\n\r\n```java\r\npublic void shutdown() {\r\n  keepRunning.set(false);\r\n  fatePoolWatcher.shutdownNow();\r\n  try {\r\n    if (executor != null) {\r\n      executor.shutdown();\r\n      if (!executor.awaitTermination(5, SECONDS)) {\r\n        executor.shutdownNow();\r\n      }\r\n    }\r\n    while (workFinder.isAlive()) {\r\n      workFinder.interrupt();\r\n      workFinder.join(100);\r\n    }\r\n  } catch (InterruptedException e) {\r\n    throw new RuntimeException(e);\r\n  }\r\n}\r\n```\r\n\r\nI was hoping by calling shtudown now on the executors and then interrupting in a loop it would stop always but it still was hung on the same threads trying to scan. \r\n\r\nThe test itself could be fixed by simply not shutting down the Tservers until after the Manager shuts down but that doesn't help if the Manager and Tservers go offline in a real cluster at the same time (Manager can't talk to the Tservers when shutting down). \r\n\r\nOne option could be to set a timeout in TabletServerBatchReaderIterator on the scan to make sure it doesn't wait forever but not sure if that's a great idea.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1925875714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1925912509","html_url":"https://github.com/apache/accumulo/pull/4204#issuecomment-1925912509","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4204","id":1925912509,"node_id":"IC_kwDOACaFSM5yyxe9","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-04T21:00:05Z","updated_at":"2024-02-04T21:00:05Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I think this is ready for another review. Since you last reviewed it I added the FateKey type instead of a byte array, I made FateKey create method atomic for ZK and added a conditional mutation for Accumulo and I updated the tests (including testing the collision detection","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1925912509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927236053","html_url":"https://github.com/apache/accumulo/pull/4225#issuecomment-1927236053","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4225","id":1927236053,"node_id":"IC_kwDOACaFSM5y30nV","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T15:17:42Z","updated_at":"2024-02-05T15:17:42Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - I assume you have seen [ClusterServerConfiguration](https://github.com/apache/accumulo/blob/elasticity/minicluster/src/main/java/org/apache/accumulo/miniclusterImpl/ClusterServerConfiguration.java) in the elasticity branch?  I didn't add it to the public API when I created it, but you could add an interface for it in elasticity, then backport it to main. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927236053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927339739","html_url":"https://github.com/apache/accumulo/issues/4226#issuecomment-1927339739","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4226","id":1927339739,"node_id":"IC_kwDOACaFSM5y4N7b","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T16:07:11Z","updated_at":"2024-02-05T16:07:11Z","author_association":"CONTRIBUTOR","body":"@keith-turner - The tablet availability is set and checked in MergeIT.merge. Is that sufficient to close this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927339739/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927403105","html_url":"https://github.com/apache/accumulo/issues/3466#issuecomment-1927403105","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3466","id":1927403105,"node_id":"IC_kwDOACaFSM5y4dZh","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T16:35:02Z","updated_at":"2024-02-05T16:35:02Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - Curious if you evaluated Guava 33.0's MinMaxPriorityQueue when you created CompactionJobPriorityQueue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927403105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927427228","html_url":"https://github.com/apache/accumulo/issues/3466#issuecomment-1927427228","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3466","id":1927427228,"node_id":"IC_kwDOACaFSM5y4jSc","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T16:42:53Z","updated_at":"2024-02-05T16:42:53Z","author_association":"CONTRIBUTOR","body":"HBase also has https://github.com/apache/hbase/blob/master/hbase-server/src/main/java/org/apache/hadoop/hbase/util/BoundedPriorityBlockingQueue.java","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927427228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927502099","html_url":"https://github.com/apache/accumulo/pull/4225#issuecomment-1927502099","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4225","id":1927502099,"node_id":"IC_kwDOACaFSM5y41kT","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T17:11:53Z","updated_at":"2024-02-05T17:11:53Z","author_association":"CONTRIBUTOR","body":"> @keith-turner - I assume you have seen [ClusterServerConfiguration](https://github.com/apache/accumulo/blob/elasticity/minicluster/src/main/java/org/apache/accumulo/miniclusterImpl/ClusterServerConfiguration.java) in the elasticity branch? I didn't add it to the public API when I created it, but you could add an interface for it in elasticity, then backport it to main.\r\n\r\nYeah I am familiar with that and this conceptually builds on it, but moves from a mutable config model to a model of an immutable config.  I had not looked at that specific class recently, looking at it I changed some of the type and method names in this PR and that solved a problem I was having with being able to specify config that did not make sense.  Overall, still not sure about some of the names, initially my main focus was exploring this concept of immutable config so have not thought too much about the names and other aspects.\r\n\r\nHoping that the model of having an immutable sever config w/ [getters and setters](https://github.com/apache/accumulo/blob/6c65321965c39cd2898c0158958a877a3536773e/minicluster/src/main/java/org/apache/accumulo/cluster/ClusterControl.java#L54-L92) in ClusterControl will allow us to simplify how tests start and stop servers. Also hoping that we can remove most of the methods in ClusterControl related to starting and stoping servers (I added TODOs in this PR about removing them).  Currently in elasticity the code will get a reference to the mutable cluster server config, change it, and then call methods on ClusterControl to start/stop servers.  Hoping this streamlines that a bit for our ITs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927502099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927536892","html_url":"https://github.com/apache/accumulo/pull/4225#issuecomment-1927536892","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4225","id":1927536892,"node_id":"IC_kwDOACaFSM5y4-D8","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T17:31:18Z","updated_at":"2024-02-05T17:31:18Z","author_association":"CONTRIBUTOR","body":"In 3.1.0 we could only update MiniAccumulo public API, but not change any internal test code.  Later in elasticity we could optionally update ClusterControl to use the new immutable server config public API type for internal testing purposes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927536892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927798328","html_url":"https://github.com/apache/accumulo/issues/3466#issuecomment-1927798328","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3466","id":1927798328,"node_id":"IC_kwDOACaFSM5y5944","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T18:49:20Z","updated_at":"2024-02-05T19:57:40Z","author_association":"CONTRIBUTOR","body":"> Curious if you evaluated Guava 33.0's MinMaxPriorityQueue when you created CompactionJobPriorityQueue.\r\n\r\nYeah I did.  One reason I did not use was the following comment on the javadoc.  So when trying to use it as a bounded size prio Q it seems like it would be slow. \r\n\r\n> If you only access one end of the queue, and don't use a maximum size, this class is functionally equivalent to [PriorityQueue](https://docs.oracle.com/javase/9/docs/api/java/util/PriorityQueue.html?is-external=true), but significantly slower.\r\n\r\nA second reason I did not use was because when new jobs are added for a tablet, need to efficiently remove any previous jobs related to the tablet that happen to be in the queue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927798328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927843288","html_url":"https://github.com/apache/accumulo/issues/3466#issuecomment-1927843288","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3466","id":1927843288,"node_id":"IC_kwDOACaFSM5y6I3Y","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T19:01:55Z","updated_at":"2024-02-05T19:01:55Z","author_association":"CONTRIBUTOR","body":"Wrong comment from the javadoc, the following was the comment I was looking at\r\n\r\n> If you only access one end of the queue, and do use a maximum size, this class will perform significantly worse than a PriorityQueue with manual eviction above the maximum size. In many cases [Ordering.leastOf(java.lang.Iterable<E>, int)](https://javadoc.scijava.org/Guava/com/google/common/collect/Ordering.html#leastOf(java.lang.Iterable,int)) may work for your use case with significantly improved (and asymptotically superior) performance.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1927843288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1928076920","html_url":"https://github.com/apache/accumulo/issues/1630#issuecomment-1928076920","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1630","id":1928076920,"node_id":"IC_kwDOACaFSM5y7B54","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T20:54:23Z","updated_at":"2024-02-05T20:54:23Z","author_association":"CONTRIBUTOR","body":"Closing this issue since #1327 is completed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1928076920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1928184506","html_url":"https://github.com/apache/accumulo/issues/4230#issuecomment-1928184506","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4230","id":1928184506,"node_id":"IC_kwDOACaFSM5y7cK6","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T22:04:19Z","updated_at":"2024-02-05T22:04:33Z","author_association":"CONTRIBUTOR","body":"Used GH feature to open an issue off of a PR comment for the first time, but selected the wrong comment.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1928184506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1928476572","html_url":"https://github.com/apache/accumulo/pull/4228#issuecomment-1928476572","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4228","id":1928476572,"node_id":"IC_kwDOACaFSM5y8jec","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T23:15:41Z","updated_at":"2024-02-05T23:15:41Z","author_association":"CONTRIBUTOR","body":"@kevinrr888 I added a few comments and then committed this.  Wanted to get it in since it was such a big change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1928476572/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930431271","html_url":"https://github.com/apache/accumulo/issues/4232#issuecomment-1930431271","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4232","id":1930431271,"node_id":"IC_kwDOACaFSM5zEAsn","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T17:29:59Z","updated_at":"2024-02-06T17:29:59Z","author_association":"CONTRIBUTOR","body":"> an alternative to moving log sort to its own process would be to make it resource group aware. \n\nProcesses currently know their resource group, but group name for tables is not a first-class citizen. There is a custom property in TableLoadBalancer (`table.custom.assignment.group`) that the balancer uses. Nothing else uses this as far as I know. \n\n>So make log sort happen within a specific resource group that makes sense for the particular WAL.\n\nIf we made the property a first-class citizen of the table configuration, then I think there are cases where recovery may never happen. Consider the case of a user deciding to change the way they access a table from IMMEDIATE to EVENTUAL. They shut down all the tablet servers and decide to bulk load and use scan servers. Some of the TabletServers don't stop cleanly so those tablets have walogs that may not get sorted and recovered.\n\nI have been thinking of a different approach because I think there is a danger of recovery not occurring. We made changes in #4229 to host a tablet regardless of availability for the purposes of recovery. We did this because if recovery does not happen, then ScanServers will not return the data in the walogs, the Compactor won't compact the data in the walogs, and the GC process will never delete the walog files. My proposal would be to embed the LogSorter in the Compactor and ScanServer in addition to the it's current location in the TabletServer. I think the Compactor processes should look for log sorting work before it starts a new compaction, and I think we setup the ScanServer to use the LogSorter just like the TabletServer does. The idea being that resource groups allow the user to dedicate resources to tables for specific things, but when a failure happens and recovery needs to occur all members participate for the accuracy of the data and safety to the system.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930431271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930446989","html_url":"https://github.com/apache/accumulo/issues/4233#issuecomment-1930446989","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4233","id":1930446989,"node_id":"IC_kwDOACaFSM5zEEiN","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T17:38:32Z","updated_at":"2024-02-06T17:38:50Z","author_association":"CONTRIBUTOR","body":"I think it will also get missed when the exception is thrown for BAD_STATE. My guess is that those stats could be incremented right after state is set at https://github.com/apache/accumulo/blob/elasticity/server/manager/src/main/java/org/apache/accumulo/manager/TabletGroupWatcher.java#L446. I don't think it's set after that point.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930446989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930454093","html_url":"https://github.com/apache/accumulo/pull/4229#issuecomment-1930454093","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4229","id":1930454093,"node_id":"IC_kwDOACaFSM5zEGRN","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T17:43:00Z","updated_at":"2024-02-06T17:43:00Z","author_association":"CONTRIBUTOR","body":"Noticed #4233 and #4234  while reviewing this.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930454093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930464006","html_url":"https://github.com/apache/accumulo/issues/4233#issuecomment-1930464006","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4233","id":1930464006,"node_id":"IC_kwDOACaFSM5zEIsG","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T17:49:05Z","updated_at":"2024-02-06T17:49:26Z","author_association":"CONTRIBUTOR","body":"> I think it will also get missed when the exception is thrown for BAD_STATE.\r\n\r\nThat is a good point. One thing I have not done is look at the bigger picture of what uses these stats and determine what it means if they are missed. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930464006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930478684","html_url":"https://github.com/apache/accumulo/issues/4232#issuecomment-1930478684","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4232","id":1930478684,"node_id":"IC_kwDOACaFSM5zEMRc","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T17:58:30Z","updated_at":"2024-02-06T17:58:30Z","author_association":"CONTRIBUTOR","body":"> My proposal would be to embed the LogSorter in the Compactor and ScanServer in addition to the it's current location in the TabletServer.\r\n\r\nOne thing to consider when doing that would be memory usage as compactors may be configured with less memory than tablet servers.  I don't think memory would be a concern because log sort pulls chunks of data into memory and sorts them possibly creating multiple sorted files for a single unsorted log.  However that assumption is based on how the code used to work, have not looked at it recently.  Would be good to examine the current memory usage of log sort.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930478684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930798102","html_url":"https://github.com/apache/accumulo/issues/4233#issuecomment-1930798102","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4233","id":1930798102,"node_id":"IC_kwDOACaFSM5zFaQW","user":{"login":"ArbaazKhan1","id":29344877,"node_id":"MDQ6VXNlcjI5MzQ0ODc3","avatar_url":"https://avatars.githubusercontent.com/u/29344877?v=4","gravatar_id":"","url":"https://api.github.com/users/ArbaazKhan1","html_url":"https://github.com/ArbaazKhan1","followers_url":"https://api.github.com/users/ArbaazKhan1/followers","following_url":"https://api.github.com/users/ArbaazKhan1/following{/other_user}","gists_url":"https://api.github.com/users/ArbaazKhan1/gists{/gist_id}","starred_url":"https://api.github.com/users/ArbaazKhan1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArbaazKhan1/subscriptions","organizations_url":"https://api.github.com/users/ArbaazKhan1/orgs","repos_url":"https://api.github.com/users/ArbaazKhan1/repos","events_url":"https://api.github.com/users/ArbaazKhan1/events{/privacy}","received_events_url":"https://api.github.com/users/ArbaazKhan1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T21:41:51Z","updated_at":"2024-02-06T21:41:51Z","author_association":"CONTRIBUTOR","body":"I think [Issue#4087](https://github.com/apache/accumulo/issues/4087) might affect this ticket as well. I you follow the conditional, for [Continue](https://github.com/apache/accumulo/blob/b1cf91cc5cf02795ab720c9e47fbc5ab83aadc25/server/manager/src/main/java/org/apache/accumulo/manager/TabletGroupWatcher.java#L556), down its line you end up at the class [RecoverPath](https://github.com/apache/accumulo/blob/main/server/base/src/main/java/org/apache/accumulo/server/manager/recovery/RecoveryPath.java) which I am working on removing/refactoring. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930798102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930909645","html_url":"https://github.com/apache/accumulo/issues/4232#issuecomment-1930909645","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4232","id":1930909645,"node_id":"IC_kwDOACaFSM5zF1fN","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T22:57:41Z","updated_at":"2024-02-06T22:57:41Z","author_association":"CONTRIBUTOR","body":"> If we made the property a first-class citizen of the table configuration, then I think there are cases where recovery may never happen. \r\n\r\nDo  not necessarily  need to make it a first class citizen of the table to make log recovery RG(resource group) aware.  Could do something like the followng.\r\n\r\n  1. When a walog is created include the tablet server and its current RG in its name.  Currently the name only includes the tserver\r\n  2. If a log ever needs recovery perfer tablet servers in the same RG\r\n  3. If there are no tservers present in the RG, then use any server (tsever,compactor, scan server)\r\n\r\nThis makes log recovery use the same RG as where it was created under normal circumstances and falls back to other resources under unusual circumstances. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1930909645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1931969315","html_url":"https://github.com/apache/accumulo/issues/4232#issuecomment-1931969315","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4232","id":1931969315,"node_id":"IC_kwDOACaFSM5zJ4Mj","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-07T12:42:39Z","updated_at":"2024-02-07T12:42:39Z","author_association":"CONTRIBUTOR","body":"```\r\n1. When a walog is created include the tablet server and its current RG in its name. Currently the name only includes the tserver\r\n2. If a log ever needs recovery perfer tablet servers in the same RG\r\n3. If there are no tservers present in the RG, then use any server (tsever,compactor, scan server)\r\n```\r\n\r\nI think to do this efficiently we would need to modify the way that TabletServers and ScanServers are registered in ZooKeeper. The [Compactor](https://github.com/apache/accumulo/blob/elasticity/server/compactor/src/main/java/org/apache/accumulo/compactor/Compactor.java#L250) ZooKeeper path has the resource group in it, but the [TabletServer](https://github.com/apache/accumulo/blob/elasticity/server/tserver/src/main/java/org/apache/accumulo/tserver/TabletServer.java#L494) and [ScanServer](https://github.com/apache/accumulo/blob/elasticity/server/tserver/src/main/java/org/apache/accumulo/tserver/ScanServer.java#L305) do not. I'm not sure of the consequences of making this change.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1931969315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932047892","html_url":"https://github.com/apache/accumulo/issues/4232#issuecomment-1932047892","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4232","id":1932047892,"node_id":"IC_kwDOACaFSM5zKLYU","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-07T13:26:15Z","updated_at":"2024-02-07T13:26:15Z","author_association":"CONTRIBUTOR","body":"Would it make sense to move the resource group up in the path vs having it as an attribute on the specific server type?\r\n\r\ni.e.\r\n`ZKROOT / <resource group> / compactors / cp1`\r\n`ZKROOT / <resource group> / sservers / ss1`\r\n`ZKROOT / <resource group> / tservers / ts1`\r\n\r\nVs\r\n`ZKROOT / compactors / <resource group> / cp1 `\r\n`ZKROOT / sservers / ss1 / <resource group> `\r\n`ZKROOT / tservers / <resource group> / ts1`\r\n\r\nI'm not that familiar with structuring items inside of zookeeper. However, I could see this being a benefit if we wanted to have any other `resource group` specific things (properties, service discovery, etc) stored in ZK.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932047892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932111156","html_url":"https://github.com/apache/accumulo/issues/4232#issuecomment-1932111156","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4232","id":1932111156,"node_id":"IC_kwDOACaFSM5zKa00","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-07T14:00:11Z","updated_at":"2024-02-07T14:00:11Z","author_association":"CONTRIBUTOR","body":"Moving the resource group into the path will make the client slower as it will cause more back and forth ZK operations when trying to get a list of all of the tservers or sserver. For example [here](https://github.com/apache/accumulo/blob/elasticity/core/src/main/java/org/apache/accumulo/core/clientImpl/ClientContext.java#L405) and [here](https://github.com/apache/accumulo/blob/elasticity/core/src/main/java/org/apache/accumulo/core/rpc/clients/TServerClient.java#L57)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932111156/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932116176","html_url":"https://github.com/apache/accumulo/issues/4232#issuecomment-1932116176","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4232","id":1932116176,"node_id":"IC_kwDOACaFSM5zKcDQ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-07T14:02:51Z","updated_at":"2024-02-07T14:02:51Z","author_association":"CONTRIBUTOR","body":"> I think to do this efficiently we would need to modify the way that TabletServers and ScanServers are registered in ZooKeeper.\r\n\r\nMaking log recovery RG aware could be a big refactor.  I think doing that refactor is a lower priority than the current work that is in progress to make sure log recovery happens somewhere. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932116176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932121042","html_url":"https://github.com/apache/accumulo/issues/4232#issuecomment-1932121042","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4232","id":1932121042,"node_id":"IC_kwDOACaFSM5zKdPS","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-07T14:05:20Z","updated_at":"2024-02-07T14:05:20Z","author_association":"CONTRIBUTOR","body":"> Making log recovery RG aware could be a big refactor. I think doing that refactor is a lower priority than the current work that is in progress to make sure log recovery happens somewhere.\r\n\r\nI agree. Looking at references to Constants.TSERVERS, we would have to start passing around the the resource group name along with the tserver HostAndPort or address String in a lot of methods.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932121042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932150333","html_url":"https://github.com/apache/accumulo/issues/4232#issuecomment-1932150333","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4232","id":1932150333,"node_id":"IC_kwDOACaFSM5zKkY9","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-07T14:21:02Z","updated_at":"2024-02-07T14:21:02Z","author_association":"CONTRIBUTOR","body":"> Looking at references to Constants.TSERVERS, we would have to start passing around the the resource group name along with the tserver HostAndPort or address \r\n\r\nI am uncertain if that is the best way to make log recovery RG aware.  Another way would be when a tablet is seen w/ walogs to ask the balancer which tablet server to assign to and use the RG of that tserver for log sort (but not actually use the result from the balancer for assignment).  There are pros and cons to each method.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932150333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932511151","html_url":"https://github.com/apache/accumulo/pull/4218#issuecomment-1932511151","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4218","id":1932511151,"node_id":"IC_kwDOACaFSM5zL8ev","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-07T17:13:02Z","updated_at":"2024-02-07T17:13:02Z","author_association":"CONTRIBUTOR","body":"Suggestion from @ctubbsii is to make this the reference implementation, but disabled by default.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932511151/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932572797","html_url":"https://github.com/apache/accumulo/issues/4044#issuecomment-1932572797","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4044","id":1932572797,"node_id":"IC_kwDOACaFSM5zMLh9","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-07T17:49:42Z","updated_at":"2024-02-07T17:49:42Z","author_association":"CONTRIBUTOR","body":"During this change, it would be desirable for the FATE transaction ids to nativity sort by creation timestamp.  That would allow for determining order of operations of things solely by examining the FATE ids.  This would apply to listing things in the fate store as well as looking at logs.  If FATE_ID_1 < FATE_ID_2 then it can be immediately seen that  FATE_ID_1 was created before FATE_ID_2 (for whatever timestamp precision is available)\r\n\r\nOne way to provide this could be to use UUIDs that conform to the emerging UUIDv7 standard.  The gist of UUIDv7 - they are 128 bit UUIDs that put the timestamp portion of the UUID first, and random bits at the end with other identifying info in the middle.  There are variants that are UUIDv7 compatible that allow for sub-second timing information if that precision is wanted.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1932572797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1933020530","html_url":"https://github.com/apache/accumulo/pull/4192#issuecomment-1933020530","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4192","id":1933020530,"node_id":"IC_kwDOACaFSM5zN41y","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-07T22:10:02Z","updated_at":"2024-02-07T22:10:02Z","author_association":"MEMBER","body":"Thanks for the PR @ArbaazKhan1. I see you aren't listed on our \"people\" page, acknowledging contributors. If you wish to be added as a contributor to https://accumulo.apache.org/people/ , please open a pull request to add yourself at https://github.com/apache/accumulo-website/edit/main/pages/people.md and leave a reference to `apache/accumulo#4192` in your commit log.\r\n\r\nIf you intend to be a regular contributor to Accumulo projects, please consider subscribing to our developer mailing list (https://accumulo.apache.org/contact-us/) and introducing yourself. :smiley_cat:","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1933020530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1933263870","html_url":"https://github.com/apache/accumulo/pull/4204#issuecomment-1933263870","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4204","id":1933263870,"node_id":"IC_kwDOACaFSM5zO0P-","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T02:22:29Z","updated_at":"2024-02-08T02:22:29Z","author_association":"CONTRIBUTOR","body":"Stubbed out possible interaction between fate and the fate store for keyed operations in #4178.  Can see relevant changes in [FateStore](https://github.com/apache/accumulo/blob/8d5046f71624d14625101707ac8779f07b1cde01/core/src/main/java/org/apache/accumulo/core/fate/FateStore.java#L45-L66), [Fate](https://github.com/apache/accumulo/blob/8d5046f71624d14625101707ac8779f07b1cde01/core/src/main/java/org/apache/accumulo/core/fate/Fate.java#L339-L354), and [SplitTask](https://github.com/apache/accumulo/blob/8d5046f71624d14625101707ac8779f07b1cde01/server/manager/src/main/java/org/apache/accumulo/manager/split/SplitTask.java#L46-L56)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1933263870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1934259556","html_url":"https://github.com/apache/accumulo/pull/4204#issuecomment-1934259556","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4204","id":1934259556,"node_id":"IC_kwDOACaFSM5zSnVk","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T14:38:59Z","updated_at":"2024-02-08T14:38:59Z","author_association":"CONTRIBUTOR","body":"> Stubbed out possible interaction between fate and the fate store for keyed operations in #4178. Can see relevant changes in [FateStore](https://github.com/apache/accumulo/blob/8d5046f71624d14625101707ac8779f07b1cde01/core/src/main/java/org/apache/accumulo/core/fate/FateStore.java#L45-L66), [Fate](https://github.com/apache/accumulo/blob/8d5046f71624d14625101707ac8779f07b1cde01/core/src/main/java/org/apache/accumulo/core/fate/Fate.java#L339-L354), and [SplitTask](https://github.com/apache/accumulo/blob/8d5046f71624d14625101707ac8779f07b1cde01/server/manager/src/main/java/org/apache/accumulo/manager/split/SplitTask.java#L46-L56)\r\n\r\nI'll take a look in detail tomorrow, I see you added `Optional<FateTxStore<T>> createAndReserve(FateKey fateKey` and that is something I will likely add to this PR when I update it. I think it makes sense to add it now vs a follow on","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1934259556/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1934388313","html_url":"https://github.com/apache/accumulo/pull/4204#issuecomment-1934388313","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4204","id":1934388313,"node_id":"IC_kwDOACaFSM5zTGxZ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T15:37:03Z","updated_at":"2024-02-08T15:38:07Z","author_association":"CONTRIBUTOR","body":"What lead to the createAndReserve call was trying to deal with the following race condition when I was trying to stub out using this feature.\r\n\r\n```java\r\nclass Fate {\r\n  seed(..., FateKey key,...) {\r\n       var fateId = create(key);\r\n       // another thread could sneak in here\r\n        var fateTxStore = store.reserve(fateId);\r\n        try{\r\n            // between create and reserve, its possible something happened with the key so now that we hold the reservation check that things are as expected\r\n            store.checkKeyIsStillSame(fateId,key);\r\n        }finally{\r\n            fateTxStore.unreserve();\r\n       }\r\n   }\r\n\r\n```\r\n\r\nSo hoping having the store create and reserve can avoid this.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1934388313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1934766074","html_url":"https://github.com/apache/accumulo/issues/4245#issuecomment-1934766074","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4245","id":1934766074,"node_id":"IC_kwDOACaFSM5zUi_6","user":{"login":"ArbaazKhan1","id":29344877,"node_id":"MDQ6VXNlcjI5MzQ0ODc3","avatar_url":"https://avatars.githubusercontent.com/u/29344877?v=4","gravatar_id":"","url":"https://api.github.com/users/ArbaazKhan1","html_url":"https://github.com/ArbaazKhan1","followers_url":"https://api.github.com/users/ArbaazKhan1/followers","following_url":"https://api.github.com/users/ArbaazKhan1/following{/other_user}","gists_url":"https://api.github.com/users/ArbaazKhan1/gists{/gist_id}","starred_url":"https://api.github.com/users/ArbaazKhan1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArbaazKhan1/subscriptions","organizations_url":"https://api.github.com/users/ArbaazKhan1/orgs","repos_url":"https://api.github.com/users/ArbaazKhan1/repos","events_url":"https://api.github.com/users/ArbaazKhan1/events{/privacy}","received_events_url":"https://api.github.com/users/ArbaazKhan1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T19:06:27Z","updated_at":"2024-02-08T19:06:27Z","author_association":"CONTRIBUTOR","body":"I can take a look at this. \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1934766074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1935104791","html_url":"https://github.com/apache/accumulo/pull/4196#issuecomment-1935104791","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4196","id":1935104791,"node_id":"IC_kwDOACaFSM5zV1sX","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T23:44:27Z","updated_at":"2024-02-08T23:44:27Z","author_association":"CONTRIBUTOR","body":"Went ahead and merged this because it fixes a bug that was causing multiple tests to fail.  If anyone has any feeadback I can make changes in a follow on PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1935104791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1936289474","html_url":"https://github.com/apache/accumulo/pull/4204#issuecomment-1936289474","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4204","id":1936289474,"node_id":"IC_kwDOACaFSM5zaW7C","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-09T17:10:35Z","updated_at":"2024-02-09T17:10:35Z","author_association":"CONTRIBUTOR","body":"I made a bunch of updates and addressed everything and changed create(fateKey) to createAndReserve(fateKey) (which technically is implemented by reserving first in memory and then creating). I also added a test for verifying that collisions when using a key and with random ids work as expected.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1936289474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1936322021","html_url":"https://github.com/apache/accumulo/pull/4248#issuecomment-1936322021","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4248","id":1936322021,"node_id":"IC_kwDOACaFSM5zae3l","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-09T17:35:41Z","updated_at":"2024-02-09T17:38:43Z","author_association":"CONTRIBUTOR","body":"> I took a look at this and my main thought is I don't think this solves the problem all the way because what happens if the Tservers are all offline or can't be reached due to something like a network issue?\r\n\r\nIt could hang forever in that case.  I'll add a timeout to the fate shutdown","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1936322021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1936658630","html_url":"https://github.com/apache/accumulo/pull/4248#issuecomment-1936658630","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4248","id":1936658630,"node_id":"IC_kwDOACaFSM5zbxDG","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-09T21:57:41Z","updated_at":"2024-02-09T21:57:41Z","author_association":"CONTRIBUTOR","body":"> I took a look at this and my main thought is I don't think this solves the problem all the way because what happens if the Tservers are all offline or can't be reached due to something like a network issue?\r\n\r\nMade an update in [5e47c1a](https://github.com/apache/accumulo/pull/4248/commits/5e47c1a0851db7f042e94552067cb6df67f63862) to not wait forever.  Realized in addition to tservers that other things like DFS and ZK could make fate operations running in the background threads hang. So the changes wait a bit, giving thing running in background threads a chance to wind down.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1936658630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1936714797","html_url":"https://github.com/apache/accumulo/issues/3524#issuecomment-1936714797","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3524","id":1936714797,"node_id":"IC_kwDOACaFSM5zb-wt","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-09T23:00:38Z","updated_at":"2024-02-09T23:00:38Z","author_association":"CONTRIBUTOR","body":"I will take a look at this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1936714797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]