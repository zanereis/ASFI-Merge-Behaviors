[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657077002","html_url":"https://github.com/apache/hudi/pull/1821#issuecomment-657077002","issue_url":"https://api.github.com/repos/apache/hudi/issues/1821","id":657077002,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzA3NzAwMg==","user":{"login":"GuoPhilipse","id":46367746,"node_id":"MDQ6VXNlcjQ2MzY3NzQ2","avatar_url":"https://avatars.githubusercontent.com/u/46367746?v=4","gravatar_id":"","url":"https://api.github.com/users/GuoPhilipse","html_url":"https://github.com/GuoPhilipse","followers_url":"https://api.github.com/users/GuoPhilipse/followers","following_url":"https://api.github.com/users/GuoPhilipse/following{/other_user}","gists_url":"https://api.github.com/users/GuoPhilipse/gists{/gist_id}","starred_url":"https://api.github.com/users/GuoPhilipse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GuoPhilipse/subscriptions","organizations_url":"https://api.github.com/users/GuoPhilipse/orgs","repos_url":"https://api.github.com/users/GuoPhilipse/repos","events_url":"https://api.github.com/users/GuoPhilipse/events{/privacy}","received_events_url":"https://api.github.com/users/GuoPhilipse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T15:02:00Z","updated_at":"2020-07-11T15:02:00Z","author_association":"MEMBER","body":"> @GuoPhilipse Thanks for your contribution, LGTM, merging. PS: you would use the [MINOR] prefix in the title.\r\n\r\nThanks @leesf , have updated the title.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657077002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657081370","html_url":"https://github.com/apache/hudi/pull/1816#issuecomment-657081370","issue_url":"https://api.github.com/repos/apache/hudi/issues/1816","id":657081370,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzA4MTM3MA==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T15:30:25Z","updated_at":"2020-07-11T15:30:25Z","author_association":"CONTRIBUTOR","body":"> hi @pratyakshsharma really great docs, should we also point out the hoodie.datasource.write.keygenerator.class config in this section ?\r\n\r\nWill add that the property should be set to CustomKeyGenerator.java class. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657081370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657084303","html_url":"https://github.com/apache/hudi/pull/1822#issuecomment-657084303","issue_url":"https://api.github.com/repos/apache/hudi/issues/1822","id":657084303,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzA4NDMwMw==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T15:49:08Z","updated_at":"2020-07-11T15:49:08Z","author_association":"CONTRIBUTOR","body":"@GuoPhilipse Modified. :) Thank you for pointing this out. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657084303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657084651","html_url":"https://github.com/apache/hudi/pull/1558#issuecomment-657084651","issue_url":"https://api.github.com/repos/apache/hudi/issues/1558","id":657084651,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzA4NDY1MQ==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T15:51:25Z","updated_at":"2020-07-11T15:51:25Z","author_association":"CONTRIBUTOR","body":"@yanghua Please take a pass. :) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657084651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657088170","html_url":"https://github.com/apache/hudi/pull/1819#issuecomment-657088170","issue_url":"https://api.github.com/repos/apache/hudi/issues/1819","id":657088170,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzA4ODE3MA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T16:14:04Z","updated_at":"2020-07-11T16:14:04Z","author_association":"MEMBER","body":"@nsivabalan can you please take a pass once CI is passing","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657088170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657091983","html_url":"https://github.com/apache/hudi/issues/1694#issuecomment-657091983","issue_url":"https://api.github.com/repos/apache/hudi/issues/1694","id":657091983,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzA5MTk4Mw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T16:39:18Z","updated_at":"2020-07-11T16:39:27Z","author_association":"MEMBER","body":"If you want partition movement, then global index is the only option.. \r\n\r\n>no certain ordering, I can order it only by timestamp.\r\n\r\nGLOBAL_BLOOM (or even BLOOM index) will work best if the files are sorted by a key .. so it can skip entire file ranges from being compared and then further reduce using bloom filters.. \r\n\r\n>Any suggestion If I can achieve this without global bloom?\r\n\r\nWe are working on record level indexes that should make it much faster in the mid term. But thats not an immediate option.. `master` branch has a `GLOBAL_SIMPLE` which can be faster than `GLOBAL_BLOOM` in cases where there is no specific range based pruning that can occur.. Give that a shot? \r\n\r\nanother optimization in `master` branch is : dynamic bloom filters that will auto tune itself for aspecific false positive rate. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657091983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657113557","html_url":"https://github.com/apache/hudi/pull/1647#issuecomment-657113557","issue_url":"https://api.github.com/repos/apache/hudi/issues/1647","id":657113557,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzExMzU1Nw==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T19:08:44Z","updated_at":"2020-07-11T19:08:44Z","author_association":"CONTRIBUTOR","body":"I guess this issue is already solved. Can we close it now @xushiyan ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657113557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657116580","html_url":"https://github.com/apache/hudi/pull/1647#issuecomment-657116580","issue_url":"https://api.github.com/repos/apache/hudi/issues/1647","id":657116580,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzExNjU4MA==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T19:28:11Z","updated_at":"2020-07-11T19:28:11Z","author_association":"MEMBER","body":"@pratyakshsharma yes I think so. Thanks for taking on this!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657116580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657181391","html_url":"https://github.com/apache/hudi/pull/1818#issuecomment-657181391","issue_url":"https://api.github.com/repos/apache/hudi/issues/1818","id":657181391,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzE4MTM5MQ==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-12T06:28:06Z","updated_at":"2020-07-12T06:28:06Z","author_association":"MEMBER","body":"@vinothchandar this is ready for review. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657181391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657193426","html_url":"https://github.com/apache/hudi/issues/1798#issuecomment-657193426","issue_url":"https://api.github.com/repos/apache/hudi/issues/1798","id":657193426,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzE5MzQyNg==","user":{"login":"zherenyu831","id":52404525,"node_id":"MDQ6VXNlcjUyNDA0NTI1","avatar_url":"https://avatars.githubusercontent.com/u/52404525?v=4","gravatar_id":"","url":"https://api.github.com/users/zherenyu831","html_url":"https://github.com/zherenyu831","followers_url":"https://api.github.com/users/zherenyu831/followers","following_url":"https://api.github.com/users/zherenyu831/following{/other_user}","gists_url":"https://api.github.com/users/zherenyu831/gists{/gist_id}","starred_url":"https://api.github.com/users/zherenyu831/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zherenyu831/subscriptions","organizations_url":"https://api.github.com/users/zherenyu831/orgs","repos_url":"https://api.github.com/users/zherenyu831/repos","events_url":"https://api.github.com/users/zherenyu831/events{/privacy}","received_events_url":"https://api.github.com/users/zherenyu831/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-12T08:53:47Z","updated_at":"2020-07-12T08:58:13Z","author_association":"CONTRIBUTOR","body":"@umehrot2 @vinothchandar \r\nThank you guys. and sorry for lately reply.\r\n\r\nHere is my snapshot of spark ui.\r\n\r\nFirst query I used, files processed by resolveRelation was 950, cost 31 seconds\r\n```\r\nspark.read.format(\"org.apache.hudi\").load(\"s3://daas-hudi-test/paylite_payment_read/orders_v6/data/*/*/*\").count()\r\n```\r\n\r\nand second I used below query, and files processed by resolveRelation was 4750, cost 2.5 mins\r\n``` \r\nspark.read.format(\"org.apache.hudi\").load(\"s3://daas-hudi-test/paylite_payment_read/orders_v6/data/*/*/*/*\").count()\r\n```\r\n\r\nsince we are using spark stream to write data into the table, so the file size will be changed a little when second query run.\r\n\r\n<img width=\"1665\" alt=\"スクリーンショット 2020-07-12 17 51 22\" src=\"https://user-images.githubusercontent.com/52404525/87242515-61857300-c468-11ea-9e23-a874afed66b8.png\">\r\n<img width=\"1666\" alt=\"スクリーンショット 2020-07-12 17 51 28\" src=\"https://user-images.githubusercontent.com/52404525/87242522-6a764480-c468-11ea-89f1-f865875783fe.png\">\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657193426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657201567","html_url":"https://github.com/apache/hudi/issues/1823#issuecomment-657201567","issue_url":"https://api.github.com/repos/apache/hudi/issues/1823","id":657201567,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzIwMTU2Nw==","user":{"login":"RajasekarSribalan","id":22605603,"node_id":"MDQ6VXNlcjIyNjA1NjAz","avatar_url":"https://avatars.githubusercontent.com/u/22605603?v=4","gravatar_id":"","url":"https://api.github.com/users/RajasekarSribalan","html_url":"https://github.com/RajasekarSribalan","followers_url":"https://api.github.com/users/RajasekarSribalan/followers","following_url":"https://api.github.com/users/RajasekarSribalan/following{/other_user}","gists_url":"https://api.github.com/users/RajasekarSribalan/gists{/gist_id}","starred_url":"https://api.github.com/users/RajasekarSribalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RajasekarSribalan/subscriptions","organizations_url":"https://api.github.com/users/RajasekarSribalan/orgs","repos_url":"https://api.github.com/users/RajasekarSribalan/repos","events_url":"https://api.github.com/users/RajasekarSribalan/events{/privacy}","received_events_url":"https://api.github.com/users/RajasekarSribalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-12T10:10:47Z","updated_at":"2020-07-12T10:10:47Z","author_association":"NONE","body":"Another issue is, I am getting below error during inline compaction. Pls help.\r\n\r\ncom.esotericsoftware.kryo.KryoException: Unable to find class: org.apache.hudi.common.model.OverwriteWithLatestAvroPayload$$Lambda$46/188376151\r\nSerialization trace:\r\norderingVal (org.apache.hudi.common.model.OverwriteWithLatestAvroPayload)\r\ndata (org.apache.hudi.common.model.HoodieRecord)\r\n\tat com.esotericsoftware.kryo.util.DefaultClassResolver.readName(DefaultClassResolver.java:156)\r\n\tat com.esotericsoftware.kryo.util.DefaultClassResolver.readClass(DefaultClassResolver.java:133)\r\n\tat com.esotericsoftware.kryo.Kryo.readClass(Kryo.java:670)\r\n\tat com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:118)\r\n\tat com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:551)\r\n\tat com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:708)\r\n\tat com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:125)\r\n\tat com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:551)\r\n\tat com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:790)\r\n\tat org.apache.hudi.common.util.SerializationUtils$KryoSerializerInstance.deserialize(SerializationUtils.java:107)\r\n\tat org.apache.hudi.common.util.SerializationUtils.deserialize(SerializationUtils.java:81)\r\n\tat org.apache.hudi.common.util.collection.DiskBasedMap.get(DiskBasedMap.java:217)\r\n\tat org.apache.hudi.common.util.collection.DiskBasedMap.get(DiskBasedMap.java:211)\r\n\tat org.apache.hudi.common.util.collection.DiskBasedMap.get(DiskBasedMap.java:207)\r\n\tat org.apache.hudi.common.util.collection.ExternalSpillableMap.get(ExternalSpillableMap.java:168)\r\n\tat org.apache.hudi.common.table.log.HoodieMergedLogRecordScanner.processNextRecord(HoodieMergedLogRecordScanner.java:114)\r\n\tat org.apache.hudi.common.table.log.AbstractHoodieLogRecordScanner.processAvroDataBlock(AbstractHoodieLogRecordScanner.java:277)\r\n\tat org.apache.hudi.common.table.log.AbstractHoodieLogRecordScanner.processQueuedBlocksForInstant(AbstractHoodieLogRecordScanner.java:305)\r\n\tat org.apache.hudi.common.table.log.AbstractHoodieLogRecordScanner.scan(AbstractHoodieLogRecordScanner.java:152)\r\n\tat org.apache.hudi.common.table.log.HoodieMergedLogRecordScanner.<init>(HoodieMergedLogRecordScanner.java:81)\r\n\tat org.apache.hudi.table.compact.HoodieMergeOnReadTableCompactor.compact(HoodieMergeOnReadTableCompactor.java:126)\r\n\tat org.apache.hudi.table.compact.HoodieMergeOnReadTableCompactor.lambda$compact$644ebad7$1(HoodieMergeOnReadTableCompactor.java:98)\r\n\tat org.apache.spark.api.java.JavaPairRDD$$anonfun$toScalaFunction$1.apply(JavaPairRDD.scala:1040)\r\n\tat scala.collection.Iterator$$anon$11.next(Iterator.scala:409)\r\n\tat scala.collection.Iterator$$anon$12.nextCur(Iterator.scala:434)\r\n\tat scala.collection.Iterator$$anon$12.hasNext(Iterator.scala:440)\r\n\tat org.apache.spark.storage.memory.MemoryStore.putIteratorAsBytes(MemoryStore.scala:371)\r\n\tat org.apache.spark.storage.BlockManager$$anonfun$doPutIterator$1.apply(BlockManager.scala:1055)\r\n\tat org.apache.spark.storage.BlockManager$$anonfun$doPutIterator$1.apply(BlockManager.scala:1029)\r\n\tat org.apache.spark.storage.BlockManager.doPut(BlockManager.scala:969)\r\n\tat org.apache.spark.storage.BlockManager.doPutIterator(BlockManager.scala:1029)\r\n\tat org.apache.spark.storage.BlockManager.getOrElseUpdate(BlockManager.scala:760)\r\n\tat org.apache.spark.rdd.RDD.getOrCompute(RDD.scala:334)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:285)\r\n\tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:38)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:323)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:287)\r\n\tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:108)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:335)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.lang.ClassNotFoundException: org.apache.hudi.common.model.OverwriteWithLatestAvroPayload$$Lambda$46/188376151\r\n\tat java.lang.Class.forName0(Native Method)\r\n\tat java.lang.Class.forName(Class.java:348)\r\n\tat com.esotericsoftware.kryo.util.DefaultClassResolver.readName(DefaultClassResolver.java:154)\r\n\t... 42 more\r\n20/07/12 09:59:44 WARN storage.BlockManager: Putting block rdd_2_694 failed due to an exception","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657201567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657285023","html_url":"https://github.com/apache/hudi/issues/1777#issuecomment-657285023","issue_url":"https://api.github.com/repos/apache/hudi/issues/1777","id":657285023,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzI4NTAyMw==","user":{"login":"bhasudha","id":2179254,"node_id":"MDQ6VXNlcjIxNzkyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2179254?v=4","gravatar_id":"","url":"https://api.github.com/users/bhasudha","html_url":"https://github.com/bhasudha","followers_url":"https://api.github.com/users/bhasudha/followers","following_url":"https://api.github.com/users/bhasudha/following{/other_user}","gists_url":"https://api.github.com/users/bhasudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bhasudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhasudha/subscriptions","organizations_url":"https://api.github.com/users/bhasudha/orgs","repos_url":"https://api.github.com/users/bhasudha/repos","events_url":"https://api.github.com/users/bhasudha/events{/privacy}","received_events_url":"https://api.github.com/users/bhasudha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-12T22:32:04Z","updated_at":"2020-07-12T22:32:04Z","author_association":"CONTRIBUTOR","body":"@WaterKnight1998 Were you able to resolve ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657285023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657289513","html_url":"https://github.com/apache/hudi/issues/1787#issuecomment-657289513","issue_url":"https://api.github.com/repos/apache/hudi/issues/1787","id":657289513,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzI4OTUxMw==","user":{"login":"bhasudha","id":2179254,"node_id":"MDQ6VXNlcjIxNzkyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2179254?v=4","gravatar_id":"","url":"https://api.github.com/users/bhasudha","html_url":"https://github.com/bhasudha","followers_url":"https://api.github.com/users/bhasudha/followers","following_url":"https://api.github.com/users/bhasudha/following{/other_user}","gists_url":"https://api.github.com/users/bhasudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bhasudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhasudha/subscriptions","organizations_url":"https://api.github.com/users/bhasudha/orgs","repos_url":"https://api.github.com/users/bhasudha/repos","events_url":"https://api.github.com/users/bhasudha/events{/privacy}","received_events_url":"https://api.github.com/users/bhasudha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-12T23:12:20Z","updated_at":"2020-07-12T23:12:20Z","author_association":"CONTRIBUTOR","body":"@asheeshgarg  which version of Presto are you using ? Also, for querying through Presto, you don't have to write anything. As long as the table is registered in Hive, you can simply query using Presto by adding the hudi-presto-bundle.jar to presto_install>/plugin/hive-hadoop2. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657289513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657295902","html_url":"https://github.com/apache/hudi/issues/1813#issuecomment-657295902","issue_url":"https://api.github.com/repos/apache/hudi/issues/1813","id":657295902,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzI5NTkwMg==","user":{"login":"bhasudha","id":2179254,"node_id":"MDQ6VXNlcjIxNzkyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2179254?v=4","gravatar_id":"","url":"https://api.github.com/users/bhasudha","html_url":"https://github.com/bhasudha","followers_url":"https://api.github.com/users/bhasudha/followers","following_url":"https://api.github.com/users/bhasudha/following{/other_user}","gists_url":"https://api.github.com/users/bhasudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bhasudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhasudha/subscriptions","organizations_url":"https://api.github.com/users/bhasudha/orgs","repos_url":"https://api.github.com/users/bhasudha/repos","events_url":"https://api.github.com/users/bhasudha/events{/privacy}","received_events_url":"https://api.github.com/users/bhasudha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T00:01:31Z","updated_at":"2020-07-13T00:01:31Z","author_association":"CONTRIBUTOR","body":"@jcunhafonte  Could you try using the DeltaStreamer in continuous mode rather than using the scheduled job ? I think what's happening is the schema provider is [initialized for the very first time](https://github.com/apache/hudi/blob/20ac7c3337a14dd777f6ebe21b13dab2786f2479/hudi-utilities/src/main/java/org/apache/hudi/utilities/deltastreamer/DeltaSync.java#L229) if its null ( that why your first run is working fine). After that, the initialized state is lost since you are recreating the DeltaSync object by refreshing the command in a schedule job (instead of running it in continuous mode where it has access to the same DeltaSync object with initialized schema provider object). \r\n\r\nIf you would rather want to use the scheduled job, then the tool expects you provide the schema provider explicitly via config.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657295902/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657296109","html_url":"https://github.com/apache/hudi/issues/1790#issuecomment-657296109","issue_url":"https://api.github.com/repos/apache/hudi/issues/1790","id":657296109,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzI5NjEwOQ==","user":{"login":"bhasudha","id":2179254,"node_id":"MDQ6VXNlcjIxNzkyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2179254?v=4","gravatar_id":"","url":"https://api.github.com/users/bhasudha","html_url":"https://github.com/bhasudha","followers_url":"https://api.github.com/users/bhasudha/followers","following_url":"https://api.github.com/users/bhasudha/following{/other_user}","gists_url":"https://api.github.com/users/bhasudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bhasudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhasudha/subscriptions","organizations_url":"https://api.github.com/users/bhasudha/orgs","repos_url":"https://api.github.com/users/bhasudha/repos","events_url":"https://api.github.com/users/bhasudha/events{/privacy}","received_events_url":"https://api.github.com/users/bhasudha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T00:02:59Z","updated_at":"2020-07-13T00:02:59Z","author_association":"CONTRIBUTOR","body":"@garyli1019  could you help with this question ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657296109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657297717","html_url":"https://github.com/apache/hudi/issues/1823#issuecomment-657297717","issue_url":"https://api.github.com/repos/apache/hudi/issues/1823","id":657297717,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzI5NzcxNw==","user":{"login":"bhasudha","id":2179254,"node_id":"MDQ6VXNlcjIxNzkyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2179254?v=4","gravatar_id":"","url":"https://api.github.com/users/bhasudha","html_url":"https://github.com/bhasudha","followers_url":"https://api.github.com/users/bhasudha/followers","following_url":"https://api.github.com/users/bhasudha/following{/other_user}","gists_url":"https://api.github.com/users/bhasudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bhasudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhasudha/subscriptions","organizations_url":"https://api.github.com/users/bhasudha/orgs","repos_url":"https://api.github.com/users/bhasudha/repos","events_url":"https://api.github.com/users/bhasudha/events{/privacy}","received_events_url":"https://api.github.com/users/bhasudha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T00:13:00Z","updated_at":"2020-07-13T00:13:00Z","author_association":"CONTRIBUTOR","body":"@RajasekarSribalan  For your first question, unfortunately currently in Spark Streaming writes only support inline compaction is supported. So you have to enable that config. Good news is, this [PR](https://github.com/apache/hudi/pull/1752) is working on enabling the async compaction for Spark Streaming  and is in priority. \r\n\r\nFor second question, couple clarifications.\r\n- Hudi moved to Spark 2.4. I see that you are using spark 2.2.0. Could you try on spark 2.4* ? \r\n- Also, in your spark submit command are you passing in these jars and cones - https://hudi.apache.org/docs/quick-start-guide.html#setup\r\n\r\n1. The conf `'spark.serializer=org.apache.spark.serializer.KryoSerializer'`\r\n2. in addition to hudi-spark-bundle,  you need to pass `,org.apache.spark:spark-avro_2.11:2.4.4` Note the spark-avro must match your spark version which is 2.4.4.  This applies if you are using spark-shell as it does not ship with spark-avro explicitly.\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657297717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657299606","html_url":"https://github.com/apache/hudi/issues/1800#issuecomment-657299606","issue_url":"https://api.github.com/repos/apache/hudi/issues/1800","id":657299606,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzI5OTYwNg==","user":{"login":"bhasudha","id":2179254,"node_id":"MDQ6VXNlcjIxNzkyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2179254?v=4","gravatar_id":"","url":"https://api.github.com/users/bhasudha","html_url":"https://github.com/bhasudha","followers_url":"https://api.github.com/users/bhasudha/followers","following_url":"https://api.github.com/users/bhasudha/following{/other_user}","gists_url":"https://api.github.com/users/bhasudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bhasudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhasudha/subscriptions","organizations_url":"https://api.github.com/users/bhasudha/orgs","repos_url":"https://api.github.com/users/bhasudha/repos","events_url":"https://api.github.com/users/bhasudha/events{/privacy}","received_events_url":"https://api.github.com/users/bhasudha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T00:24:55Z","updated_at":"2020-07-13T00:24:55Z","author_association":"CONTRIBUTOR","body":" IIUC you are enabling the consistency check config and still seeing the above issue ? @bvaradar  could you help ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657299606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657313523","html_url":"https://github.com/apache/hudi/issues/1798#issuecomment-657313523","issue_url":"https://api.github.com/repos/apache/hudi/issues/1798","id":657313523,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzMxMzUyMw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T01:32:32Z","updated_at":"2020-07-13T01:32:32Z","author_association":"MEMBER","body":"@zherenyu831 this seems like an issue with the contents of `.aux` as well listed additionally.. than anything to do with the actual reading of data.. cc @bvaradar to confirm if we made any fixes around this recently.. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657313523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657314447","html_url":"https://github.com/apache/hudi/pull/1774#issuecomment-657314447","issue_url":"https://api.github.com/repos/apache/hudi/issues/1774","id":657314447,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzMxNDQ0Nw==","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T01:36:53Z","updated_at":"2025-01-13T04:49:26Z","author_association":"NONE","body":"## [Codecov](https://app.codecov.io/gh/apache/hudi/pull/1774?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `0%` with `2 lines` in your changes missing coverage. Please review.\n> Project coverage is 61.28%. Comparing base [(`bf1d36f`)](https://app.codecov.io/gh/apache/hudi/commit/bf1d36fa639cae558aa388d8d547e58ad2e67aba?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`e2e7ec8`)](https://app.codecov.io/gh/apache/hudi/commit/e2e7ec86a15a82397d45ead08e76405fe83ff22d?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 4962 commits behind head on master.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/hudi/pull/1774?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...rg/apache/hudi/cli/commands/HoodieSyncCommand.java](https://app.codecov.io/gh/apache/hudi/pull/1774?src=pr&el=tree&filepath=hudi-cli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fhudi%2Fcli%2Fcommands%2FHoodieSyncCommand.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-aHVkaS1jbGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpL2NvbW1hbmRzL0hvb2RpZVN5bmNDb21tYW5kLmphdmE=) | 0.00% | [2 Missing :warning: ](https://app.codecov.io/gh/apache/hudi/pull/1774?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n[![Impacted file tree graph](https://app.codecov.io/gh/apache/hudi/pull/1774/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)](https://app.codecov.io/gh/apache/hudi/pull/1774?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1774      +/-   ##\n============================================\n+ Coverage     60.58%   61.28%   +0.69%     \n- Complexity     3646     3764     +118     \n============================================\n  Files           440      453      +13     \n  Lines         19055    19440     +385     \n  Branches       1923     1953      +30     \n============================================\n+ Hits          11544    11913     +369     \n+ Misses         6721     6716       -5     \n- Partials        790      811      +21     \n```\n\n| [Flag](https://app.codecov.io/gh/apache/hudi/pull/1774/flags?src=pr&el=flags&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [hudicli](https://app.codecov.io/gh/apache/hudi/pull/1774/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | `40.96% <0.00%> (+2.24%)` | :arrow_up: |\n| [hudiclient](https://app.codecov.io/gh/apache/hudi/pull/1774/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | `79.00% <ø> (-0.19%)` | :arrow_down: |\n| [hudicommon](https://app.codecov.io/gh/apache/hudi/pull/1774/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | `55.07% <ø> (+0.78%)` | :arrow_up: |\n| [hudihadoopmr](https://app.codecov.io/gh/apache/hudi/pull/1774/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | `38.99% <ø> (ø)` | |\n| [hudihivesync](https://app.codecov.io/gh/apache/hudi/pull/1774/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | `72.25% <ø> (ø)` | |\n| [hudispark](https://app.codecov.io/gh/apache/hudi/pull/1774/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | `49.24% <ø> (-0.13%)` | :arrow_down: |\n| [huditimelineservice](https://app.codecov.io/gh/apache/hudi/pull/1774/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | `63.47% <ø> (ø)` | |\n| [hudiutilities](https://app.codecov.io/gh/apache/hudi/pull/1774/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | `74.64% <ø> (-0.07%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/hudi/pull/1774?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/hudi/cli/commands/HoodieSyncCommand.java](https://app.codecov.io/gh/apache/hudi/pull/1774?src=pr&el=tree&filepath=hudi-cli%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fhudi%2Fcli%2Fcommands%2FHoodieSyncCommand.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-aHVkaS1jbGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpL2NvbW1hbmRzL0hvb2RpZVN5bmNDb21tYW5kLmphdmE=) | `3.12% <0.00%> (ø)` | |\n\n... and [56 files with indirect coverage changes](https://app.codecov.io/gh/apache/hudi/pull/1774/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache)\n\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657314447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657322002","html_url":"https://github.com/apache/hudi/pull/1774#issuecomment-657322002","issue_url":"https://api.github.com/repos/apache/hudi/issues/1774","id":657322002,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzMyMjAwMg==","user":{"login":"hddong","id":17537134,"node_id":"MDQ6VXNlcjE3NTM3MTM0","avatar_url":"https://avatars.githubusercontent.com/u/17537134?v=4","gravatar_id":"","url":"https://api.github.com/users/hddong","html_url":"https://github.com/hddong","followers_url":"https://api.github.com/users/hddong/followers","following_url":"https://api.github.com/users/hddong/following{/other_user}","gists_url":"https://api.github.com/users/hddong/gists{/gist_id}","starred_url":"https://api.github.com/users/hddong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hddong/subscriptions","organizations_url":"https://api.github.com/users/hddong/orgs","repos_url":"https://api.github.com/users/hddong/repos","events_url":"https://api.github.com/users/hddong/events{/privacy}","received_events_url":"https://api.github.com/users/hddong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T02:12:03Z","updated_at":"2020-07-13T02:12:03Z","author_association":"CONTRIBUTOR","body":"@yanghua please have a review when free.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657322002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657332648","html_url":"https://github.com/apache/hudi/issues/1790#issuecomment-657332648","issue_url":"https://api.github.com/repos/apache/hudi/issues/1790","id":657332648,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzMzMjY0OA==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T02:59:56Z","updated_at":"2020-07-13T02:59:56Z","author_association":"MEMBER","body":"Hi @zuyanton , thanks for report this issue. \r\nhttps://github.com/apache/hudi/commit/37838cea6094ddc66191df42e8b2c84f132d1623#diff-68b6e6f1a2c961fea254a2fc3b93ac23R213 is a refactoring work that doesn't change any code behavior. \r\nBased on your description, I believe this issue was related to EMR specifically. If `hive-exec-1.2.1-spark2-amzn-1.jar` is being used then it's reasonable for me that this issue happened. Would you able to update the HIVE related components to Hudi compatible version if it's possible on EMR?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657332648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657337822","html_url":"https://github.com/apache/hudi/issues/1823#issuecomment-657337822","issue_url":"https://api.github.com/repos/apache/hudi/issues/1823","id":657337822,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzMzNzgyMg==","user":{"login":"RajasekarSribalan","id":22605603,"node_id":"MDQ6VXNlcjIyNjA1NjAz","avatar_url":"https://avatars.githubusercontent.com/u/22605603?v=4","gravatar_id":"","url":"https://api.github.com/users/RajasekarSribalan","html_url":"https://github.com/RajasekarSribalan","followers_url":"https://api.github.com/users/RajasekarSribalan/followers","following_url":"https://api.github.com/users/RajasekarSribalan/following{/other_user}","gists_url":"https://api.github.com/users/RajasekarSribalan/gists{/gist_id}","starred_url":"https://api.github.com/users/RajasekarSribalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RajasekarSribalan/subscriptions","organizations_url":"https://api.github.com/users/RajasekarSribalan/orgs","repos_url":"https://api.github.com/users/RajasekarSribalan/repos","events_url":"https://api.github.com/users/RajasekarSribalan/events{/privacy}","received_events_url":"https://api.github.com/users/RajasekarSribalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T03:22:41Z","updated_at":"2020-07-13T03:43:38Z","author_association":"NONE","body":"Thank you for your response Bhavani. @bhasudha \r\n\r\n1.May I know the purpose of compaction schedule and compaction run command\r\nfrom Hudi CLI?\r\n\r\n2. If inline compaction is only possible from spark streaming for MOR\r\ntables then it is similar to CopyOnWrite table? There is no difference in\r\nusing them? Pls correct me if I am wrong.\r\n\r\nKind regards,\r\nRajasekar\r\n\r\nOn Mon, 13 Jul 2020, 5:43 am Bhavani Sudha Saktheeswaran, <\r\nnotifications@github.com> wrote:\r\n\r\n> @RajasekarSribalan <https://github.com/RajasekarSribalan> For your first\r\n> question, unfortunately currently in Spark Streaming writes only support\r\n> inline compaction is supported. So you have to enable that config. Good\r\n> news is, this PR <https://github.com/apache/hudi/pull/1752> is working on\r\n> enabling the async compaction for Spark Streaming and is in priority.\r\n>\r\n> For second question, couple clarifications.\r\n>\r\n>    - Hudi moved to Spark 2.4. I see that you are using spark 2.2.0. Could\r\n>    you try on spark 2.4* ?\r\n>    - Also, in your spark submit command are you passing in these jars and\r\n>    cones - https://hudi.apache.org/docs/quick-start-guide.html#setup\r\n>\r\n>\r\n>    1. The conf\r\n>    'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\n>    2. in addition to hudi-spark-bundle, you need to pass\r\n>    ,org.apache.spark:spark-avro_2.11:2.4.4 Note the spark-avro must match\r\n>    your spark version which is 2.4.4. This applies if you are using\r\n>    spark-shell as it does not ship with spark-avro explicitly.\r\n>\r\n> —\r\n> You are receiving this because you were mentioned.\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/apache/hudi/issues/1823#issuecomment-657297717>, or\r\n> unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AFMO6I26RADG2PR3ZGDG7GDR3JGRVANCNFSM4OXMTUNQ>\r\n> .\r\n>\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657337822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657361824","html_url":"https://github.com/apache/hudi/pull/1818#issuecomment-657361824","issue_url":"https://api.github.com/repos/apache/hudi/issues/1818","id":657361824,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzM2MTgyNA==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T05:11:03Z","updated_at":"2020-07-13T05:11:03Z","author_association":"MEMBER","body":"@yanghua @vinothchandar Thanks for the review. I can split the changes into 2 PRs\r\n1. (this one) Improve TestHBaseIndex (refactoring, move test cases to unit tests)\r\n2. (create a new one) add functional test suite to `hudi-client` and tag TestHBaseIndex as \"functional\"\r\n\r\ngoing to work on this in next few hours...","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657361824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657405609","html_url":"https://github.com/apache/hudi/pull/1818#issuecomment-657405609","issue_url":"https://api.github.com/repos/apache/hudi/issues/1818","id":657405609,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzQwNTYwOQ==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T08:28:29Z","updated_at":"2020-07-13T08:30:46Z","author_association":"MEMBER","body":"> @yanghua @vinothchandar Thanks for the review. I can split the changes into 2 PRs\r\n> \r\n> 1. (this one) Improve TestHBaseIndex (refactoring, move test cases to unit tests)\r\n> 2. (create a new one) add functional test suite to `hudi-client` and tag TestHBaseIndex as \"functional\"\r\n> \r\n> going to work on this in next few hours...\r\n\r\nSplit done. The 2nd one goes to #1824 , which contains the commit in this PR. Please take another pass. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657405609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657409985","html_url":"https://github.com/apache/hudi/pull/1727#issuecomment-657409985","issue_url":"https://api.github.com/repos/apache/hudi/issues/1727","id":657409985,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzQwOTk4NQ==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T08:36:35Z","updated_at":"2020-07-13T08:38:43Z","author_association":"CONTRIBUTOR","body":"![image](https://user-images.githubusercontent.com/49835526/87282012-66a8f780-c526-11ea-92de-45b024d450cf.png)\r\nIt is strange, Both these two unit tests run correctly in my local environment.\r\n@yanghua @leesf would you please take a look at this :)","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657409985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657454493","html_url":"https://github.com/apache/hudi/pull/1808#issuecomment-657454493","issue_url":"https://api.github.com/repos/apache/hudi/issues/1808","id":657454493,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzQ1NDQ5Mw==","user":{"login":"Trevor-zhang","id":33487819,"node_id":"MDQ6VXNlcjMzNDg3ODE5","avatar_url":"https://avatars.githubusercontent.com/u/33487819?v=4","gravatar_id":"","url":"https://api.github.com/users/Trevor-zhang","html_url":"https://github.com/Trevor-zhang","followers_url":"https://api.github.com/users/Trevor-zhang/followers","following_url":"https://api.github.com/users/Trevor-zhang/following{/other_user}","gists_url":"https://api.github.com/users/Trevor-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/Trevor-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Trevor-zhang/subscriptions","organizations_url":"https://api.github.com/users/Trevor-zhang/orgs","repos_url":"https://api.github.com/users/Trevor-zhang/repos","events_url":"https://api.github.com/users/Trevor-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/Trevor-zhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T09:51:14Z","updated_at":"2020-07-13T09:51:14Z","author_association":"CONTRIBUTOR","body":"> @nsivabalan can you please review this\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657454493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657467137","html_url":"https://github.com/apache/hudi/issues/1777#issuecomment-657467137","issue_url":"https://api.github.com/repos/apache/hudi/issues/1777","id":657467137,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzQ2NzEzNw==","user":{"login":"WaterKnight1998","id":41203448,"node_id":"MDQ6VXNlcjQxMjAzNDQ4","avatar_url":"https://avatars.githubusercontent.com/u/41203448?v=4","gravatar_id":"","url":"https://api.github.com/users/WaterKnight1998","html_url":"https://github.com/WaterKnight1998","followers_url":"https://api.github.com/users/WaterKnight1998/followers","following_url":"https://api.github.com/users/WaterKnight1998/following{/other_user}","gists_url":"https://api.github.com/users/WaterKnight1998/gists{/gist_id}","starred_url":"https://api.github.com/users/WaterKnight1998/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WaterKnight1998/subscriptions","organizations_url":"https://api.github.com/users/WaterKnight1998/orgs","repos_url":"https://api.github.com/users/WaterKnight1998/repos","events_url":"https://api.github.com/users/WaterKnight1998/events{/privacy}","received_events_url":"https://api.github.com/users/WaterKnight1998/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T10:11:31Z","updated_at":"2020-07-13T10:11:31Z","author_association":"NONE","body":"> \r\n> \r\n> @WaterKnight1998 Were you able to resolve ?\r\n\r\n1. Yes, above is all the config.\r\n\r\nWith this code snippet code it worked. I didn't try the `ComplexKeyGenerator`, as my solution worked. But looks like a more solid solution","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657467137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657552873","html_url":"https://github.com/apache/hudi/issues/1787#issuecomment-657552873","issue_url":"https://api.github.com/repos/apache/hudi/issues/1787","id":657552873,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzU1Mjg3Mw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T13:13:39Z","updated_at":"2020-07-13T13:13:39Z","author_association":"CONTRIBUTOR","body":"@asheeshgarg : As folks mentioned, the exception is happening when executor is trying to get timeline details from embedded timeline server running in driver. This is during only writes. It is a non-fatal error as client would fallback to querying the timeline locally and the commit would succeed. This is not expected to happen though. Can you look at the complete logs to get more details on the exceptions. Also, are you seeing the exception consistently ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657552873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657559542","html_url":"https://github.com/apache/hudi/issues/1813#issuecomment-657559542","issue_url":"https://api.github.com/repos/apache/hudi/issues/1813","id":657559542,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzU1OTU0Mg==","user":{"login":"jcunhafonte","id":17337794,"node_id":"MDQ6VXNlcjE3MzM3Nzk0","avatar_url":"https://avatars.githubusercontent.com/u/17337794?v=4","gravatar_id":"","url":"https://api.github.com/users/jcunhafonte","html_url":"https://github.com/jcunhafonte","followers_url":"https://api.github.com/users/jcunhafonte/followers","following_url":"https://api.github.com/users/jcunhafonte/following{/other_user}","gists_url":"https://api.github.com/users/jcunhafonte/gists{/gist_id}","starred_url":"https://api.github.com/users/jcunhafonte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcunhafonte/subscriptions","organizations_url":"https://api.github.com/users/jcunhafonte/orgs","repos_url":"https://api.github.com/users/jcunhafonte/repos","events_url":"https://api.github.com/users/jcunhafonte/events{/privacy}","received_events_url":"https://api.github.com/users/jcunhafonte/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T13:26:07Z","updated_at":"2020-07-13T13:26:07Z","author_association":"NONE","body":"Thank you for your help @bhasudha.\r\n\r\nRunning the command continuously works however what happens if my cluster fails? Do I need to clean up Hudi target table and execute the job again? That would lose all the historical changes.\r\n\r\nIn the article shared above (http://hudi.apache.org/blog/change-capture-using-aws/) the deltastreamer command is executed multiple times and the schema is not provided, however, the Hudi version is 0.5.1. Was this a breaking change on 0.5.2?\r\n\r\nThank you.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657559542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657568735","html_url":"https://github.com/apache/hudi/issues/1800#issuecomment-657568735","issue_url":"https://api.github.com/repos/apache/hudi/issues/1800","id":657568735,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzU2ODczNQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T13:42:41Z","updated_at":"2020-07-13T13:43:26Z","author_association":"CONTRIBUTOR","body":"@tooptoop4 :  Can you provide more information on the context ?\r\n\r\n1. Complete logs for the run with debug log enabled.  Is the input batch empty here  ? Wondering if there is any problem here.\r\n2. Are you using delta-streamer or spark Sql write ? From the stack trace, it does look like you are using write client directly ?\r\n3. Configurations that you are setting for this run. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657568735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657574095","html_url":"https://github.com/apache/hudi/issues/1800#issuecomment-657574095","issue_url":"https://api.github.com/repos/apache/hudi/issues/1800","id":657574095,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzU3NDA5NQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T13:51:53Z","updated_at":"2020-07-13T13:51:53Z","author_association":"CONTRIBUTOR","body":"@tooptoop4 : Can you also confirm if this is the officially released 0.5.3 version ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657574095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657597244","html_url":"https://github.com/apache/hudi/issues/1790#issuecomment-657597244","issue_url":"https://api.github.com/repos/apache/hudi/issues/1790","id":657597244,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzU5NzI0NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T14:34:17Z","updated_at":"2020-07-13T14:34:17Z","author_association":"CONTRIBUTOR","body":"@umehrot2 @zhedoubushishi @bschell : Is this a known issue with EMR ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657597244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657622530","html_url":"https://github.com/apache/hudi/pull/1793#issuecomment-657622530","issue_url":"https://api.github.com/repos/apache/hudi/issues/1793","id":657622530,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzYyMjUzMA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T15:18:49Z","updated_at":"2020-07-13T15:18:49Z","author_association":"CONTRIBUTOR","body":"@xushiyan : addressed all comments","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657622530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657720726","html_url":"https://github.com/apache/hudi/issues/1790#issuecomment-657720726","issue_url":"https://api.github.com/repos/apache/hudi/issues/1790","id":657720726,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzcyMDcyNg==","user":{"login":"zhedoubushishi","id":31263084,"node_id":"MDQ6VXNlcjMxMjYzMDg0","avatar_url":"https://avatars.githubusercontent.com/u/31263084?v=4","gravatar_id":"","url":"https://api.github.com/users/zhedoubushishi","html_url":"https://github.com/zhedoubushishi","followers_url":"https://api.github.com/users/zhedoubushishi/followers","following_url":"https://api.github.com/users/zhedoubushishi/following{/other_user}","gists_url":"https://api.github.com/users/zhedoubushishi/gists{/gist_id}","starred_url":"https://api.github.com/users/zhedoubushishi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhedoubushishi/subscriptions","organizations_url":"https://api.github.com/users/zhedoubushishi/orgs","repos_url":"https://api.github.com/users/zhedoubushishi/repos","events_url":"https://api.github.com/users/zhedoubushishi/events{/privacy}","received_events_url":"https://api.github.com/users/zhedoubushishi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T18:30:52Z","updated_at":"2020-07-13T18:30:52Z","author_association":"CONTRIBUTOR","body":"I think it's this pr that fix the bug for your exception: https://github.com/apache/hudi/pull/1677/files.\r\n\r\nFor the ```hive-exec-1.2.1-spark2-amzn-1.jar``` issue, I don't think it's specifically related to EMR because all the  Spark 2.x depends on ```1.2.1.spark2``` hive version: https://github.com/apache/spark/blob/v2.4.6/pom.xml#L129.\r\n\r\nTo solve this issue, I would suggest using ```HiveDecimalUtils.enforcePrecisionScale(HiveDecimalWritable writable, DecimalTypeInfo typeInfo)``` instead of https://github.com/apache/hudi/blob/2603cfb33e272632d7f36a53e1b13fe86dbb8627/hudi-hadoop-mr/src/main/java/org/apache/hudi/hadoop/utils/HoodieRealtimeRecordReaderUtils.java#L213. Because ```HiveDecimalUtils.enforcePrecisionScale(HiveDecimalWritable writable, DecimalTypeInfo typeInfo)``` is compatible with both Hive 2.3.1 and Hive 1.2.0.\r\n\r\nIt this makes sense, I can create a pr for this.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657720726/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657723942","html_url":"https://github.com/apache/hudi/issues/1794#issuecomment-657723942","issue_url":"https://api.github.com/repos/apache/hudi/issues/1794","id":657723942,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzcyMzk0Mg==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T18:37:25Z","updated_at":"2020-07-13T18:37:25Z","author_association":"CONTRIBUTOR","body":"Sure. I will try to reproduce. Will update in two days. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657723942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657726718","html_url":"https://github.com/apache/hudi/issues/1790#issuecomment-657726718","issue_url":"https://api.github.com/repos/apache/hudi/issues/1790","id":657726718,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzcyNjcxOA==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T18:43:08Z","updated_at":"2020-07-13T18:43:08Z","author_association":"MEMBER","body":"@zhedoubushishi makes sense to me!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657726718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657736191","html_url":"https://github.com/apache/hudi/issues/1790#issuecomment-657736191","issue_url":"https://api.github.com/repos/apache/hudi/issues/1790","id":657736191,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzczNjE5MQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T19:03:02Z","updated_at":"2020-07-13T19:03:02Z","author_association":"CONTRIBUTOR","body":"@zhedoubushishi  : Thanks for the jumping into this. I have assigned the jira : https://issues.apache.org/jira/browse/HUDI-1087 to you. Please go ahead and create a PR. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657736191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657742470","html_url":"https://github.com/apache/hudi/pull/1289#issuecomment-657742470","issue_url":"https://api.github.com/repos/apache/hudi/issues/1289","id":657742470,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzc0MjQ3MA==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T19:16:32Z","updated_at":"2020-07-13T19:16:32Z","author_association":"MEMBER","body":"@n3nash  I have rebased the changes. Build is green.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657742470/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657783113","html_url":"https://github.com/apache/hudi/issues/1800#issuecomment-657783113","issue_url":"https://api.github.com/repos/apache/hudi/issues/1800","id":657783113,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzc4MzExMw==","user":{"login":"tooptoop4","id":33283496,"node_id":"MDQ6VXNlcjMzMjgzNDk2","avatar_url":"https://avatars.githubusercontent.com/u/33283496?v=4","gravatar_id":"","url":"https://api.github.com/users/tooptoop4","html_url":"https://github.com/tooptoop4","followers_url":"https://api.github.com/users/tooptoop4/followers","following_url":"https://api.github.com/users/tooptoop4/following{/other_user}","gists_url":"https://api.github.com/users/tooptoop4/gists{/gist_id}","starred_url":"https://api.github.com/users/tooptoop4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tooptoop4/subscriptions","organizations_url":"https://api.github.com/users/tooptoop4/orgs","repos_url":"https://api.github.com/users/tooptoop4/repos","events_url":"https://api.github.com/users/tooptoop4/events{/privacy}","received_events_url":"https://api.github.com/users/tooptoop4/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T20:41:26Z","updated_at":"2020-07-13T20:41:26Z","author_association":"NONE","body":"includes some local patches after the official 0.5.3 release. not delta-streamer, using standard spark df write. will share the logs and configs","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657783113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657806405","html_url":"https://github.com/apache/hudi/issues/1787#issuecomment-657806405","issue_url":"https://api.github.com/repos/apache/hudi/issues/1787","id":657806405,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzgwNjQwNQ==","user":{"login":"asheeshgarg","id":4348671,"node_id":"MDQ6VXNlcjQzNDg2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4348671?v=4","gravatar_id":"","url":"https://api.github.com/users/asheeshgarg","html_url":"https://github.com/asheeshgarg","followers_url":"https://api.github.com/users/asheeshgarg/followers","following_url":"https://api.github.com/users/asheeshgarg/following{/other_user}","gists_url":"https://api.github.com/users/asheeshgarg/gists{/gist_id}","starred_url":"https://api.github.com/users/asheeshgarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asheeshgarg/subscriptions","organizations_url":"https://api.github.com/users/asheeshgarg/orgs","repos_url":"https://api.github.com/users/asheeshgarg/repos","events_url":"https://api.github.com/users/asheeshgarg/events{/privacy}","received_events_url":"https://api.github.com/users/asheeshgarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T21:37:28Z","updated_at":"2020-07-13T21:37:28Z","author_association":"NONE","body":"@bhasudha in my setup we are not running hive we are just using the metadatastore from hive. So what I did I regster a external table like \r\nCREATE TABLE test.hoodie_test2(\r\n\"_hoodie_commit_time\" varchar,\r\n\"_hoodie_commit_seqno\" varchar,\r\n\"_hoodie_record_key\" varchar,\r\n\"_hoodie_partition_path\" varchar,\r\n\"_hoodie_file_name\" varchar,\r\n\"column\" varchar,\r\n\"data_type\" varchar,\r\n\"is_data_type_inferred\" varchar,\r\n\"completeness\" double,\r\n\"approximate_num_distinct_values\" bigint,\r\n\"histogram\" array(row(count bigint, ratio double, value varchar)),\r\n\"mean\" double,\r\n\"maximum\" double,\r\n\"minimum\" double,\r\n\"sum\" double,\r\n\"std_dev\" double,\r\napprox_percentiles ARRAY )\r\nWITH (\r\nformat='parquet',\r\nexternal_location='s3a://tempwrite/hudi/'\r\n)\r\nJust wanted to know if this is right way of doing it does it going to loose any of the functionality?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657806405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657904289","html_url":"https://github.com/apache/hudi/pull/1770#issuecomment-657904289","issue_url":"https://api.github.com/repos/apache/hudi/issues/1770","id":657904289,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzkwNDI4OQ==","user":{"login":"hddong","id":17537134,"node_id":"MDQ6VXNlcjE3NTM3MTM0","avatar_url":"https://avatars.githubusercontent.com/u/17537134?v=4","gravatar_id":"","url":"https://api.github.com/users/hddong","html_url":"https://github.com/hddong","followers_url":"https://api.github.com/users/hddong/followers","following_url":"https://api.github.com/users/hddong/following{/other_user}","gists_url":"https://api.github.com/users/hddong/gists{/gist_id}","starred_url":"https://api.github.com/users/hddong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hddong/subscriptions","organizations_url":"https://api.github.com/users/hddong/orgs","repos_url":"https://api.github.com/users/hddong/repos","events_url":"https://api.github.com/users/hddong/events{/privacy}","received_events_url":"https://api.github.com/users/hddong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T00:54:57Z","updated_at":"2020-07-14T00:54:57Z","author_association":"CONTRIBUTOR","body":"@yanghua : It's ready, please have a review when free.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657904289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657907476","html_url":"https://github.com/apache/hudi/pull/1774#issuecomment-657907476","issue_url":"https://api.github.com/repos/apache/hudi/issues/1774","id":657907476,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzkwNzQ3Ng==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T01:07:34Z","updated_at":"2020-07-14T01:07:34Z","author_association":"CONTRIBUTOR","body":"> @yanghua please have a review when free.\r\n\r\nOK, will review soon.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657907476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657907638","html_url":"https://github.com/apache/hudi/pull/1770#issuecomment-657907638","issue_url":"https://api.github.com/repos/apache/hudi/issues/1770","id":657907638,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzkwNzYzOA==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T01:08:06Z","updated_at":"2020-07-14T01:08:06Z","author_association":"CONTRIBUTOR","body":"> @yanghua : It's ready, please have a review when free.\r\n\r\nWill review soon.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657907638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657925062","html_url":"https://github.com/apache/hudi/pull/1824#issuecomment-657925062","issue_url":"https://api.github.com/repos/apache/hudi/issues/1824","id":657925062,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzkyNTA2Mg==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T02:14:31Z","updated_at":"2020-07-14T02:14:31Z","author_association":"MEMBER","body":"@yanghua will rebase this one once #1818 merged. thanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657925062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657946414","html_url":"https://github.com/apache/hudi/pull/1149#issuecomment-657946414","issue_url":"https://api.github.com/repos/apache/hudi/issues/1149","id":657946414,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk0NjQxNA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T03:33:29Z","updated_at":"2020-07-14T03:33:29Z","author_association":"MEMBER","body":"@yihua is this ready for review? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657946414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657946663","html_url":"https://github.com/apache/hudi/pull/1804#issuecomment-657946663","issue_url":"https://api.github.com/repos/apache/hudi/issues/1804","id":657946663,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk0NjY2Mw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T03:34:43Z","updated_at":"2020-07-14T03:34:43Z","author_association":"MEMBER","body":"@prashantwason will review this tomorrow or wed. works? Please let me know if you are blocked by this.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657946663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657958175","html_url":"https://github.com/apache/hudi/issues/1823#issuecomment-657958175","issue_url":"https://api.github.com/repos/apache/hudi/issues/1823","id":657958175,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk1ODE3NQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T04:24:08Z","updated_at":"2020-07-14T04:24:08Z","author_association":"CONTRIBUTOR","body":"@RajasekarSribalan :  Compactions should be able to be triggered and executed from CLI if there are delta files and configured correctly. Can you post the logs from \"compaction schedule\" after you disabled inline compaction and delta files got added.  The only constraint is that when scheduling compactions, ingestion should not be running.\r\n\r\n If you are running structured streaming job, please try out the PR suggested by @bhasudha which will execute compaction asynchronously. In batch mode, You can also enable inline compaction and setting a proper value for hoodie.compact.inline.max.delta.commits depending on how frequent you want to run compactions.\r\n\r\nRegarding (2) Compaction is only relevant for MOR tables. Compaction is the process of taking the delta-files and creating columnar files. CopyOnWrite tables are implicitly compacted.\r\n\r\nRegarding the error related to kryoException, Are you still seeing the error ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657958175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657961520","html_url":"https://github.com/apache/hudi/issues/1738#issuecomment-657961520","issue_url":"https://api.github.com/repos/apache/hudi/issues/1738","id":657961520,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk2MTUyMA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T04:38:07Z","updated_at":"2020-07-14T04:38:07Z","author_association":"CONTRIBUTOR","body":"@tooptoop4 : Also, As this is not being reported by others commonly , I am wondering if you can check whether the patch you have on top of hudi might be causing it ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657961520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657990530","html_url":"https://github.com/apache/hudi/issues/1813#issuecomment-657990530","issue_url":"https://api.github.com/repos/apache/hudi/issues/1813","id":657990530,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk5MDUzMA==","user":{"login":"bhasudha","id":2179254,"node_id":"MDQ6VXNlcjIxNzkyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2179254?v=4","gravatar_id":"","url":"https://api.github.com/users/bhasudha","html_url":"https://github.com/bhasudha","followers_url":"https://api.github.com/users/bhasudha/followers","following_url":"https://api.github.com/users/bhasudha/following{/other_user}","gists_url":"https://api.github.com/users/bhasudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bhasudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhasudha/subscriptions","organizations_url":"https://api.github.com/users/bhasudha/orgs","repos_url":"https://api.github.com/users/bhasudha/repos","events_url":"https://api.github.com/users/bhasudha/events{/privacy}","received_events_url":"https://api.github.com/users/bhasudha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T06:14:48Z","updated_at":"2020-07-14T06:14:48Z","author_association":"CONTRIBUTOR","body":"@jcunhafonte  you wouldn't need to clean up the Hudi table as the Deltastreamer checkpoints the source offsets along with Hudi metadata. So when the job is run again it can pick up from where it left last time.\r\n\r\nRegarding your second question on schema provider in the http://hudi.apache.org/blog/change-capture-using-aws/ there was no breaking change.  @bvaradar could you help with sharing more context on what happens when schema provider is not present and the implications of running the Deltastreamer sync once mode iteratively (NOT in the continuous mode) without providing schema provider .","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657990530/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657999488","html_url":"https://github.com/apache/hudi/issues/1787#issuecomment-657999488","issue_url":"https://api.github.com/repos/apache/hudi/issues/1787","id":657999488,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk5OTQ4OA==","user":{"login":"bhasudha","id":2179254,"node_id":"MDQ6VXNlcjIxNzkyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2179254?v=4","gravatar_id":"","url":"https://api.github.com/users/bhasudha","html_url":"https://github.com/bhasudha","followers_url":"https://api.github.com/users/bhasudha/followers","following_url":"https://api.github.com/users/bhasudha/following{/other_user}","gists_url":"https://api.github.com/users/bhasudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bhasudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhasudha/subscriptions","organizations_url":"https://api.github.com/users/bhasudha/orgs","repos_url":"https://api.github.com/users/bhasudha/repos","events_url":"https://api.github.com/users/bhasudha/events{/privacy}","received_events_url":"https://api.github.com/users/bhasudha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T06:39:32Z","updated_at":"2020-07-14T06:39:32Z","author_association":"CONTRIBUTOR","body":"> @bhasudha in my setup we are not running hive we are just using the metadatastore from hive. So what I did I regster a external table like\r\n> CREATE TABLE test.hoodie_test2(\r\n> \"_hoodie_commit_time\" varchar,\r\n> \"_hoodie_commit_seqno\" varchar,\r\n> \"_hoodie_record_key\" varchar,\r\n> \"_hoodie_partition_path\" varchar,\r\n> \"_hoodie_file_name\" varchar,\r\n> \"column\" varchar,\r\n> \"data_type\" varchar,\r\n> \"is_data_type_inferred\" varchar,\r\n> \"completeness\" double,\r\n> \"approximate_num_distinct_values\" bigint,\r\n> \"histogram\" array(row(count bigint, ratio double, value varchar)),\r\n> \"mean\" double,\r\n> \"maximum\" double,\r\n> \"minimum\" double,\r\n> \"sum\" double,\r\n> \"std_dev\" double,\r\n> approx_percentiles ARRAY )\r\n> WITH (\r\n> format='parquet',\r\n> external_location='s3a://tempwrite/hudi/'\r\n> )\r\n> Just wanted to know if this is right way of doing it does it going to loose any of the functionality?\r\n\r\n@asheeshgarg  I understand you are not running Hive. For Presto queries the Hudi table needs to be registered with Hive metastore. Looks like that what you are trying to do above, but from Presto. The above might not work because it doesn't represent that this table is Hudi formatted. That would take work on Presto side to support writes to Hudi. Instead you might want to do Hive sync (which is registering the table schema to Hive metastore) - https://hudi.apache.org/docs/writing_data.html#syncing-to-hive which sets the input and output formats and also the SerDe s as Hudi would require. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/657999488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658046052","html_url":"https://github.com/apache/hudi/issues/1789#issuecomment-658046052","issue_url":"https://api.github.com/repos/apache/hudi/issues/1789","id":658046052,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODA0NjA1Mg==","user":{"login":"GrigorievNick","id":16338643,"node_id":"MDQ6VXNlcjE2MzM4NjQz","avatar_url":"https://avatars.githubusercontent.com/u/16338643?v=4","gravatar_id":"","url":"https://api.github.com/users/GrigorievNick","html_url":"https://github.com/GrigorievNick","followers_url":"https://api.github.com/users/GrigorievNick/followers","following_url":"https://api.github.com/users/GrigorievNick/following{/other_user}","gists_url":"https://api.github.com/users/GrigorievNick/gists{/gist_id}","starred_url":"https://api.github.com/users/GrigorievNick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrigorievNick/subscriptions","organizations_url":"https://api.github.com/users/GrigorievNick/orgs","repos_url":"https://api.github.com/users/GrigorievNick/repos","events_url":"https://api.github.com/users/GrigorievNick/events{/privacy}","received_events_url":"https://api.github.com/users/GrigorievNick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T08:27:31Z","updated_at":"2020-07-14T08:27:31Z","author_association":"NONE","body":"I think you can close issue\r\nhttps://docs.aws.amazon.com/athena/latest/ug/querying-hudi.html#querying-hudi-in-athena-creating-hudi-tables","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658046052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658128510","html_url":"https://github.com/apache/hudi/pull/1824#issuecomment-658128510","issue_url":"https://api.github.com/repos/apache/hudi/issues/1824","id":658128510,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODEyODUxMA==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T11:31:21Z","updated_at":"2020-07-14T11:31:21Z","author_association":"CONTRIBUTOR","body":"@vinothchandar Do you still have any concerns?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658128510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658130555","html_url":"https://github.com/apache/hudi/pull/1819#issuecomment-658130555","issue_url":"https://api.github.com/repos/apache/hudi/issues/1819","id":658130555,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODEzMDU1NQ==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T11:36:32Z","updated_at":"2020-07-14T11:36:32Z","author_association":"CONTRIBUTOR","body":"Looks like there are 2 options here. \r\nOption1: Change interface for combineAndGetUpdateValue and getInsertValue to take in delete field.\r\ncheck https://github.com/apache/hudi/pull/1792 on why we need to fix getInsertValue as well. \r\nOption2: Approach taken in the patch, where in expose a setDeleteField method in OverwriteWithLatestAvroPayload and this will be set while generating HoodieRecords from GenericRecord.\r\n\r\nSince making changes in getInsertValue will touch lot of files, guess we can go with Option2 with some changes. \r\nInstead of exposing a new method, why can't we add an overloaded constructor. When HoodieSparkSqlWriter calls into \r\n```\r\nDataSourceUtils.createHoodieRecord(gr,\r\n                orderingVal, keyGenerator.getKey(gr), parameters(PAYLOAD_CLASS_OPT_KEY))\r\n```\r\nwe could also pass in a delete field optionally which inturn will be passed into constructor of OverwriteWithLatestAvroPayload. If delete field is set by user, then we take that else we resort to \"_hoodie_is_deleted\".\r\n\r\nLet me know your thoughts.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658130555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658150685","html_url":"https://github.com/apache/hudi/pull/1727#issuecomment-658150685","issue_url":"https://api.github.com/repos/apache/hudi/issues/1727","id":658150685,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODE1MDY4NQ==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T12:27:45Z","updated_at":"2020-07-14T12:28:02Z","author_association":"CONTRIBUTOR","body":"refactor is finished, review goes to https://github.com/apache/hudi/pull/1827","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658150685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658151869","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-658151869","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":658151869,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODE1MTg2OQ==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T12:30:33Z","updated_at":"2020-07-14T12:43:17Z","author_association":"CONTRIBUTOR","body":"Hi, @vinothchandar @yanghua @leesf  as the refactor is finished, I have filed a Jira ticket to track this work,\r\nplease review the refactor work on this pr :)","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658151869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658188686","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-658188686","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":658188686,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODE4ODY4Ng==","user":{"login":"asheeshgarg","id":4348671,"node_id":"MDQ6VXNlcjQzNDg2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4348671?v=4","gravatar_id":"","url":"https://api.github.com/users/asheeshgarg","html_url":"https://github.com/asheeshgarg","followers_url":"https://api.github.com/users/asheeshgarg/followers","following_url":"https://api.github.com/users/asheeshgarg/following{/other_user}","gists_url":"https://api.github.com/users/asheeshgarg/gists{/gist_id}","starred_url":"https://api.github.com/users/asheeshgarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asheeshgarg/subscriptions","organizations_url":"https://api.github.com/users/asheeshgarg/orgs","repos_url":"https://api.github.com/users/asheeshgarg/repos","events_url":"https://api.github.com/users/asheeshgarg/events{/privacy}","received_events_url":"https://api.github.com/users/asheeshgarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T13:45:54Z","updated_at":"2020-07-14T13:45:54Z","author_association":"NONE","body":"@bvaradar Balaji please let me know if I need to assign additional properties to achieve the behavior.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658188686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658191364","html_url":"https://github.com/apache/hudi/issues/1787#issuecomment-658191364","issue_url":"https://api.github.com/repos/apache/hudi/issues/1787","id":658191364,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODE5MTM2NA==","user":{"login":"asheeshgarg","id":4348671,"node_id":"MDQ6VXNlcjQzNDg2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4348671?v=4","gravatar_id":"","url":"https://api.github.com/users/asheeshgarg","html_url":"https://github.com/asheeshgarg","followers_url":"https://api.github.com/users/asheeshgarg/followers","following_url":"https://api.github.com/users/asheeshgarg/following{/other_user}","gists_url":"https://api.github.com/users/asheeshgarg/gists{/gist_id}","starred_url":"https://api.github.com/users/asheeshgarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asheeshgarg/subscriptions","organizations_url":"https://api.github.com/users/asheeshgarg/orgs","repos_url":"https://api.github.com/users/asheeshgarg/repos","events_url":"https://api.github.com/users/asheeshgarg/events{/privacy}","received_events_url":"https://api.github.com/users/asheeshgarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T13:50:26Z","updated_at":"2020-07-14T13:50:26Z","author_association":"NONE","body":"@bhasudha it work with Presto and I am able to query data fine and data seems to be correct based on my queries. The only concern I have is it missing anything that might hit in long run?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658191364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658217251","html_url":"https://github.com/apache/hudi/pull/1819#issuecomment-658217251","issue_url":"https://api.github.com/repos/apache/hudi/issues/1819","id":658217251,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODIxNzI1MQ==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T14:35:39Z","updated_at":"2020-07-14T14:35:39Z","author_association":"MEMBER","body":"@nsivabalan actually what i commented here is the 3rd option\r\n\r\n> @shenh062326 Maybe we shouldn't do the check in the payload class itself. Maybe `org.apache.hudi.io.HoodieMergeHandle#write` is better for this job. After\r\n> https://github.com/apache/hudi/blob/2603cfb33e272632d7f36a53e1b13fe86dbb8627/hudi-client/src/main/java/org/apache/hudi/io/HoodieMergeHandle.java#L222-L223\r\n> \r\n> \r\n> we check `combinedAvroRecord` against the delete field defined in the configs and convert it to Option.empty() if appropriate. As this feature is config-related, whoever owns the configs should do it. Need more inputs from @nsivabalan\r\n\r\nBasically it is about shifting the responsibility of converting records to `Option.empty()` to `HoodieMergeHandle`. WDYT?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658217251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658220450","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-658220450","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":658220450,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODIyMDQ1MA==","user":{"login":"tooptoop4","id":33283496,"node_id":"MDQ6VXNlcjMzMjgzNDk2","avatar_url":"https://avatars.githubusercontent.com/u/33283496?v=4","gravatar_id":"","url":"https://api.github.com/users/tooptoop4","html_url":"https://github.com/tooptoop4","followers_url":"https://api.github.com/users/tooptoop4/followers","following_url":"https://api.github.com/users/tooptoop4/following{/other_user}","gists_url":"https://api.github.com/users/tooptoop4/gists{/gist_id}","starred_url":"https://api.github.com/users/tooptoop4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tooptoop4/subscriptions","organizations_url":"https://api.github.com/users/tooptoop4/orgs","repos_url":"https://api.github.com/users/tooptoop4/repos","events_url":"https://api.github.com/users/tooptoop4/events{/privacy}","received_events_url":"https://api.github.com/users/tooptoop4/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T14:41:16Z","updated_at":"2020-07-15T10:39:52Z","author_association":"NONE","body":"I seem to have similar issue, running upsert of 700MB csv (twice, ie repeat the same csv upsert next day) with 16gb executor memory, 5 executors and shuffle parallelism of 16 \r\n\r\n![image](https://user-images.githubusercontent.com/33283496/87439033-2f028400-c5e8-11ea-953d-fdf5dd23a91c.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658220450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658221068","html_url":"https://github.com/apache/hudi/pull/1406#issuecomment-658221068","issue_url":"https://api.github.com/repos/apache/hudi/issues/1406","id":658221068,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODIyMTA2OA==","user":{"login":"aditanase","id":2746097,"node_id":"MDQ6VXNlcjI3NDYwOTc=","avatar_url":"https://avatars.githubusercontent.com/u/2746097?v=4","gravatar_id":"","url":"https://api.github.com/users/aditanase","html_url":"https://github.com/aditanase","followers_url":"https://api.github.com/users/aditanase/followers","following_url":"https://api.github.com/users/aditanase/following{/other_user}","gists_url":"https://api.github.com/users/aditanase/gists{/gist_id}","starred_url":"https://api.github.com/users/aditanase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aditanase/subscriptions","organizations_url":"https://api.github.com/users/aditanase/orgs","repos_url":"https://api.github.com/users/aditanase/repos","events_url":"https://api.github.com/users/aditanase/events{/privacy}","received_events_url":"https://api.github.com/users/aditanase/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T14:42:29Z","updated_at":"2020-07-14T14:42:29Z","author_association":"NONE","body":"@umehrot2 agreed and it's a valid point for when you control the schema, which in this case is defined by a customer upstream from us.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658221068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658221173","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-658221173","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":658221173,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODIyMTE3Mw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T14:42:38Z","updated_at":"2020-07-14T14:42:38Z","author_association":"CONTRIBUTOR","body":"@asheeshgarg :  I think what you are looking for is clustering (not compaction) of files which is under development (Please see https://cwiki.apache.org/confluence/display/HUDI/RFC+-+19+Clustering+data+for+speed+and+query+performance). To your setup, a good strategy would be to have a single hudi writer read one or more of these datasets and ingest to hudi. Hudi supports file sizing - Please see https://cwiki.apache.org/confluence/display/HUDI/FAQ#FAQ-HowdoItoavoidcreatingtonsofsmallfiles for more details. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658221173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658237088","html_url":"https://github.com/apache/hudi/issues/1813#issuecomment-658237088","issue_url":"https://api.github.com/repos/apache/hudi/issues/1813","id":658237088,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODIzNzA4OA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T15:11:03Z","updated_at":"2020-07-14T15:11:03Z","author_association":"CONTRIBUTOR","body":"@jcunhafonte :  This could happen when there are no more files to be ingested when running in non-continuous mode. I have opened a jira to get it fixed in 0.6.0 :  https://issues.apache.org/jira/browse/HUDI-1091. With no input data, automatic schema resolution wont be possible. In continuous mode, we do cache the previous schema registry instance to handle this case. Can you try with that. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658237088/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658244220","html_url":"https://github.com/apache/hudi/issues/1798#issuecomment-658244220","issue_url":"https://api.github.com/repos/apache/hudi/issues/1798","id":658244220,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODI0NDIyMA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T15:23:37Z","updated_at":"2020-07-14T15:23:37Z","author_association":"CONTRIBUTOR","body":"The related code (HoodieROTablePathFilter) does not seem to have any relevant recent changes. \r\n\r\n@zherenyu831 From the control flow, since Spark deciphers the glob-path, it is first performing the listing of all matching entities and this is where I think  it is slower try to list files under .aux. One option to try (for experimentation) is to skip \".hoodie\" folder in glob pattern and see if it is faster. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658244220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658245237","html_url":"https://github.com/apache/hudi/issues/1790#issuecomment-658245237","issue_url":"https://api.github.com/repos/apache/hudi/issues/1790","id":658245237,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODI0NTIzNw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T15:25:31Z","updated_at":"2020-07-14T15:25:31Z","author_association":"CONTRIBUTOR","body":"Closing this ticket as we have a jira to track this issue.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658245237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658248015","html_url":"https://github.com/apache/hudi/issues/1787#issuecomment-658248015","issue_url":"https://api.github.com/repos/apache/hudi/issues/1787","id":658248015,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODI0ODAxNQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T15:30:32Z","updated_at":"2020-07-14T15:30:32Z","author_association":"CONTRIBUTOR","body":"@asheeshgarg : If the table is represented as simple parquet table, presto queries will start showing duplicates when there are multiple file versions present or could fail when writes are happening (no snapshot isolation). Creating a table using hive sync would ensure only valid and single file versions  are read. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658248015/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658282320","html_url":"https://github.com/apache/hudi/issues/1828#issuecomment-658282320","issue_url":"https://api.github.com/repos/apache/hudi/issues/1828","id":658282320,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODI4MjMyMA==","user":{"login":"bhasudha","id":2179254,"node_id":"MDQ6VXNlcjIxNzkyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2179254?v=4","gravatar_id":"","url":"https://api.github.com/users/bhasudha","html_url":"https://github.com/bhasudha","followers_url":"https://api.github.com/users/bhasudha/followers","following_url":"https://api.github.com/users/bhasudha/following{/other_user}","gists_url":"https://api.github.com/users/bhasudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bhasudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhasudha/subscriptions","organizations_url":"https://api.github.com/users/bhasudha/orgs","repos_url":"https://api.github.com/users/bhasudha/repos","events_url":"https://api.github.com/users/bhasudha/events{/privacy}","received_events_url":"https://api.github.com/users/bhasudha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T16:32:16Z","updated_at":"2020-07-14T16:32:16Z","author_association":"CONTRIBUTOR","body":"> Hi Guys,\r\n> \r\n> Is it possible to retain only last commit? When I put 'hoodie.cleaner.commits.retained': 1 in hudi_options I still have two last commits. One that is being written and the previous one. What I want to achieve is to have only last change and last parquet file.\r\n\r\n@kirkuz  providing some context. Cleaning and compaction happen in the background (asynchronous to ingestion itself). When the cleaner kicks in it would get rid of the older commit. If there is an ongoing write, generally there could be two possibilities - \r\n1. the write would succeed. in which case based on `hoodie.cleaner.commits.retained` the cleaner would get rid of the old version when it triggers.\r\n2. the write would fail for some reason - in this case the cleaner would later get rid of the failed commit and retain the other  version (which is the last succeeded one)\r\n\r\nThis is why you are seeing two commits. This should not affect the queries. Can you please elaborate on what you were looking for in terms of use case/ performance concern etc to help us understand better ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658282320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658325538","html_url":"https://github.com/apache/hudi/pull/1804#issuecomment-658325538","issue_url":"https://api.github.com/repos/apache/hudi/issues/1804","id":658325538,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODMyNTUzOA==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T17:58:19Z","updated_at":"2020-07-14T17:58:19Z","author_association":"MEMBER","body":"@vinothchandar Am not currently blocked on this. Take a fine-combed look so we can make this a model for adding new file formats to HUDI. \r\n\r\nPlease suggest better testing approaches / extra documentation / code comments.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658325538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658363753","html_url":"https://github.com/apache/hudi/issues/1830#issuecomment-658363753","issue_url":"https://api.github.com/repos/apache/hudi/issues/1830","id":658363753,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODM2Mzc1Mw==","user":{"login":"srsteinmetz","id":3799859,"node_id":"MDQ6VXNlcjM3OTk4NTk=","avatar_url":"https://avatars.githubusercontent.com/u/3799859?v=4","gravatar_id":"","url":"https://api.github.com/users/srsteinmetz","html_url":"https://github.com/srsteinmetz","followers_url":"https://api.github.com/users/srsteinmetz/followers","following_url":"https://api.github.com/users/srsteinmetz/following{/other_user}","gists_url":"https://api.github.com/users/srsteinmetz/gists{/gist_id}","starred_url":"https://api.github.com/users/srsteinmetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srsteinmetz/subscriptions","organizations_url":"https://api.github.com/users/srsteinmetz/orgs","repos_url":"https://api.github.com/users/srsteinmetz/repos","events_url":"https://api.github.com/users/srsteinmetz/events{/privacy}","received_events_url":"https://api.github.com/users/srsteinmetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T19:16:43Z","updated_at":"2020-07-14T19:17:03Z","author_association":"NONE","body":"Accidentally posted early. Closed and reopened after editing post.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658363753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658373503","html_url":"https://github.com/apache/hudi/issues/1789#issuecomment-658373503","issue_url":"https://api.github.com/repos/apache/hudi/issues/1789","id":658373503,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODM3MzUwMw==","user":{"login":"michetti","id":612947,"node_id":"MDQ6VXNlcjYxMjk0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/612947?v=4","gravatar_id":"","url":"https://api.github.com/users/michetti","html_url":"https://github.com/michetti","followers_url":"https://api.github.com/users/michetti/followers","following_url":"https://api.github.com/users/michetti/following{/other_user}","gists_url":"https://api.github.com/users/michetti/gists{/gist_id}","starred_url":"https://api.github.com/users/michetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michetti/subscriptions","organizations_url":"https://api.github.com/users/michetti/orgs","repos_url":"https://api.github.com/users/michetti/repos","events_url":"https://api.github.com/users/michetti/events{/privacy}","received_events_url":"https://api.github.com/users/michetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T19:37:27Z","updated_at":"2020-07-14T20:15:56Z","author_association":"NONE","body":"Hey @GrigorievNick, I saw the issue was closed but if I understood correctly, the link you posted is about AWS Athena and how it can work with Hudi tables registered in the AWS Glue catalog, while the issue is about getting Hudi to work on AWS Glue Jobs (AWS serverless Spark service). Not sure I missed something?\r\n\r\nI was having the same error as @WilliamWhispell, and from what I could find, it seems to be related to a version \r\nmismatch between the org.eclipse.jetty jars required by Hudi and the AWS Glue Jobs runtime.\r\n\r\nFor example, Timeline service depends on Javalin 2.8.0, which in turn requires Jetty version 9.4.15.v20190215:\r\n- https://github.com/apache/hudi/blob/release-0.5.3/hudi-timeline-service/pom.xml#L111\r\n- https://github.com/tipsy/javalin/blob/javalin-2.8.0/pom.xml#L43\r\n\r\nWhile Spark 2.4.3 (this is the version Glue Jobs 1.0 runtime uses) depends on Jetty version 9.3.24.v20180605:\r\n- https://github.com/apache/spark/blob/v2.4.3/pom.xml#L137\r\n\r\nI got it working by shading _org.eclipse.jetty._  in the spark-bundle, by adding the following [here](https://github.com/apache/hudi/blob/release-0.5.3/packaging/hudi-spark-bundle/pom.xml#L99):\r\n```xml\r\n<relocation>\r\n  <pattern>org.eclipse.jetty.</pattern>\r\n  <shadedPattern>org.apache.hudi.org.eclipse.jetty.</shadedPattern>\r\n</relocation>\r\n```\r\n\r\n@WilliamWhispell, I'm not sure there is a better way, but with Hudi 0.5.3 on AWS Glue Jobs 1.0, I needed the following jars:\r\n- httpclient-4.5.12.jar (due to [this](https://forums.aws.amazon.com/thread.jspa?messageID=930176) other error)\r\n- spark-avro_2.11-2.4.3.jar\r\n- hudi-spark-bundle_2.11-0.5.3.jar (your own, with the changes above)\r\n\r\nAnd remember that you also need to configure spark the way it is described in Hudi documentation:\r\n```scala\r\nval sparkConf: SparkConf = new SparkConf();\r\nsparkConf.set(\"spark.serializer\", \"org.apache.spark.serializer.KryoSerializer\");\r\nsparkConf.set(\"spark.sql.hive.convertMetastoreParquet\", \"false\");\r\n  \r\nval sparkContext: SparkContext = new SparkContext(sparkConf)\r\nval glueContext: GlueContext = new GlueContext(sparkContext)\r\nval spark: SparkSession = glueContext.getSparkSession\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658373503/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658385297","html_url":"https://github.com/apache/hudi/issues/1798#issuecomment-658385297","issue_url":"https://api.github.com/repos/apache/hudi/issues/1798","id":658385297,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODM4NTI5Nw==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T20:03:47Z","updated_at":"2020-07-14T20:03:47Z","author_association":"CONTRIBUTOR","body":"Like @bvaradar mentioned, in the first query the glob pattern matches with 950 folders which are then parallely listed across the cluster using spark context. In the second query the glob patter matches 4750 files because of the extra * and now spark has to parallely list 4750 paths using spark context. This most likely seems to be the cause of this performance difference. Added to this I think the time taken by **HoodieROTablePathFilter** which is applied per file might somehow be amplifying it more.\r\n\r\nCan you run a similar test queries on a simple parquet table (non-hudi table) and observe the performance difference in listing. I think you may see slightly similar behavior.\r\n\r\n```\r\nspark.read.parquet(globPath)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658385297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658387970","html_url":"https://github.com/apache/hudi/issues/1789#issuecomment-658387970","issue_url":"https://api.github.com/repos/apache/hudi/issues/1789","id":658387970,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODM4Nzk3MA==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T20:09:39Z","updated_at":"2020-07-14T20:09:39Z","author_association":"CONTRIBUTOR","body":"@michetti Thanks for the pointers here. You are right that the link posted is from AWS Athena, whereas what you folks are trying is run Hudi on AWS Glue jobs. Since AWS Glue does not officially support Hudi, you may have to do hacks like what you are doing currently using shading dependencies etc. to get your way around.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658387970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658422907","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-658422907","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":658422907,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODQyMjkwNw==","user":{"login":"asheeshgarg","id":4348671,"node_id":"MDQ6VXNlcjQzNDg2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4348671?v=4","gravatar_id":"","url":"https://api.github.com/users/asheeshgarg","html_url":"https://github.com/asheeshgarg","followers_url":"https://api.github.com/users/asheeshgarg/followers","following_url":"https://api.github.com/users/asheeshgarg/following{/other_user}","gists_url":"https://api.github.com/users/asheeshgarg/gists{/gist_id}","starred_url":"https://api.github.com/users/asheeshgarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asheeshgarg/subscriptions","organizations_url":"https://api.github.com/users/asheeshgarg/orgs","repos_url":"https://api.github.com/users/asheeshgarg/repos","events_url":"https://api.github.com/users/asheeshgarg/events{/privacy}","received_events_url":"https://api.github.com/users/asheeshgarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T21:28:20Z","updated_at":"2020-07-14T21:28:20Z","author_association":"NONE","body":"@bvaradar you are right we are looking for clustering. Do you have anytime line in mind when this will be available or any branch to look at.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658422907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658432371","html_url":"https://github.com/apache/hudi/issues/1789#issuecomment-658432371","issue_url":"https://api.github.com/repos/apache/hudi/issues/1789","id":658432371,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODQzMjM3MQ==","user":{"login":"michetti","id":612947,"node_id":"MDQ6VXNlcjYxMjk0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/612947?v=4","gravatar_id":"","url":"https://api.github.com/users/michetti","html_url":"https://github.com/michetti","followers_url":"https://api.github.com/users/michetti/followers","following_url":"https://api.github.com/users/michetti/following{/other_user}","gists_url":"https://api.github.com/users/michetti/gists{/gist_id}","starred_url":"https://api.github.com/users/michetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michetti/subscriptions","organizations_url":"https://api.github.com/users/michetti/orgs","repos_url":"https://api.github.com/users/michetti/repos","events_url":"https://api.github.com/users/michetti/events{/privacy}","received_events_url":"https://api.github.com/users/michetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T21:53:06Z","updated_at":"2020-07-14T21:57:19Z","author_association":"NONE","body":"Thanks for clarifying @umehrot2. I actually just found out that shading org.eclipse.jetty was recently merged in Hudi, so we should be good without changes from the next release: https://github.com/apache/hudi/pull/1781","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658432371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658453437","html_url":"https://github.com/apache/hudi/pull/1704#issuecomment-658453437","issue_url":"https://api.github.com/repos/apache/hudi/issues/1704","id":658453437,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODQ1MzQzNw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T22:59:02Z","updated_at":"2020-07-14T22:59:02Z","author_association":"CONTRIBUTOR","body":"@bhasudha let me know if you need any clarification","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658453437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658490359","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-658490359","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":658490359,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODQ5MDM1OQ==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T01:17:21Z","updated_at":"2020-07-15T01:17:21Z","author_association":"CONTRIBUTOR","body":"> Hi, @vinothchandar @yanghua @leesf as the refactor is finished, I have filed a Jira ticket to track this work,\r\n> please review the refactor work on this pr :)\r\n\r\nack. @Mathieu1124 pls check travis failure.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658490359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658495234","html_url":"https://github.com/apache/hudi/pull/1819#issuecomment-658495234","issue_url":"https://api.github.com/repos/apache/hudi/issues/1819","id":658495234,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODQ5NTIzNA==","user":{"login":"shenh062326","id":9527867,"node_id":"MDQ6VXNlcjk1Mjc4Njc=","avatar_url":"https://avatars.githubusercontent.com/u/9527867?v=4","gravatar_id":"","url":"https://api.github.com/users/shenh062326","html_url":"https://github.com/shenh062326","followers_url":"https://api.github.com/users/shenh062326/followers","following_url":"https://api.github.com/users/shenh062326/following{/other_user}","gists_url":"https://api.github.com/users/shenh062326/gists{/gist_id}","starred_url":"https://api.github.com/users/shenh062326/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shenh062326/subscriptions","organizations_url":"https://api.github.com/users/shenh062326/orgs","repos_url":"https://api.github.com/users/shenh062326/repos","events_url":"https://api.github.com/users/shenh062326/events{/privacy}","received_events_url":"https://api.github.com/users/shenh062326/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T01:37:30Z","updated_at":"2020-07-15T01:37:30Z","author_association":"CONTRIBUTOR","body":"@xushiyan  It seems good for OverwriteWithLatestAvroPayload. But for AWSDmsAvroPayload, users need to define not only the deletion column, but also the processing method of deleting the column. Where is the new method should be? If it continue to stay in combineAndGetUpdateValue, then combineAndGetUpdateValue has the processing delete logic, and the calling method also has the delete logic, will it be repeated?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658495234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658501011","html_url":"https://github.com/apache/hudi/pull/1722#issuecomment-658501011","issue_url":"https://api.github.com/repos/apache/hudi/issues/1722","id":658501011,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUwMTAxMQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T01:59:57Z","updated_at":"2020-07-15T01:59:57Z","author_association":"MEMBER","body":"I am fine with doing that.. not sure if thats more work for @umehrot2  .. wdyt ?\r\n\r\n@bvaradar in general, can we get more of the bootstrap landed and work on the follow ups vs having these large PRs pending out there this long.. We kind of have a traffic gridlock here. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658501011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658502484","html_url":"https://github.com/apache/hudi/pull/1819#issuecomment-658502484","issue_url":"https://api.github.com/repos/apache/hudi/issues/1819","id":658502484,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUwMjQ4NA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T02:05:19Z","updated_at":"2020-07-15T02:05:19Z","author_association":"CONTRIBUTOR","body":"@xushiyan : nope. As I have mentioned above, we need it in getInsertValue() as well which is called from lot of classes. Hence I suggested to add it as part of constructor. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658502484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658505404","html_url":"https://github.com/apache/hudi/pull/1819#issuecomment-658505404","issue_url":"https://api.github.com/repos/apache/hudi/issues/1819","id":658505404,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUwNTQwNA==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T02:16:50Z","updated_at":"2020-07-15T02:16:50Z","author_association":"MEMBER","body":"@shenh062326 @nsivabalan got it. yup, making it through the constructor looks good. thanks for clarifying.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658505404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658505687","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-658505687","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":658505687,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUwNTY4Nw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T02:17:56Z","updated_at":"2020-07-15T02:17:56Z","author_association":"MEMBER","body":"@leesf @Mathieu1124 @lw309637554 so this replaces #1727 right? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658505687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658505880","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-658505880","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":658505880,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUwNTg4MA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T02:18:42Z","updated_at":"2020-07-15T02:18:42Z","author_association":"MEMBER","body":"Good to get @n3nash 's review here as well to make sure we are not breaking anything for the RDD client users.. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658505880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658506081","html_url":"https://github.com/apache/hudi/pull/1824#issuecomment-658506081","issue_url":"https://api.github.com/repos/apache/hudi/issues/1824","id":658506081,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUwNjA4MQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T02:19:32Z","updated_at":"2020-07-15T02:19:32Z","author_association":"MEMBER","body":"No all good.. was waitng for you actually :)","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658506081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658506263","html_url":"https://github.com/apache/hudi/pull/1722#issuecomment-658506263","issue_url":"https://api.github.com/repos/apache/hudi/issues/1722","id":658506263,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUwNjI2Mw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T02:20:15Z","updated_at":"2020-07-15T02:20:15Z","author_association":"CONTRIBUTOR","body":"@garyli1019 @vinothchandar : Yes, I am planning to address the bootstrap PR comments and also give review comments for @umehrot2  changes by this weekend. @umehrot2 :  I know this is not ideal and apologies for not able to give a review quickly. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658506263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658532404","html_url":"https://github.com/apache/hudi/pull/1831#issuecomment-658532404","issue_url":"https://api.github.com/repos/apache/hudi/issues/1831","id":658532404,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUzMjQwNA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T04:02:53Z","updated_at":"2020-07-15T04:02:53Z","author_association":"MEMBER","body":"cc @umehrot2 want to review this one?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658532404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658532736","html_url":"https://github.com/apache/hudi/pull/1831#issuecomment-658532736","issue_url":"https://api.github.com/repos/apache/hudi/issues/1831","id":658532736,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUzMjczNg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T04:04:03Z","updated_at":"2020-07-15T04:04:03Z","author_association":"MEMBER","body":"actually nvm.. its a small PR.. LGTM.. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658532736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658535113","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-658535113","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":658535113,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUzNTExMw==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T04:14:19Z","updated_at":"2020-07-15T04:14:19Z","author_association":"CONTRIBUTOR","body":"> @leesf @Mathieu1124 @lw309637554 so this replaces #1727 right?\r\n\r\nyes, https://github.com/apache/hudi/pull/1727  can be closed now","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658535113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658535590","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-658535590","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":658535590,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODUzNTU5MA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T04:16:18Z","updated_at":"2020-07-15T04:16:18Z","author_association":"CONTRIBUTOR","body":"> > Hi, @vinothchandar @yanghua @leesf as the refactor is finished, I have filed a Jira ticket to track this work,\r\n> > please review the refactor work on this pr :)\r\n> \r\n> ack. @Mathieu1124 pls check travis failure.\r\n\r\ncopy, have resolved the ci failure and conflicts with master, will push it after work.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658535590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658571381","html_url":"https://github.com/apache/hudi/issues/1694#issuecomment-658571381","issue_url":"https://api.github.com/repos/apache/hudi/issues/1694","id":658571381,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODU3MTM4MQ==","user":{"login":"Raghvendradubey","id":16387812,"node_id":"MDQ6VXNlcjE2Mzg3ODEy","avatar_url":"https://avatars.githubusercontent.com/u/16387812?v=4","gravatar_id":"","url":"https://api.github.com/users/Raghvendradubey","html_url":"https://github.com/Raghvendradubey","followers_url":"https://api.github.com/users/Raghvendradubey/followers","following_url":"https://api.github.com/users/Raghvendradubey/following{/other_user}","gists_url":"https://api.github.com/users/Raghvendradubey/gists{/gist_id}","starred_url":"https://api.github.com/users/Raghvendradubey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Raghvendradubey/subscriptions","organizations_url":"https://api.github.com/users/Raghvendradubey/orgs","repos_url":"https://api.github.com/users/Raghvendradubey/repos","events_url":"https://api.github.com/users/Raghvendradubey/events{/privacy}","received_events_url":"https://api.github.com/users/Raghvendradubey/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T06:24:45Z","updated_at":"2020-07-15T06:24:45Z","author_association":"NONE","body":"Thanks @vinothchandar for clarifications, will try GLOBAL_SIMPLE.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658571381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658587504","html_url":"https://github.com/apache/hudi/issues/1828#issuecomment-658587504","issue_url":"https://api.github.com/repos/apache/hudi/issues/1828","id":658587504,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODU4NzUwNA==","user":{"login":"kirqz23","id":22114492,"node_id":"MDQ6VXNlcjIyMTE0NDky","avatar_url":"https://avatars.githubusercontent.com/u/22114492?v=4","gravatar_id":"","url":"https://api.github.com/users/kirqz23","html_url":"https://github.com/kirqz23","followers_url":"https://api.github.com/users/kirqz23/followers","following_url":"https://api.github.com/users/kirqz23/following{/other_user}","gists_url":"https://api.github.com/users/kirqz23/gists{/gist_id}","starred_url":"https://api.github.com/users/kirqz23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kirqz23/subscriptions","organizations_url":"https://api.github.com/users/kirqz23/orgs","repos_url":"https://api.github.com/users/kirqz23/repos","events_url":"https://api.github.com/users/kirqz23/events{/privacy}","received_events_url":"https://api.github.com/users/kirqz23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T07:06:46Z","updated_at":"2020-07-15T07:06:46Z","author_association":"NONE","body":"Hi @bhasudha, thanks for this information. Now, it's clear how it's working. My use case is as following: I want to have only last change in parquet files, because when I try to read it with AWS Athena it sees doubled record with different _hoodie_commit. In ideal world I want to have one S3 bucket with only last change (to not force users to deduplicate it in AWS Athena query) and the second bucket with all commits to have whole history. \r\n\r\nCan you recommend me sth? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658587504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658655885","html_url":"https://github.com/apache/hudi/pull/1832#issuecomment-658655885","issue_url":"https://api.github.com/repos/apache/hudi/issues/1832","id":658655885,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODY1NTg4NQ==","user":{"login":"linshan-ma","id":23548282,"node_id":"MDQ6VXNlcjIzNTQ4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/23548282?v=4","gravatar_id":"","url":"https://api.github.com/users/linshan-ma","html_url":"https://github.com/linshan-ma","followers_url":"https://api.github.com/users/linshan-ma/followers","following_url":"https://api.github.com/users/linshan-ma/following{/other_user}","gists_url":"https://api.github.com/users/linshan-ma/gists{/gist_id}","starred_url":"https://api.github.com/users/linshan-ma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linshan-ma/subscriptions","organizations_url":"https://api.github.com/users/linshan-ma/orgs","repos_url":"https://api.github.com/users/linshan-ma/repos","events_url":"https://api.github.com/users/linshan-ma/events{/privacy}","received_events_url":"https://api.github.com/users/linshan-ma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T09:25:19Z","updated_at":"2020-07-15T09:25:19Z","author_association":"CONTRIBUTOR","body":"retest it please.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658655885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658740024","html_url":"https://github.com/apache/hudi/pull/1810#issuecomment-658740024","issue_url":"https://api.github.com/repos/apache/hudi/issues/1810","id":658740024,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc0MDAyNA==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T12:32:39Z","updated_at":"2020-07-15T12:32:39Z","author_association":"CONTRIBUTOR","body":"@vinothchandar @garyli1019  I think in this PR  the hudi-sync abstract is ready.  Expect your review. Thanks\r\n\r\n1. the module abstract is \r\nhudi-sync\r\n     hudi-hive-sync/\r\n     hudi-dla-sync/\r\n\r\n2. about backwards compatible .\r\na. about users code compatible: because do not modify the hivesync class name. Users do not need to modify these old code.\r\nb. about users pom dependency compatible: because do not modify the module name hudi-hive-sync. Users not need to modify pom dependency\r\nc. about users local jar files compatible: if users's local jars is do not shaded the hudi-hive-sync's\r\nIndirect dependence. Old users just need add the hudi-sync-common.jar to their directory. Just like hudi-utilities-bundle modiry in this PR.\r\nd. about sync parameters, just add new parameters such as --enable-sync as new default parameter,also backwards compatible   --enable-hive-sync.\r\n\r\n3. some others works ,such as update the doc. will do in other issues.\r\n\r\nwhat about your suggestion?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658740024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658757520","html_url":"https://github.com/apache/hudi/pull/1722#issuecomment-658757520","issue_url":"https://api.github.com/repos/apache/hudi/issues/1722","id":658757520,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc1NzUyMA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T13:09:40Z","updated_at":"2020-07-15T13:09:40Z","author_association":"MEMBER","body":"@garyli1019 actually @umehrot2 's approach there is wrapping the FileFormat as opposed to extending, which is great as well.. If you can wait, we can land the bootstrap changes and rework this on top. But, I feel what you will be doing here is a very different merge than @umehrot2 's PR and the code to wrap ParquetFileFormat is not that large..  So you can also in parallel just proceed? Do you just want the two util classes landed? SparkUtils/TablePathUtils?\r\n\r\nyour call. lmk what you think. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658757520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658757612","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-658757612","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":658757612,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc1NzYxMg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T13:09:50Z","updated_at":"2020-07-15T13:09:50Z","author_association":"CONTRIBUTOR","body":"@asheeshgarg : Clustering is planned for 0.7 release. We are currently working on getting 0.6 release out at the end of this month. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658757612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658760384","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-658760384","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":658760384,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc2MDM4NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T13:15:04Z","updated_at":"2020-07-15T13:15:04Z","author_association":"CONTRIBUTOR","body":"@asheeshgarg Meanwhile, you can setup the configs as suggested in  https://cwiki.apache.org/confluence/display/HUDI/FAQ#FAQ-HowdoItoavoidcreatingtonsofsmallfiles ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658760384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658764479","html_url":"https://github.com/apache/hudi/issues/1828#issuecomment-658764479","issue_url":"https://api.github.com/repos/apache/hudi/issues/1828","id":658764479,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc2NDQ3OQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T13:22:41Z","updated_at":"2020-07-15T13:22:41Z","author_association":"CONTRIBUTOR","body":"@kirkuz : AWS Athena support for Hudi is just out : https://aws.amazon.com/about-aws/whats-new/2020/07/amazon-athena-adds-support-querying-apache-hudi-datasets-amazon-s3-based-data-lake/\r\n With this your query should not see any duplicate records. The duplicate records could only happen if the table is not defined properly with the correct Input-format.  The reason behind keeping at-least 1 previous version is to prevent queries from failing when concurrent write is happening. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658764479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658778968","html_url":"https://github.com/apache/hudi/issues/1764#issuecomment-658778968","issue_url":"https://api.github.com/repos/apache/hudi/issues/1764","id":658778968,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc3ODk2OA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T13:48:51Z","updated_at":"2020-07-15T13:49:03Z","author_association":"CONTRIBUTOR","body":"We discussed this in yesterday's community weekly sync. We have opened a blocker in 0.6 (Please see https://issues.apache.org/jira/browse/HUDI-1098) to provide ways to control this behavior.  Please subscribe to the ticket for tracking progress. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658778968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658782603","html_url":"https://github.com/apache/hudi/issues/1766#issuecomment-658782603","issue_url":"https://api.github.com/repos/apache/hudi/issues/1766","id":658782603,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc4MjYwMw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T13:55:22Z","updated_at":"2020-07-15T13:55:22Z","author_association":"CONTRIBUTOR","body":"@RajasekarSribalan : Sorry for the delayed response. Is this still a problem ? I am not seeing any issue with the table definition and as you can see from the docker demo, hive queries after upserting does work fine : https://hudi.apache.org/docs/docker_demo.html","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658782603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658787103","html_url":"https://github.com/apache/hudi/issues/1771#issuecomment-658787103","issue_url":"https://api.github.com/repos/apache/hudi/issues/1771","id":658787103,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc4NzEwMw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:03:11Z","updated_at":"2020-07-15T14:03:11Z","author_association":"CONTRIBUTOR","body":"@tooptoop4 : Would you be interested in fixing the documentation (Jira : https://issues.apache.org/jira/browse/HUDI-1100) ? (FYI : @nsivabalan)","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658787103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658788259","html_url":"https://github.com/apache/hudi/issues/1773#issuecomment-658788259","issue_url":"https://api.github.com/repos/apache/hudi/issues/1773","id":658788259,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc4ODI1OQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:05:09Z","updated_at":"2020-07-15T14:05:09Z","author_association":"CONTRIBUTOR","body":"Thanks @tooptoop4 : I am closing this ticket due to inactivity. Kindly reopen if this is a real issue with more details.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658788259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658788929","html_url":"https://github.com/apache/hudi/issues/1775#issuecomment-658788929","issue_url":"https://api.github.com/repos/apache/hudi/issues/1775","id":658788929,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc4ODkyOQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:06:18Z","updated_at":"2020-07-15T14:06:18Z","author_association":"CONTRIBUTOR","body":"Closing this for now. @prashanthpdesai : Please reopen if this is still an issue.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658788929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]