[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1081729522","html_url":"https://github.com/apache/brpc/issues/1727#issuecomment-1081729522","issue_url":"https://api.github.com/repos/apache/brpc/issues/1727","id":1081729522,"node_id":"IC_kwDOBhmkcs5AeeHy","user":{"login":"mapleFU","id":24351052,"node_id":"MDQ6VXNlcjI0MzUxMDUy","avatar_url":"https://avatars.githubusercontent.com/u/24351052?v=4","gravatar_id":"","url":"https://api.github.com/users/mapleFU","html_url":"https://github.com/mapleFU","followers_url":"https://api.github.com/users/mapleFU/followers","following_url":"https://api.github.com/users/mapleFU/following{/other_user}","gists_url":"https://api.github.com/users/mapleFU/gists{/gist_id}","starred_url":"https://api.github.com/users/mapleFU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mapleFU/subscriptions","organizations_url":"https://api.github.com/users/mapleFU/orgs","repos_url":"https://api.github.com/users/mapleFU/repos","events_url":"https://api.github.com/users/mapleFU/events{/privacy}","received_events_url":"https://api.github.com/users/mapleFU/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-29T11:02:21Z","updated_at":"2022-03-29T11:02:21Z","author_association":"MEMBER","body":"> @mapleFU This is quite a good practice. Can you contribute a PR? That might help more people.\r\n\r\nGlad to contribute to brpc. But the code maybe ugly. I'll try to submit it this weekend","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1081729522/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1081927986","html_url":"https://github.com/apache/brpc/pull/1604#issuecomment-1081927986","issue_url":"https://api.github.com/repos/apache/brpc/issues/1604","id":1081927986,"node_id":"IC_kwDOBhmkcs5AfOky","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-29T14:16:04Z","updated_at":"2022-03-29T14:16:04Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1081927986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1082541903","html_url":"https://github.com/apache/brpc/pull/1723#issuecomment-1082541903","issue_url":"https://api.github.com/repos/apache/brpc/issues/1723","id":1082541903,"node_id":"IC_kwDOBhmkcs5AhkdP","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-30T02:07:58Z","updated_at":"2022-03-30T02:07:58Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1082541903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1082680858","html_url":"https://github.com/apache/brpc/issues/1731#issuecomment-1082680858","issue_url":"https://api.github.com/repos/apache/brpc/issues/1731","id":1082680858,"node_id":"IC_kwDOBhmkcs5AiGYa","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-30T06:35:36Z","updated_at":"2022-03-30T06:35:36Z","author_association":"CONTRIBUTOR","body":"pappend_from_file_descriptor里只readv一次，是因为事先根据max_count分配了足够的内存空间，所以可以一次性把缓存区中的数据读出。\r\n而SSL没有提供readv机制，所以在未读够max_count字节时，还是需要循环读取直到读不到数据或读取错误。\r\n这里问题在于读取错误的时候是否要返回已读取的数据，注释里提到 `Other errors are fatal`，在出现fatal错误的时候，如果返回成功，是否会掩盖问题？是不是可以分析一下`error:0606506D:digital envelope routines:EVP_DecryptFinal_ex:wrong final block length`这个错误的原因，看能否从根本上解决问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1082680858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1082759673","html_url":"https://github.com/apache/brpc/issues/1731#issuecomment-1082759673","issue_url":"https://api.github.com/repos/apache/brpc/issues/1731","id":1082759673,"node_id":"IC_kwDOBhmkcs5AiZn5","user":{"login":"dboyzhong","id":8457200,"node_id":"MDQ6VXNlcjg0NTcyMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8457200?v=4","gravatar_id":"","url":"https://api.github.com/users/dboyzhong","html_url":"https://github.com/dboyzhong","followers_url":"https://api.github.com/users/dboyzhong/followers","following_url":"https://api.github.com/users/dboyzhong/following{/other_user}","gists_url":"https://api.github.com/users/dboyzhong/gists{/gist_id}","starred_url":"https://api.github.com/users/dboyzhong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dboyzhong/subscriptions","organizations_url":"https://api.github.com/users/dboyzhong/orgs","repos_url":"https://api.github.com/users/dboyzhong/repos","events_url":"https://api.github.com/users/dboyzhong/events{/privacy}","received_events_url":"https://api.github.com/users/dboyzhong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-30T08:07:37Z","updated_at":"2022-03-30T08:07:37Z","author_association":"NONE","body":"> 问题\r\n\r\n好的，我正跟进wrong final block length 问题根因，这个问题还有一个逻辑上的问题请教：\r\n1. SSL_Read循环读没问题，当第1次读成功，比如读到100字节数据，而循环再读第二次时，SSL_Read返回-1，此时append_from_SSL_channel是应该返回100？还是 -1？因为毕竟读出来了100字节数据，返回-1是不是不太合适？（如果对端发送完这100字节后，对端发送RST分节，本端socket会返回-1）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1082759673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1082783044","html_url":"https://github.com/apache/brpc/issues/1731#issuecomment-1082783044","issue_url":"https://api.github.com/repos/apache/brpc/issues/1731","id":1082783044,"node_id":"IC_kwDOBhmkcs5AifVE","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-30T08:31:40Z","updated_at":"2022-03-30T08:31:40Z","author_association":"CONTRIBUTOR","body":"> 1. SSL_Read循环读没问题，当第1次读成功，比如读到100字节数据，而循环再读第二次时，SSL_Read返回-1，此时append_from_SSL_channel是应该返回100？还是 -1？因为毕竟读出来了100字节数据，返回-1是不是不太合适？（如果对端发送完这100字节后，对端发送RST分节，本端socket会返回-1）\r\n\r\n这种情况就要看具体的错误原因了，你看原来代码里是区分的，如果是non fatal error，就返回已经读的字节数，并设置ssl_error。如果是fatal error，就直接返回rc。所以需要分析下当前问题是否属于non fatal error，如果是，可以扩展一下non fatal error的判断条件","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1082783044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1082809895","html_url":"https://github.com/apache/brpc/issues/1731#issuecomment-1082809895","issue_url":"https://api.github.com/repos/apache/brpc/issues/1731","id":1082809895,"node_id":"IC_kwDOBhmkcs5Ail4n","user":{"login":"dboyzhong","id":8457200,"node_id":"MDQ6VXNlcjg0NTcyMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8457200?v=4","gravatar_id":"","url":"https://api.github.com/users/dboyzhong","html_url":"https://github.com/dboyzhong","followers_url":"https://api.github.com/users/dboyzhong/followers","following_url":"https://api.github.com/users/dboyzhong/following{/other_user}","gists_url":"https://api.github.com/users/dboyzhong/gists{/gist_id}","starred_url":"https://api.github.com/users/dboyzhong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dboyzhong/subscriptions","organizations_url":"https://api.github.com/users/dboyzhong/orgs","repos_url":"https://api.github.com/users/dboyzhong/repos","events_url":"https://api.github.com/users/dboyzhong/events{/privacy}","received_events_url":"https://api.github.com/users/dboyzhong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-30T08:58:23Z","updated_at":"2022-03-30T08:58:23Z","author_association":"NONE","body":"> > 1. SSL_Read循环读没问题，当第1次读成功，比如读到100字节数据，而循环再读第二次时，SSL_Read返回-1，此时append_from_SSL_channel是应该返回100？还是 -1？因为毕竟读出来了100字节数据，返回-1是不是不太合适？（如果对端发送完这100字节后，对端发送RST分节，本端socket会返回-1）\r\n> \r\n> 这种情况就要看具体的错误原因了，你看原来代码里是区分的，如果是non fatal error，就返回已经读的字节数，并设置ssl_error。如果是fatal error，就直接返回rc。所以需要分析下当前问题是否属于non fatal error，如果是，可以扩展一下non fatal error的判断条件\r\n\r\n好的。多谢指教，谢谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1082809895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1085476562","html_url":"https://github.com/apache/brpc/issues/1392#issuecomment-1085476562","issue_url":"https://api.github.com/repos/apache/brpc/issues/1392","id":1085476562,"node_id":"IC_kwDOBhmkcs5Asw7S","user":{"login":"sangli00","id":3765918,"node_id":"MDQ6VXNlcjM3NjU5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3765918?v=4","gravatar_id":"","url":"https://api.github.com/users/sangli00","html_url":"https://github.com/sangli00","followers_url":"https://api.github.com/users/sangli00/followers","following_url":"https://api.github.com/users/sangli00/following{/other_user}","gists_url":"https://api.github.com/users/sangli00/gists{/gist_id}","starred_url":"https://api.github.com/users/sangli00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sangli00/subscriptions","organizations_url":"https://api.github.com/users/sangli00/orgs","repos_url":"https://api.github.com/users/sangli00/repos","events_url":"https://api.github.com/users/sangli00/events{/privacy}","received_events_url":"https://api.github.com/users/sangli00/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-01T06:20:49Z","updated_at":"2022-04-01T06:20:49Z","author_association":"NONE","body":"老哥，问题解决了吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1085476562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1085689912","html_url":"https://github.com/apache/brpc/issues/1627#issuecomment-1085689912","issue_url":"https://api.github.com/repos/apache/brpc/issues/1627","id":1085689912,"node_id":"IC_kwDOBhmkcs5AtlA4","user":{"login":"sangli00","id":3765918,"node_id":"MDQ6VXNlcjM3NjU5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3765918?v=4","gravatar_id":"","url":"https://api.github.com/users/sangli00","html_url":"https://github.com/sangli00","followers_url":"https://api.github.com/users/sangli00/followers","following_url":"https://api.github.com/users/sangli00/following{/other_user}","gists_url":"https://api.github.com/users/sangli00/gists{/gist_id}","starred_url":"https://api.github.com/users/sangli00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sangli00/subscriptions","organizations_url":"https://api.github.com/users/sangli00/orgs","repos_url":"https://api.github.com/users/sangli00/repos","events_url":"https://api.github.com/users/sangli00/events{/privacy}","received_events_url":"https://api.github.com/users/sangli00/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-01T09:45:42Z","updated_at":"2022-04-01T09:45:42Z","author_association":"NONE","body":"but use protobuf-3.20,this problem is not fix。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1085689912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1085690410","html_url":"https://github.com/apache/brpc/issues/1727#issuecomment-1085690410","issue_url":"https://api.github.com/repos/apache/brpc/issues/1727","id":1085690410,"node_id":"IC_kwDOBhmkcs5AtlIq","user":{"login":"JimChengLin","id":16563096,"node_id":"MDQ6VXNlcjE2NTYzMDk2","avatar_url":"https://avatars.githubusercontent.com/u/16563096?v=4","gravatar_id":"","url":"https://api.github.com/users/JimChengLin","html_url":"https://github.com/JimChengLin","followers_url":"https://api.github.com/users/JimChengLin/followers","following_url":"https://api.github.com/users/JimChengLin/following{/other_user}","gists_url":"https://api.github.com/users/JimChengLin/gists{/gist_id}","starred_url":"https://api.github.com/users/JimChengLin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JimChengLin/subscriptions","organizations_url":"https://api.github.com/users/JimChengLin/orgs","repos_url":"https://api.github.com/users/JimChengLin/repos","events_url":"https://api.github.com/users/JimChengLin/events{/privacy}","received_events_url":"https://api.github.com/users/JimChengLin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-01T09:46:19Z","updated_at":"2022-04-01T09:46:19Z","author_association":"CONTRIBUTOR","body":"I met the same case. I almost did the same thing as @mapleFU mentioned above. I guess we can do better.\r\n\r\n1. If there are already enough bthread worker to saturate CPU, just ignore signal calls. More workers help nothing.\r\n\r\n2. Handcraft waiter link list by brpc self instead of futex, although we still need futex to wakeup pthread. The benefit is that we can only wake bthread workers that just have received remote task(i.e from non-bthread-worker thread). No steal() is needed.\r\n\r\n3. NUMA-awareness","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1085690410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1085692192","html_url":"https://github.com/apache/brpc/issues/1727#issuecomment-1085692192","issue_url":"https://api.github.com/repos/apache/brpc/issues/1727","id":1085692192,"node_id":"IC_kwDOBhmkcs5Atlkg","user":{"login":"JimChengLin","id":16563096,"node_id":"MDQ6VXNlcjE2NTYzMDk2","avatar_url":"https://avatars.githubusercontent.com/u/16563096?v=4","gravatar_id":"","url":"https://api.github.com/users/JimChengLin","html_url":"https://github.com/JimChengLin","followers_url":"https://api.github.com/users/JimChengLin/followers","following_url":"https://api.github.com/users/JimChengLin/following{/other_user}","gists_url":"https://api.github.com/users/JimChengLin/gists{/gist_id}","starred_url":"https://api.github.com/users/JimChengLin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JimChengLin/subscriptions","organizations_url":"https://api.github.com/users/JimChengLin/orgs","repos_url":"https://api.github.com/users/JimChengLin/repos","events_url":"https://api.github.com/users/JimChengLin/events{/privacy}","received_events_url":"https://api.github.com/users/JimChengLin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-01T09:48:34Z","updated_at":"2022-04-01T09:48:57Z","author_association":"CONTRIBUTOR","body":"I have been thinking those improvements for a while and may try to impl those features in the next half year. Any help is appreciated!","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1085692192/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1086561247","html_url":"https://github.com/apache/brpc/issues/1372#issuecomment-1086561247","issue_url":"https://api.github.com/repos/apache/brpc/issues/1372","id":1086561247,"node_id":"IC_kwDOBhmkcs5Aw5vf","user":{"login":"sangli00","id":3765918,"node_id":"MDQ6VXNlcjM3NjU5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3765918?v=4","gravatar_id":"","url":"https://api.github.com/users/sangli00","html_url":"https://github.com/sangli00","followers_url":"https://api.github.com/users/sangli00/followers","following_url":"https://api.github.com/users/sangli00/following{/other_user}","gists_url":"https://api.github.com/users/sangli00/gists{/gist_id}","starred_url":"https://api.github.com/users/sangli00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sangli00/subscriptions","organizations_url":"https://api.github.com/users/sangli00/orgs","repos_url":"https://api.github.com/users/sangli00/repos","events_url":"https://api.github.com/users/sangli00/events{/privacy}","received_events_url":"https://api.github.com/users/sangli00/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-02T06:15:12Z","updated_at":"2022-04-02T06:15:12Z","author_association":"NONE","body":"老哥，这个问题解决了吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1086561247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1086565725","html_url":"https://github.com/apache/brpc/issues/1372#issuecomment-1086565725","issue_url":"https://api.github.com/repos/apache/brpc/issues/1372","id":1086565725,"node_id":"IC_kwDOBhmkcs5Aw61d","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-02T06:37:47Z","updated_at":"2022-04-02T06:38:00Z","author_association":"CONTRIBUTOR","body":"> 老哥，这个问题解决了吗\r\n\r\n你遇到的具体问题是什么，和上面的issue描述一样吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1086565725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1086570402","html_url":"https://github.com/apache/brpc/issues/1732#issuecomment-1086570402","issue_url":"https://api.github.com/repos/apache/brpc/issues/1732","id":1086570402,"node_id":"IC_kwDOBhmkcs5Aw7-i","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-02T07:08:06Z","updated_at":"2022-04-02T07:08:06Z","author_association":"CONTRIBUTOR","body":"gflags改成静态链接的试试？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1086570402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1086598379","html_url":"https://github.com/apache/brpc/issues/1269#issuecomment-1086598379","issue_url":"https://api.github.com/repos/apache/brpc/issues/1269","id":1086598379,"node_id":"IC_kwDOBhmkcs5AxCzr","user":{"login":"yz-cyz","id":76092292,"node_id":"MDQ6VXNlcjc2MDkyMjky","avatar_url":"https://avatars.githubusercontent.com/u/76092292?v=4","gravatar_id":"","url":"https://api.github.com/users/yz-cyz","html_url":"https://github.com/yz-cyz","followers_url":"https://api.github.com/users/yz-cyz/followers","following_url":"https://api.github.com/users/yz-cyz/following{/other_user}","gists_url":"https://api.github.com/users/yz-cyz/gists{/gist_id}","starred_url":"https://api.github.com/users/yz-cyz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yz-cyz/subscriptions","organizations_url":"https://api.github.com/users/yz-cyz/orgs","repos_url":"https://api.github.com/users/yz-cyz/repos","events_url":"https://api.github.com/users/yz-cyz/events{/privacy}","received_events_url":"https://api.github.com/users/yz-cyz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-02T09:15:37Z","updated_at":"2022-04-02T09:15:37Z","author_association":"NONE","body":"@cdjingit 请教下， channel的两端网络突然中断后，大概多久健康检查会发现并且会断开。\r\n\r\n我们遇到的问题是网络中断后， 健康检查好像并没有生效，比如A -> B ,  断网后很长一段时间内， A发给B的请求，还是会写入到socket的发送缓冲区（最少持续写入了10s以上）， 导致断网恢复时B突然收到大量请求。 \r\n\r\n看log， 10分钟后， 所有的请求还是会报E1008 超时错误， 而不是 E112 (Not connected to xxx)，\r\n\r\n配置：health_check_interval = 3,   health_check_timeout_ms = 500。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1086598379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1087043586","html_url":"https://github.com/apache/brpc/issues/1372#issuecomment-1087043586","issue_url":"https://api.github.com/repos/apache/brpc/issues/1372","id":1087043586,"node_id":"IC_kwDOBhmkcs5AyvgC","user":{"login":"sangli00","id":3765918,"node_id":"MDQ6VXNlcjM3NjU5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3765918?v=4","gravatar_id":"","url":"https://api.github.com/users/sangli00","html_url":"https://github.com/sangli00","followers_url":"https://api.github.com/users/sangli00/followers","following_url":"https://api.github.com/users/sangli00/following{/other_user}","gists_url":"https://api.github.com/users/sangli00/gists{/gist_id}","starred_url":"https://api.github.com/users/sangli00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sangli00/subscriptions","organizations_url":"https://api.github.com/users/sangli00/orgs","repos_url":"https://api.github.com/users/sangli00/repos","events_url":"https://api.github.com/users/sangli00/events{/privacy}","received_events_url":"https://api.github.com/users/sangli00/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-04T02:21:14Z","updated_at":"2022-04-04T02:21:14Z","author_association":"NONE","body":"> > 老哥，这个问题解决了吗\r\n> \r\n> 你遇到的具体问题是什么，和上面的issue描述一样吗？\r\n\r\n嗯嗯 我这应该是ABI兼容问题。升级了GCC。就编译不过去了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1087043586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1087043998","html_url":"https://github.com/apache/brpc/issues/1732#issuecomment-1087043998","issue_url":"https://api.github.com/repos/apache/brpc/issues/1732","id":1087043998,"node_id":"IC_kwDOBhmkcs5Ayvme","user":{"login":"sangli00","id":3765918,"node_id":"MDQ6VXNlcjM3NjU5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3765918?v=4","gravatar_id":"","url":"https://api.github.com/users/sangli00","html_url":"https://github.com/sangli00","followers_url":"https://api.github.com/users/sangli00/followers","following_url":"https://api.github.com/users/sangli00/following{/other_user}","gists_url":"https://api.github.com/users/sangli00/gists{/gist_id}","starred_url":"https://api.github.com/users/sangli00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sangli00/subscriptions","organizations_url":"https://api.github.com/users/sangli00/orgs","repos_url":"https://api.github.com/users/sangli00/repos","events_url":"https://api.github.com/users/sangli00/events{/privacy}","received_events_url":"https://api.github.com/users/sangli00/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-04T02:22:00Z","updated_at":"2022-04-04T02:22:00Z","author_association":"NONE","body":"> gflags改成静态链接的试试？\r\n\r\n是不是brpc不支持动态库","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1087043998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1087064418","html_url":"https://github.com/apache/brpc/issues/1732#issuecomment-1087064418","issue_url":"https://api.github.com/repos/apache/brpc/issues/1732","id":1087064418,"node_id":"IC_kwDOBhmkcs5Ay0li","user":{"login":"sangli00","id":3765918,"node_id":"MDQ6VXNlcjM3NjU5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3765918?v=4","gravatar_id":"","url":"https://api.github.com/users/sangli00","html_url":"https://github.com/sangli00","followers_url":"https://api.github.com/users/sangli00/followers","following_url":"https://api.github.com/users/sangli00/following{/other_user}","gists_url":"https://api.github.com/users/sangli00/gists{/gist_id}","starred_url":"https://api.github.com/users/sangli00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sangli00/subscriptions","organizations_url":"https://api.github.com/users/sangli00/orgs","repos_url":"https://api.github.com/users/sangli00/repos","events_url":"https://api.github.com/users/sangli00/events{/privacy}","received_events_url":"https://api.github.com/users/sangli00/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-04T03:12:53Z","updated_at":"2022-04-04T03:12:53Z","author_association":"NONE","body":"> Linking protoc-gen-mcpack\r\ng++ -o protoc-gen-mcpack -I./src -I/usr/include/ -I/usr/local/include/ -L/usr/local/lib -L/usr/local/lib64 -std=c++0x -Xlinker \"-(\" src/idl_options.pb.cc src/mcpack2pb/generator.o libbrpc.a -Wl,-Bstatic -lgflags -lprotobuf -lprotoc -Wl,-Bdynamic -Xlinker \"-)\" -lpthread -lssl -lcrypto -ldl -lz -lrt -lleveldb -D_GLIBCXX_USE_CXX11_ABI=0\r\nsrc/mcpack2pb/generator.o：在函数‘google::protobuf::internal::StringTypeTraits::Get(int, google::protobuf::internal::ExtensionSet const&, std::string const&)’中：\r\n/usr/local/include/google/protobuf/extension_set.h:1077：对‘google::protobuf::internal::ExtensionSet::GetString(int, std::string const&) const’未定义的引用\r\nsrc/mcpack2pb/generator.o：在函数‘google::protobuf::io::Printer::PrintInternal(std::map<std::string, std::string, std::less<std::string>, std::allocator<std::pair<std::string const, std::string> > >*, char const*)’中：\r\n/usr/local/include/google/protobuf/io/printer.h:304：对‘google::protobuf::io::Printer::Print(std::map<std::string, std::string, std::less<std::string>, std::allocator<std::pair<std::string const, std::string> > > const&, char const*)’未定义的引用\r\n/usr/local/include/google/protobuf/io/printer.h:304：对‘google::protobuf::io::Printer::Print(std::map<std::string, std::string, std::less<std::string>, std::allocator<std::pair<std::string const, std::string> > > const&, char const*)’未定义的引用\r\n/usr/local/include/google/protobuf/io/printer.h:304：对‘google::protobuf::io::Printer::Print(std::map<std::string, std::string, std::less<std::string>, std::allocator<std::pair<std::string const, std::string> > > const&, char const*)’未定义的引用\r\n/usr/local/include/google/protobuf/io/printer.h:304：对‘google::protobuf::io::Printer::Print(std::map<std::string, std::string, std::less<std::string>, std::allocator<std::pair<std::string const, std::string> > > const&, char const*)’未定义的引用\r\n/usr/local/include/google/protobuf/io/printer.h:304：对‘google::protobuf::io::Printer::Print(std::map<std::string, std::string, std::less<std::string>, std::allocator<std::pair<std::string const, std::string> > > const&, char const*)’未定义的引用\r\nsrc/mcpack2pb/generator.o:/usr/local/include/google/protobuf/io/printer.h:304: 跟着更多未定义的参考到 google::protobuf::io::Printer::Print(std::map<std::string, std::string, std::less<std::string>, std::allocator<std::pair<std::string const, std::string> > > const&, char const*)\r\nsrc/mcpack2pb/generator.o:(.data.rel.ro._ZTVN9mcpack2pb16McpackToProtobufE[_ZTVN9mcpack2pb16McpackToProtobufE]+0x28)：对‘google::protobuf::compiler::CodeGenerator::GenerateAll(std::vector<google::protobuf::FileDescriptor const*, std::allocator<google::protobuf::FileDescriptor const*> > const&, std::string const&, google::protobuf::compiler::GeneratorContext*, std::string*) const’未定义的引用\r\ncollect2: 错误：ld 返回 1\r\nmake: *** [protoc-gen-mcpack] 错误 1\r\n[root@vm10-0-0-152 incubator-brpc-1.0.0]#\r\n\r\ngflags改成静态库protobuf这块就过不去了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1087064418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1087066092","html_url":"https://github.com/apache/brpc/issues/1537#issuecomment-1087066092","issue_url":"https://api.github.com/repos/apache/brpc/issues/1537","id":1087066092,"node_id":"IC_kwDOBhmkcs5Ay0_s","user":{"login":"sangli00","id":3765918,"node_id":"MDQ6VXNlcjM3NjU5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3765918?v=4","gravatar_id":"","url":"https://api.github.com/users/sangli00","html_url":"https://github.com/sangli00","followers_url":"https://api.github.com/users/sangli00/followers","following_url":"https://api.github.com/users/sangli00/following{/other_user}","gists_url":"https://api.github.com/users/sangli00/gists{/gist_id}","starred_url":"https://api.github.com/users/sangli00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sangli00/subscriptions","organizations_url":"https://api.github.com/users/sangli00/orgs","repos_url":"https://api.github.com/users/sangli00/repos","events_url":"https://api.github.com/users/sangli00/events{/privacy}","received_events_url":"https://api.github.com/users/sangli00/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-04T03:15:38Z","updated_at":"2022-04-04T03:15:38Z","author_association":"NONE","body":"老哥，这个问题解决了吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1087066092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1087152679","html_url":"https://github.com/apache/brpc/issues/1344#issuecomment-1087152679","issue_url":"https://api.github.com/repos/apache/brpc/issues/1344","id":1087152679,"node_id":"IC_kwDOBhmkcs5AzKIn","user":{"login":"wkl7123","id":5687455,"node_id":"MDQ6VXNlcjU2ODc0NTU=","avatar_url":"https://avatars.githubusercontent.com/u/5687455?v=4","gravatar_id":"","url":"https://api.github.com/users/wkl7123","html_url":"https://github.com/wkl7123","followers_url":"https://api.github.com/users/wkl7123/followers","following_url":"https://api.github.com/users/wkl7123/following{/other_user}","gists_url":"https://api.github.com/users/wkl7123/gists{/gist_id}","starred_url":"https://api.github.com/users/wkl7123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wkl7123/subscriptions","organizations_url":"https://api.github.com/users/wkl7123/orgs","repos_url":"https://api.github.com/users/wkl7123/repos","events_url":"https://api.github.com/users/wkl7123/events{/privacy}","received_events_url":"https://api.github.com/users/wkl7123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-04T06:08:24Z","updated_at":"2022-04-04T06:08:24Z","author_association":"NONE","body":"所以brpc只要用了request_attachment就不能兼容grpc了吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1087152679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1087770732","html_url":"https://github.com/apache/brpc/issues/1732#issuecomment-1087770732","issue_url":"https://api.github.com/repos/apache/brpc/issues/1732","id":1087770732,"node_id":"IC_kwDOBhmkcs5A1hBs","user":{"login":"sangli00","id":3765918,"node_id":"MDQ6VXNlcjM3NjU5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3765918?v=4","gravatar_id":"","url":"https://api.github.com/users/sangli00","html_url":"https://github.com/sangli00","followers_url":"https://api.github.com/users/sangli00/followers","following_url":"https://api.github.com/users/sangli00/following{/other_user}","gists_url":"https://api.github.com/users/sangli00/gists{/gist_id}","starred_url":"https://api.github.com/users/sangli00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sangli00/subscriptions","organizations_url":"https://api.github.com/users/sangli00/orgs","repos_url":"https://api.github.com/users/sangli00/repos","events_url":"https://api.github.com/users/sangli00/events{/privacy}","received_events_url":"https://api.github.com/users/sangli00/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-04T16:32:56Z","updated_at":"2022-04-04T16:32:56Z","author_association":"NONE","body":"**gflags**\r\n[root@vm10-0-0-152 build]# nm -CA lib/libgflags.a |grep \"RegisterFlagValidator\"\r\nlib/libgflags.a:gflags.cc.o:0000000000004930 T google::RegisterFlagValidator(bool const*, bool (*)(char const*, bool))\r\nlib/libgflags.a:gflags.cc.o:0000000000004980 T google::RegisterFlagValidator(double const*, bool (*)(char const*, double))\r\nlib/libgflags.a:gflags.cc.o:0000000000004940 T google::RegisterFlagValidator(int const*, bool (*)(char const*, int))\r\nlib/libgflags.a:gflags.cc.o:0000000000004950 T google::RegisterFlagValidator(unsigned int const*, bool (*)(char const*, unsigned int))\r\nlib/libgflags.a:gflags.cc.o:0000000000004960 T google::RegisterFlagValidator(long const*, bool (*)(char const*, long))\r\nlib/libgflags.a:gflags.cc.o:0000000000004970 T google::RegisterFlagValidator(unsigned long const*, bool (*)(char const*, unsigned long))\r\nlib/libgflags.a:gflags.cc.o:0000000000004990 T google::RegisterFlagValidator(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const*, bool (*)(char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&))\r\n\r\n静态库中，也有cxx11的函数\r\n\r\n**protobuf**\r\n[root@vm10-0-0-152 protobuf-3.13.0]# nm -AC ./src/.libs/libprotobuf.a |grep \"GetString\"\r\n./src/.libs/libprotobuf.a:extension_set.o:00000000000085d4 T google::protobuf::internal::ExtensionSet::GetString(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const\r\n静态库中也有GetString函数的定义啊\r\n\r\n\r\n**Makefile**\r\nCPPFLAGS+=-DBTHREAD_USE_FAST_PTHREAD_MUTEX -D_GLIBCXX_USE_CXX11_ABI=0 -D__const__= -D_GNU_SOURCE -DUSE_SYMBOLIZE -DNO_TCMALLOC -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS -DNDEBUG -DBRPC_REVISION=\\\"$(shell ./tools/get_brpc_revision.sh .)\\\"\r\n\r\n还是编译不过去。。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1087770732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1088901063","html_url":"https://github.com/apache/brpc/issues/1732#issuecomment-1088901063","issue_url":"https://api.github.com/repos/apache/brpc/issues/1732","id":1088901063,"node_id":"IC_kwDOBhmkcs5A50_H","user":{"login":"sangli00","id":3765918,"node_id":"MDQ6VXNlcjM3NjU5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3765918?v=4","gravatar_id":"","url":"https://api.github.com/users/sangli00","html_url":"https://github.com/sangli00","followers_url":"https://api.github.com/users/sangli00/followers","following_url":"https://api.github.com/users/sangli00/following{/other_user}","gists_url":"https://api.github.com/users/sangli00/gists{/gist_id}","starred_url":"https://api.github.com/users/sangli00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sangli00/subscriptions","organizations_url":"https://api.github.com/users/sangli00/orgs","repos_url":"https://api.github.com/users/sangli00/repos","events_url":"https://api.github.com/users/sangli00/events{/privacy}","received_events_url":"https://api.github.com/users/sangli00/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-05T15:46:34Z","updated_at":"2022-04-05T15:46:34Z","author_association":"NONE","body":"ABI问题 已经fix。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1088901063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1089665102","html_url":"https://github.com/apache/brpc/issues/1732#issuecomment-1089665102","issue_url":"https://api.github.com/repos/apache/brpc/issues/1732","id":1089665102,"node_id":"IC_kwDOBhmkcs5A8vhO","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-06T02:06:18Z","updated_at":"2022-04-06T02:06:18Z","author_association":"CONTRIBUTOR","body":"> ABI问题 已经fix。\r\n\r\n怎么解决的？分享一下？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1089665102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1089672647","html_url":"https://github.com/apache/brpc/issues/1018#issuecomment-1089672647","issue_url":"https://api.github.com/repos/apache/brpc/issues/1018","id":1089672647,"node_id":"IC_kwDOBhmkcs5A8xXH","user":{"login":"Jackwongupc","id":36837667,"node_id":"MDQ6VXNlcjM2ODM3NjY3","avatar_url":"https://avatars.githubusercontent.com/u/36837667?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackwongupc","html_url":"https://github.com/Jackwongupc","followers_url":"https://api.github.com/users/Jackwongupc/followers","following_url":"https://api.github.com/users/Jackwongupc/following{/other_user}","gists_url":"https://api.github.com/users/Jackwongupc/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackwongupc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackwongupc/subscriptions","organizations_url":"https://api.github.com/users/Jackwongupc/orgs","repos_url":"https://api.github.com/users/Jackwongupc/repos","events_url":"https://api.github.com/users/Jackwongupc/events{/privacy}","received_events_url":"https://api.github.com/users/Jackwongupc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-06T02:14:13Z","updated_at":"2022-04-06T02:14:13Z","author_association":"NONE","body":"问题后来解决了吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1089672647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1089772718","html_url":"https://github.com/apache/brpc/issues/1733#issuecomment-1089772718","issue_url":"https://api.github.com/repos/apache/brpc/issues/1733","id":1089772718,"node_id":"IC_kwDOBhmkcs5A9Jyu","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-06T03:58:01Z","updated_at":"2022-04-06T03:58:01Z","author_association":"CONTRIBUTOR","body":"健康检查是基于连接的，这种情况应该是连接没有断开，brpc没有收到内核的通知，认为连接还是可用的，所以继续写数据，表现为超时。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1089772718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1089899825","html_url":"https://github.com/apache/brpc/issues/1733#issuecomment-1089899825","issue_url":"https://api.github.com/repos/apache/brpc/issues/1733","id":1089899825,"node_id":"IC_kwDOBhmkcs5A9o0x","user":{"login":"yz-cyz","id":76092292,"node_id":"MDQ6VXNlcjc2MDkyMjky","avatar_url":"https://avatars.githubusercontent.com/u/76092292?v=4","gravatar_id":"","url":"https://api.github.com/users/yz-cyz","html_url":"https://github.com/yz-cyz","followers_url":"https://api.github.com/users/yz-cyz/followers","following_url":"https://api.github.com/users/yz-cyz/following{/other_user}","gists_url":"https://api.github.com/users/yz-cyz/gists{/gist_id}","starred_url":"https://api.github.com/users/yz-cyz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yz-cyz/subscriptions","organizations_url":"https://api.github.com/users/yz-cyz/orgs","repos_url":"https://api.github.com/users/yz-cyz/repos","events_url":"https://api.github.com/users/yz-cyz/events{/privacy}","received_events_url":"https://api.github.com/users/yz-cyz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-06T07:07:13Z","updated_at":"2022-04-06T07:07:13Z","author_association":"NONE","body":"@wwbmmm 那健康检查什么情况下才会重新连接呢，，我们这种情况，只要关闭连接重新创建连接就能避免， 但是业务侧没法重连。\r\n怎么能够配置健康检查10s未收到答复就重连吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1089899825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1089913246","html_url":"https://github.com/apache/brpc/issues/1733#issuecomment-1089913246","issue_url":"https://api.github.com/repos/apache/brpc/issues/1733","id":1089913246,"node_id":"IC_kwDOBhmkcs5A9sGe","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-06T07:23:43Z","updated_at":"2022-04-06T07:23:43Z","author_association":"CONTRIBUTOR","body":"可以尝试启动这里说的可选的熔断策略：\r\nhttps://github.com/apache/incubator-brpc/blob/master/docs/cn/circuit_breaker.md","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1089913246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1090029613","html_url":"https://github.com/apache/brpc/pull/1730#issuecomment-1090029613","issue_url":"https://api.github.com/repos/apache/brpc/issues/1730","id":1090029613,"node_id":"IC_kwDOBhmkcs5A-Igt","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-06T09:02:05Z","updated_at":"2022-04-06T09:02:05Z","author_association":"CONTRIBUTOR","body":"@lorinlee 帮看下对不对","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1090029613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1090059837","html_url":"https://github.com/apache/brpc/issues/1732#issuecomment-1090059837","issue_url":"https://api.github.com/repos/apache/brpc/issues/1732","id":1090059837,"node_id":"IC_kwDOBhmkcs5A-P49","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-06T09:32:34Z","updated_at":"2022-04-06T09:32:34Z","author_association":"MEMBER","body":"C++ 11 string 相关的 ABI 问题出现好多次了。典型的常见问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1090059837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1091115808","html_url":"https://github.com/apache/brpc/issues/1693#issuecomment-1091115808","issue_url":"https://api.github.com/repos/apache/brpc/issues/1693","id":1091115808,"node_id":"IC_kwDOBhmkcs5BCRsg","user":{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-07T06:07:54Z","updated_at":"2022-04-07T06:07:54Z","author_association":"NONE","body":"Does this issue has new update?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1091115808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1091158612","html_url":"https://github.com/apache/brpc/issues/1693#issuecomment-1091158612","issue_url":"https://api.github.com/repos/apache/brpc/issues/1693","id":1091158612,"node_id":"IC_kwDOBhmkcs5BCcJU","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-07T07:10:18Z","updated_at":"2022-04-07T07:10:18Z","author_association":"CONTRIBUTOR","body":"有一个trick的方法，可以把`-D__const__=` 改成 `-D__const__=__unused__`\r\n找了半天似乎就这个unused的attribute影响最小：\r\n<img width=\"1132\" alt=\"60f18635e94211fdb3f3c1ef3e1a7b43\" src=\"https://user-images.githubusercontent.com/3894631/162140725-d0cea1d6-3e71-4f75-8423-da50195c6e76.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1091158612/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1091208628","html_url":"https://github.com/apache/brpc/issues/392#issuecomment-1091208628","issue_url":"https://api.github.com/repos/apache/brpc/issues/392","id":1091208628,"node_id":"IC_kwDOBhmkcs5BCoW0","user":{"login":"ahnselina","id":3319716,"node_id":"MDQ6VXNlcjMzMTk3MTY=","avatar_url":"https://avatars.githubusercontent.com/u/3319716?v=4","gravatar_id":"","url":"https://api.github.com/users/ahnselina","html_url":"https://github.com/ahnselina","followers_url":"https://api.github.com/users/ahnselina/followers","following_url":"https://api.github.com/users/ahnselina/following{/other_user}","gists_url":"https://api.github.com/users/ahnselina/gists{/gist_id}","starred_url":"https://api.github.com/users/ahnselina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahnselina/subscriptions","organizations_url":"https://api.github.com/users/ahnselina/orgs","repos_url":"https://api.github.com/users/ahnselina/repos","events_url":"https://api.github.com/users/ahnselina/events{/privacy}","received_events_url":"https://api.github.com/users/ahnselina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-07T07:42:50Z","updated_at":"2022-04-07T07:42:50Z","author_association":"NONE","body":"> 定位到原因了，stream rpc 建流是特殊的rpc ,请求是PRPC,但是回包是STRM,所以建流和流传输都是回的STRM,如果夹杂普通的PRPC,就会回PRPC包，就会客户端解析失败\r\n\r\n你好，我也遇到这个问题了，我这边是偶现的，启动的时候有时会报这个错误，有时又不会，看你的解释，意思是普通的rpc和那种stream的rpc必须分开用不同的接口吗，我这边目前是混用的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1091208628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1091209318","html_url":"https://github.com/apache/brpc/issues/392#issuecomment-1091209318","issue_url":"https://api.github.com/repos/apache/brpc/issues/392","id":1091209318,"node_id":"IC_kwDOBhmkcs5BCohm","user":{"login":"unlimitlearning","id":20830657,"node_id":"MDQ6VXNlcjIwODMwNjU3","avatar_url":"https://avatars.githubusercontent.com/u/20830657?v=4","gravatar_id":"","url":"https://api.github.com/users/unlimitlearning","html_url":"https://github.com/unlimitlearning","followers_url":"https://api.github.com/users/unlimitlearning/followers","following_url":"https://api.github.com/users/unlimitlearning/following{/other_user}","gists_url":"https://api.github.com/users/unlimitlearning/gists{/gist_id}","starred_url":"https://api.github.com/users/unlimitlearning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unlimitlearning/subscriptions","organizations_url":"https://api.github.com/users/unlimitlearning/orgs","repos_url":"https://api.github.com/users/unlimitlearning/repos","events_url":"https://api.github.com/users/unlimitlearning/events{/privacy}","received_events_url":"https://api.github.com/users/unlimitlearning/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-07T07:43:11Z","updated_at":"2022-04-07T07:43:11Z","author_association":"NONE","body":"这是来自QQ邮箱的假期自动回复邮件。\n \n您好，我最近正在休假中，无法亲自回复您的邮件。我将在假期结束后，尽快给您回复。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1091209318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1094884047","html_url":"https://github.com/apache/brpc/pull/1736#issuecomment-1094884047","issue_url":"https://api.github.com/repos/apache/brpc/issues/1736","id":1094884047,"node_id":"IC_kwDOBhmkcs5BQprP","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-11T10:31:38Z","updated_at":"2022-04-11T10:31:38Z","author_association":"CONTRIBUTOR","body":"under which compiler(and which version) is this error produced?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1094884047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1094927006","html_url":"https://github.com/apache/brpc/pull/1736#issuecomment-1094927006","issue_url":"https://api.github.com/repos/apache/brpc/issues/1736","id":1094927006,"node_id":"IC_kwDOBhmkcs5BQ0Ke","user":{"login":"wolfdan666","id":37760924,"node_id":"MDQ6VXNlcjM3NzYwOTI0","avatar_url":"https://avatars.githubusercontent.com/u/37760924?v=4","gravatar_id":"","url":"https://api.github.com/users/wolfdan666","html_url":"https://github.com/wolfdan666","followers_url":"https://api.github.com/users/wolfdan666/followers","following_url":"https://api.github.com/users/wolfdan666/following{/other_user}","gists_url":"https://api.github.com/users/wolfdan666/gists{/gist_id}","starred_url":"https://api.github.com/users/wolfdan666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolfdan666/subscriptions","organizations_url":"https://api.github.com/users/wolfdan666/orgs","repos_url":"https://api.github.com/users/wolfdan666/repos","events_url":"https://api.github.com/users/wolfdan666/events{/privacy}","received_events_url":"https://api.github.com/users/wolfdan666/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-11T11:18:40Z","updated_at":"2022-04-11T11:18:40Z","author_association":"CONTRIBUTOR","body":"> under which compiler(and which version) is this error produced?\r\n\r\ngcc version 7.5.0 (GCC)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1094927006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1096571991","html_url":"https://github.com/apache/brpc/issues/1739#issuecomment-1096571991","issue_url":"https://api.github.com/repos/apache/brpc/issues/1739","id":1096571991,"node_id":"IC_kwDOBhmkcs5BXFxX","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T10:57:06Z","updated_at":"2022-04-12T10:58:22Z","author_association":"CONTRIBUTOR","body":"1. EINVAL就是连接断了，重新创建stream即可，channel一般不用动（当然也取决于channel具体怎么创建的，如果是指定ip，然后确实是挂了，那再怎么连也连不上）\r\n2. StreamWrite成功只能说明本地写入成功，不能说明对端一定收到了（否则每次写入都要从对端收ack，有性能问题）。在需要断点续传的场景中，需要自己做额外的rpc从对端获得已成功传递的进度，然后从那个点开始重传。由于rpc可能重试导致接收端可能要处理幂等问题。\r\n\r\n整体而言，如果需要端到端exactly-once天然就挺复杂的，也会限制并发度，尽量在应用层面避免对顺序的绝对依赖","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1096571991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1097686345","html_url":"https://github.com/apache/brpc/issues/1693#issuecomment-1097686345","issue_url":"https://api.github.com/repos/apache/brpc/issues/1693","id":1097686345,"node_id":"IC_kwDOBhmkcs5BbV1J","user":{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T08:07:34Z","updated_at":"2022-04-13T08:07:34Z","author_association":"NONE","body":"> 有一个trick的方法，可以把`-D__const__=` 改成 `-D__const__=__unused__` 找了半天似乎就这个unused的attribute影响最小： <img alt=\"60f18635e94211fdb3f3c1ef3e1a7b43\" width=\"1132\" src=\"https://user-images.githubusercontent.com/3894631/162140725-d0cea1d6-3e71-4f75-8423-da50195c6e76.png\">\r\n\r\nThanks for your reply, Does this fix will be merged to codes of brpc? If this fix merged, I will add a patch on vcpkg.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1097686345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1098666425","html_url":"https://github.com/apache/brpc/issues/1739#issuecomment-1098666425","issue_url":"https://api.github.com/repos/apache/brpc/issues/1739","id":1098666425,"node_id":"IC_kwDOBhmkcs5BfFG5","user":{"login":"MrGuin","id":26199910,"node_id":"MDQ6VXNlcjI2MTk5OTEw","avatar_url":"https://avatars.githubusercontent.com/u/26199910?v=4","gravatar_id":"","url":"https://api.github.com/users/MrGuin","html_url":"https://github.com/MrGuin","followers_url":"https://api.github.com/users/MrGuin/followers","following_url":"https://api.github.com/users/MrGuin/following{/other_user}","gists_url":"https://api.github.com/users/MrGuin/gists{/gist_id}","starred_url":"https://api.github.com/users/MrGuin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrGuin/subscriptions","organizations_url":"https://api.github.com/users/MrGuin/orgs","repos_url":"https://api.github.com/users/MrGuin/repos","events_url":"https://api.github.com/users/MrGuin/events{/privacy}","received_events_url":"https://api.github.com/users/MrGuin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T03:13:06Z","updated_at":"2022-04-14T03:13:06Z","author_association":"CONTRIBUTOR","body":"> 1. EINVAL就是连接断了，重新创建stream即可，channel一般不用动（当然也取决于channel具体怎么创建的，如果是指定ip，然后确实是挂了，那再怎么连也连不上）\r\n> 2. StreamWrite成功只能说明本地写入成功，不能说明对端一定收到了（否则每次写入都要从对端收ack，有性能问题）。在需要断点续传的场景中，需要自己做额外的rpc从对端获得已成功传递的进度，然后从那个点开始重传。由于rpc可能重试导致接收端可能要处理幂等问题。\r\n> \r\n> 整体而言，如果需要端到端exactly-once天然就挺复杂的，也会限制并发度，尽量在应用层面避免对顺序的绝对依赖\r\n\r\n感谢回复，想了下网络层确实不应该发送等 ack 再返回，只能保证的是消息按顺序到达，即使网络层 ack 了，应用层消息的确认也只能由应用层自己去做。\r\n我们的用法是把大量记录用 stream 发出去，为了最大化发送速率，发送方在同一个 streamId 上多线程 StreamWrite，记录的处理是幂等的，顺序不重要但因为并发乱序也没法记录进度，中途出错只能从头开始吧。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1098666425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1098741807","html_url":"https://github.com/apache/brpc/issues/1739#issuecomment-1098741807","issue_url":"https://api.github.com/repos/apache/brpc/issues/1739","id":1098741807,"node_id":"IC_kwDOBhmkcs5BfXgv","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T06:06:32Z","updated_at":"2022-04-14T06:06:32Z","author_association":"CONTRIBUTOR","body":"”顺序不重要“的话用普通RPC就行了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1098741807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1098747366","html_url":"https://github.com/apache/brpc/issues/1739#issuecomment-1098747366","issue_url":"https://api.github.com/repos/apache/brpc/issues/1739","id":1098747366,"node_id":"IC_kwDOBhmkcs5BfY3m","user":{"login":"MrGuin","id":26199910,"node_id":"MDQ6VXNlcjI2MTk5OTEw","avatar_url":"https://avatars.githubusercontent.com/u/26199910?v=4","gravatar_id":"","url":"https://api.github.com/users/MrGuin","html_url":"https://github.com/MrGuin","followers_url":"https://api.github.com/users/MrGuin/followers","following_url":"https://api.github.com/users/MrGuin/following{/other_user}","gists_url":"https://api.github.com/users/MrGuin/gists{/gist_id}","starred_url":"https://api.github.com/users/MrGuin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrGuin/subscriptions","organizations_url":"https://api.github.com/users/MrGuin/orgs","repos_url":"https://api.github.com/users/MrGuin/repos","events_url":"https://api.github.com/users/MrGuin/events{/privacy}","received_events_url":"https://api.github.com/users/MrGuin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T06:16:18Z","updated_at":"2022-04-14T06:16:18Z","author_association":"CONTRIBUTOR","body":"但是要传的消息很多，会达到百MB，GB级，接收端恢复完才能服务，所以用的 stream 方式，要尽快发完。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1098747366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1098850059","html_url":"https://github.com/apache/brpc/issues/1741#issuecomment-1098850059","issue_url":"https://api.github.com/repos/apache/brpc/issues/1741","id":1098850059,"node_id":"IC_kwDOBhmkcs5Bfx8L","user":{"login":"stdpain","id":34912776,"node_id":"MDQ6VXNlcjM0OTEyNzc2","avatar_url":"https://avatars.githubusercontent.com/u/34912776?v=4","gravatar_id":"","url":"https://api.github.com/users/stdpain","html_url":"https://github.com/stdpain","followers_url":"https://api.github.com/users/stdpain/followers","following_url":"https://api.github.com/users/stdpain/following{/other_user}","gists_url":"https://api.github.com/users/stdpain/gists{/gist_id}","starred_url":"https://api.github.com/users/stdpain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stdpain/subscriptions","organizations_url":"https://api.github.com/users/stdpain/orgs","repos_url":"https://api.github.com/users/stdpain/repos","events_url":"https://api.github.com/users/stdpain/events{/privacy}","received_events_url":"https://api.github.com/users/stdpain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T08:31:25Z","updated_at":"2022-04-14T08:31:25Z","author_association":"CONTRIBUTOR","body":"It looks like this, assuming there is only one worker.\r\nThe worker schedules bthread1 to get the lock on the pthread and then performs a yield.\r\nThe worker schedules bthread2 to try to get the pthread lock, and then blocks.\r\n\r\nSince worker is blocked, it cannot schedule bthread1, so bthread1 cannot release the lock, resulting in a deadlock.\r\n\r\nThe main reason is not that the bthread_setconcurrency is too small. Because even if the worker is large, it will still get stuck, but the probability is very low.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1098850059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099111724","html_url":"https://github.com/apache/brpc/issues/1741#issuecomment-1099111724","issue_url":"https://api.github.com/repos/apache/brpc/issues/1741","id":1099111724,"node_id":"IC_kwDOBhmkcs5Bgx0s","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T11:59:48Z","updated_at":"2022-04-14T12:02:15Z","author_association":"CONTRIBUTOR","body":"I think there are several reasons:\r\n1. worker threads number is too small\r\n2. avoid using blocking pthread API in bthreads, use the corresponding data structure in bthread for example bthread_mutex_t and bthread_cond_t\r\n3. if must use the blocking pthread API, keep the critical sections small","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099111724/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099159298","html_url":"https://github.com/apache/brpc/issues/1523#issuecomment-1099159298","issue_url":"https://api.github.com/repos/apache/brpc/issues/1523","id":1099159298,"node_id":"IC_kwDOBhmkcs5Bg9cC","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T12:58:27Z","updated_at":"2022-04-14T12:58:27Z","author_association":"CONTRIBUTOR","body":"closed，还有问题的话，reopen","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099159298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099160693","html_url":"https://github.com/apache/brpc/issues/1485#issuecomment-1099160693","issue_url":"https://api.github.com/repos/apache/brpc/issues/1485","id":1099160693,"node_id":"IC_kwDOBhmkcs5Bg9x1","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T13:00:13Z","updated_at":"2022-04-14T13:00:13Z","author_association":"CONTRIBUTOR","body":"已合入master","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099160693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099163538","html_url":"https://github.com/apache/brpc/issues/1383#issuecomment-1099163538","issue_url":"https://api.github.com/repos/apache/brpc/issues/1383","id":1099163538,"node_id":"IC_kwDOBhmkcs5Bg-eS","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T13:03:22Z","updated_at":"2022-04-14T13:03:22Z","author_association":"CONTRIBUTOR","body":"Usually it's because the machine is overloaded, closed","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099163538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099168519","html_url":"https://github.com/apache/brpc/issues/1148#issuecomment-1099168519","issue_url":"https://api.github.com/repos/apache/brpc/issues/1148","id":1099168519,"node_id":"IC_kwDOBhmkcs5Bg_sH","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T13:08:41Z","updated_at":"2022-04-14T13:08:41Z","author_association":"CONTRIBUTOR","body":"same with #1383 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099168519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099792931","html_url":"https://github.com/apache/brpc/issues/1741#issuecomment-1099792931","issue_url":"https://api.github.com/repos/apache/brpc/issues/1741","id":1099792931,"node_id":"IC_kwDOBhmkcs5BjYIj","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-15T02:27:18Z","updated_at":"2022-04-15T02:27:18Z","author_association":"CONTRIBUTOR","body":"bthread_setconcurrency(1) will not take effect because BTHREAD_MIN_CONCURRENCY is 4.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099792931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099796869","html_url":"https://github.com/apache/brpc/issues/1738#issuecomment-1099796869","issue_url":"https://api.github.com/repos/apache/brpc/issues/1738","id":1099796869,"node_id":"IC_kwDOBhmkcs5BjZGF","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-15T02:36:39Z","updated_at":"2022-04-15T02:36:39Z","author_association":"CONTRIBUTOR","body":"有没有可能存在这种场景，ParallelChannel的不同子Channel的协议不同，导致序列化的结果不能复用？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099796869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099824548","html_url":"https://github.com/apache/brpc/issues/1738#issuecomment-1099824548","issue_url":"https://api.github.com/repos/apache/brpc/issues/1738","id":1099824548,"node_id":"IC_kwDOBhmkcs5Bjf2k","user":{"login":"0x007004","id":13299372,"node_id":"MDQ6VXNlcjEzMjk5Mzcy","avatar_url":"https://avatars.githubusercontent.com/u/13299372?v=4","gravatar_id":"","url":"https://api.github.com/users/0x007004","html_url":"https://github.com/0x007004","followers_url":"https://api.github.com/users/0x007004/followers","following_url":"https://api.github.com/users/0x007004/following{/other_user}","gists_url":"https://api.github.com/users/0x007004/gists{/gist_id}","starred_url":"https://api.github.com/users/0x007004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0x007004/subscriptions","organizations_url":"https://api.github.com/users/0x007004/orgs","repos_url":"https://api.github.com/users/0x007004/repos","events_url":"https://api.github.com/users/0x007004/events{/privacy}","received_events_url":"https://api.github.com/users/0x007004/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-15T03:49:31Z","updated_at":"2022-04-15T05:58:05Z","author_association":"NONE","body":"不同协议看代码应该还好， 数据主要就是_request_buf\r\n- 唯一被读取的地方是“pack_request“，直接附加到发送到iobuf后面,和协议无关。\r\n![image](https://user-images.githubusercontent.com/13299372/163514937-06b10355-5384-44a7-beba-70493e8a2be3.png)\r\n\r\n- 唯一被写入的地方是\"serialize_request\"，这里和压缩算法相关，但是在parallel_channel的使用中，只有一个controller，不同子channel的controller会ApplyClientSettings，压缩算法在这里是可以被统一的，或者可以把压缩算法给挪到协议里面，这样request的数据就更单纯了。\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1099824548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100033575","html_url":"https://github.com/apache/brpc/issues/1741#issuecomment-1100033575","issue_url":"https://api.github.com/repos/apache/brpc/issues/1741","id":1100033575,"node_id":"IC_kwDOBhmkcs5BkS4n","user":{"login":"cooper-zhzhang","id":16239579,"node_id":"MDQ6VXNlcjE2MjM5NTc5","avatar_url":"https://avatars.githubusercontent.com/u/16239579?v=4","gravatar_id":"","url":"https://api.github.com/users/cooper-zhzhang","html_url":"https://github.com/cooper-zhzhang","followers_url":"https://api.github.com/users/cooper-zhzhang/followers","following_url":"https://api.github.com/users/cooper-zhzhang/following{/other_user}","gists_url":"https://api.github.com/users/cooper-zhzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/cooper-zhzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooper-zhzhang/subscriptions","organizations_url":"https://api.github.com/users/cooper-zhzhang/orgs","repos_url":"https://api.github.com/users/cooper-zhzhang/repos","events_url":"https://api.github.com/users/cooper-zhzhang/events{/privacy}","received_events_url":"https://api.github.com/users/cooper-zhzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-15T10:45:23Z","updated_at":"2022-04-15T10:46:33Z","author_association":"NONE","body":"```\r\n//get 5 pthread in system\r\nbthread_setconcurrency(5)\r\n// get 6 bthread\r\n  for (int i = 0; i < 6; ++i) {\r\n        bthread_start_urgent(&threads[i], &attr, func, nullptr);\r\n    }\r\n\r\n```\r\n\r\n\r\npthread 0: . run bthread0-->   lock _mutex --> bthread_yield() --> run bthread5 --> wait _mutex  \r\npthread 1: run bthread1 --> wait _mutex\r\npthread 2: run bthread2 --> wait _mutex\r\npthread 3: run bthread3 --> wait _mutex\r\npthread 4: run bthread4 --> wait _mutex\r\n\r\n\r\n@\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100033575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100038954","html_url":"https://github.com/apache/brpc/issues/1741#issuecomment-1100038954","issue_url":"https://api.github.com/repos/apache/brpc/issues/1741","id":1100038954,"node_id":"IC_kwDOBhmkcs5BkUMq","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-15T10:59:23Z","updated_at":"2022-04-15T10:59:23Z","author_association":"CONTRIBUTOR","body":"> ```\r\n> //get 5 pthread in system\r\n> bthread_setconcurrency(5)\r\n> // get 6 bthread\r\n>   for (int i = 0; i < 6; ++i) {\r\n>         bthread_start_urgent(&threads[i], &attr, func, nullptr);\r\n>     }\r\n> ```\r\n> \r\n> pthread 0: . run bthread0--> lock _mutex --> bthread_yield() --> run bthread5 --> wait _mutex pthread 1: run bthread1 --> wait _mutex pthread 2: run bthread2 --> wait _mutex pthread 3: run bthread3 --> wait _mutex pthread 4: run bthread4 --> wait _mutex\r\n> \r\n> @\r\n\r\nThis result is expected, according to the design of bthread.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100038954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100052508","html_url":"https://github.com/apache/brpc/issues/1286#issuecomment-1100052508","issue_url":"https://api.github.com/repos/apache/brpc/issues/1286","id":1100052508,"node_id":"IC_kwDOBhmkcs5BkXgc","user":{"login":"fcycq","id":40886876,"node_id":"MDQ6VXNlcjQwODg2ODc2","avatar_url":"https://avatars.githubusercontent.com/u/40886876?v=4","gravatar_id":"","url":"https://api.github.com/users/fcycq","html_url":"https://github.com/fcycq","followers_url":"https://api.github.com/users/fcycq/followers","following_url":"https://api.github.com/users/fcycq/following{/other_user}","gists_url":"https://api.github.com/users/fcycq/gists{/gist_id}","starred_url":"https://api.github.com/users/fcycq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fcycq/subscriptions","organizations_url":"https://api.github.com/users/fcycq/orgs","repos_url":"https://api.github.com/users/fcycq/repos","events_url":"https://api.github.com/users/fcycq/events{/privacy}","received_events_url":"https://api.github.com/users/fcycq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-15T11:30:26Z","updated_at":"2022-04-15T11:30:26Z","author_association":"NONE","body":"https://blog.csdn.net/xiang_shao344/article/details/116017228\r\n是getopt的问题，在Mac上的用法和linux不一样","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100052508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100060326","html_url":"https://github.com/apache/brpc/issues/1286#issuecomment-1100060326","issue_url":"https://api.github.com/repos/apache/brpc/issues/1286","id":1100060326,"node_id":"IC_kwDOBhmkcs5BkZam","user":{"login":"fcycq","id":40886876,"node_id":"MDQ6VXNlcjQwODg2ODc2","avatar_url":"https://avatars.githubusercontent.com/u/40886876?v=4","gravatar_id":"","url":"https://api.github.com/users/fcycq","html_url":"https://github.com/fcycq","followers_url":"https://api.github.com/users/fcycq/followers","following_url":"https://api.github.com/users/fcycq/following{/other_user}","gists_url":"https://api.github.com/users/fcycq/gists{/gist_id}","starred_url":"https://api.github.com/users/fcycq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fcycq/subscriptions","organizations_url":"https://api.github.com/users/fcycq/orgs","repos_url":"https://api.github.com/users/fcycq/repos","events_url":"https://api.github.com/users/fcycq/events{/privacy}","received_events_url":"https://api.github.com/users/fcycq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-15T11:50:15Z","updated_at":"2022-04-15T11:50:15Z","author_association":"NONE","body":"> https://blog.csdn.net/xiang_shao344/article/details/116017228\r\n> 是getopt的问题，在Mac上的用法和linux不一样\r\n\r\nexport PATH=\"/usr/local/opt/gnu-getopt/bin:$PATH\"\r\n替换一下就好了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100060326/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100156057","html_url":"https://github.com/apache/brpc/issues/1715#issuecomment-1100156057","issue_url":"https://api.github.com/repos/apache/brpc/issues/1715","id":1100156057,"node_id":"IC_kwDOBhmkcs5BkwyZ","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-15T14:53:02Z","updated_at":"2022-04-15T14:53:02Z","author_association":"CONTRIBUTOR","body":"closed, if have any other problems, reopen","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100156057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100874131","html_url":"https://github.com/apache/brpc/issues/1659#issuecomment-1100874131","issue_url":"https://api.github.com/repos/apache/brpc/issues/1659","id":1100874131,"node_id":"IC_kwDOBhmkcs5BngGT","user":{"login":"SinnerA","id":4592407,"node_id":"MDQ6VXNlcjQ1OTI0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/4592407?v=4","gravatar_id":"","url":"https://api.github.com/users/SinnerA","html_url":"https://github.com/SinnerA","followers_url":"https://api.github.com/users/SinnerA/followers","following_url":"https://api.github.com/users/SinnerA/following{/other_user}","gists_url":"https://api.github.com/users/SinnerA/gists{/gist_id}","starred_url":"https://api.github.com/users/SinnerA/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinnerA/subscriptions","organizations_url":"https://api.github.com/users/SinnerA/orgs","repos_url":"https://api.github.com/users/SinnerA/repos","events_url":"https://api.github.com/users/SinnerA/events{/privacy}","received_events_url":"https://api.github.com/users/SinnerA/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-17T13:19:54Z","updated_at":"2022-04-17T13:19:54Z","author_association":"NONE","body":"可能两边的 initial window size 没对齐，默认是 64K，看下你没有改过？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100874131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100993912","html_url":"https://github.com/apache/brpc/pull/1742#issuecomment-1100993912","issue_url":"https://api.github.com/repos/apache/brpc/issues/1742","id":1100993912,"node_id":"IC_kwDOBhmkcs5Bn9V4","user":{"login":"tanzhongyi003","id":20179982,"node_id":"MDQ6VXNlcjIwMTc5OTgy","avatar_url":"https://avatars.githubusercontent.com/u/20179982?v=4","gravatar_id":"","url":"https://api.github.com/users/tanzhongyi003","html_url":"https://github.com/tanzhongyi003","followers_url":"https://api.github.com/users/tanzhongyi003/followers","following_url":"https://api.github.com/users/tanzhongyi003/following{/other_user}","gists_url":"https://api.github.com/users/tanzhongyi003/gists{/gist_id}","starred_url":"https://api.github.com/users/tanzhongyi003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanzhongyi003/subscriptions","organizations_url":"https://api.github.com/users/tanzhongyi003/orgs","repos_url":"https://api.github.com/users/tanzhongyi003/repos","events_url":"https://api.github.com/users/tanzhongyi003/events{/privacy}","received_events_url":"https://api.github.com/users/tanzhongyi003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-18T01:03:18Z","updated_at":"2022-04-18T01:03:18Z","author_association":"MEMBER","body":"LGTM，thanks","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1100993912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1102232379","html_url":"https://github.com/apache/brpc/issues/1743#issuecomment-1102232379","issue_url":"https://api.github.com/repos/apache/brpc/issues/1743","id":1102232379,"node_id":"IC_kwDOBhmkcs5Bsrs7","user":{"login":"lzfhust","id":9677371,"node_id":"MDQ6VXNlcjk2NzczNzE=","avatar_url":"https://avatars.githubusercontent.com/u/9677371?v=4","gravatar_id":"","url":"https://api.github.com/users/lzfhust","html_url":"https://github.com/lzfhust","followers_url":"https://api.github.com/users/lzfhust/followers","following_url":"https://api.github.com/users/lzfhust/following{/other_user}","gists_url":"https://api.github.com/users/lzfhust/gists{/gist_id}","starred_url":"https://api.github.com/users/lzfhust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lzfhust/subscriptions","organizations_url":"https://api.github.com/users/lzfhust/orgs","repos_url":"https://api.github.com/users/lzfhust/repos","events_url":"https://api.github.com/users/lzfhust/events{/privacy}","received_events_url":"https://api.github.com/users/lzfhust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T07:53:03Z","updated_at":"2022-04-19T07:53:03Z","author_association":"CONTRIBUTOR","body":"初步的实现：\r\nhttps://github.com/lzfhust/incubator-brpc/commit/9a54af8a85cfac74fe6869e002d2de27339274ec","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1102232379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1103426566","html_url":"https://github.com/apache/brpc/issues/1454#issuecomment-1103426566","issue_url":"https://api.github.com/repos/apache/brpc/issues/1454","id":1103426566,"node_id":"IC_kwDOBhmkcs5BxPQG","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T03:12:52Z","updated_at":"2022-04-20T03:12:52Z","author_association":"CONTRIBUTOR","body":"最新版本 号称支持proto3了。和你这个需求一样么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1103426566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1103432568","html_url":"https://github.com/apache/brpc/issues/626#issuecomment-1103432568","issue_url":"https://api.github.com/repos/apache/brpc/issues/626","id":1103432568,"node_id":"IC_kwDOBhmkcs5BxQt4","user":{"login":"fan-leo","id":59920312,"node_id":"MDQ6VXNlcjU5OTIwMzEy","avatar_url":"https://avatars.githubusercontent.com/u/59920312?v=4","gravatar_id":"","url":"https://api.github.com/users/fan-leo","html_url":"https://github.com/fan-leo","followers_url":"https://api.github.com/users/fan-leo/followers","following_url":"https://api.github.com/users/fan-leo/following{/other_user}","gists_url":"https://api.github.com/users/fan-leo/gists{/gist_id}","starred_url":"https://api.github.com/users/fan-leo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fan-leo/subscriptions","organizations_url":"https://api.github.com/users/fan-leo/orgs","repos_url":"https://api.github.com/users/fan-leo/repos","events_url":"https://api.github.com/users/fan-leo/events{/privacy}","received_events_url":"https://api.github.com/users/fan-leo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T03:26:08Z","updated_at":"2022-04-20T03:26:08Z","author_association":"NONE","body":"请问该问题最后怎么解决的？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1103432568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1104776264","html_url":"https://github.com/apache/brpc/pull/1745#issuecomment-1104776264","issue_url":"https://api.github.com/repos/apache/brpc/issues/1745","id":1104776264,"node_id":"IC_kwDOBhmkcs5B2YxI","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-21T06:44:27Z","updated_at":"2022-04-21T06:44:27Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1104776264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1105283186","html_url":"https://github.com/apache/brpc/issues/1746#issuecomment-1105283186","issue_url":"https://api.github.com/repos/apache/brpc/issues/1746","id":1105283186,"node_id":"IC_kwDOBhmkcs5B4Uhy","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-21T14:22:08Z","updated_at":"2022-04-21T14:22:08Z","author_association":"CONTRIBUTOR","body":"是不是其他地方有pthread锁？把bthread底层的worker给hang住了\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1105283186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1105328066","html_url":"https://github.com/apache/brpc/pull/1745#issuecomment-1105328066","issue_url":"https://api.github.com/repos/apache/brpc/issues/1745","id":1105328066,"node_id":"IC_kwDOBhmkcs5B4ffC","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-21T14:52:06Z","updated_at":"2022-04-21T14:52:06Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1105328066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1105953649","html_url":"https://github.com/apache/brpc/issues/1746#issuecomment-1105953649","issue_url":"https://api.github.com/repos/apache/brpc/issues/1746","id":1105953649,"node_id":"IC_kwDOBhmkcs5B64Nx","user":{"login":"guaimomotou123","id":27824261,"node_id":"MDQ6VXNlcjI3ODI0MjYx","avatar_url":"https://avatars.githubusercontent.com/u/27824261?v=4","gravatar_id":"","url":"https://api.github.com/users/guaimomotou123","html_url":"https://github.com/guaimomotou123","followers_url":"https://api.github.com/users/guaimomotou123/followers","following_url":"https://api.github.com/users/guaimomotou123/following{/other_user}","gists_url":"https://api.github.com/users/guaimomotou123/gists{/gist_id}","starred_url":"https://api.github.com/users/guaimomotou123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guaimomotou123/subscriptions","organizations_url":"https://api.github.com/users/guaimomotou123/orgs","repos_url":"https://api.github.com/users/guaimomotou123/repos","events_url":"https://api.github.com/users/guaimomotou123/events{/privacy}","received_events_url":"https://api.github.com/users/guaimomotou123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-22T03:00:29Z","updated_at":"2022-04-22T03:00:29Z","author_association":"NONE","body":"> 是不是其他地方有pthread锁？把bthread底层的worker给hang住了\r\n\r\n看了前后代码，没有锁","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1105953649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1105957303","html_url":"https://github.com/apache/brpc/issues/1746#issuecomment-1105957303","issue_url":"https://api.github.com/repos/apache/brpc/issues/1746","id":1105957303,"node_id":"IC_kwDOBhmkcs5B65G3","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-22T03:08:31Z","updated_at":"2022-04-22T03:08:31Z","author_association":"CONTRIBUTOR","body":"看看服务的负载是不是太高了，以至于rpc阻塞结束后bthread重新运行要等待","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1105957303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1105977799","html_url":"https://github.com/apache/brpc/pull/1730#issuecomment-1105977799","issue_url":"https://api.github.com/repos/apache/brpc/issues/1730","id":1105977799,"node_id":"IC_kwDOBhmkcs5B6-HH","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-22T03:58:12Z","updated_at":"2022-04-22T03:58:12Z","author_association":"CONTRIBUTOR","body":"嗯嗯对的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1105977799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1106216228","html_url":"https://github.com/apache/brpc/issues/1746#issuecomment-1106216228","issue_url":"https://api.github.com/repos/apache/brpc/issues/1746","id":1106216228,"node_id":"IC_kwDOBhmkcs5B74Uk","user":{"login":"guaimomotou123","id":27824261,"node_id":"MDQ6VXNlcjI3ODI0MjYx","avatar_url":"https://avatars.githubusercontent.com/u/27824261?v=4","gravatar_id":"","url":"https://api.github.com/users/guaimomotou123","html_url":"https://github.com/guaimomotou123","followers_url":"https://api.github.com/users/guaimomotou123/followers","following_url":"https://api.github.com/users/guaimomotou123/following{/other_user}","gists_url":"https://api.github.com/users/guaimomotou123/gists{/gist_id}","starred_url":"https://api.github.com/users/guaimomotou123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guaimomotou123/subscriptions","organizations_url":"https://api.github.com/users/guaimomotou123/orgs","repos_url":"https://api.github.com/users/guaimomotou123/repos","events_url":"https://api.github.com/users/guaimomotou123/events{/privacy}","received_events_url":"https://api.github.com/users/guaimomotou123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-22T09:03:45Z","updated_at":"2022-04-22T09:03:45Z","author_association":"NONE","body":"> 看看服务的负载是不是太高了，以至于rpc阻塞结束后bthread重新运行要等待\r\n\r\n看了一下，好像就是这个原因导致的，非常感谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1106216228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1106216542","html_url":"https://github.com/apache/brpc/issues/1746#issuecomment-1106216542","issue_url":"https://api.github.com/repos/apache/brpc/issues/1746","id":1106216542,"node_id":"IC_kwDOBhmkcs5B74Ze","user":{"login":"guaimomotou123","id":27824261,"node_id":"MDQ6VXNlcjI3ODI0MjYx","avatar_url":"https://avatars.githubusercontent.com/u/27824261?v=4","gravatar_id":"","url":"https://api.github.com/users/guaimomotou123","html_url":"https://github.com/guaimomotou123","followers_url":"https://api.github.com/users/guaimomotou123/followers","following_url":"https://api.github.com/users/guaimomotou123/following{/other_user}","gists_url":"https://api.github.com/users/guaimomotou123/gists{/gist_id}","starred_url":"https://api.github.com/users/guaimomotou123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guaimomotou123/subscriptions","organizations_url":"https://api.github.com/users/guaimomotou123/orgs","repos_url":"https://api.github.com/users/guaimomotou123/repos","events_url":"https://api.github.com/users/guaimomotou123/events{/privacy}","received_events_url":"https://api.github.com/users/guaimomotou123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-22T09:04:06Z","updated_at":"2022-04-22T09:04:06Z","author_association":"NONE","body":"> 是不是其他地方有pthread锁？把bthread底层的worker给hang住了\r\n\r\n感谢大佬","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1106216542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107352444","html_url":"https://github.com/apache/brpc/issues/695#issuecomment-1107352444","issue_url":"https://api.github.com/repos/apache/brpc/issues/695","id":1107352444,"node_id":"IC_kwDOBhmkcs5CANt8","user":{"login":"mengyu139","id":15136959,"node_id":"MDQ6VXNlcjE1MTM2OTU5","avatar_url":"https://avatars.githubusercontent.com/u/15136959?v=4","gravatar_id":"","url":"https://api.github.com/users/mengyu139","html_url":"https://github.com/mengyu139","followers_url":"https://api.github.com/users/mengyu139/followers","following_url":"https://api.github.com/users/mengyu139/following{/other_user}","gists_url":"https://api.github.com/users/mengyu139/gists{/gist_id}","starred_url":"https://api.github.com/users/mengyu139/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mengyu139/subscriptions","organizations_url":"https://api.github.com/users/mengyu139/orgs","repos_url":"https://api.github.com/users/mengyu139/repos","events_url":"https://api.github.com/users/mengyu139/events{/privacy}","received_events_url":"https://api.github.com/users/mengyu139/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-23T03:46:25Z","updated_at":"2022-04-23T03:46:25Z","author_association":"NONE","body":"ABI问题，编译gflags时可以在cmakelists 中添加 add_definitions(-D_GLIBCXX_USE_CXX11_ABI=0) 解决","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107352444/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107520348","html_url":"https://github.com/apache/brpc/issues/1748#issuecomment-1107520348","issue_url":"https://api.github.com/repos/apache/brpc/issues/1748","id":1107520348,"node_id":"IC_kwDOBhmkcs5CA2tc","user":{"login":"ehds","id":17853449,"node_id":"MDQ6VXNlcjE3ODUzNDQ5","avatar_url":"https://avatars.githubusercontent.com/u/17853449?v=4","gravatar_id":"","url":"https://api.github.com/users/ehds","html_url":"https://github.com/ehds","followers_url":"https://api.github.com/users/ehds/followers","following_url":"https://api.github.com/users/ehds/following{/other_user}","gists_url":"https://api.github.com/users/ehds/gists{/gist_id}","starred_url":"https://api.github.com/users/ehds/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ehds/subscriptions","organizations_url":"https://api.github.com/users/ehds/orgs","repos_url":"https://api.github.com/users/ehds/repos","events_url":"https://api.github.com/users/ehds/events{/privacy}","received_events_url":"https://api.github.com/users/ehds/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-23T15:23:40Z","updated_at":"2022-04-23T15:24:14Z","author_association":"CONTRIBUTOR","body":"same issue: https://github.com/apache/incubator-brpc/issues/1693","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107520348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107703553","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1107703553","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1107703553,"node_id":"IC_kwDOBhmkcs5CBjcB","user":{"login":"uuuuu-diwu","id":17615704,"node_id":"MDQ6VXNlcjE3NjE1NzA0","avatar_url":"https://avatars.githubusercontent.com/u/17615704?v=4","gravatar_id":"","url":"https://api.github.com/users/uuuuu-diwu","html_url":"https://github.com/uuuuu-diwu","followers_url":"https://api.github.com/users/uuuuu-diwu/followers","following_url":"https://api.github.com/users/uuuuu-diwu/following{/other_user}","gists_url":"https://api.github.com/users/uuuuu-diwu/gists{/gist_id}","starred_url":"https://api.github.com/users/uuuuu-diwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uuuuu-diwu/subscriptions","organizations_url":"https://api.github.com/users/uuuuu-diwu/orgs","repos_url":"https://api.github.com/users/uuuuu-diwu/repos","events_url":"https://api.github.com/users/uuuuu-diwu/events{/privacy}","received_events_url":"https://api.github.com/users/uuuuu-diwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-24T03:59:58Z","updated_at":"2022-04-24T03:59:58Z","author_association":"NONE","body":"或者直接把业务代码写到 .so 里面，然后进程根据信号重新 dlopen 这些 .so ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107703553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107714295","html_url":"https://github.com/apache/brpc/issues/1749#issuecomment-1107714295","issue_url":"https://api.github.com/repos/apache/brpc/issues/1749","id":1107714295,"node_id":"IC_kwDOBhmkcs5CBmD3","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-24T05:34:26Z","updated_at":"2022-04-24T05:34:26Z","author_association":"CONTRIBUTOR","body":"你是希望提供类似butex_wake_urgent/butex_wake_background这样的函数吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107714295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107732409","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1107732409","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1107732409,"node_id":"IC_kwDOBhmkcs5CBqe5","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-24T06:04:13Z","updated_at":"2022-04-24T06:04:13Z","author_association":"CONTRIBUTOR","body":"> 或者直接把业务代码写到 .so 里面，然后进程根据信号重新 dlopen 这些 .so\r\n\r\n不建议这么搞，这样可能会有很多坑，dlopen只是重新加载so中的符号 ，但是对于so中的代码所申请的资源（如内存、fd、线程）是不保证释放的，需要业务代码非常谨慎地处理。而且为了保证升级过程请求平滑处理，会有一段时间新老so并存，这可能会产生符号冲突之类的问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107732409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107781166","html_url":"https://github.com/apache/brpc/issues/1749#issuecomment-1107781166","issue_url":"https://api.github.com/repos/apache/brpc/issues/1749","id":1107781166,"node_id":"IC_kwDOBhmkcs5CB2Yu","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-24T07:38:31Z","updated_at":"2022-04-24T07:38:31Z","author_association":"CONTRIBUTOR","body":"是的，类似这样的功能，我现在改了一下 int butex_wake_all(void* arg, bool nodelay)，加个了参数，如果nodelay = false就统一走ready_to_run_general，不走下边的TaskGroup::exchange。\r\n但是这个改动不一定优雅，可能需要你们的综合设计。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107781166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107791909","html_url":"https://github.com/apache/brpc/issues/1747#issuecomment-1107791909","issue_url":"https://api.github.com/repos/apache/brpc/issues/1747","id":1107791909,"node_id":"IC_kwDOBhmkcs5CB5Al","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-24T08:40:16Z","updated_at":"2022-04-24T08:40:16Z","author_association":"CONTRIBUTOR","body":"这里是为了让最大并发的变化更平滑\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107791909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107797274","html_url":"https://github.com/apache/brpc/issues/1749#issuecomment-1107797274","issue_url":"https://api.github.com/repos/apache/brpc/issues/1749","id":1107797274,"node_id":"IC_kwDOBhmkcs5CB6Ua","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-24T09:04:58Z","updated_at":"2022-04-24T09:04:58Z","author_association":"CONTRIBUTOR","body":"可以提个PR看看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107797274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107898075","html_url":"https://github.com/apache/brpc/issues/1747#issuecomment-1107898075","issue_url":"https://api.github.com/repos/apache/brpc/issues/1747","id":1107898075,"node_id":"IC_kwDOBhmkcs5CCS7b","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-24T18:59:33Z","updated_at":"2022-04-24T18:59:33Z","author_association":"MEMBER","body":"@TousakaRin 我们可以把这点补充到文档里么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107898075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107898128","html_url":"https://github.com/apache/brpc/issues/1740#issuecomment-1107898128","issue_url":"https://api.github.com/repos/apache/brpc/issues/1740","id":1107898128,"node_id":"IC_kwDOBhmkcs5CCS8Q","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-24T18:59:52Z","updated_at":"2022-04-24T18:59:52Z","author_association":"MEMBER","body":"目前没有计划","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1107898128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1109482234","html_url":"https://github.com/apache/brpc/issues/1747#issuecomment-1109482234","issue_url":"https://api.github.com/repos/apache/brpc/issues/1747","id":1109482234,"node_id":"IC_kwDOBhmkcs5CIVr6","user":{"login":"blueszhangsh","id":1769775,"node_id":"MDQ6VXNlcjE3Njk3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/1769775?v=4","gravatar_id":"","url":"https://api.github.com/users/blueszhangsh","html_url":"https://github.com/blueszhangsh","followers_url":"https://api.github.com/users/blueszhangsh/followers","following_url":"https://api.github.com/users/blueszhangsh/following{/other_user}","gists_url":"https://api.github.com/users/blueszhangsh/gists{/gist_id}","starred_url":"https://api.github.com/users/blueszhangsh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blueszhangsh/subscriptions","organizations_url":"https://api.github.com/users/blueszhangsh/orgs","repos_url":"https://api.github.com/users/blueszhangsh/repos","events_url":"https://api.github.com/users/blueszhangsh/events{/privacy}","received_events_url":"https://api.github.com/users/blueszhangsh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T08:05:21Z","updated_at":"2022-04-26T08:05:21Z","author_association":"NONE","body":"@TousakaRin @zyearn 谢谢各位。麻烦补充到文档里吧。便于大家的理解","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1109482234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1110401166","html_url":"https://github.com/apache/brpc/pull/1751#issuecomment-1110401166","issue_url":"https://api.github.com/repos/apache/brpc/issues/1751","id":1110401166,"node_id":"IC_kwDOBhmkcs5CL2CO","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T00:54:37Z","updated_at":"2022-04-27T00:54:37Z","author_association":"CONTRIBUTOR","body":"如果在TaskGroup::exchange的参数变成 TaskGroup::exchange(TaskGroup** pg, bthread_t next_tid, bool nosched, bool nosignal) 把nosched的逻辑放到exchange里面，整个代码逻辑能更简单些。但是exchange的本意就是要切换协程，不知道这样是否合理。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1110401166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1110456000","html_url":"https://github.com/apache/brpc/pull/1751#issuecomment-1110456000","issue_url":"https://api.github.com/repos/apache/brpc/issues/1751","id":1110456000,"node_id":"IC_kwDOBhmkcs5CMDbA","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T02:15:45Z","updated_at":"2022-04-27T02:15:45Z","author_association":"CONTRIBUTOR","body":"> 如果在TaskGroup::exchange的参数变成 TaskGroup::exchange(TaskGroup** pg, bthread_t next_tid, bool nosched, bool nosignal) 把nosched的逻辑放到exchange里面，整个代码逻辑能更简单些。但是exchange的本意就是要切换协程，不知道这样是否合理。\r\n\r\nexchange本意是切换协程，加上nosched参数不太合理。但是nosignal参数是有意义的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1110456000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1111729095","html_url":"https://github.com/apache/brpc/issues/1594#issuecomment-1111729095","issue_url":"https://api.github.com/repos/apache/brpc/issues/1594","id":1111729095,"node_id":"IC_kwDOBhmkcs5CQ6PH","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T04:22:44Z","updated_at":"2022-04-28T04:24:29Z","author_association":"CONTRIBUTOR","body":"related issue: #1634 #1726","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1111729095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1113960612","html_url":"https://github.com/apache/brpc/issues/1693#issuecomment-1113960612","issue_url":"https://api.github.com/repos/apache/brpc/issues/1693","id":1113960612,"node_id":"IC_kwDOBhmkcs5CZbCk","user":{"login":"zouyonghao","id":7647081,"node_id":"MDQ6VXNlcjc2NDcwODE=","avatar_url":"https://avatars.githubusercontent.com/u/7647081?v=4","gravatar_id":"","url":"https://api.github.com/users/zouyonghao","html_url":"https://github.com/zouyonghao","followers_url":"https://api.github.com/users/zouyonghao/followers","following_url":"https://api.github.com/users/zouyonghao/following{/other_user}","gists_url":"https://api.github.com/users/zouyonghao/gists{/gist_id}","starred_url":"https://api.github.com/users/zouyonghao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zouyonghao/subscriptions","organizations_url":"https://api.github.com/users/zouyonghao/orgs","repos_url":"https://api.github.com/users/zouyonghao/repos","events_url":"https://api.github.com/users/zouyonghao/events{/privacy}","received_events_url":"https://api.github.com/users/zouyonghao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-30T09:57:11Z","updated_at":"2022-04-30T09:57:11Z","author_association":"NONE","body":"> 有一个trick的方法，可以把`-D__const__=` 改成 `-D__const__=__unused__` 找了半天似乎就这个unused的attribute影响最小： <img alt=\"60f18635e94211fdb3f3c1ef3e1a7b43\" width=\"1132\" src=\"https://user-images.githubusercontent.com/3894631/162140725-d0cea1d6-3e71-4f75-8423-da50195c6e76.png\">\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1113960612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1114021253","html_url":"https://github.com/apache/brpc/pull/1754#issuecomment-1114021253","issue_url":"https://api.github.com/repos/apache/brpc/issues/1754","id":1114021253,"node_id":"IC_kwDOBhmkcs5CZp2F","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-30T17:07:54Z","updated_at":"2022-04-30T17:08:28Z","author_association":"MEMBER","body":"感谢发现问题。不过空白符的修改不要提交了，这会让这个修复PR显得没那么干净，没办法快速聚焦到问题代码。\r\n真正需要修改的只有两行代码而已。\r\n请修改一下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1114021253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1114106449","html_url":"https://github.com/apache/brpc/pull/1754#issuecomment-1114106449","issue_url":"https://api.github.com/repos/apache/brpc/issues/1754","id":1114106449,"node_id":"IC_kwDOBhmkcs5CZ-pR","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-01T02:20:36Z","updated_at":"2022-05-01T02:20:36Z","author_association":"MEMBER","body":"@renzhong ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1114106449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1114121294","html_url":"https://github.com/apache/brpc/pull/1754#issuecomment-1114121294","issue_url":"https://api.github.com/repos/apache/brpc/issues/1754","id":1114121294,"node_id":"IC_kwDOBhmkcs5CaCRO","user":{"login":"renzhong","id":1164327,"node_id":"MDQ6VXNlcjExNjQzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1164327?v=4","gravatar_id":"","url":"https://api.github.com/users/renzhong","html_url":"https://github.com/renzhong","followers_url":"https://api.github.com/users/renzhong/followers","following_url":"https://api.github.com/users/renzhong/following{/other_user}","gists_url":"https://api.github.com/users/renzhong/gists{/gist_id}","starred_url":"https://api.github.com/users/renzhong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renzhong/subscriptions","organizations_url":"https://api.github.com/users/renzhong/orgs","repos_url":"https://api.github.com/users/renzhong/repos","events_url":"https://api.github.com/users/renzhong/events{/privacy}","received_events_url":"https://api.github.com/users/renzhong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-01T03:55:09Z","updated_at":"2022-05-01T03:55:09Z","author_association":"CONTRIBUTOR","body":"已修改","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1114121294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1114211126","html_url":"https://github.com/apache/brpc/pull/1755#issuecomment-1114211126","issue_url":"https://api.github.com/repos/apache/brpc/issues/1755","id":1114211126,"node_id":"IC_kwDOBhmkcs5CaYM2","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-01T11:36:26Z","updated_at":"2022-05-01T11:36:26Z","author_association":"CONTRIBUTOR","body":"文档要不直接提交到 apache/incubator-brpc-website","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1114211126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1114715351","html_url":"https://github.com/apache/brpc/issues/1241#issuecomment-1114715351","issue_url":"https://api.github.com/repos/apache/brpc/issues/1241","id":1114715351,"node_id":"IC_kwDOBhmkcs5CcTTX","user":{"login":"uuuuu-diwu","id":17615704,"node_id":"MDQ6VXNlcjE3NjE1NzA0","avatar_url":"https://avatars.githubusercontent.com/u/17615704?v=4","gravatar_id":"","url":"https://api.github.com/users/uuuuu-diwu","html_url":"https://github.com/uuuuu-diwu","followers_url":"https://api.github.com/users/uuuuu-diwu/followers","following_url":"https://api.github.com/users/uuuuu-diwu/following{/other_user}","gists_url":"https://api.github.com/users/uuuuu-diwu/gists{/gist_id}","starred_url":"https://api.github.com/users/uuuuu-diwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uuuuu-diwu/subscriptions","organizations_url":"https://api.github.com/users/uuuuu-diwu/orgs","repos_url":"https://api.github.com/users/uuuuu-diwu/repos","events_url":"https://api.github.com/users/uuuuu-diwu/events{/privacy}","received_events_url":"https://api.github.com/users/uuuuu-diwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-02T10:44:13Z","updated_at":"2022-05-02T10:44:13Z","author_association":"NONE","body":"@gydong Stockholm-robber 求拉","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1114715351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1118371112","html_url":"https://github.com/apache/brpc/issues/1738#issuecomment-1118371112","issue_url":"https://api.github.com/repos/apache/brpc/issues/1738","id":1118371112,"node_id":"IC_kwDOBhmkcs5CqP0o","user":{"login":"0x007004","id":13299372,"node_id":"MDQ6VXNlcjEzMjk5Mzcy","avatar_url":"https://avatars.githubusercontent.com/u/13299372?v=4","gravatar_id":"","url":"https://api.github.com/users/0x007004","html_url":"https://github.com/0x007004","followers_url":"https://api.github.com/users/0x007004/followers","following_url":"https://api.github.com/users/0x007004/following{/other_user}","gists_url":"https://api.github.com/users/0x007004/gists{/gist_id}","starred_url":"https://api.github.com/users/0x007004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0x007004/subscriptions","organizations_url":"https://api.github.com/users/0x007004/orgs","repos_url":"https://api.github.com/users/0x007004/repos","events_url":"https://api.github.com/users/0x007004/events{/privacy}","received_events_url":"https://api.github.com/users/0x007004/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-05T09:52:06Z","updated_at":"2022-05-05T09:52:06Z","author_association":"NONE","body":"close","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1118371112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120096590","html_url":"https://github.com/apache/brpc/issues/1594#issuecomment-1120096590","issue_url":"https://api.github.com/repos/apache/brpc/issues/1594","id":1120096590,"node_id":"IC_kwDOBhmkcs5Cw1FO","user":{"login":"DavidLiuXh","id":5432050,"node_id":"MDQ6VXNlcjU0MzIwNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5432050?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidLiuXh","html_url":"https://github.com/DavidLiuXh","followers_url":"https://api.github.com/users/DavidLiuXh/followers","following_url":"https://api.github.com/users/DavidLiuXh/following{/other_user}","gists_url":"https://api.github.com/users/DavidLiuXh/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidLiuXh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidLiuXh/subscriptions","organizations_url":"https://api.github.com/users/DavidLiuXh/orgs","repos_url":"https://api.github.com/users/DavidLiuXh/repos","events_url":"https://api.github.com/users/DavidLiuXh/events{/privacy}","received_events_url":"https://api.github.com/users/DavidLiuXh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-07T01:01:42Z","updated_at":"2022-05-07T01:01:42Z","author_association":"NONE","body":"通常是有brpc client在进程退出时没有主动释放，释放一下就可以了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120096590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120185588","html_url":"https://github.com/apache/brpc/issues/1758#issuecomment-1120185588","issue_url":"https://api.github.com/repos/apache/brpc/issues/1758","id":1120185588,"node_id":"IC_kwDOBhmkcs5CxKz0","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-07T10:47:10Z","updated_at":"2022-05-07T10:47:10Z","author_association":"CONTRIBUTOR","body":"The execution order is first `_window_size * _max_error_percent`\r\nthen  `/ 100`","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120185588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120192555","html_url":"https://github.com/apache/brpc/issues/1595#issuecomment-1120192555","issue_url":"https://api.github.com/repos/apache/brpc/issues/1595","id":1120192555,"node_id":"IC_kwDOBhmkcs5CxMgr","user":{"login":"xiweiw16","id":3904376,"node_id":"MDQ6VXNlcjM5MDQzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3904376?v=4","gravatar_id":"","url":"https://api.github.com/users/xiweiw16","html_url":"https://github.com/xiweiw16","followers_url":"https://api.github.com/users/xiweiw16/followers","following_url":"https://api.github.com/users/xiweiw16/following{/other_user}","gists_url":"https://api.github.com/users/xiweiw16/gists{/gist_id}","starred_url":"https://api.github.com/users/xiweiw16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiweiw16/subscriptions","organizations_url":"https://api.github.com/users/xiweiw16/orgs","repos_url":"https://api.github.com/users/xiweiw16/repos","events_url":"https://api.github.com/users/xiweiw16/events{/privacy}","received_events_url":"https://api.github.com/users/xiweiw16/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-07T11:30:25Z","updated_at":"2022-05-07T11:30:25Z","author_association":"NONE","body":"> 之前我们做过实验，在框架层面支持 arena 所带来的性能提升很微弱，所以没有推进支持\r\n\r\n在需要填充大量数据到Response中的情况下还是很有必要的，特别是业务代码都基于Arena的情况下，最后的数据Copy是明显的瓶颈。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120192555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120194220","html_url":"https://github.com/apache/brpc/issues/1758#issuecomment-1120194220","issue_url":"https://api.github.com/repos/apache/brpc/issues/1758","id":1120194220,"node_id":"IC_kwDOBhmkcs5CxM6s","user":{"login":"sunhs","id":1916614,"node_id":"MDQ6VXNlcjE5MTY2MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1916614?v=4","gravatar_id":"","url":"https://api.github.com/users/sunhs","html_url":"https://github.com/sunhs","followers_url":"https://api.github.com/users/sunhs/followers","following_url":"https://api.github.com/users/sunhs/following{/other_user}","gists_url":"https://api.github.com/users/sunhs/gists{/gist_id}","starred_url":"https://api.github.com/users/sunhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunhs/subscriptions","organizations_url":"https://api.github.com/users/sunhs/orgs","repos_url":"https://api.github.com/users/sunhs/repos","events_url":"https://api.github.com/users/sunhs/events{/privacy}","received_events_url":"https://api.github.com/users/sunhs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-07T11:39:57Z","updated_at":"2022-05-07T11:39:57Z","author_association":"NONE","body":"@wwbmmm I got it. Thanks","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120194220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120196022","html_url":"https://github.com/apache/brpc/pull/1433#issuecomment-1120196022","issue_url":"https://api.github.com/repos/apache/brpc/issues/1433","id":1120196022,"node_id":"IC_kwDOBhmkcs5CxNW2","user":{"login":"xiweiw16","id":3904376,"node_id":"MDQ6VXNlcjM5MDQzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3904376?v=4","gravatar_id":"","url":"https://api.github.com/users/xiweiw16","html_url":"https://github.com/xiweiw16","followers_url":"https://api.github.com/users/xiweiw16/followers","following_url":"https://api.github.com/users/xiweiw16/following{/other_user}","gists_url":"https://api.github.com/users/xiweiw16/gists{/gist_id}","starred_url":"https://api.github.com/users/xiweiw16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiweiw16/subscriptions","organizations_url":"https://api.github.com/users/xiweiw16/orgs","repos_url":"https://api.github.com/users/xiweiw16/repos","events_url":"https://api.github.com/users/xiweiw16/events{/privacy}","received_events_url":"https://api.github.com/users/xiweiw16/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-07T11:50:25Z","updated_at":"2022-05-07T11:50:25Z","author_association":"NONE","body":"我们有个场景也需要这个功能，这个PR还会往下推动吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120196022/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120200236","html_url":"https://github.com/apache/brpc/issues/1595#issuecomment-1120200236","issue_url":"https://api.github.com/repos/apache/brpc/issues/1595","id":1120200236,"node_id":"IC_kwDOBhmkcs5CxOYs","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-07T12:19:06Z","updated_at":"2022-05-07T12:19:06Z","author_association":"CONTRIBUTOR","body":"> > 之前我们做过实验，在框架层面支持 arena 所带来的性能提升很微弱，所以没有推进支持\r\n> \r\n> 在需要填充大量数据到Response中的情况下还是很有必要的，特别是业务代码都基于Arena的情况下，最后的数据Copy是明显的瓶颈。\r\n\r\n你的需求是框架创建的request和response对象都在Arena中分配吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120200236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120567578","html_url":"https://github.com/apache/brpc/issues/1756#issuecomment-1120567578","issue_url":"https://api.github.com/repos/apache/brpc/issues/1756","id":1120567578,"node_id":"IC_kwDOBhmkcs5CyoEa","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-09T02:22:54Z","updated_at":"2022-05-09T02:22:54Z","author_association":"CONTRIBUTOR","body":"某些情况是什么情况，网络有丢包情况吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120567578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120629202","html_url":"https://github.com/apache/brpc/issues/1756#issuecomment-1120629202","issue_url":"https://api.github.com/repos/apache/brpc/issues/1756","id":1120629202,"node_id":"IC_kwDOBhmkcs5Cy3HS","user":{"login":"vinllen","id":6987398,"node_id":"MDQ6VXNlcjY5ODczOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6987398?v=4","gravatar_id":"","url":"https://api.github.com/users/vinllen","html_url":"https://github.com/vinllen","followers_url":"https://api.github.com/users/vinllen/followers","following_url":"https://api.github.com/users/vinllen/following{/other_user}","gists_url":"https://api.github.com/users/vinllen/gists{/gist_id}","starred_url":"https://api.github.com/users/vinllen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinllen/subscriptions","organizations_url":"https://api.github.com/users/vinllen/orgs","repos_url":"https://api.github.com/users/vinllen/repos","events_url":"https://api.github.com/users/vinllen/events{/privacy}","received_events_url":"https://api.github.com/users/vinllen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-09T04:27:31Z","updated_at":"2022-05-09T04:29:07Z","author_association":"NONE","body":"如果brpc本身没有问题的话，看起来只有可能是最后回复的RST包丢包了。所以想请问下，从设计来说，这种场景，brpc理论上都应该是EOF吧？\r\n我们有3个客户端，位于3台主机上，服务端重启后（服务端也有多台），3个客户端报错都有Reached timeout，这就比较奇怪，理论上不应该同时都丢包了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120629202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120843869","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-1120843869","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":1120843869,"node_id":"IC_kwDOBhmkcs5Czrhd","user":{"login":"rhli","id":2755560,"node_id":"MDQ6VXNlcjI3NTU1NjA=","avatar_url":"https://avatars.githubusercontent.com/u/2755560?v=4","gravatar_id":"","url":"https://api.github.com/users/rhli","html_url":"https://github.com/rhli","followers_url":"https://api.github.com/users/rhli/followers","following_url":"https://api.github.com/users/rhli/following{/other_user}","gists_url":"https://api.github.com/users/rhli/gists{/gist_id}","starred_url":"https://api.github.com/users/rhli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rhli/subscriptions","organizations_url":"https://api.github.com/users/rhli/orgs","repos_url":"https://api.github.com/users/rhli/repos","events_url":"https://api.github.com/users/rhli/events{/privacy}","received_events_url":"https://api.github.com/users/rhli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-09T09:08:09Z","updated_at":"2022-05-09T09:08:09Z","author_association":"NONE","body":"求问，这个 issue 还会修嘛？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1120843869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1121028376","html_url":"https://github.com/apache/brpc/issues/1756#issuecomment-1121028376","issue_url":"https://api.github.com/repos/apache/brpc/issues/1756","id":1121028376,"node_id":"IC_kwDOBhmkcs5C0YkY","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-09T12:21:19Z","updated_at":"2022-05-09T12:21:19Z","author_association":"CONTRIBUTOR","body":"理论上应该是EOF的。可以抓包看下，客户端是否及时收到了RST包","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1121028376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1123103992","html_url":"https://github.com/apache/brpc/issues/1759#issuecomment-1123103992","issue_url":"https://api.github.com/repos/apache/brpc/issues/1759","id":1123103992,"node_id":"IC_kwDOBhmkcs5C8TT4","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-11T02:14:39Z","updated_at":"2022-05-11T02:14:39Z","author_association":"CONTRIBUTOR","body":"没有安装tcmalloc吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1123103992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1123108095","html_url":"https://github.com/apache/brpc/issues/1401#issuecomment-1123108095","issue_url":"https://api.github.com/repos/apache/brpc/issues/1401","id":1123108095,"node_id":"IC_kwDOBhmkcs5C8UT_","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-11T02:21:36Z","updated_at":"2022-05-11T02:21:36Z","author_association":"CONTRIBUTOR","body":"brpc has no plan to support multi rdma device.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1123108095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]