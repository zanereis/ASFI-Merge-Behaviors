[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/406930600","html_url":"https://github.com/apache/brpc/issues/411#issuecomment-406930600","issue_url":"https://api.github.com/repos/apache/brpc/issues/411","id":406930600,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjkzMDYwMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-23T03:41:19Z","updated_at":"2018-07-23T03:41:19Z","author_association":"CONTRIBUTOR","body":"DelegateSimpleThreadPool那些是一些开源时的legacy code，只在UT里用到，建议不使用。server中要并发直接启动bthread就行了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/406930600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/406933344","html_url":"https://github.com/apache/brpc/issues/412#issuecomment-406933344","issue_url":"https://api.github.com/repos/apache/brpc/issues/412","id":406933344,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjkzMzM0NA==","user":{"login":"gtarcoder","id":11898942,"node_id":"MDQ6VXNlcjExODk4OTQy","avatar_url":"https://avatars.githubusercontent.com/u/11898942?v=4","gravatar_id":"","url":"https://api.github.com/users/gtarcoder","html_url":"https://github.com/gtarcoder","followers_url":"https://api.github.com/users/gtarcoder/followers","following_url":"https://api.github.com/users/gtarcoder/following{/other_user}","gists_url":"https://api.github.com/users/gtarcoder/gists{/gist_id}","starred_url":"https://api.github.com/users/gtarcoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtarcoder/subscriptions","organizations_url":"https://api.github.com/users/gtarcoder/orgs","repos_url":"https://api.github.com/users/gtarcoder/repos","events_url":"https://api.github.com/users/gtarcoder/events{/privacy}","received_events_url":"https://api.github.com/users/gtarcoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-23T04:07:19Z","updated_at":"2018-07-23T04:08:17Z","author_association":"NONE","body":"@jamesge  我遇到的问题是，进程还在，但是curl 不通， brpc server的web 页面也打不开（所以没法通过 server_debugging中的各种手段来看）。从机器本身看，CPU，内存使用情况没有异常。我猜测可能是程序自身死锁，但是，程序自身死锁会导致 brpc server web 页面打不开么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/406933344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/406937242","html_url":"https://github.com/apache/brpc/issues/334#issuecomment-406937242","issue_url":"https://api.github.com/repos/apache/brpc/issues/334","id":406937242,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjkzNzI0Mg==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-07-23T04:40:53Z","updated_at":"2018-07-23T04:40:53Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/406937242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/406950357","html_url":"https://github.com/apache/brpc/issues/412#issuecomment-406950357","issue_url":"https://api.github.com/repos/apache/brpc/issues/412","id":406950357,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjk1MDM1Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-23T06:13:36Z","updated_at":"2018-07-23T06:13:36Z","author_association":"CONTRIBUTOR","body":"看pstack或gdb attach上去","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/406950357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/406983644","html_url":"https://github.com/apache/brpc/issues/340#issuecomment-406983644","issue_url":"https://api.github.com/repos/apache/brpc/issues/340","id":406983644,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjk4MzY0NA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-07-23T08:40:54Z","updated_at":"2018-07-23T08:40:54Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/406983644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407000022","html_url":"https://github.com/apache/brpc/pull/319#issuecomment-407000022","issue_url":"https://api.github.com/repos/apache/brpc/issues/319","id":407000022,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzAwMDAyMg==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-07-23T09:40:52Z","updated_at":"2018-07-23T09:40:52Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407000022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407268625","html_url":"https://github.com/apache/brpc/issues/399#issuecomment-407268625","issue_url":"https://api.github.com/repos/apache/brpc/issues/399","id":407268625,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzI2ODYyNQ==","user":{"login":"szgdzz","id":37062119,"node_id":"MDQ6VXNlcjM3MDYyMTE5","avatar_url":"https://avatars.githubusercontent.com/u/37062119?v=4","gravatar_id":"","url":"https://api.github.com/users/szgdzz","html_url":"https://github.com/szgdzz","followers_url":"https://api.github.com/users/szgdzz/followers","following_url":"https://api.github.com/users/szgdzz/following{/other_user}","gists_url":"https://api.github.com/users/szgdzz/gists{/gist_id}","starred_url":"https://api.github.com/users/szgdzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szgdzz/subscriptions","organizations_url":"https://api.github.com/users/szgdzz/orgs","repos_url":"https://api.github.com/users/szgdzz/repos","events_url":"https://api.github.com/users/szgdzz/events{/privacy}","received_events_url":"https://api.github.com/users/szgdzz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-24T03:26:10Z","updated_at":"2018-07-24T03:26:10Z","author_association":"NONE","body":"I found the problem: Another thread calls `DelegateSimpleThreadPool::AddWork()` between `JoinAll()` and destruction.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407268625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407270087","html_url":"https://github.com/apache/brpc/issues/399#issuecomment-407270087","issue_url":"https://api.github.com/repos/apache/brpc/issues/399","id":407270087,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzI3MDA4Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-24T03:35:36Z","updated_at":"2018-07-24T03:35:36Z","author_association":"CONTRIBUTOR","body":"Consider using bthread to launch jobs in parallel instead of the pool which is only kept for unittests.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407270087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407287680","html_url":"https://github.com/apache/brpc/issues/343#issuecomment-407287680","issue_url":"https://api.github.com/repos/apache/brpc/issues/343","id":407287680,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzI4NzY4MA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-07-24T05:42:18Z","updated_at":"2018-07-24T05:42:18Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407287680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407607385","html_url":"https://github.com/apache/brpc/issues/414#issuecomment-407607385","issue_url":"https://api.github.com/repos/apache/brpc/issues/414","id":407607385,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzYwNzM4NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T01:53:58Z","updated_at":"2018-07-25T01:53:58Z","author_association":"CONTRIBUTOR","body":"我的机器上同样的代码结果是\r\n```\r\nbutil timer cost: 5000ms\r\ngettimeofday cost: 5000.54ms\r\n```\r\ncpuinfo也包含了constant_tsc(the TSC runs at constant frequency irrespective of P/T- states)和nonstop_tsc(TSC does not stop in deep C-states)，说明tsc是可用作wall-time的。\r\n2620也是百度比较常见的cpu型号，之前似乎也不记得有相关的问题，要么和os有关系？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407607385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407616755","html_url":"https://github.com/apache/brpc/issues/412#issuecomment-407616755","issue_url":"https://api.github.com/repos/apache/brpc/issues/412","id":407616755,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzYxNjc1NQ==","user":{"login":"gtarcoder","id":11898942,"node_id":"MDQ6VXNlcjExODk4OTQy","avatar_url":"https://avatars.githubusercontent.com/u/11898942?v=4","gravatar_id":"","url":"https://api.github.com/users/gtarcoder","html_url":"https://github.com/gtarcoder","followers_url":"https://api.github.com/users/gtarcoder/followers","following_url":"https://api.github.com/users/gtarcoder/following{/other_user}","gists_url":"https://api.github.com/users/gtarcoder/gists{/gist_id}","starred_url":"https://api.github.com/users/gtarcoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtarcoder/subscriptions","organizations_url":"https://api.github.com/users/gtarcoder/orgs","repos_url":"https://api.github.com/users/gtarcoder/repos","events_url":"https://api.github.com/users/gtarcoder/events{/privacy}","received_events_url":"https://api.github.com/users/gtarcoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T02:52:07Z","updated_at":"2018-07-25T02:52:27Z","author_association":"NONE","body":"@jamesge  gdb attach 上去了，发现程序死锁。通过高QPS 压力测试，发现情况可以复现：\r\n程序相关线程情况：\r\n（1）后台线程 (pthread)\r\ntimer thread 1， 读取mysql，写入 DoublyBufferedData-1\r\ntimer thread 2,  读取mysql，写入 DoublyBufferedData-2\r\ntimer thread 3,  读取mysql，写入 DoublyBufferedData-3\r\ntimer thread 4,  读取mysql，写入 DoublyBufferedData-4\r\ntimer thread 5,  读取mysql，写入 DoublyBufferedData-5\r\ntimer thread 6,  读取redis，写入 DoublyBufferedData-6\r\ntimer thread 定时5秒执行一次回调函数\r\n\r\n（2）任务处理线程(bthread) (高QPS的场景下，会开很多):\r\n读取 DoublyBufferedData-1\r\n读取 DoublyBufferedData-6\r\n处理请求\r\n\r\n测试场景：\r\nmax_concurrency 设置为200； 在 QPS > 500 的压力下测试，发生死锁。死锁发生时候的栈：\r\n（1）timer thread 1--6, 停在 bthread/timer_thread.cpp:431 futex_wait_private(&_nsignals, expected_signals, timeout)\r\n\r\n（2）任务处理线程，停在 butil/containers/doubly_bufferd_data.h:222 BeginRead() \r\n\r\n我发现不了为啥会死锁，是因为QPS x latency 远远大于 max_concurrency ？ 如果是这样，那BRPC 框架不应该这样处理高QPS场景。\r\n\r\n另外，死锁的时候，curl 不通，我感觉这也很不合理。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407616755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407668149","html_url":"https://github.com/apache/brpc/issues/414#issuecomment-407668149","issue_url":"https://api.github.com/repos/apache/brpc/issues/414","id":407668149,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzY2ODE0OQ==","user":{"login":"machaelliu","id":8088007,"node_id":"MDQ6VXNlcjgwODgwMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8088007?v=4","gravatar_id":"","url":"https://api.github.com/users/machaelliu","html_url":"https://github.com/machaelliu","followers_url":"https://api.github.com/users/machaelliu/followers","following_url":"https://api.github.com/users/machaelliu/following{/other_user}","gists_url":"https://api.github.com/users/machaelliu/gists{/gist_id}","starred_url":"https://api.github.com/users/machaelliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/machaelliu/subscriptions","organizations_url":"https://api.github.com/users/machaelliu/orgs","repos_url":"https://api.github.com/users/machaelliu/repos","events_url":"https://api.github.com/users/machaelliu/events{/privacy}","received_events_url":"https://api.github.com/users/machaelliu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T07:57:42Z","updated_at":"2018-07-25T07:57:42Z","author_association":"NONE","body":"我把能拿到的所有环境都试过了，腾讯云上的 ubuntu、阿里云上的 centos7.0, 7.4 都没有问题，只有部分实体机上的 centos7.1  和 centos 7.3 有失真问题。\r\n有两台实体机的 cpu 完全一样，一个装的是 centos 6 没有问题，有相同cpu 的另外一台安装了 centos7.1 的就失真了，我也怀疑是操作系统本身的问题。\r\n\r\n有操作系统参数会影响 rdtsc 指令的精确性吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407668149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407696424","html_url":"https://github.com/apache/brpc/issues/414#issuecomment-407696424","issue_url":"https://api.github.com/repos/apache/brpc/issues/414","id":407696424,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzY5NjQyNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T09:39:57Z","updated_at":"2018-07-25T09:39:57Z","author_association":"CONTRIBUTOR","body":"也有可能是cpuinfo不准确","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407696424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407703532","html_url":"https://github.com/apache/brpc/issues/415#issuecomment-407703532","issue_url":"https://api.github.com/repos/apache/brpc/issues/415","id":407703532,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzcwMzUzMg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T10:05:33Z","updated_at":"2018-07-25T10:05:33Z","author_association":"CONTRIBUTOR","body":"目前没有计划，如果你有兴趣的话可以集成进来。在rpc的场景下，lz4只需要一个lz4.c和lz4.h文件就行了，可以放src/butil/third_party/lz4下。集成是继承CompressHandler，尽量避免内存拷贝。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407703532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407704518","html_url":"https://github.com/apache/brpc/issues/412#issuecomment-407704518","issue_url":"https://api.github.com/repos/apache/brpc/issues/412","id":407704518,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzcwNDUxOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T10:09:24Z","updated_at":"2018-07-25T10:09:24Z","author_association":"CONTRIBUTOR","body":"1. 为什么有这么多timer thread，是你自己的开的么？timer thread的callback一旦阻塞会阻塞整个timer thread，所以一般是要额外启动bthread去运行复杂逻辑的。\r\n2. 为什么要用DoublyBufferedData？直觉上用到mysql的场景对qps要求应该不高，不需要用到这个东西。\r\n3. concurrency等于qps * latency(单位秒），计算一下200是否合理。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407704518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407704668","html_url":"https://github.com/apache/brpc/issues/416#issuecomment-407704668","issue_url":"https://api.github.com/repos/apache/brpc/issues/416","id":407704668,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzcwNDY2OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T10:09:56Z","updated_at":"2018-07-25T10:09:56Z","author_association":"CONTRIBUTOR","body":"空闲的话一般是3us左右。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407704668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407710263","html_url":"https://github.com/apache/brpc/issues/412#issuecomment-407710263","issue_url":"https://api.github.com/repos/apache/brpc/issues/412","id":407710263,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzcxMDI2Mw==","user":{"login":"gtarcoder","id":11898942,"node_id":"MDQ6VXNlcjExODk4OTQy","avatar_url":"https://avatars.githubusercontent.com/u/11898942?v=4","gravatar_id":"","url":"https://api.github.com/users/gtarcoder","html_url":"https://github.com/gtarcoder","followers_url":"https://api.github.com/users/gtarcoder/followers","following_url":"https://api.github.com/users/gtarcoder/following{/other_user}","gists_url":"https://api.github.com/users/gtarcoder/gists{/gist_id}","starred_url":"https://api.github.com/users/gtarcoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtarcoder/subscriptions","organizations_url":"https://api.github.com/users/gtarcoder/orgs","repos_url":"https://api.github.com/users/gtarcoder/repos","events_url":"https://api.github.com/users/gtarcoder/events{/privacy}","received_events_url":"https://api.github.com/users/gtarcoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T10:32:12Z","updated_at":"2018-07-25T10:32:12Z","author_association":"NONE","body":"Hi 戈大，@jamesge   \r\n1. timer thread 是自己开的。 timer thread的callback 就是读取mysql，然后将数据写入 DoublyBufferedData, 逻辑并不复杂。\r\n\r\n2. 我们的场景，QPS 很高，在处理请求的时候，会用到mysql中的数据，所以采用 doublybuffereddata 读写分离，防止每次都从mysql读取。写线程（timer thread）定时读取 mysql，并写入 doublybuffereddata，读线程处理用户请求的时候，从doublybuffereddata中读取数据。\r\n\r\n3. qps * latency 有时候会超过 max_concurency.  那么，如果 qps * latency 超过了 max_concurrency, 理论上会出现什么情况呢？ 如果可以确定死锁是由于 qps * latency > concurrency 导致的，那我可以增加机器，但我现在没法确定是由于 qps * latency > concurrency 导致的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407710263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407715780","html_url":"https://github.com/apache/brpc/issues/412#issuecomment-407715780","issue_url":"https://api.github.com/repos/apache/brpc/issues/412","id":407715780,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzcxNTc4MA==","user":{"login":"yjhjstz","id":3832082,"node_id":"MDQ6VXNlcjM4MzIwODI=","avatar_url":"https://avatars.githubusercontent.com/u/3832082?v=4","gravatar_id":"","url":"https://api.github.com/users/yjhjstz","html_url":"https://github.com/yjhjstz","followers_url":"https://api.github.com/users/yjhjstz/followers","following_url":"https://api.github.com/users/yjhjstz/following{/other_user}","gists_url":"https://api.github.com/users/yjhjstz/gists{/gist_id}","starred_url":"https://api.github.com/users/yjhjstz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjhjstz/subscriptions","organizations_url":"https://api.github.com/users/yjhjstz/orgs","repos_url":"https://api.github.com/users/yjhjstz/repos","events_url":"https://api.github.com/users/yjhjstz/events{/privacy}","received_events_url":"https://api.github.com/users/yjhjstz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T10:56:56Z","updated_at":"2018-07-25T10:56:56Z","author_association":"MEMBER","body":"最好写个最小化可重现程序。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407715780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407752294","html_url":"https://github.com/apache/brpc/issues/417#issuecomment-407752294","issue_url":"https://api.github.com/repos/apache/brpc/issues/417","id":407752294,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzc1MjI5NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T13:22:33Z","updated_at":"2018-07-25T13:22:33Z","author_association":"CONTRIBUTOR","body":"qps也没有变化么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407752294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407755658","html_url":"https://github.com/apache/brpc/issues/417#issuecomment-407755658","issue_url":"https://api.github.com/repos/apache/brpc/issues/417","id":407755658,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzc1NTY1OA==","user":{"login":"scottzzq","id":1217132,"node_id":"MDQ6VXNlcjEyMTcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1217132?v=4","gravatar_id":"","url":"https://api.github.com/users/scottzzq","html_url":"https://github.com/scottzzq","followers_url":"https://api.github.com/users/scottzzq/followers","following_url":"https://api.github.com/users/scottzzq/following{/other_user}","gists_url":"https://api.github.com/users/scottzzq/gists{/gist_id}","starred_url":"https://api.github.com/users/scottzzq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottzzq/subscriptions","organizations_url":"https://api.github.com/users/scottzzq/orgs","repos_url":"https://api.github.com/users/scottzzq/repos","events_url":"https://api.github.com/users/scottzzq/events{/privacy}","received_events_url":"https://api.github.com/users/scottzzq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T13:34:04Z","updated_at":"2018-07-25T13:34:04Z","author_association":"NONE","body":"@jamesge  没有变化","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407755658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407758361","html_url":"https://github.com/apache/brpc/issues/417#issuecomment-407758361","issue_url":"https://api.github.com/repos/apache/brpc/issues/417","id":407758361,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzc1ODM2MQ==","user":{"login":"scottzzq","id":1217132,"node_id":"MDQ6VXNlcjEyMTcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1217132?v=4","gravatar_id":"","url":"https://api.github.com/users/scottzzq","html_url":"https://github.com/scottzzq","followers_url":"https://api.github.com/users/scottzzq/followers","following_url":"https://api.github.com/users/scottzzq/following{/other_user}","gists_url":"https://api.github.com/users/scottzzq/gists{/gist_id}","starred_url":"https://api.github.com/users/scottzzq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottzzq/subscriptions","organizations_url":"https://api.github.com/users/scottzzq/orgs","repos_url":"https://api.github.com/users/scottzzq/repos","events_url":"https://api.github.com/users/scottzzq/events{/privacy}","received_events_url":"https://api.github.com/users/scottzzq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T13:42:37Z","updated_at":"2018-07-25T13:42:37Z","author_association":"NONE","body":"今天一直以为是压缩算法导致的，结果后来发现用同样的压缩算法，带宽还是不一样，所以最终确定了和压缩算法没关系，和用brpc client有关系。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407758361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407763791","html_url":"https://github.com/apache/brpc/issues/417#issuecomment-407763791","issue_url":"https://api.github.com/repos/apache/brpc/issues/417","id":407763791,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzc2Mzc5MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T13:59:22Z","updated_at":"2018-07-25T13:59:22Z","author_association":"CONTRIBUTOR","body":"brpc用的也是sofa-pbrpc协议么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407763791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407771220","html_url":"https://github.com/apache/brpc/issues/417#issuecomment-407771220","issue_url":"https://api.github.com/repos/apache/brpc/issues/417","id":407771220,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzc3MTIyMA==","user":{"login":"scottzzq","id":1217132,"node_id":"MDQ6VXNlcjEyMTcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1217132?v=4","gravatar_id":"","url":"https://api.github.com/users/scottzzq","html_url":"https://github.com/scottzzq","followers_url":"https://api.github.com/users/scottzzq/followers","following_url":"https://api.github.com/users/scottzzq/following{/other_user}","gists_url":"https://api.github.com/users/scottzzq/gists{/gist_id}","starred_url":"https://api.github.com/users/scottzzq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottzzq/subscriptions","organizations_url":"https://api.github.com/users/scottzzq/orgs","repos_url":"https://api.github.com/users/scottzzq/repos","events_url":"https://api.github.com/users/scottzzq/events{/privacy}","received_events_url":"https://api.github.com/users/scottzzq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T14:20:20Z","updated_at":"2018-07-25T14:20:20Z","author_association":"NONE","body":"Server是sofa协议，这次是给client端升级，所以是用了brpc的client，但是协议还是sofa协议","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407771220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407774468","html_url":"https://github.com/apache/brpc/issues/417#issuecomment-407774468","issue_url":"https://api.github.com/repos/apache/brpc/issues/417","id":407774468,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzc3NDQ2OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-25T14:29:22Z","updated_at":"2018-07-25T14:29:22Z","author_association":"CONTRIBUTOR","body":"那你可能需要检查一下累加ByteSize的代码是不是有问题了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407774468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407962916","html_url":"https://github.com/apache/brpc/issues/418#issuecomment-407962916","issue_url":"https://api.github.com/repos/apache/brpc/issues/418","id":407962916,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzk2MjkxNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-26T03:14:59Z","updated_at":"2018-07-26T03:14:59Z","author_association":"CONTRIBUTOR","body":"就是append(std::move(iobuf))在C++03中的一种实现","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407962916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407964103","html_url":"https://github.com/apache/brpc/issues/417#issuecomment-407964103","issue_url":"https://api.github.com/repos/apache/brpc/issues/417","id":407964103,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzk2NDEwMw==","user":{"login":"scottzzq","id":1217132,"node_id":"MDQ6VXNlcjEyMTcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1217132?v=4","gravatar_id":"","url":"https://api.github.com/users/scottzzq","html_url":"https://github.com/scottzzq","followers_url":"https://api.github.com/users/scottzzq/followers","following_url":"https://api.github.com/users/scottzzq/following{/other_user}","gists_url":"https://api.github.com/users/scottzzq/gists{/gist_id}","starred_url":"https://api.github.com/users/scottzzq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottzzq/subscriptions","organizations_url":"https://api.github.com/users/scottzzq/orgs","repos_url":"https://api.github.com/users/scottzzq/repos","events_url":"https://api.github.com/users/scottzzq/events{/privacy}","received_events_url":"https://api.github.com/users/scottzzq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-26T03:23:09Z","updated_at":"2018-07-26T03:23:09Z","author_association":"NONE","body":"@jamesge  找到原因了，是brpc打包sofa的meta信息的时候，没有把client期望的response压缩字段写进去，导致server端返回结果不做压缩，稍后我会提一个PR。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407964103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407969434","html_url":"https://github.com/apache/brpc/issues/418#issuecomment-407969434","issue_url":"https://api.github.com/repos/apache/brpc/issues/418","id":407969434,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzk2OTQzNA==","user":{"login":"leonwu327","id":30514969,"node_id":"MDQ6VXNlcjMwNTE0OTY5","avatar_url":"https://avatars.githubusercontent.com/u/30514969?v=4","gravatar_id":"","url":"https://api.github.com/users/leonwu327","html_url":"https://github.com/leonwu327","followers_url":"https://api.github.com/users/leonwu327/followers","following_url":"https://api.github.com/users/leonwu327/following{/other_user}","gists_url":"https://api.github.com/users/leonwu327/gists{/gist_id}","starred_url":"https://api.github.com/users/leonwu327/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leonwu327/subscriptions","organizations_url":"https://api.github.com/users/leonwu327/orgs","repos_url":"https://api.github.com/users/leonwu327/repos","events_url":"https://api.github.com/users/leonwu327/events{/privacy}","received_events_url":"https://api.github.com/users/leonwu327/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-26T04:01:10Z","updated_at":"2018-07-26T04:01:10Z","author_association":"NONE","body":"在跨线程调用append(iobuf)时，会出现内存泄漏，但是调用append(iobuf.movable())时就不会泄露，这个可能是什么原因呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407969434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407989316","html_url":"https://github.com/apache/brpc/issues/418#issuecomment-407989316","issue_url":"https://api.github.com/repos/apache/brpc/issues/418","id":407989316,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzk4OTMxNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-26T06:20:30Z","updated_at":"2018-07-26T06:20:30Z","author_association":"CONTRIBUTOR","body":"跨线程什么意思，如果a.append(b)中a,b分别在被不同的线程操作，那么就是错的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/407989316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408008936","html_url":"https://github.com/apache/brpc/issues/419#issuecomment-408008936","issue_url":"https://api.github.com/repos/apache/brpc/issues/419","id":408008936,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODAwODkzNg==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-26T07:49:51Z","updated_at":"2018-07-26T07:49:51Z","author_association":"NONE","body":"补充一下，上面提到的prev==BTHREAD_MUTEX_LOCKED加执行whole->exchange(0, butil::memory_order_release);2步操作也是需要被另外一把锁或者spinlock来保护。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408008936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408009567","html_url":"https://github.com/apache/brpc/issues/419#issuecomment-408009567","issue_url":"https://api.github.com/repos/apache/brpc/issues/419","id":408009567,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODAwOTU2Nw==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-26T07:52:36Z","updated_at":"2018-07-26T07:52:53Z","author_association":"NONE","body":"上面有疑问的代码在https://github.com/brpc/brpc/blob/master/src/bthread/mutex.cpp\r\n的790~805行，完整函数代码如下：\r\n`int bthread_mutex_unlock(bthread_mutex_t* m) {\r\n    butil::atomic<unsigned>* whole = (butil::atomic<unsigned>*)m->butex;\r\n    bthread_contention_site_t saved_csite = {0, 0};\r\n    if (bthread::is_contention_site_valid(m->csite)) {\r\n        saved_csite = m->csite;\r\n        bthread::make_contention_site_invalid(&m->csite);\r\n    }\r\n    const unsigned prev = whole->exchange(0, butil::memory_order_release);\r\n    // CAUTION: the mutex may be destroyed, check comments before butex_create\r\n    if (prev == BTHREAD_MUTEX_LOCKED) {\r\n        return 0;\r\n    }\r\n    // Wakeup one waiter\r\n    if (!bthread::is_contention_site_valid(saved_csite)) {\r\n        bthread::butex_wake(whole);\r\n        return 0;\r\n    }\r\n    const int64_t unlock_start_ns = butil::cpuwide_time_ns();\r\n    bthread::butex_wake(whole);\r\n    const int64_t unlock_end_ns = butil::cpuwide_time_ns();\r\n    saved_csite.duration_ns += unlock_end_ns - unlock_start_ns;\r\n    bthread::submit_contention(saved_csite, unlock_end_ns);\r\n    return 0;\r\n}`\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408009567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408016117","html_url":"https://github.com/apache/brpc/issues/419#issuecomment-408016117","issue_url":"https://api.github.com/repos/apache/brpc/issues/419","id":408016117,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODAxNjExNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-26T08:17:48Z","updated_at":"2018-07-26T08:17:48Z","author_association":"CONTRIBUTOR","body":"没什么关系，如果有”其他bthread“和waiter同时抢锁，它们仍然会在lock处互斥。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408016117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408024153","html_url":"https://github.com/apache/brpc/issues/420#issuecomment-408024153","issue_url":"https://api.github.com/repos/apache/brpc/issues/420","id":408024153,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODAyNDE1Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-26T08:44:36Z","updated_at":"2018-07-26T08:44:36Z","author_association":"CONTRIBUTOR","body":"`brpc::NewCallback([](){ .... })`","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408024153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408028958","html_url":"https://github.com/apache/brpc/issues/419#issuecomment-408028958","issue_url":"https://api.github.com/repos/apache/brpc/issues/419","id":408028958,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODAyODk1OA==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-26T09:01:09Z","updated_at":"2018-07-26T09:01:09Z","author_association":"NONE","body":"看到了，原来mutex_lock_contended里面的\r\nwhile (whole->exchange(BTHREAD_MUTEX_CONTENDED) & BTHREAD_MUTEX_LOCKED) {\r\n        if (bthread::butex_wait(whole, BTHREAD_MUTEX_CONTENDED, NULL) < 0 &&\r\n            errno != EWOULDBLOCK && errno != EINTR/*note*/) {\r\n            // a mutex lock should ignore interrruptions in general since\r\n            // user code is unlikely to check the return value.\r\n            return errno;\r\n        }\r\n    }\r\n这里exchange是个while,之前没注意。看到有waiter,就下意识默认以为是排队锁，以为像libgo那样被唤醒的waiter直接从前一个锁主转移锁的所有权。那就没疑问了，感谢作者同学^_^","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408028958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408029448","html_url":"https://github.com/apache/brpc/issues/420#issuecomment-408029448","issue_url":"https://api.github.com/repos/apache/brpc/issues/420","id":408029448,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODAyOTQ0OA==","user":{"login":"xueyibing","id":13233726,"node_id":"MDQ6VXNlcjEzMjMzNzI2","avatar_url":"https://avatars.githubusercontent.com/u/13233726?v=4","gravatar_id":"","url":"https://api.github.com/users/xueyibing","html_url":"https://github.com/xueyibing","followers_url":"https://api.github.com/users/xueyibing/followers","following_url":"https://api.github.com/users/xueyibing/following{/other_user}","gists_url":"https://api.github.com/users/xueyibing/gists{/gist_id}","starred_url":"https://api.github.com/users/xueyibing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xueyibing/subscriptions","organizations_url":"https://api.github.com/users/xueyibing/orgs","repos_url":"https://api.github.com/users/xueyibing/repos","events_url":"https://api.github.com/users/xueyibing/events{/privacy}","received_events_url":"https://api.github.com/users/xueyibing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-26T09:02:53Z","updated_at":"2018-07-26T09:02:53Z","author_association":"NONE","body":"auto b = brpc::NewCallback([](int a){});\r\n不可以带参数吗，加上int a 参数编译报错：\r\n 错误：invalid user-defined conversion from ‘CnsServerSession::ProcessSyncMsgConversationInfo(ClientSession*, const HEADER&, const char*, int)::__lambda0’ to ‘void (*)()’ [-fpermissive]\r\n     auto b = brpc::NewCallback([](int a){});\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408029448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408281779","html_url":"https://github.com/apache/brpc/issues/226#issuecomment-408281779","issue_url":"https://api.github.com/repos/apache/brpc/issues/226","id":408281779,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODI4MTc3OQ==","user":{"login":"cxfun12","id":4652508,"node_id":"MDQ6VXNlcjQ2NTI1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/4652508?v=4","gravatar_id":"","url":"https://api.github.com/users/cxfun12","html_url":"https://github.com/cxfun12","followers_url":"https://api.github.com/users/cxfun12/followers","following_url":"https://api.github.com/users/cxfun12/following{/other_user}","gists_url":"https://api.github.com/users/cxfun12/gists{/gist_id}","starred_url":"https://api.github.com/users/cxfun12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cxfun12/subscriptions","organizations_url":"https://api.github.com/users/cxfun12/orgs","repos_url":"https://api.github.com/users/cxfun12/repos","events_url":"https://api.github.com/users/cxfun12/events{/privacy}","received_events_url":"https://api.github.com/users/cxfun12/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-27T01:16:16Z","updated_at":"2018-07-27T01:16:16Z","author_association":"NONE","body":"依然报错，而且这个版本貌似没法按照bitcwb的方法修正\r\nIn file included from src/bthread/bthread.cpp:22:\r\n./src/bthread/task_group.h:131:29: error: expected ';' at end of declaration list\r\n    TaskMeta* current_task() const { return _cur_meta; }\r\n                            ^\r\n                            ;\r\nIn file included from src/bthread/bthread.cpp:22:\r\nIn file included from ./src/bthread/task_group.h:251:\r\nsrc/bthread/task_group_inl.h:48:12: error: no member named 'is_current_pthread_task' in 'bthread::TaskGroup'\r\n    if (g->is_current_pthread_task()) {\r\n        ~  ^\r\nsrc/bthread/task_group_inl.h:49:19: error: no member named 'ready_to_run' in 'bthread::TaskGroup'\r\n        return g->ready_to_run(next_tid);\r\n               ~  ^\r\nsrc/bthread/task_group_inl.h:51:32: error: no member named 'current_tid' in 'bthread::TaskGroup'\r\n    ReadyToRunArgs args = { g->current_tid(), false };\r\n                            ~  ^\r\nsrc/bthread/bthread.cpp:224:26: error: no member named 'is_current_main_task' in 'bthread::TaskGroup'\r\n    if (g != NULL && !g->is_current_main_task()/*note*/) {\r\n                      ~  ^\r\nsrc/bthread/bthread.cpp:225:19: error: no member named 'current_tid' in 'bthread::TaskGroup'\r\n        return g->current_tid();\r\n               ~  ^\r\nsrc/bthread/bthread.cpp:236:26: error: no member named 'is_current_main_task' in 'bthread::TaskGroup'\r\n    if (g != NULL && !g->is_current_main_task()) {\r\n                      ~  ^\r\nsrc/bthread/bthread.cpp:357:26: error: no member named 'is_current_pthread_task' in 'bthread::TaskGroup'\r\n    if (NULL != g && !g->is_current_pthread_task()) {\r\n                      ~  ^\r\nsrc/bthread/bthread.cpp:365:26: error: no member named 'is_current_pthread_task' in 'bthread::TaskGroup'\r\n    if (NULL != g && !g->is_current_pthread_task()) {\r\n                      ~  ^\r\n9 errors generated.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408281779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408295868","html_url":"https://github.com/apache/brpc/issues/420#issuecomment-408295868","issue_url":"https://api.github.com/repos/apache/brpc/issues/420","id":408295868,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODI5NTg2OA==","user":{"login":"xueyibing","id":13233726,"node_id":"MDQ6VXNlcjEzMjMzNzI2","avatar_url":"https://avatars.githubusercontent.com/u/13233726?v=4","gravatar_id":"","url":"https://api.github.com/users/xueyibing","html_url":"https://github.com/xueyibing","followers_url":"https://api.github.com/users/xueyibing/followers","following_url":"https://api.github.com/users/xueyibing/following{/other_user}","gists_url":"https://api.github.com/users/xueyibing/gists{/gist_id}","starred_url":"https://api.github.com/users/xueyibing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xueyibing/subscriptions","organizations_url":"https://api.github.com/users/xueyibing/orgs","repos_url":"https://api.github.com/users/xueyibing/repos","events_url":"https://api.github.com/users/xueyibing/events{/privacy}","received_events_url":"https://api.github.com/users/xueyibing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-27T02:52:13Z","updated_at":"2018-07-27T02:52:13Z","author_association":"NONE","body":"难道只可以用 brpc::NewCallback([](){ .... })这种不带参数的函数类型吗？只要加了参数或者捕获值就会编译报错","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408295868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408296550","html_url":"https://github.com/apache/brpc/issues/414#issuecomment-408296550","issue_url":"https://api.github.com/repos/apache/brpc/issues/414","id":408296550,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODI5NjU1MA==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-27T02:57:10Z","updated_at":"2018-07-27T02:57:10Z","author_association":"NONE","body":"这个问题我们使用的时候也遇到过，brpc里是否考虑把rdtsc换掉，比如用clock_gettime？\r\n因为不少文章说过rdtsc在x86多核体系下不准，主要原因貌似有每个核的TSC不同步，以及cpu降频和乱序执行等原因。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408296550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408398058","html_url":"https://github.com/apache/brpc/issues/414#issuecomment-408398058","issue_url":"https://api.github.com/repos/apache/brpc/issues/414","id":408398058,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODM5ODA1OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-27T11:59:38Z","updated_at":"2018-07-27T11:59:38Z","author_association":"CONTRIBUTOR","body":"brpc只有在cpu支持constant_tsc和nonstop_tsc时才使用rdtsc，这是符合rdtsc正确的使用方式的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408398058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408590791","html_url":"https://github.com/apache/brpc/pull/354#issuecomment-408590791","issue_url":"https://api.github.com/repos/apache/brpc/issues/354","id":408590791,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODU5MDc5MQ==","user":{"login":"yjhjstz","id":3832082,"node_id":"MDQ6VXNlcjM4MzIwODI=","avatar_url":"https://avatars.githubusercontent.com/u/3832082?v=4","gravatar_id":"","url":"https://api.github.com/users/yjhjstz","html_url":"https://github.com/yjhjstz","followers_url":"https://api.github.com/users/yjhjstz/followers","following_url":"https://api.github.com/users/yjhjstz/following{/other_user}","gists_url":"https://api.github.com/users/yjhjstz/gists{/gist_id}","starred_url":"https://api.github.com/users/yjhjstz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjhjstz/subscriptions","organizations_url":"https://api.github.com/users/yjhjstz/orgs","repos_url":"https://api.github.com/users/yjhjstz/repos","events_url":"https://api.github.com/users/yjhjstz/events{/privacy}","received_events_url":"https://api.github.com/users/yjhjstz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-28T08:00:25Z","updated_at":"2018-07-28T08:00:25Z","author_association":"MEMBER","body":"没人 review 吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408590791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408607975","html_url":"https://github.com/apache/brpc/issues/422#issuecomment-408607975","issue_url":"https://api.github.com/repos/apache/brpc/issues/422","id":408607975,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODYwNzk3NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-28T13:27:47Z","updated_at":"2018-07-28T13:27:47Z","author_association":"CONTRIBUTOR","body":"看[这里](https://github.com/brpc/brpc/blob/master/docs/cn/client.md#%E9%99%84client%E7%AB%AF%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408607975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408676727","html_url":"https://github.com/apache/brpc/issues/344#issuecomment-408676727","issue_url":"https://api.github.com/repos/apache/brpc/issues/344","id":408676727,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODY3NjcyNw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-07-29T13:07:37Z","updated_at":"2018-07-29T13:07:37Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408676727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408755310","html_url":"https://github.com/apache/brpc/issues/424#issuecomment-408755310","issue_url":"https://api.github.com/repos/apache/brpc/issues/424","id":408755310,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODc1NTMxMA==","user":{"login":"xueyibing","id":13233726,"node_id":"MDQ6VXNlcjEzMjMzNzI2","avatar_url":"https://avatars.githubusercontent.com/u/13233726?v=4","gravatar_id":"","url":"https://api.github.com/users/xueyibing","html_url":"https://github.com/xueyibing","followers_url":"https://api.github.com/users/xueyibing/followers","following_url":"https://api.github.com/users/xueyibing/following{/other_user}","gists_url":"https://api.github.com/users/xueyibing/gists{/gist_id}","starred_url":"https://api.github.com/users/xueyibing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xueyibing/subscriptions","organizations_url":"https://api.github.com/users/xueyibing/orgs","repos_url":"https://api.github.com/users/xueyibing/repos","events_url":"https://api.github.com/users/xueyibing/events{/privacy}","received_events_url":"https://api.github.com/users/xueyibing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-30T05:58:32Z","updated_at":"2018-07-30T05:58:32Z","author_association":"NONE","body":"自己把tool下面每个程序的CMakeList重写了一遍才编译过，感觉GitHub上拉下来少了一些东西，风格也不是很统一","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408755310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408755527","html_url":"https://github.com/apache/brpc/issues/424#issuecomment-408755527","issue_url":"https://api.github.com/repos/apache/brpc/issues/424","id":408755527,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODc1NTUyNw==","user":{"login":"xueyibing","id":13233726,"node_id":"MDQ6VXNlcjEzMjMzNzI2","avatar_url":"https://avatars.githubusercontent.com/u/13233726?v=4","gravatar_id":"","url":"https://api.github.com/users/xueyibing","html_url":"https://github.com/xueyibing","followers_url":"https://api.github.com/users/xueyibing/followers","following_url":"https://api.github.com/users/xueyibing/following{/other_user}","gists_url":"https://api.github.com/users/xueyibing/gists{/gist_id}","starred_url":"https://api.github.com/users/xueyibing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xueyibing/subscriptions","organizations_url":"https://api.github.com/users/xueyibing/orgs","repos_url":"https://api.github.com/users/xueyibing/repos","events_url":"https://api.github.com/users/xueyibing/events{/privacy}","received_events_url":"https://api.github.com/users/xueyibing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-30T06:00:01Z","updated_at":"2018-07-30T06:02:00Z","author_association":"NONE","body":"example：tools/rpc_press/CMakeLists.txt\r\n```\r\n#file(GLOB SOURCES \"${CMAKE_SOURCE_DIR}/tools/rpc_press/*.cpp\")\r\n#add_executable(rpc_press ${SOURCES})\r\n#target_link_libraries(rpc_press brpc-static ${DYNAMIC_LIB})\r\n#up is old\r\n\r\nset(BRPC_PATH ../../)\r\nset(EXECUTABLE_OUTPUT_PATH ./)\r\n\r\ninclude(FindThreads)\r\ninclude(FindProtobuf)\r\ninclude_directories(${BRPC_PATH}/output/include)\r\n\r\nfind_library(BRPC_LIB libbrpc.a  ${BRPC_PATH}/output/lib)\r\nfind_library(GFLAGS_LIBRARY  libgflags.a /usr/local/lib/)\r\nfind_library(LEVELDB_LIB NAMES leveldb)\r\nfind_library(PROTOBUF_LIB libprotobuf.a /usr/lib  /usr/local/lib)\r\n\r\nlink_libraries(\r\n\t${CMAKE_THREAD_LIBS_INIT}\r\n    ${GFLAGS_LIBRARY}\r\n    ${PROTOBUF_LIBRARIES}\r\n    ${LEVELDB_LIB}\r\n\t${BRPC_LIB}\r\n    ssl\r\n    crypto\r\n    dl\r\n    )\r\n\r\nset(CMAKE_CPP_FLAGS \"-DGFLAGS_NS=${GFLAGS_NS}\")\r\nset(CMAKE_CXX_FLAGS \"${CMAKE_CPP_FLAGS} -DNDEBUG -O2 -D__const__= -D__STRICT_ANSI__ -pipe -W -Wall -Wno-unused-parameter -fPIC -fno-omit-frame-pointer\")\r\nset(CMAKE_CXX_STANDARD 11)\r\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\r\n\r\nadd_executable(rpc_press\r\n rpc_press.cpp\r\n rpc_press_impl.cpp\r\n pb_util.cpp\r\n json_loader.cpp\r\n info_thread.cpp\r\n )\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408755527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408760020","html_url":"https://github.com/apache/brpc/issues/412#issuecomment-408760020","issue_url":"https://api.github.com/repos/apache/brpc/issues/412","id":408760020,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODc2MDAyMA==","user":{"login":"solrex","id":1180139,"node_id":"MDQ6VXNlcjExODAxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/1180139?v=4","gravatar_id":"","url":"https://api.github.com/users/solrex","html_url":"https://github.com/solrex","followers_url":"https://api.github.com/users/solrex/followers","following_url":"https://api.github.com/users/solrex/following{/other_user}","gists_url":"https://api.github.com/users/solrex/gists{/gist_id}","starred_url":"https://api.github.com/users/solrex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/solrex/subscriptions","organizations_url":"https://api.github.com/users/solrex/orgs","repos_url":"https://api.github.com/users/solrex/repos","events_url":"https://api.github.com/users/solrex/events{/privacy}","received_events_url":"https://api.github.com/users/solrex/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-30T06:28:01Z","updated_at":"2018-07-30T06:28:01Z","author_association":"NONE","body":"DBD 的 thread-local 锁用的是 pthread，你的任务处理线程用的是 bthread。如果 bthread 拿 DBD ScopedPtr 之后有阻塞操作，另外一个 bthread 切换到这个 pthread 上再去获取同一把 thread-local 锁，是不是就死锁了？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408760020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408763560","html_url":"https://github.com/apache/brpc/issues/412#issuecomment-408763560","issue_url":"https://api.github.com/repos/apache/brpc/issues/412","id":408763560,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODc2MzU2MA==","user":{"login":"gethinzhang","id":5329492,"node_id":"MDQ6VXNlcjUzMjk0OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5329492?v=4","gravatar_id":"","url":"https://api.github.com/users/gethinzhang","html_url":"https://github.com/gethinzhang","followers_url":"https://api.github.com/users/gethinzhang/followers","following_url":"https://api.github.com/users/gethinzhang/following{/other_user}","gists_url":"https://api.github.com/users/gethinzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/gethinzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gethinzhang/subscriptions","organizations_url":"https://api.github.com/users/gethinzhang/orgs","repos_url":"https://api.github.com/users/gethinzhang/repos","events_url":"https://api.github.com/users/gethinzhang/events{/privacy}","received_events_url":"https://api.github.com/users/gethinzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-30T06:47:52Z","updated_at":"2018-07-30T06:47:52Z","author_association":"NONE","body":"应该是ScopedPtr的范围太大了，之前我们也碰到类似问题了，ScopedPtr及时释放就好了，不要等到函数结束再释放","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408763560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408782270","html_url":"https://github.com/apache/brpc/issues/426#issuecomment-408782270","issue_url":"https://api.github.com/repos/apache/brpc/issues/426","id":408782270,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODc4MjI3MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-30T08:10:01Z","updated_at":"2018-07-30T08:10:01Z","author_association":"CONTRIBUTOR","body":"我看到的[代码](https://github.com/brpc/brpc/blob/master/tools/rpc_press/rpc_press.cpp)里没有service这个flag","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408782270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408786547","html_url":"https://github.com/apache/brpc/issues/426#issuecomment-408786547","issue_url":"https://api.github.com/repos/apache/brpc/issues/426","id":408786547,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODc4NjU0Nw==","user":{"login":"xueyibing","id":13233726,"node_id":"MDQ6VXNlcjEzMjMzNzI2","avatar_url":"https://avatars.githubusercontent.com/u/13233726?v=4","gravatar_id":"","url":"https://api.github.com/users/xueyibing","html_url":"https://github.com/xueyibing","followers_url":"https://api.github.com/users/xueyibing/followers","following_url":"https://api.github.com/users/xueyibing/following{/other_user}","gists_url":"https://api.github.com/users/xueyibing/gists{/gist_id}","starred_url":"https://api.github.com/users/xueyibing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xueyibing/subscriptions","organizations_url":"https://api.github.com/users/xueyibing/orgs","repos_url":"https://api.github.com/users/xueyibing/repos","events_url":"https://api.github.com/users/xueyibing/events{/privacy}","received_events_url":"https://api.github.com/users/xueyibing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-30T08:26:19Z","updated_at":"2018-07-30T08:26:19Z","author_association":"NONE","body":"service 这个flag是我自己加上的，我认为是遗漏了的，GitHub上代码运行会报错:\r\n[brpc/tools/rpc_press/pb_util.cpp:37] Fail to find service=conversion.ConversionServer\r\n\r\n出错的原因是：\r\n我定义了一个服务,conversion.proto:\r\n\r\n```\r\nsyntax=\"proto3\";\r\npackage conversion_server;\r\nservice ConversionServer{\r\n...\r\n}\r\n```\r\nrpc_press 做压测时候需要知道我的service全名(conversion_server.ConversionServer),\r\n但是缺少service这个falg，rpc_press 无法接受我传递的服务命名“conversion_server.ConversionServer”，\r\n而自己组一个conversion.ConversionServer，这是不正确的\r\n\r\nhttps://github.com/brpc/brpc/blob/master/docs/cn/rpc_press.md\r\n这里的文档，有一个示例\r\n```\r\n./rpc_press -proto=echo.proto -service=example.EchoService -method=Echo -server=0.0.0.0:8002 -input=./input.json -duration=0 -qps=100\r\nTRACE: 01-30 16:10:04:   * 0 src/brpc/server.cpp:733] Server[dummy_servers] is serving on port=8888.\r\nTRACE: 01-30 16:10:04:   * 0 src/brpc/server.cpp:742] Check out http://db-rpc-dev00.db01.baidu.com:8888 in your web browser.</code>\r\n```\r\n其实是包含service这个flag的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408786547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408812954","html_url":"https://github.com/apache/brpc/issues/426#issuecomment-408812954","issue_url":"https://api.github.com/repos/apache/brpc/issues/426","id":408812954,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODgxMjk1NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-30T10:03:47Z","updated_at":"2018-07-30T10:03:47Z","author_association":"CONTRIBUTOR","body":"指定method就行了，要写全名。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408812954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408821405","html_url":"https://github.com/apache/brpc/issues/423#issuecomment-408821405","issue_url":"https://api.github.com/repos/apache/brpc/issues/423","id":408821405,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODgyMTQwNQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-30T10:38:35Z","updated_at":"2018-07-30T10:38:35Z","author_association":"CONTRIBUTOR","body":"1. brpc的接口既可以在pthread中也可以在bthread中调用，在pthread中发起同步调用阻塞的是pthread，此时异步调用就不会阻塞pthread。\r\n2. 异步调用的内存开销最小，而一个阻塞的bthread会占用一个栈。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408821405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408834043","html_url":"https://github.com/apache/brpc/issues/412#issuecomment-408834043","issue_url":"https://api.github.com/repos/apache/brpc/issues/412","id":408834043,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODgzNDA0Mw==","user":{"login":"gtarcoder","id":11898942,"node_id":"MDQ6VXNlcjExODk4OTQy","avatar_url":"https://avatars.githubusercontent.com/u/11898942?v=4","gravatar_id":"","url":"https://api.github.com/users/gtarcoder","html_url":"https://github.com/gtarcoder","followers_url":"https://api.github.com/users/gtarcoder/followers","following_url":"https://api.github.com/users/gtarcoder/following{/other_user}","gists_url":"https://api.github.com/users/gtarcoder/gists{/gist_id}","starred_url":"https://api.github.com/users/gtarcoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtarcoder/subscriptions","organizations_url":"https://api.github.com/users/gtarcoder/orgs","repos_url":"https://api.github.com/users/gtarcoder/repos","events_url":"https://api.github.com/users/gtarcoder/events{/privacy}","received_events_url":"https://api.github.com/users/gtarcoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-30T11:36:55Z","updated_at":"2018-07-30T11:37:08Z","author_association":"NONE","body":"@solrex  确实是这个原因。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408834043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408885232","html_url":"https://github.com/apache/brpc/issues/347#issuecomment-408885232","issue_url":"https://api.github.com/repos/apache/brpc/issues/347","id":408885232,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODg4NTIzMg==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-07-30T14:34:26Z","updated_at":"2018-07-30T14:34:26Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/408885232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409102607","html_url":"https://github.com/apache/brpc/issues/429#issuecomment-409102607","issue_url":"https://api.github.com/repos/apache/brpc/issues/429","id":409102607,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTEwMjYwNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-31T05:48:23Z","updated_at":"2018-07-31T05:48:23Z","author_association":"CONTRIBUTOR","body":"Join卡住就说明还有done没有被调用。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409102607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409103816","html_url":"https://github.com/apache/brpc/issues/346#issuecomment-409103816","issue_url":"https://api.github.com/repos/apache/brpc/issues/346","id":409103816,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTEwMzgxNg==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-07-31T05:55:30Z","updated_at":"2018-07-31T05:55:30Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409103816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409103819","html_url":"https://github.com/apache/brpc/issues/349#issuecomment-409103819","issue_url":"https://api.github.com/repos/apache/brpc/issues/349","id":409103819,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTEwMzgxOQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-07-31T05:55:31Z","updated_at":"2018-07-31T05:55:31Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409103819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409104095","html_url":"https://github.com/apache/brpc/issues/429#issuecomment-409104095","issue_url":"https://api.github.com/repos/apache/brpc/issues/429","id":409104095,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTEwNDA5NQ==","user":{"login":"mahbgit","id":15036371,"node_id":"MDQ6VXNlcjE1MDM2Mzcx","avatar_url":"https://avatars.githubusercontent.com/u/15036371?v=4","gravatar_id":"","url":"https://api.github.com/users/mahbgit","html_url":"https://github.com/mahbgit","followers_url":"https://api.github.com/users/mahbgit/followers","following_url":"https://api.github.com/users/mahbgit/following{/other_user}","gists_url":"https://api.github.com/users/mahbgit/gists{/gist_id}","starred_url":"https://api.github.com/users/mahbgit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mahbgit/subscriptions","organizations_url":"https://api.github.com/users/mahbgit/orgs","repos_url":"https://api.github.com/users/mahbgit/repos","events_url":"https://api.github.com/users/mahbgit/events{/privacy}","received_events_url":"https://api.github.com/users/mahbgit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-31T05:57:22Z","updated_at":"2018-07-31T05:57:22Z","author_association":"NONE","body":"请问有什么办法能跟踪done没有被调用的情况吗,我代码过了好几次觉得应该都调用了啊.\r\n任务处理函数开头调用done_guard之后就不用管了吧.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409104095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409111008","html_url":"https://github.com/apache/brpc/issues/429#issuecomment-409111008","issue_url":"https://api.github.com/repos/apache/brpc/issues/429","id":409111008,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTExMTAwOA==","user":{"login":"mahbgit","id":15036371,"node_id":"MDQ6VXNlcjE1MDM2Mzcx","avatar_url":"https://avatars.githubusercontent.com/u/15036371?v=4","gravatar_id":"","url":"https://api.github.com/users/mahbgit","html_url":"https://github.com/mahbgit","followers_url":"https://api.github.com/users/mahbgit/followers","following_url":"https://api.github.com/users/mahbgit/following{/other_user}","gists_url":"https://api.github.com/users/mahbgit/gists{/gist_id}","starred_url":"https://api.github.com/users/mahbgit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mahbgit/subscriptions","organizations_url":"https://api.github.com/users/mahbgit/orgs","repos_url":"https://api.github.com/users/mahbgit/repos","events_url":"https://api.github.com/users/mahbgit/events{/privacy}","received_events_url":"https://api.github.com/users/mahbgit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-31T06:34:33Z","updated_at":"2018-07-31T06:34:33Z","author_association":"NONE","body":"加了日志,发现确实是这样.任务线程先结束了,但是回调仍然在收请求,最后的done没处理.\r\n谢谢指点","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409111008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409483156","html_url":"https://github.com/apache/brpc/issues/432#issuecomment-409483156","issue_url":"https://api.github.com/repos/apache/brpc/issues/432","id":409483156,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTQ4MzE1Ng==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-01T07:48:30Z","updated_at":"2018-08-01T10:22:59Z","author_association":"CONTRIBUTOR","body":"为什么会说“而**steal函数中**，无其他store操作”，我理解这个fence的作用不限于steal函数中，也可能与pop,push等函数同步？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409483156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409544060","html_url":"https://github.com/apache/brpc/issues/432#issuecomment-409544060","issue_url":"https://api.github.com/repos/apache/brpc/issues/432","id":409544060,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTU0NDA2MA==","user":{"login":"spch2008","id":4516924,"node_id":"MDQ6VXNlcjQ1MTY5MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/4516924?v=4","gravatar_id":"","url":"https://api.github.com/users/spch2008","html_url":"https://github.com/spch2008","followers_url":"https://api.github.com/users/spch2008/followers","following_url":"https://api.github.com/users/spch2008/following{/other_user}","gists_url":"https://api.github.com/users/spch2008/gists{/gist_id}","starred_url":"https://api.github.com/users/spch2008/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spch2008/subscriptions","organizations_url":"https://api.github.com/users/spch2008/orgs","repos_url":"https://api.github.com/users/spch2008/repos","events_url":"https://api.github.com/users/spch2008/events{/privacy}","received_events_url":"https://api.github.com/users/spch2008/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-01T11:30:41Z","updated_at":"2018-08-01T11:30:41Z","author_association":"NONE","body":"我觉得不是，这里除了_top，没有其他store操作，用acquire能解决现在的问题，我觉得这句代码是多余的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409544060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409548302","html_url":"https://github.com/apache/brpc/issues/432#issuecomment-409548302","issue_url":"https://api.github.com/repos/apache/brpc/issues/432","id":409548302,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTU0ODMwMg==","user":{"login":"seafeawea","id":8296607,"node_id":"MDQ6VXNlcjgyOTY2MDc=","avatar_url":"https://avatars.githubusercontent.com/u/8296607?v=4","gravatar_id":"","url":"https://api.github.com/users/seafeawea","html_url":"https://github.com/seafeawea","followers_url":"https://api.github.com/users/seafeawea/followers","following_url":"https://api.github.com/users/seafeawea/following{/other_user}","gists_url":"https://api.github.com/users/seafeawea/gists{/gist_id}","starred_url":"https://api.github.com/users/seafeawea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seafeawea/subscriptions","organizations_url":"https://api.github.com/users/seafeawea/orgs","repos_url":"https://api.github.com/users/seafeawea/repos","events_url":"https://api.github.com/users/seafeawea/events{/privacy}","received_events_url":"https://api.github.com/users/seafeawea/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-01T11:50:17Z","updated_at":"2018-08-01T11:50:17Z","author_association":"NONE","body":"同疑问这里","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409548302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409777147","html_url":"https://github.com/apache/brpc/issues/348#issuecomment-409777147","issue_url":"https://api.github.com/repos/apache/brpc/issues/348","id":409777147,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc3NzE0Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T01:38:22Z","updated_at":"2018-08-02T01:38:22Z","author_association":"CONTRIBUTOR","body":"#413","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409777147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409779826","html_url":"https://github.com/apache/brpc/issues/144#issuecomment-409779826","issue_url":"https://api.github.com/repos/apache/brpc/issues/144","id":409779826,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc3OTgyNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T01:53:40Z","updated_at":"2018-08-02T01:53:40Z","author_association":"CONTRIBUTOR","body":"baidu_std可以用pooled，那个日志说明那台机器在被健康检查，可以翻翻日志中有没有Checking开头的\r\n\r\nOn Thu, Aug 2, 2018 at 9:39 AM bozhbo <notifications@github.com> wrote:\r\n\r\n> 问下，使用baidu_std时设置了options.connection_type = \"pooled\";\r\n> 但是在大并发的情况下容易出现[E112]Not connected to 10.0.0.1:8000\r\n> yet，应该是socket被关闭了，导致消息在一段时间消息发送不成功，baidu_std协议能使用pooled吗？\r\n>\r\n> —\r\n> You are receiving this because you were mentioned.\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/brpc/brpc/issues/144#issuecomment-409777220>, or mute\r\n> the thread\r\n> <https://github.com/notifications/unsubscribe-auth/AGQyh6koC38EzrR9FM2iSwOxd_mgEEDtks5uMlg2gaJpZM4Q1pok>\r\n> .\r\n>\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409779826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409780042","html_url":"https://github.com/apache/brpc/issues/433#issuecomment-409780042","issue_url":"https://api.github.com/repos/apache/brpc/issues/433","id":409780042,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc4MDA0Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T01:54:59Z","updated_at":"2018-08-02T01:54:59Z","author_association":"CONTRIBUTOR","body":"baidu_std可以用pooled，那个日志说明那台机器在被健康检查，可以翻翻日志中有没有Checking开头的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409780042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783093","html_url":"https://github.com/apache/brpc/issues/433#issuecomment-409783093","issue_url":"https://api.github.com/repos/apache/brpc/issues/433","id":409783093,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc4MzA5Mw==","user":{"login":"bozhbo","id":8568401,"node_id":"MDQ6VXNlcjg1Njg0MDE=","avatar_url":"https://avatars.githubusercontent.com/u/8568401?v=4","gravatar_id":"","url":"https://api.github.com/users/bozhbo","html_url":"https://github.com/bozhbo","followers_url":"https://api.github.com/users/bozhbo/followers","following_url":"https://api.github.com/users/bozhbo/following{/other_user}","gists_url":"https://api.github.com/users/bozhbo/gists{/gist_id}","starred_url":"https://api.github.com/users/bozhbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bozhbo/subscriptions","organizations_url":"https://api.github.com/users/bozhbo/orgs","repos_url":"https://api.github.com/users/bozhbo/repos","events_url":"https://api.github.com/users/bozhbo/events{/privacy}","received_events_url":"https://api.github.com/users/bozhbo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T02:13:06Z","updated_at":"2018-08-02T02:13:06Z","author_association":"NONE","body":"没有查询到Checking的日志，还有就是我设置了max_connection_pool_size但是好像没有起到作用，总的连接数还是会超过这个值，还有就是连接使用率已经很高了，为什么总是被关闭idle_timeout_second=100没有作用吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783757","html_url":"https://github.com/apache/brpc/issues/379#issuecomment-409783757","issue_url":"https://api.github.com/repos/apache/brpc/issues/379","id":409783757,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc4Mzc1Nw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T02:17:29Z","updated_at":"2018-08-02T02:17:29Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783762","html_url":"https://github.com/apache/brpc/issues/376#issuecomment-409783762","issue_url":"https://api.github.com/repos/apache/brpc/issues/376","id":409783762,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc4Mzc2Mg==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T02:17:30Z","updated_at":"2018-08-02T02:17:30Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783763","html_url":"https://github.com/apache/brpc/issues/377#issuecomment-409783763","issue_url":"https://api.github.com/repos/apache/brpc/issues/377","id":409783763,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc4Mzc2Mw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T02:17:31Z","updated_at":"2018-08-02T02:17:31Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783768","html_url":"https://github.com/apache/brpc/issues/375#issuecomment-409783768","issue_url":"https://api.github.com/repos/apache/brpc/issues/375","id":409783768,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc4Mzc2OA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T02:17:32Z","updated_at":"2018-08-02T02:17:32Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783770","html_url":"https://github.com/apache/brpc/issues/371#issuecomment-409783770","issue_url":"https://api.github.com/repos/apache/brpc/issues/371","id":409783770,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc4Mzc3MA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T02:17:33Z","updated_at":"2018-08-02T02:17:33Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783774","html_url":"https://github.com/apache/brpc/issues/373#issuecomment-409783774","issue_url":"https://api.github.com/repos/apache/brpc/issues/373","id":409783774,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc4Mzc3NA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T02:17:34Z","updated_at":"2018-08-02T02:17:34Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783777","html_url":"https://github.com/apache/brpc/issues/370#issuecomment-409783777","issue_url":"https://api.github.com/repos/apache/brpc/issues/370","id":409783777,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc4Mzc3Nw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T02:17:35Z","updated_at":"2018-08-02T02:17:35Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783783","html_url":"https://github.com/apache/brpc/issues/368#issuecomment-409783783","issue_url":"https://api.github.com/repos/apache/brpc/issues/368","id":409783783,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc4Mzc4Mw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T02:17:36Z","updated_at":"2018-08-02T02:17:36Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783789","html_url":"https://github.com/apache/brpc/issues/264#issuecomment-409783789","issue_url":"https://api.github.com/repos/apache/brpc/issues/264","id":409783789,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc4Mzc4OQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T02:17:38Z","updated_at":"2018-08-02T02:17:38Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783796","html_url":"https://github.com/apache/brpc/issues/356#issuecomment-409783796","issue_url":"https://api.github.com/repos/apache/brpc/issues/356","id":409783796,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc4Mzc5Ng==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T02:17:39Z","updated_at":"2018-08-02T02:17:39Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409783796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409797846","html_url":"https://github.com/apache/brpc/issues/432#issuecomment-409797846","issue_url":"https://api.github.com/repos/apache/brpc/issues/432","id":409797846,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTc5Nzg0Ng==","user":{"login":"spch2008","id":4516924,"node_id":"MDQ6VXNlcjQ1MTY5MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/4516924?v=4","gravatar_id":"","url":"https://api.github.com/users/spch2008","html_url":"https://github.com/spch2008","followers_url":"https://api.github.com/users/spch2008/followers","following_url":"https://api.github.com/users/spch2008/following{/other_user}","gists_url":"https://api.github.com/users/spch2008/gists{/gist_id}","starred_url":"https://api.github.com/users/spch2008/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spch2008/subscriptions","organizations_url":"https://api.github.com/users/spch2008/orgs","repos_url":"https://api.github.com/users/spch2008/repos","events_url":"https://api.github.com/users/spch2008/events{/privacy}","received_events_url":"https://api.github.com/users/spch2008/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T03:55:34Z","updated_at":"2018-08-02T03:55:34Z","author_association":"NONE","body":"@jamesge 戈大神能否答疑下，跪谢。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409797846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409807479","html_url":"https://github.com/apache/brpc/issues/432#issuecomment-409807479","issue_url":"https://api.github.com/repos/apache/brpc/issues/432","id":409807479,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTgwNzQ3OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T05:10:03Z","updated_at":"2018-08-02T05:10:03Z","author_association":"CONTRIBUTOR","body":"这是和[94行](https://github.com/brpc/brpc/blob/ef4eddde8b861780ab3ccc3abda3e806e0ea3f09/src/bthread/work_stealing_queue.h#L94)的seq_cst配对，确保steal线程能看到新的_bottom，如果没有的话，第一次cas失败的steal线程还是看不到更新后的_bottom，就不会被[124行](https://github.com/brpc/brpc/blob/ef4eddde8b861780ab3ccc3abda3e806e0ea3f09/src/bthread/work_stealing_queue.h#L124)的判定拒绝，而会去更新t，最终导致pop误判。一个例子是pop走到95行时，t=newb+1=b+2，且正好有两个steal线程在争抢cas，失败的那个steal线程回到do while开头看到的还是没变化的b，从而会继续更新t，最后让t=b，而pop也会由于t != newb这个判定同样成功，从而导致问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409807479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409822193","html_url":"https://github.com/apache/brpc/issues/433#issuecomment-409822193","issue_url":"https://api.github.com/repos/apache/brpc/issues/433","id":409822193,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTgyMjE5Mw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T06:37:48Z","updated_at":"2018-08-02T06:37:48Z","author_association":"CONTRIBUTOR","body":"max_connection_pool_size 应该不是限制总连接数的，而是限制pool的尺寸的。超过这个尺寸，会建立临时连接来满足需求。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409822193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409822671","html_url":"https://github.com/apache/brpc/issues/432#issuecomment-409822671","issue_url":"https://api.github.com/repos/apache/brpc/issues/432","id":409822671,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTgyMjY3MQ==","user":{"login":"spch2008","id":4516924,"node_id":"MDQ6VXNlcjQ1MTY5MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/4516924?v=4","gravatar_id":"","url":"https://api.github.com/users/spch2008","html_url":"https://github.com/spch2008","followers_url":"https://api.github.com/users/spch2008/followers","following_url":"https://api.github.com/users/spch2008/following{/other_user}","gists_url":"https://api.github.com/users/spch2008/gists{/gist_id}","starred_url":"https://api.github.com/users/spch2008/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spch2008/subscriptions","organizations_url":"https://api.github.com/users/spch2008/orgs","repos_url":"https://api.github.com/users/spch2008/repos","events_url":"https://api.github.com/users/spch2008/events{/privacy}","received_events_url":"https://api.github.com/users/spch2008/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T06:40:10Z","updated_at":"2018-08-02T06:40:10Z","author_association":"NONE","body":"@jamesge 感谢戈神解答，有一点还是不清楚。如果是与94行的seq_cst配对使用，为什么不采用在pop中：_bottom.store(seq_cst)，而在steal中：_bottom.load(seq_cst)。各个编译器在不同平台对store/load的seq_cst实现是不一致，对于x86/gcc，store是mfence+mov，load就是mov。而如果采用atomic_thread_fence，则默认会添加mfence，即load的时候也会有mfence，这个指令是耗时的，而且我觉得是没有必要的，求戈神解答是否有其它原因？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409822671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409864315","html_url":"https://github.com/apache/brpc/issues/432#issuecomment-409864315","issue_url":"https://api.github.com/repos/apache/brpc/issues/432","id":409864315,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTg2NDMxNQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T09:24:59Z","updated_at":"2018-08-02T09:24:59Z","author_association":"CONTRIBUTOR","body":"这个和atomic的实现有一定关联，b.store(seq_cst)可能也只会带release语意(acquire对store没意义），b.load(seq_cst)也可能只会带acquire，写成atomic_thread_fence更明确一些。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409864315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409882959","html_url":"https://github.com/apache/brpc/issues/432#issuecomment-409882959","issue_url":"https://api.github.com/repos/apache/brpc/issues/432","id":409882959,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTg4Mjk1OQ==","user":{"login":"spch2008","id":4516924,"node_id":"MDQ6VXNlcjQ1MTY5MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/4516924?v=4","gravatar_id":"","url":"https://api.github.com/users/spch2008","html_url":"https://github.com/spch2008","followers_url":"https://api.github.com/users/spch2008/followers","following_url":"https://api.github.com/users/spch2008/following{/other_user}","gists_url":"https://api.github.com/users/spch2008/gists{/gist_id}","starred_url":"https://api.github.com/users/spch2008/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spch2008/subscriptions","organizations_url":"https://api.github.com/users/spch2008/orgs","repos_url":"https://api.github.com/users/spch2008/repos","events_url":"https://api.github.com/users/spch2008/events{/privacy}","received_events_url":"https://api.github.com/users/spch2008/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T10:34:40Z","updated_at":"2018-08-02T10:34:40Z","author_association":"NONE","body":"感谢戈神！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409882959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409926232","html_url":"https://github.com/apache/brpc/issues/432#issuecomment-409926232","issue_url":"https://api.github.com/repos/apache/brpc/issues/432","id":409926232,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTkyNjIzMg==","user":{"login":"icylord","id":1522760,"node_id":"MDQ6VXNlcjE1MjI3NjA=","avatar_url":"https://avatars.githubusercontent.com/u/1522760?v=4","gravatar_id":"","url":"https://api.github.com/users/icylord","html_url":"https://github.com/icylord","followers_url":"https://api.github.com/users/icylord/followers","following_url":"https://api.github.com/users/icylord/following{/other_user}","gists_url":"https://api.github.com/users/icylord/gists{/gist_id}","starred_url":"https://api.github.com/users/icylord/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icylord/subscriptions","organizations_url":"https://api.github.com/users/icylord/orgs","repos_url":"https://api.github.com/users/icylord/repos","events_url":"https://api.github.com/users/icylord/events{/privacy}","received_events_url":"https://api.github.com/users/icylord/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T13:29:16Z","updated_at":"2018-08-02T13:29:16Z","author_association":"NONE","body":"work_stealing_queue 跟两个消费者使用 SPMC有什么区别不？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409926232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409957169","html_url":"https://github.com/apache/brpc/issues/436#issuecomment-409957169","issue_url":"https://api.github.com/repos/apache/brpc/issues/436","id":409957169,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTk1NzE2OQ==","user":{"login":"ipconfigme","id":2500750,"node_id":"MDQ6VXNlcjI1MDA3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/2500750?v=4","gravatar_id":"","url":"https://api.github.com/users/ipconfigme","html_url":"https://github.com/ipconfigme","followers_url":"https://api.github.com/users/ipconfigme/followers","following_url":"https://api.github.com/users/ipconfigme/following{/other_user}","gists_url":"https://api.github.com/users/ipconfigme/gists{/gist_id}","starred_url":"https://api.github.com/users/ipconfigme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ipconfigme/subscriptions","organizations_url":"https://api.github.com/users/ipconfigme/orgs","repos_url":"https://api.github.com/users/ipconfigme/repos","events_url":"https://api.github.com/users/ipconfigme/events{/privacy}","received_events_url":"https://api.github.com/users/ipconfigme/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T14:59:11Z","updated_at":"2018-08-02T14:59:11Z","author_association":"CONTRIBUTOR","body":"在开启usercode_in_pthread之后，服务端service callback运行在pthread中，服务支持的最大并发跟程序配置的线程数有关，这个日志说明当前请求太多，服务端处理不过来了。在pthread模式下如果有同步阻塞任务可能会导致worker线程全部占满从而导致死锁，因此brpc内部增加了一个额外的backup线程池用于worker线程不够之后把任务跑在额外的线程池上。backup线程池支持的最大任务并发也是有限的，通过FLAGS_usercode_backup_threads * FLAGS_pending_in_each_backup_thread配置进行控制。出现这个日志之后，可以通过ServerOptions.num_threads/bthread_concurrency来调大worker线程数来满足部分需求，同时也需要通过ServerOptions.max_concurrency进行请求限流（不能大于bthread_concurrency）。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409957169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409963594","html_url":"https://github.com/apache/brpc/issues/384#issuecomment-409963594","issue_url":"https://api.github.com/repos/apache/brpc/issues/384","id":409963594,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTk2MzU5NA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-02T15:17:30Z","updated_at":"2018-08-02T15:17:30Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/409963594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410113334","html_url":"https://github.com/apache/brpc/issues/437#issuecomment-410113334","issue_url":"https://api.github.com/repos/apache/brpc/issues/437","id":410113334,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDExMzMzNA==","user":{"login":"ydp","id":1532805,"node_id":"MDQ6VXNlcjE1MzI4MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1532805?v=4","gravatar_id":"","url":"https://api.github.com/users/ydp","html_url":"https://github.com/ydp","followers_url":"https://api.github.com/users/ydp/followers","following_url":"https://api.github.com/users/ydp/following{/other_user}","gists_url":"https://api.github.com/users/ydp/gists{/gist_id}","starred_url":"https://api.github.com/users/ydp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydp/subscriptions","organizations_url":"https://api.github.com/users/ydp/orgs","repos_url":"https://api.github.com/users/ydp/repos","events_url":"https://api.github.com/users/ydp/events{/privacy}","received_events_url":"https://api.github.com/users/ydp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-03T01:09:15Z","updated_at":"2018-08-03T01:09:15Z","author_association":"NONE","body":"thrift是安装在32位的，其他是64位，建软链接吧，忽略我，close","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410113334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410167563","html_url":"https://github.com/apache/brpc/issues/436#issuecomment-410167563","issue_url":"https://api.github.com/repos/apache/brpc/issues/436","id":410167563,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDE2NzU2Mw==","user":{"login":"xiaohei520321","id":25146253,"node_id":"MDQ6VXNlcjI1MTQ2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/25146253?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaohei520321","html_url":"https://github.com/xiaohei520321","followers_url":"https://api.github.com/users/xiaohei520321/followers","following_url":"https://api.github.com/users/xiaohei520321/following{/other_user}","gists_url":"https://api.github.com/users/xiaohei520321/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaohei520321/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaohei520321/subscriptions","organizations_url":"https://api.github.com/users/xiaohei520321/orgs","repos_url":"https://api.github.com/users/xiaohei520321/repos","events_url":"https://api.github.com/users/xiaohei520321/events{/privacy}","received_events_url":"https://api.github.com/users/xiaohei520321/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-03T07:18:55Z","updated_at":"2018-08-03T07:18:55Z","author_association":"NONE","body":"@ipconfigme 那如果没有开启usercode_in_pthread，运行在bthread，处理不过来的时候, server会动态增加bthread? ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410167563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410168684","html_url":"https://github.com/apache/brpc/issues/385#issuecomment-410168684","issue_url":"https://api.github.com/repos/apache/brpc/issues/385","id":410168684,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDE2ODY4NA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-03T07:24:06Z","updated_at":"2018-08-03T07:24:06Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410168684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410210445","html_url":"https://github.com/apache/brpc/pull/369#issuecomment-410210445","issue_url":"https://api.github.com/repos/apache/brpc/issues/369","id":410210445,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDIxMDQ0NQ==","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-03T10:14:36Z","updated_at":"2018-08-03T10:14:36Z","author_association":"CONTRIBUTOR","body":"@jamesge 还有什么别的问题吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410210445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410212445","html_url":"https://github.com/apache/brpc/issues/388#issuecomment-410212445","issue_url":"https://api.github.com/repos/apache/brpc/issues/388","id":410212445,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDIxMjQ0NQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-03T10:24:06Z","updated_at":"2018-08-03T10:24:06Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410212445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410296010","html_url":"https://github.com/apache/brpc/issues/436#issuecomment-410296010","issue_url":"https://api.github.com/repos/apache/brpc/issues/436","id":410296010,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDI5NjAxMA==","user":{"login":"ipconfigme","id":2500750,"node_id":"MDQ6VXNlcjI1MDA3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/2500750?v=4","gravatar_id":"","url":"https://api.github.com/users/ipconfigme","html_url":"https://github.com/ipconfigme","followers_url":"https://api.github.com/users/ipconfigme/followers","following_url":"https://api.github.com/users/ipconfigme/following{/other_user}","gists_url":"https://api.github.com/users/ipconfigme/gists{/gist_id}","starred_url":"https://api.github.com/users/ipconfigme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ipconfigme/subscriptions","organizations_url":"https://api.github.com/users/ipconfigme/orgs","repos_url":"https://api.github.com/users/ipconfigme/repos","events_url":"https://api.github.com/users/ipconfigme/events{/privacy}","received_events_url":"https://api.github.com/users/ipconfigme/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-03T15:51:19Z","updated_at":"2018-08-03T15:51:19Z","author_association":"CONTRIBUTOR","body":"这个说法有点问题啊，一个method跑在一个bthread上，并发来了就跑在多个bthread上，M个bthread跑在N个pthread上","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410296010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410418374","html_url":"https://github.com/apache/brpc/issues/363#issuecomment-410418374","issue_url":"https://api.github.com/repos/apache/brpc/issues/363","id":410418374,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDQxODM3NA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-04T03:06:03Z","updated_at":"2018-08-04T03:06:03Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410418374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410429553","html_url":"https://github.com/apache/brpc/issues/386#issuecomment-410429553","issue_url":"https://api.github.com/repos/apache/brpc/issues/386","id":410429553,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDQyOTU1Mw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-08-04T07:06:03Z","updated_at":"2018-08-04T07:06:03Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410429553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410492457","html_url":"https://github.com/apache/brpc/issues/438#issuecomment-410492457","issue_url":"https://api.github.com/repos/apache/brpc/issues/438","id":410492457,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDQ5MjQ1Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-05T03:15:54Z","updated_at":"2018-08-05T03:15:54Z","author_association":"CONTRIBUTOR","body":"只增，可[动态修改](https://github.com/brpc/brpc/blob/master/docs/cn/server_debugging.md#%E6%8E%92%E9%99%A4%E5%B7%A5%E4%BD%9C%E7%BA%BF%E7%A8%8B%E6%95%B0%E4%B8%8D%E5%A4%9F%E7%9A%84%E5%AB%8C%E7%96%91)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410492457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410496425","html_url":"https://github.com/apache/brpc/issues/438#issuecomment-410496425","issue_url":"https://api.github.com/repos/apache/brpc/issues/438","id":410496425,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDQ5NjQyNQ==","user":{"login":"yitian134","id":8611425,"node_id":"MDQ6VXNlcjg2MTE0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8611425?v=4","gravatar_id":"","url":"https://api.github.com/users/yitian134","html_url":"https://github.com/yitian134","followers_url":"https://api.github.com/users/yitian134/followers","following_url":"https://api.github.com/users/yitian134/following{/other_user}","gists_url":"https://api.github.com/users/yitian134/gists{/gist_id}","starred_url":"https://api.github.com/users/yitian134/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitian134/subscriptions","organizations_url":"https://api.github.com/users/yitian134/orgs","repos_url":"https://api.github.com/users/yitian134/repos","events_url":"https://api.github.com/users/yitian134/events{/privacy}","received_events_url":"https://api.github.com/users/yitian134/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-05T05:13:20Z","updated_at":"2018-08-05T05:14:13Z","author_association":"NONE","body":"看到这个设置了。那还存在两个疑问哎\r\n1）最好能预估线程数，在ServerOptions.num_threads设置好？因为在集群环境下，发现不够用然后一个个去调节线程数不现实\r\n2）如果用户代码写的比较烂，都是同步访问的话，会很快阻塞全部N？这时候动态创建thread是否会好些，但是给thread数设个上限值\r\n求解惑zz","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410496425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410497135","html_url":"https://github.com/apache/brpc/issues/438#issuecomment-410497135","issue_url":"https://api.github.com/repos/apache/brpc/issues/438","id":410497135,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDQ5NzEzNQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-05T05:33:58Z","updated_at":"2018-08-05T05:34:38Z","author_association":"CONTRIBUTOR","body":"1. server端的默认设置是cpu核心数，client端的默认设置是9，只要没有大量的阻塞IO操作，默认设置一般是ok的。对于常见的server场景而言，“阻塞IO”操作一般就是访问mysql、调用其他rpc的client，写文件。这个可以根据实际情况做一些调整，线程数的预估方法仍然是little's law: peak-qps * latency-in-seconds\r\n2. 如上所述，如果都是用brpc发起rpc，阻塞的是bthread而不是pthread，影响不是很大。退一步讲，有动态创建就必须有动态删除，否则意义就不是很大。动态删除在（往往不正确的）实际使用中会牵涉到资源泄露等问题。之前在brpc的php扩展中有一些尝试，不过这部分代码还未合入主干。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410497135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410497637","html_url":"https://github.com/apache/brpc/issues/438#issuecomment-410497637","issue_url":"https://api.github.com/repos/apache/brpc/issues/438","id":410497637,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDQ5NzYzNw==","user":{"login":"yitian134","id":8611425,"node_id":"MDQ6VXNlcjg2MTE0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8611425?v=4","gravatar_id":"","url":"https://api.github.com/users/yitian134","html_url":"https://github.com/yitian134","followers_url":"https://api.github.com/users/yitian134/followers","following_url":"https://api.github.com/users/yitian134/following{/other_user}","gists_url":"https://api.github.com/users/yitian134/gists{/gist_id}","starred_url":"https://api.github.com/users/yitian134/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitian134/subscriptions","organizations_url":"https://api.github.com/users/yitian134/orgs","repos_url":"https://api.github.com/users/yitian134/repos","events_url":"https://api.github.com/users/yitian134/events{/privacy}","received_events_url":"https://api.github.com/users/yitian134/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-05T05:48:59Z","updated_at":"2018-08-05T05:48:59Z","author_association":"NONE","body":"因为有时候项目排期紧，会写一些很trick的代码。\r\n比如以前做的一个项目，server处理过程中会调用wget下载视频，这个就会阻塞住，它是在等待io但没异步。 类似这种情况，更好的方式就是预估好线程数是吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410497637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410497921","html_url":"https://github.com/apache/brpc/issues/438#issuecomment-410497921","issue_url":"https://api.github.com/repos/apache/brpc/issues/438","id":410497921,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDQ5NzkyMQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-05T05:57:04Z","updated_at":"2018-08-05T05:57:04Z","author_association":"CONTRIBUTOR","body":"这个case更好的方式是用http的[持续下载](https://github.com/brpc/brpc/blob/master/docs/cn/http_client.md#%E6%8C%81%E7%BB%AD%E4%B8%8B%E8%BD%BD)。不动代码就只能调多线程数。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410497921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410498281","html_url":"https://github.com/apache/brpc/issues/438#issuecomment-410498281","issue_url":"https://api.github.com/repos/apache/brpc/issues/438","id":410498281,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDQ5ODI4MQ==","user":{"login":"yitian134","id":8611425,"node_id":"MDQ6VXNlcjg2MTE0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8611425?v=4","gravatar_id":"","url":"https://api.github.com/users/yitian134","html_url":"https://github.com/yitian134","followers_url":"https://api.github.com/users/yitian134/followers","following_url":"https://api.github.com/users/yitian134/following{/other_user}","gists_url":"https://api.github.com/users/yitian134/gists{/gist_id}","starred_url":"https://api.github.com/users/yitian134/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitian134/subscriptions","organizations_url":"https://api.github.com/users/yitian134/orgs","repos_url":"https://api.github.com/users/yitian134/repos","events_url":"https://api.github.com/users/yitian134/events{/privacy}","received_events_url":"https://api.github.com/users/yitian134/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-05T06:06:56Z","updated_at":"2018-08-05T06:06:56Z","author_association":"NONE","body":"多谢戈神解答~ 求带呀😀","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410498281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410500088","html_url":"https://github.com/apache/brpc/issues/346#issuecomment-410500088","issue_url":"https://api.github.com/repos/apache/brpc/issues/346","id":410500088,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDUwMDA4OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-05T06:54:48Z","updated_at":"2018-08-05T06:54:48Z","author_association":"CONTRIBUTOR","body":"this issue was not fixed yet.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410500088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410500480","html_url":"https://github.com/apache/brpc/issues/433#issuecomment-410500480","issue_url":"https://api.github.com/repos/apache/brpc/issues/433","id":410500480,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDUwMDQ4MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-05T07:03:41Z","updated_at":"2018-08-05T07:03:41Z","author_association":"CONTRIBUTOR","body":"max_connection_pool_size的描述不太准确，gydong说的是对的。更准确的描述是，在归还连接时发现超过max_connection_pool_size就关闭掉连接。max_connection_pool_size整体上要符合并发，否则超出的部分在效果上就类似于短连接，会被频繁建立和关闭。\r\nidle_timeout_second影响的是池子中的闲置连接，长久不用会被关掉，但这里不是闲置，而是不够。\r\n你可以继续调大max_connection_pool_size，或使用单连接。baidu_std默认就是单链接，一般无需修改。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410500480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410501805","html_url":"https://github.com/apache/brpc/issues/373#issuecomment-410501805","issue_url":"https://api.github.com/repos/apache/brpc/issues/373","id":410501805,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDUwMTgwNQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-05T07:32:48Z","updated_at":"2018-08-05T07:32:48Z","author_association":"CONTRIBUTOR","body":"examples prefer static linkages when the .a is present. Check your compilation env.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410501805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410501975","html_url":"https://github.com/apache/brpc/issues/379#issuecomment-410501975","issue_url":"https://api.github.com/repos/apache/brpc/issues/379","id":410501975,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDUwMTk3NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-05T07:36:24Z","updated_at":"2018-08-05T07:36:24Z","author_association":"CONTRIBUTOR","body":"主干应该没有这个问题了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/410501975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]