[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773362822","html_url":"https://github.com/apache/accumulo/issues/1902#issuecomment-773362822","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1902","id":773362822,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzM2MjgyMg==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T14:45:19Z","updated_at":"2021-02-04T14:45:19Z","author_association":"CONTRIBUTOR","body":"Closing as per the discussion above. If anyone has additional comments or feedback, they can still comment on this issue thread. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773362822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773433957","html_url":"https://github.com/apache/accumulo/issues/1872#issuecomment-773433957","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1872","id":773433957,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzQzMzk1Nw==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T16:25:05Z","updated_at":"2021-02-04T16:25:05Z","author_association":"CONTRIBUTOR","body":"Is it feasible to cancel bulk imports if a table is being deleted?  Could save a lot of work / waiting for a bulk import to complete and then just turn around and throw it away.  If you wonder how this could happen?  If someone had asynchronous processes that handled bulk imports and a second process that scheduled deletions - unless those processes are communicating it seems feasible that if a table had a bulk import that was taking a long time and for whatever reason that table became obsoleted, then the \"deleter\" could issue the delete while that bulk import was still being performed.  While it's not unreasonable to expect users to have better coordination of their processing - have Accumulo optimize efforts when feasible would not be a bad thing in this case. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773433957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773436953","html_url":"https://github.com/apache/accumulo/issues/1909#issuecomment-773436953","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1909","id":773436953,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzQzNjk1Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T16:29:23Z","updated_at":"2021-02-04T16:29:23Z","author_association":"MEMBER","body":"@dlmarion Do you think this might be related to #1896 or #1866?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773436953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773455804","html_url":"https://github.com/apache/accumulo/issues/1909#issuecomment-773455804","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1909","id":773455804,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzQ1NTgwNA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T16:55:39Z","updated_at":"2021-02-04T16:55:39Z","author_association":"CONTRIBUTOR","body":"I don't think it's related. I have run this test many times without those\nissues. Is it continually happening?\n\nOn Thu, Feb 4, 2021 at 11:29 AM Christopher Tubbs <notifications@github.com>\nwrote:\n\n> @dlmarion <https://github.com/dlmarion> Do you think this might be\n> related to #1896 <https://github.com/apache/accumulo/pull/1896> or #1866\n> <https://github.com/apache/accumulo/pull/1866>?\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/issues/1909#issuecomment-773436953>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAEKUZ2PYA6ZRKGLSIOL2HDS5LDPLANCNFSM4XDEBD7A>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773455804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773505326","html_url":"https://github.com/apache/accumulo/pull/1910#issuecomment-773505326","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1910","id":773505326,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzUwNTMyNg==","user":{"login":"slackwinner","id":50567198,"node_id":"MDQ6VXNlcjUwNTY3MTk4","avatar_url":"https://avatars.githubusercontent.com/u/50567198?v=4","gravatar_id":"","url":"https://api.github.com/users/slackwinner","html_url":"https://github.com/slackwinner","followers_url":"https://api.github.com/users/slackwinner/followers","following_url":"https://api.github.com/users/slackwinner/following{/other_user}","gists_url":"https://api.github.com/users/slackwinner/gists{/gist_id}","starred_url":"https://api.github.com/users/slackwinner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slackwinner/subscriptions","organizations_url":"https://api.github.com/users/slackwinner/orgs","repos_url":"https://api.github.com/users/slackwinner/repos","events_url":"https://api.github.com/users/slackwinner/events{/privacy}","received_events_url":"https://api.github.com/users/slackwinner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T18:11:54Z","updated_at":"2021-02-23T17:13:53Z","author_association":"CONTRIBUTOR","body":"@ctubbsii This is still in a work in progress but I wanted to share what I have done so far. Essentially, I added a \"jshell entry\" in bin/accumulo so that the user can easily activate jshell with the classpath imported. In addition, there is a jshell-init.jsh file that allows the user to load in the default Accumulo public APIs. Also the user can customize jshell-init by adding or removing public APIs. Currently jshell-init has hard coded public APIs as I am  still figuring out how to import the classes automatically as well as making sure the classes are always up to date during a build. Feel free to comment if you have any suggestions/ideas on how to automate the import process or improve the jshell feature as a whole. Below are simple examples on how to boot up Jshell with Accumulo. \r\n\r\nUpdate as of 02/18: I've included a bash script that auto generates jshell-init-.jsh and is invoked by maven. Once the Accumulo package is built, the JShell Accumulo Feature is ready for usage.\r\n\r\n**Starting JShell with Accumulo (Updated as of 02/18):**\r\n_$ bin/accumulo jshell_\r\n- This cmd will pass the $CLASSPATH to Jshell and import the default java libraries and Accumulo public APIs from the .jsh file.\r\n\r\n_$ bin/accumulo jshell --startup (Path to user's custom file(s))_\r\n- This cmd will pass the $CLASSPATH to Jshell and import the default Java libraries first before importing the user's custom file(s)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773505326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773538393","html_url":"https://github.com/apache/accumulo/pull/1888#issuecomment-773538393","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1888","id":773538393,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzUzODM5Mw==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T19:07:47Z","updated_at":"2021-02-04T19:07:47Z","author_association":"MEMBER","body":"From your results, this test is still indeed flaky despite my changes. A few of these errors I have never received while running this test on my machine. I will leave my analysis of the errors below:  \r\n\r\n**The failed assert on line 253:** \r\nThe test keeps track of when it can first scan the metadata table after it kills the servers. A comment at this point claims that a tablet can not be suspended before the metadata table can be scanned. It also keeps track of when all suspended tablets are re-hosted. The test asserts that the suspend time is less than the time between those two points. It seems this assert checks to make sure the suspend time is roughly the duration we think it will be (between first scan on metadata table and re-host). Either this is an incorrect assumption, the suspend time is lasting longer than it should, or the tablets are re-hosted before they should be. \r\n\r\n**The failed assert on line 243:**\r\nChecks that the suspended tablet locations on a server are the same as the tablet locations on that server after it is restarted. This is checking that the tablets are reassigned to the same server in the same location after the server is restarted. If it fails, tablets were either lost, migrated or the way that the test checks this is incorrect. \r\n\r\n**The failed assert on line 225:** \r\nThis is the most common assert I have received (maybe because it happens first in the test, blocking the others). This occurs when the tablet locations, before and after servers are suspended, differ. This means that the tablets are migrating when they are not supposed to, or the way the test measures the locations is flawed.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773538393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773539060","html_url":"https://github.com/apache/accumulo/pull/1888#issuecomment-773539060","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1888","id":773539060,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzUzOTA2MA==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T19:08:57Z","updated_at":"2021-02-04T19:08:57Z","author_association":"MEMBER","body":"It seems results differ depending on what machine this test is run.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773539060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773550502","html_url":"https://github.com/apache/accumulo/issues/1872#issuecomment-773550502","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1872","id":773550502,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzU1MDUwMg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T19:28:41Z","updated_at":"2021-02-04T19:28:41Z","author_association":"CONTRIBUTOR","body":"> Is it feasible to cancel bulk imports if a table is being deleted? Could save a lot of work / waiting for a bulk import to complete and then just turn around and throw it away. If you wonder how this could happen? If someone had asynchronous processes that handled bulk imports and a second process that scheduled deletions - unless those processes are communicating it seems feasible that if a table had a bulk import that was taking a long time and for whatever reason that table became obsoleted, then the \"deleter\" could issue the delete while that bulk import was still being performed. While it's not unreasonable to expect users to have better coordination of their processing - have Accumulo optimize efforts when feasible would not be a bad thing in this case.\r\n\r\nWe already have the `BulkImportCacheCleaner` so it may not be bad to modify it to handle cancelled bulk imports or look for a deleted flag.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773550502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773561470","html_url":"https://github.com/apache/accumulo/issues/1909#issuecomment-773561470","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1909","id":773561470,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzU2MTQ3MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T19:48:02Z","updated_at":"2021-02-04T19:48:02Z","author_association":"MEMBER","body":"> I don't think it's related.\r\n\r\nIt has to be related. The code that failed is brand new in #1866. I just checked.\r\n\r\n> I have run this test many times without those issues. Is it continually happening?\r\n\r\nI don't know how often it happens, only that it's a new failure that didn't happen before (it couldn't have, since this test code is new). ConnectionLoss is usually a transient issue, so I suspect the test can be made to handle it. Since ConnectionLoss can happen frequently, it makes me wonder if the code change in #1896 to use ZK directly (instead of ZooReaderWriter, which handles ConnectionLoss) may also be affected by transient issues like this one that affects this test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773561470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773563654","html_url":"https://github.com/apache/accumulo/pull/1910#issuecomment-773563654","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1910","id":773563654,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzU2MzY1NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T19:51:21Z","updated_at":"2021-02-04T19:51:21Z","author_association":"MEMBER","body":"@slackwinner Since you're still working on this, I converted it to a Draft pull request.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773563654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773579737","html_url":"https://github.com/apache/accumulo/issues/1909#issuecomment-773579737","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1909","id":773579737,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzU3OTczNw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T20:20:23Z","updated_at":"2021-02-04T20:20:23Z","author_association":"CONTRIBUTOR","body":"FYI You can drag and drop text files (with .txt extentions) to attach files to an issue. It is useful for logs so it won't show up in notification messages.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773579737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773605391","html_url":"https://github.com/apache/accumulo/pull/1907#issuecomment-773605391","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1907","id":773605391,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzYwNTM5MQ==","user":{"login":"brianloss","id":5400335,"node_id":"MDQ6VXNlcjU0MDAzMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5400335?v=4","gravatar_id":"","url":"https://api.github.com/users/brianloss","html_url":"https://github.com/brianloss","followers_url":"https://api.github.com/users/brianloss/followers","following_url":"https://api.github.com/users/brianloss/following{/other_user}","gists_url":"https://api.github.com/users/brianloss/gists{/gist_id}","starred_url":"https://api.github.com/users/brianloss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brianloss/subscriptions","organizations_url":"https://api.github.com/users/brianloss/orgs","repos_url":"https://api.github.com/users/brianloss/repos","events_url":"https://api.github.com/users/brianloss/events{/privacy}","received_events_url":"https://api.github.com/users/brianloss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T21:09:52Z","updated_at":"2021-02-04T21:09:52Z","author_association":"MEMBER","body":"@ctubbsii it seems removing the Manager main method broke minicluster, so I pushed a fix for that in a new commit. I tried to make use of the KeywordExecutable class there too.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/773605391/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774045325","html_url":"https://github.com/apache/accumulo/pull/1892#issuecomment-774045325","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1892","id":774045325,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDA0NTMyNQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T13:52:19Z","updated_at":"2021-02-05T13:52:19Z","author_association":"MEMBER","body":"@DomGarguilo It looks like this change broke some integration tests. Would you mind looking into those? Specifically, I saw the following tests fail after this change was merged: ReadWriteIT, RecoveryWithEmptyRFileIT, RenameIT, ShutdownIT, SslIT, SslWithClientAuthIT (some of these may extend each other, so there may be fewer than 6 problems)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774045325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774047768","html_url":"https://github.com/apache/accumulo/issues/1909#issuecomment-774047768","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1909","id":774047768,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDA0Nzc2OA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T13:56:40Z","updated_at":"2021-02-05T13:56:40Z","author_association":"MEMBER","body":"@dlmarion In answer to your previous question about how frequent the failure is: it has failed in 4 out of 4 Jenkins builds since #1896. The ConnectionLoss was the first I saw, but the other 3 were:\r\n\r\n```java\r\njava.lang.AssertionError\r\n\tat org.junit.Assert.fail(Assert.java:87)\r\n\tat org.junit.Assert.assertTrue(Assert.java:42)\r\n\tat org.junit.Assert.assertTrue(Assert.java:53)\r\n\tat org.apache.accumulo.test.fate.zookeeper.ZooLockIT.testLockSerial(ZooLockIT.java:436)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n```\r\n\r\nOne had an repeated message in STDOUT that looked like:\r\n\r\n```\r\n2021-02-05T04:34:20,692 [zookeeper.ZooLock] DEBUG: [zlock#f1fde7ea-8561-4744-a1e0-85fad77cb5f7#] Renewing watch on prior node  /zltestDeleteWaiting-1685185170-l1/zlock#64cdee91-3fc3-4957-b57c-d6bf315bb550#0000000000\r\n```\r\n\r\nTwo others had:\r\n\r\n```\r\n2021-02-04T23:37:51,181 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#] Ephemeral node /zlretryLockSerial/zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000 created\r\n2021-02-04T23:37:51,182 [zookeeper.ZooLock] DEBUG: validating and sorting children at path /zlretryLockSerial\r\n2021-02-04T23:37:51,182 [zookeeper.ZooLock] DEBUG: Children nodes: 1\r\n2021-02-04T23:37:51,183 [zookeeper.ZooLock] DEBUG: - zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\r\n2021-02-04T23:37:51,183 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#] Setting watcher on /zlretryLockSerial/zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\r\n2021-02-04T23:37:51,184 [zookeeper.ZooLock] DEBUG: validating and sorting children at path /zlretryLockSerial\r\n2021-02-04T23:37:51,184 [zookeeper.ZooLock] DEBUG: Children nodes: 1\r\n2021-02-04T23:37:51,184 [zookeeper.ZooLock] DEBUG: - zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\r\n2021-02-04T23:37:51,184 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#] First candidate is my lock, acquiring...\r\n2021-02-04T23:37:51,186 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#] Ephemeral node /zlretryLockSerial/zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#0000000001 created\r\n2021-02-04T23:37:51,187 [zookeeper.ZooLock] DEBUG: validating and sorting children at path /zlretryLockSerial\r\n2021-02-04T23:37:51,187 [zookeeper.ZooLock] DEBUG: Children nodes: 2\r\n2021-02-04T23:37:51,187 [zookeeper.ZooLock] DEBUG: - zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\r\n2021-02-04T23:37:51,187 [zookeeper.ZooLock] DEBUG: - zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#0000000001\r\n2021-02-04T23:37:51,187 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#] Setting watcher on /zlretryLockSerial/zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#0000000001\r\n2021-02-04T23:37:51,188 [zookeeper.ZooLock] DEBUG: validating and sorting children at path /zlretryLockSerial\r\n2021-02-04T23:37:51,188 [zookeeper.ZooLock] DEBUG: Children nodes: 2\r\n2021-02-04T23:37:51,189 [zookeeper.ZooLock] DEBUG: - zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\r\n2021-02-04T23:37:51,189 [zookeeper.ZooLock] DEBUG: - zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#0000000001\r\n2021-02-04T23:37:51,189 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#] Lock held by another process with ephemeral node: zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\r\n2021-02-04T23:37:51,189 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#] Establishing watch on prior node /zlretryLockSerial/zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774047768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774051380","html_url":"https://github.com/apache/accumulo/issues/1909#issuecomment-774051380","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1909","id":774051380,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDA1MTM4MA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T14:03:12Z","updated_at":"2021-02-05T14:03:12Z","author_association":"CONTRIBUTOR","body":"So, it passes when building locally and in the GitHub CI build. What's\ndifferent about the Jenkins server? Using the native client was something\nsuggest in this comment thread:\nhttps://github.com/apache/accumulo/pull/1677#discussion_r469470006. I'm not\nsure what the solution should be here, since we were specifically getting\nrid of the retries...\n\nOn Fri, Feb 5, 2021 at 8:57 AM Christopher Tubbs <notifications@github.com>\nwrote:\n\n> @dlmarion <https://github.com/dlmarion> In answer to your previous\n> question about how frequent the failure is: it has failed in 4 out of 4\n> Jenkins builds since #1896 <https://github.com/apache/accumulo/pull/1896>.\n> The ConnectionLoss was the first I saw, but the other 3 were:\n>\n> java.lang.AssertionError\n> \tat org.junit.Assert.fail(Assert.java:87)\n> \tat org.junit.Assert.assertTrue(Assert.java:42)\n> \tat org.junit.Assert.assertTrue(Assert.java:53)\n> \tat org.apache.accumulo.test.fate.zookeeper.ZooLockIT.testLockSerial(ZooLockIT.java:436)\n> \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n>\n> One had an repeated message in STDOUT that looked like:\n>\n> 2021-02-05T04:34:20,692 [zookeeper.ZooLock] DEBUG: [zlock#f1fde7ea-8561-4744-a1e0-85fad77cb5f7#] Renewing watch on prior node  /zltestDeleteWaiting-1685185170-l1/zlock#64cdee91-3fc3-4957-b57c-d6bf315bb550#0000000000\n>\n> Two others had:\n>\n> 2021-02-04T23:37:51,181 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#] Ephemeral node /zlretryLockSerial/zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000 created\n> 2021-02-04T23:37:51,182 [zookeeper.ZooLock] DEBUG: validating and sorting children at path /zlretryLockSerial\n> 2021-02-04T23:37:51,182 [zookeeper.ZooLock] DEBUG: Children nodes: 1\n> 2021-02-04T23:37:51,183 [zookeeper.ZooLock] DEBUG: - zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\n> 2021-02-04T23:37:51,183 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#] Setting watcher on /zlretryLockSerial/zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\n> 2021-02-04T23:37:51,184 [zookeeper.ZooLock] DEBUG: validating and sorting children at path /zlretryLockSerial\n> 2021-02-04T23:37:51,184 [zookeeper.ZooLock] DEBUG: Children nodes: 1\n> 2021-02-04T23:37:51,184 [zookeeper.ZooLock] DEBUG: - zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\n> 2021-02-04T23:37:51,184 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#] First candidate is my lock, acquiring...\n> 2021-02-04T23:37:51,186 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#] Ephemeral node /zlretryLockSerial/zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#0000000001 created\n> 2021-02-04T23:37:51,187 [zookeeper.ZooLock] DEBUG: validating and sorting children at path /zlretryLockSerial\n> 2021-02-04T23:37:51,187 [zookeeper.ZooLock] DEBUG: Children nodes: 2\n> 2021-02-04T23:37:51,187 [zookeeper.ZooLock] DEBUG: - zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\n> 2021-02-04T23:37:51,187 [zookeeper.ZooLock] DEBUG: - zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#0000000001\n> 2021-02-04T23:37:51,187 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#] Setting watcher on /zlretryLockSerial/zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#0000000001\n> 2021-02-04T23:37:51,188 [zookeeper.ZooLock] DEBUG: validating and sorting children at path /zlretryLockSerial\n> 2021-02-04T23:37:51,188 [zookeeper.ZooLock] DEBUG: Children nodes: 2\n> 2021-02-04T23:37:51,189 [zookeeper.ZooLock] DEBUG: - zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\n> 2021-02-04T23:37:51,189 [zookeeper.ZooLock] DEBUG: - zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#0000000001\n> 2021-02-04T23:37:51,189 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#] Lock held by another process with ephemeral node: zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\n> 2021-02-04T23:37:51,189 [zookeeper.ZooLock] DEBUG: [zlock#00000000-0000-0000-0000-bbbbbbbbbbbb#] Establishing watch on prior node /zlretryLockSerial/zlock#00000000-0000-0000-0000-aaaaaaaaaaaa#0000000000\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/issues/1909#issuecomment-774047768>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAEKUZYVGRXDLAMHSCF7VPLS5P2KVANCNFSM4XDEBD7A>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774051380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774054234","html_url":"https://github.com/apache/accumulo/pull/1907#issuecomment-774054234","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1907","id":774054234,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDA1NDIzNA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T14:08:26Z","updated_at":"2021-02-05T14:08:26Z","author_association":"MEMBER","body":"> @ctubbsii it seems removing the Manager main method broke minicluster, so I pushed a fix for that in a new commit. I tried to make use of the KeywordExecutable class there too.\r\n\r\nAh, I didn't think about minicluster using them. I figured it was using our Main class entry point. Thanks for catching that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774054234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774056780","html_url":"https://github.com/apache/accumulo/pull/1892#issuecomment-774056780","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1892","id":774056780,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDA1Njc4MA==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T14:13:06Z","updated_at":"2021-02-05T14:13:06Z","author_association":"MEMBER","body":"> Would you mind looking into those?\r\n\r\nSure, will do @ctubbsii \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774056780/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774059314","html_url":"https://github.com/apache/accumulo/issues/1909#issuecomment-774059314","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1909","id":774059314,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDA1OTMxNA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T14:17:35Z","updated_at":"2021-02-05T14:17:35Z","author_association":"MEMBER","body":"It doesn't pass locally for me. It fails on the assertion on line 436, as in the above. It seems the missing handling of the transient ConnectionLoss issue is only one problem. The assertion failure is a separate problem. When it failed locally for me, there were no errors or warnings in any logs other than the normal warnings about swappiness or deprecated config properties, and typical warnings from ZK client threads when the ZK session is closed at the end of the test.\r\n\r\nSo, it seems this assertion is catching actual incorrect code logic somewhere.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774059314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774060408","html_url":"https://github.com/apache/accumulo/issues/1909#issuecomment-774060408","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1909","id":774060408,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDA2MDQwOA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T14:19:24Z","updated_at":"2021-02-05T14:19:24Z","author_association":"CONTRIBUTOR","body":"Interesting. Ok, I will look at it on Monday.\n\nOn Fri, Feb 5, 2021 at 9:17 AM Christopher Tubbs <notifications@github.com>\nwrote:\n\n> It doesn't pass locally for me. It fails on the assertion on line 436, as\n> in the above. It seems the missing handling of the transient ConnectionLoss\n> issue is only one problem. The assertion failure is a separate problem.\n> When it failed locally for me, there were no errors or warnings in any logs\n> other than the normal warnings about swappiness or deprecated config\n> properties, and typical warnings from ZK client threads when the ZK session\n> is closed at the end of the test.\n>\n> So, it seems this assertion is catching actual incorrect code logic\n> somewhere.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/issues/1909#issuecomment-774059314>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAEKUZ5QSTHF5DH72BEHDLDS5P4Y7ANCNFSM4XDEBD7A>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774060408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774104080","html_url":"https://github.com/apache/accumulo/pull/1911#issuecomment-774104080","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1911","id":774104080,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDEwNDA4MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T15:30:32Z","updated_at":"2021-02-05T15:30:32Z","author_association":"MEMBER","body":"@milleruntime Have you already made corresponding changes (if necessary) in accumulo-testing repo for 2.x?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774104080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774113139","html_url":"https://github.com/apache/accumulo/issues/1872#issuecomment-774113139","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1872","id":774113139,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDExMzEzOQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T15:45:34Z","updated_at":"2021-02-05T15:46:18Z","author_association":"CONTRIBUTOR","body":"> In 1.10 there is also some code w/ the intent to cancel compactions.\r\n> \r\n> https://github.com/apache/accumulo/blob/018756754ff0f289a8b30f846af8b7092270318d/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/Tablet.java#L1365\r\n> \r\n> Wonder if these are working as intended.\r\n\r\nI was able to see a compaction cancelled while testing 1.10. This exception was thrown in the compactor:\r\nhttps://github.com/apache/accumulo/blob/0a9837f3f8395d89c5cd7bab7805c4aae28919be/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/Compactor.java#L406\r\n```\r\ntserver_2.debug.log:2021-02-05 10:25:33,463 [tablet.Tablet] DEBUG: Starting MajC e<;9 (NORMAL) [hdfs://localhost:8020/accumulo/tables/e/b-00000mp/I00000ms.rf, hdfs://localhost:8020/accumulo/tables/e/default_tablet/A00000g5.rf, hdfs://localhost:8020/accumulo/tables/e/b-00000mp/I00000mr.rf, hdfs://localhost:8020/accumulo/tables/e/b-00000mp/I00000mv.rf, hdfs://localhost:8020/accumulo/tables/e/b-00000mp/I00000mq.rf, hdfs://localhost:8020/accumulo/tables/e/b-00000mp/I00000mw.rf, hdfs://localhost:8020/accumulo/tables/e/b-00000mp/I00000mt.rf, hdfs://localhost:8020/accumulo/tables/e/b-00000mp/I00000mu.rf] --> hdfs://localhost:8020/accumulo/tables/e/default_tablet/A00000g6.rf_tmp  []\r\nmaster.log: 2021-02-05 10:25:34,235 [tables.TableManager] DEBUG: Transitioning state for table e from ONLINE to DELETING\r\ntserver_2.debug.log:2021-02-05 10:25:34,402 [tablet.Tablet] DEBUG: initiateClose(saveState=false queueMinC=false disableWrites=false) e<;9\r\ntserver_2.debug.log:2021-02-05 10:25:34,828 [tablet.Tablet] DEBUG: Major compaction canceled, extent = e<;9\r\ntserver_2.debug.log:2021-02-05 10:25:34,828 [tablet.Tablet] DEBUG: completeClose(saveState=false completeClose=true) e<;9\r\ntserver_2.debug.log:2021-02-05 10:25:34,828 [tablet.Tablet] TABLET_HIST: e<;9 closed\r\ntserver_2.debug.log:2021-02-05 10:25:34,828 [tserver.TabletServer] DEBUG: Unassigning e<;9@(null,localhost:11000[100007e21d80002],null)\r\ntserver_2.debug.log:2021-02-05 10:25:34,841 [tserver.TabletServer] INFO : unloaded e<;9\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774113139/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774117455","html_url":"https://github.com/apache/accumulo/pull/1911#issuecomment-774117455","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1911","id":774117455,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDExNzQ1NQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T15:52:34Z","updated_at":"2021-02-05T15:52:34Z","author_association":"CONTRIBUTOR","body":"> @milleruntime Have you already made corresponding changes (if necessary) in accumulo-testing repo for 2.x?\r\n\r\nNot yet. I was going to copy what I merged into 1.10 and then go from there.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774117455/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774136831","html_url":"https://github.com/apache/accumulo/pull/1892#issuecomment-774136831","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1892","id":774136831,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDEzNjgzMQ==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T16:25:06Z","updated_at":"2021-02-05T16:25:06Z","author_association":"MEMBER","body":"Was able to reproduce the failures in these tests. Tracked the error down to a single change, which after fixing, these tests pass successfully. I can make a PR for this fix @ctubbsii ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774136831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774244053","html_url":"https://github.com/apache/accumulo/pull/1913#issuecomment-774244053","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1913","id":774244053,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDI0NDA1Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T19:34:14Z","updated_at":"2021-02-05T19:34:14Z","author_association":"MEMBER","body":"Thanks, @DomGarguilo !","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/774244053/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/775171970","html_url":"https://github.com/apache/accumulo/issues/1884#issuecomment-775171970","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1884","id":775171970,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NTE3MTk3MA==","user":{"login":"gancho-ivanov","id":77007944,"node_id":"MDQ6VXNlcjc3MDA3OTQ0","avatar_url":"https://avatars.githubusercontent.com/u/77007944?v=4","gravatar_id":"","url":"https://api.github.com/users/gancho-ivanov","html_url":"https://github.com/gancho-ivanov","followers_url":"https://api.github.com/users/gancho-ivanov/followers","following_url":"https://api.github.com/users/gancho-ivanov/following{/other_user}","gists_url":"https://api.github.com/users/gancho-ivanov/gists{/gist_id}","starred_url":"https://api.github.com/users/gancho-ivanov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gancho-ivanov/subscriptions","organizations_url":"https://api.github.com/users/gancho-ivanov/orgs","repos_url":"https://api.github.com/users/gancho-ivanov/repos","events_url":"https://api.github.com/users/gancho-ivanov/events{/privacy}","received_events_url":"https://api.github.com/users/gancho-ivanov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-08T14:03:09Z","updated_at":"2021-02-08T14:03:09Z","author_association":"NONE","body":"+1 to add CI on ARM64!\r\n\r\n@ctubbsii Accumulo is coded mostly in Java but still there is `server/native` that produces a `.so` (Linux native library). I have built Accumulo on ARM64 hardware and there is no problem, but with a CI we could be sure that there are no regressions.\r\nAlso, in the past I've had problems with third party dependencies like Protobuf-Java and Brotli. That is, the project itself is platform independent but some of the dependencies may lead to problems.\r\n\r\nAccumulo uses GitHub Actions and there is no support for ARM64 there yet (it is [planned](https://github.com/github/roadmap/issues/95) for Q1 2021 though) but you may use TravisCI just for testing on ARM64 (and PPC64, s390x). If you like the idea I'd be happy to provide a Pull Request!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/775171970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/775183842","html_url":"https://github.com/apache/accumulo/issues/1884#issuecomment-775183842","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1884","id":775183842,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NTE4Mzg0Mg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-08T14:22:17Z","updated_at":"2021-02-08T14:22:17Z","author_association":"MEMBER","body":"> Accumulo uses GitHub Actions and there is no support for ARM64 there yet (it is [planned](https://github.com/github/roadmap/issues/95) for Q1 2021 though) but you may use TravisCI just for testing on ARM64 (and PPC64, s390x). If you like the idea I'd be happy to provide a Pull Request!\r\n\r\nTravisCI was previously used, but we discontinued that for several reasons. If support for these are coming in Q1 2021, then I would prefer we wait until then to add testing for other arches, rather than reintroduce TravisCI.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/775183842/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/775210825","html_url":"https://github.com/apache/accumulo/issues/1909#issuecomment-775210825","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1909","id":775210825,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NTIxMDgyNQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-08T15:02:19Z","updated_at":"2021-02-08T15:02:19Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - I was able to replicate this. The issue stemmed from the changes in removing the constructor in ZooLock that was only called by the ZooLockIT.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/775210825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/775554207","html_url":"https://github.com/apache/accumulo/pull/1917#issuecomment-775554207","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1917","id":775554207,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NTU1NDIwNw==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T00:16:15Z","updated_at":"2021-02-09T00:16:15Z","author_association":"CONTRIBUTOR","body":"> The API will throw an error without the proper extension. \r\n\r\nWas the error message informative?\r\n\r\nIn addition to javadocs updates, would it make sense to throw an exception at the following line if the file name does end w/ the expected prefix?  Thinking this could be a place to throw an informative error message. \r\n\r\nhttps://github.com/apache/accumulo/blob/daa6985409618e6242cbaf693a908d94abd55d9e/core/src/main/java/org/apache/accumulo/core/client/rfile/RFileWriterBuilder.java#L112","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/775554207/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/775705106","html_url":"https://github.com/apache/accumulo/pull/1917#issuecomment-775705106","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1917","id":775705106,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NTcwNTEwNg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T06:30:31Z","updated_at":"2021-02-09T06:30:31Z","author_association":"MEMBER","body":"> Thinking this could be a place to throw an informative error message.\r\n> \r\n> https://github.com/apache/accumulo/blob/daa6985409618e6242cbaf693a908d94abd55d9e/core/src/main/java/org/apache/accumulo/core/client/rfile/RFileWriterBuilder.java#L112\r\n\r\nYes, an IllegalArgumentException would be nice here.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/775705106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776068819","html_url":"https://github.com/apache/accumulo/pull/1917#issuecomment-776068819","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1917","id":776068819,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjA2ODgxOQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T16:34:06Z","updated_at":"2021-02-09T16:34:06Z","author_association":"CONTRIBUTOR","body":"We are throwing `IllegalArgumentException`.\r\n`java.lang.IllegalArgumentException: File name test2743857433138030645 has no extension`\r\n`java.lang.IllegalArgumentException: File type dat not supported`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776068819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776121664","html_url":"https://github.com/apache/accumulo/pull/1912#issuecomment-776121664","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1912","id":776121664,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjEyMTY2NA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T17:51:16Z","updated_at":"2021-02-09T17:51:16Z","author_association":"CONTRIBUTOR","body":"Hey @brianloss - Do you know if client code needs to be updated with these changes? I just tried a fresh setup in Uno with these changes included and my client is hanging on a table create. I thought the old client would work but that might not be the case.\r\nFrom jstack:\r\n<pre>\r\nat org.apache.accumulo.fate.util.UtilWaitThread.sleepUninterruptibly(UtilWaitThread.java:57)\r\n        at org.apache.accumulo.core.clientImpl.MasterClient.getConnectionWithRetry(MasterClient.java:52)\r\n        at org.apache.accumulo.core.clientImpl.TableOperationsImpl.beginFateOperation(TableOperationsImpl.java:258)\r\n        at org.apache.accumulo.core.clientImpl.TableOperationsImpl.doFateOperation(TableOperationsImpl.java:365)\r\n        at org.apache.accumulo.core.clientImpl.TableOperationsImpl.doFateOperation(TableOperationsImpl.java:355)\r\n        at org.apache.accumulo.core.clientImpl.TableOperationsImpl.doTableFateOperation(TableOperationsImpl.java:1694)\r\n        at org.apache.accumulo.core.clientImpl.TableOperationsImpl.create(TableOperationsImpl.java:246)\r\n        at org.apache.accumulo.core.clientImpl.TableOperationsImpl.create(TableOperationsImpl.java:216)\r\n        at org.apache.accumulo.testing.randomwalk.multitable.CreateTable.visit(CreateTable.java:48)\r\n        at org.apache.accumulo.testing.randomwalk.Module.visit(Module.java:237)\r\n        at org.apache.accumulo.testing.randomwalk.Framework.run(Framework.java:48)\r\n        at org.apache.accumulo.testing.randomwalk.Framework.main(Framework.java:92)\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776121664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776137525","html_url":"https://github.com/apache/accumulo/pull/1912#issuecomment-776137525","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1912","id":776137525,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjEzNzUyNQ==","user":{"login":"brianloss","id":5400335,"node_id":"MDQ6VXNlcjU0MDAzMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5400335?v=4","gravatar_id":"","url":"https://api.github.com/users/brianloss","html_url":"https://github.com/brianloss","followers_url":"https://api.github.com/users/brianloss/followers","following_url":"https://api.github.com/users/brianloss/following{/other_user}","gists_url":"https://api.github.com/users/brianloss/gists{/gist_id}","starred_url":"https://api.github.com/users/brianloss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brianloss/subscriptions","organizations_url":"https://api.github.com/users/brianloss/orgs","repos_url":"https://api.github.com/users/brianloss/repos","events_url":"https://api.github.com/users/brianloss/events{/privacy}","received_events_url":"https://api.github.com/users/brianloss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T18:15:19Z","updated_at":"2021-02-09T18:15:19Z","author_association":"MEMBER","body":"> Do you know if client code needs to be updated with these changes?\r\n\r\n@milleruntime with renaming the MasterClient class, yes, that means client code needs to be updated. I called out the incompatibility in my [PR for the release notes](https://github.com/apache/accumulo-website/pull/263/files#diff-83d7bf5ef06296a08ad334bf95e8db825a72737616f86dc20db6c69a4aa50c98R10). Before making the known breaking change, I had tried running a 2.0 client against a 2.1 server (or maybe I tested the reverse, now I don't recall for certain) and while the client came up, a scan against the metadata table hung. So I figured we already weren't compatible.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776137525/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776147456","html_url":"https://github.com/apache/accumulo/pull/1912#issuecomment-776147456","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1912","id":776147456,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjE0NzQ1Ng==","user":{"login":"brianloss","id":5400335,"node_id":"MDQ6VXNlcjU0MDAzMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5400335?v=4","gravatar_id":"","url":"https://api.github.com/users/brianloss","html_url":"https://github.com/brianloss","followers_url":"https://api.github.com/users/brianloss/followers","following_url":"https://api.github.com/users/brianloss/following{/other_user}","gists_url":"https://api.github.com/users/brianloss/gists{/gist_id}","starred_url":"https://api.github.com/users/brianloss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brianloss/subscriptions","organizations_url":"https://api.github.com/users/brianloss/orgs","repos_url":"https://api.github.com/users/brianloss/repos","events_url":"https://api.github.com/users/brianloss/events{/privacy}","received_events_url":"https://api.github.com/users/brianloss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T18:30:17Z","updated_at":"2021-02-09T18:30:17Z","author_association":"MEMBER","body":"@milleruntime, see the discussion on PR #1907 [here](https://github.com/apache/accumulo/pull/1907#discussion_r570257915).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776147456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776186543","html_url":"https://github.com/apache/accumulo/pull/1917#issuecomment-776186543","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1917","id":776186543,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjE4NjU0Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T19:31:22Z","updated_at":"2021-02-09T19:31:22Z","author_association":"MEMBER","body":"> We are throwing `IllegalArgumentException`.\r\n> `java.lang.IllegalArgumentException: File name test2743857433138030645 has no extension`\r\n> `java.lang.IllegalArgumentException: File type dat not supported`\r\n\r\nWhere is that being thrown? I think @keith-turner suggested we throw it in the builder's `to` method, which I agree would be great.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776186543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776188404","html_url":"https://github.com/apache/accumulo/pull/1917#issuecomment-776188404","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1917","id":776188404,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjE4ODQwNA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T19:34:21Z","updated_at":"2021-02-09T19:37:17Z","author_association":"CONTRIBUTOR","body":">> We are throwing `IllegalArgumentException`.\r\n>> `java.lang.IllegalArgumentException: File name test2743857433138030645 has no extension`\r\n>> `java.lang.IllegalArgumentException: File type dat not supported`\r\n>\r\n>Where is that being thrown? I think @keith-turner suggested we throw it in the builder's `to` method, which I agree would >be great.\r\n\r\nThe `to` method may be nice, I was more concerned about an actionable error message (the error message in the exception contains enough info to fix the problem).  Those messages could be improved to mention the expected extension of `.rf`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776188404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776221685","html_url":"https://github.com/apache/accumulo/pull/1917#issuecomment-776221685","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1917","id":776221685,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjIyMTY4NQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T20:27:46Z","updated_at":"2021-02-09T20:27:46Z","author_association":"CONTRIBUTOR","body":"Running a modified RFileTest in IntelliJ seems to give me the best stacktrace. The command line surefire report doesn't have the full stacktrace.\r\n<pre>\r\njava.lang.IllegalArgumentException: File type txt not supported\r\n\tat org.apache.accumulo.core.file.DispatchingFileFactory.findFileFactory(DispatchingFileFactory.java:53)\r\n\tat org.apache.accumulo.core.file.DispatchingFileFactory.openWriter(DispatchingFileFactory.java:78)\r\n\tat org.apache.accumulo.core.file.FileOperations$OpenWriterOperation.build(FileOperations.java:353)\r\n\tat org.apache.accumulo.core.client.rfile.RFileWriterBuilder.build(RFileWriterBuilder.java:100)\r\n\tat org.apache.accumulo.core.client.rfile.RFileTest.testSampling(RFileTest.java:446)\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776221685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776311174","html_url":"https://github.com/apache/accumulo/pull/1917#issuecomment-776311174","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1917","id":776311174,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjMxMTE3NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-09T23:21:01Z","updated_at":"2021-02-09T23:34:55Z","author_association":"MEMBER","body":"> java.lang.IllegalArgumentException: File type txt not supported\r\n> \tat org.apache.accumulo.core.file.DispatchingFileFactory.findFileFactory(DispatchingFileFactory.java:53)\r\n> \tat org.apache.accumulo.core.file.DispatchingFileFactory.openWriter(DispatchingFileFactory.java:78)\r\n> \tat org.apache.accumulo.core.file.FileOperations$OpenWriterOperation.build(FileOperations.java:353)\r\n> \tat org.apache.accumulo.core.client.rfile.RFileWriterBuilder.build(RFileWriterBuilder.java:100)\r\n> \tat org.apache.accumulo.core.client.rfile.RFileTest.testSampling(RFileTest.java:446)\r\n\r\nOkay, cool. So, we throw the IAE on `build()`. I do think it would make more sense on `to()`, at the time the incorrect argument is actually provided. (See my PR to your PR at https://github.com/milleruntime/accumulo/pull/15)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776311174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776505066","html_url":"https://github.com/apache/accumulo/issues/1884#issuecomment-776505066","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1884","id":776505066,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjUwNTA2Ng==","user":{"login":"liusheng","id":5335434,"node_id":"MDQ6VXNlcjUzMzU0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5335434?v=4","gravatar_id":"","url":"https://api.github.com/users/liusheng","html_url":"https://github.com/liusheng","followers_url":"https://api.github.com/users/liusheng/followers","following_url":"https://api.github.com/users/liusheng/following{/other_user}","gists_url":"https://api.github.com/users/liusheng/gists{/gist_id}","starred_url":"https://api.github.com/users/liusheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liusheng/subscriptions","organizations_url":"https://api.github.com/users/liusheng/orgs","repos_url":"https://api.github.com/users/liusheng/repos","events_url":"https://api.github.com/users/liusheng/events{/privacy}","received_events_url":"https://api.github.com/users/liusheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T07:27:27Z","updated_at":"2021-02-10T07:27:27Z","author_association":"NONE","body":"Hi @ctubbsii Sorry for reply lately,  thanks for @gancho-ivanov help clarified. Like other Java projects, Hadoop, Spark, Most code of Accumulo can be directly built and run on ARM64 platform, but there is also native code that produces a .so (Linux native library) with is architecture sensitive, it is better to add ARM CI to ensure ARM platform support for future development. As mentioned, the ARM64 release is planed in Github Action in Q1 2021, let's wait and then configure ARM CI with github action.\r\nThank you!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776505066/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776682944","html_url":"https://github.com/apache/accumulo/pull/1920#issuecomment-776682944","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1920","id":776682944,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjY4Mjk0NA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T12:46:44Z","updated_at":"2021-02-10T12:46:44Z","author_association":"CONTRIBUTOR","body":"I looked to see if it made a difference if the intern() call was made upstream of the constructor. In this case I don't think that it does.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776682944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776691790","html_url":"https://github.com/apache/accumulo/pull/1920#issuecomment-776691790","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1920","id":776691790,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjY5MTc5MA==","user":{"login":"brianloss","id":5400335,"node_id":"MDQ6VXNlcjU0MDAzMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5400335?v=4","gravatar_id":"","url":"https://api.github.com/users/brianloss","html_url":"https://github.com/brianloss","followers_url":"https://api.github.com/users/brianloss/followers","following_url":"https://api.github.com/users/brianloss/following{/other_user}","gists_url":"https://api.github.com/users/brianloss/gists{/gist_id}","starred_url":"https://api.github.com/users/brianloss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brianloss/subscriptions","organizations_url":"https://api.github.com/users/brianloss/orgs","repos_url":"https://api.github.com/users/brianloss/repos","events_url":"https://api.github.com/users/brianloss/events{/privacy}","received_events_url":"https://api.github.com/users/brianloss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T13:03:49Z","updated_at":"2021-02-10T13:03:49Z","author_association":"MEMBER","body":"In the [discussion thread](https://lists.apache.org/thread.html/r716826039c63640d7b1d983acc60b8c9116ade3e7f68fac39913144c%40%3Cdev.accumulo.apache.org%3E) about this, the Guava code was cited since they recommend against String.intern. I looked at the git history, and the documentation of that recommendation is only 4 months old, so I started looking around for any performance comparisons, and I couldn't find anything recent. \r\n\r\nI took a gist from a [stackoverflow post](https://stackoverflow.com/questions/10624232/performance-penalty-of-string-intern) discussing String.intern performance, and ran it on JDK 11 on a MacBook Pro laptop. While it's probably not the best benchmark, I found that even in JDK 11, String.intern can be significantly slower than a ConcurrentHashMap. It was mostly bad when I tried with a large number of interned strings. For a small number of interned strings, String.intern performance was comparable to ConcurrentHashMap, though lookup (calling intern on an already interned string) was always slower for String.intern. For large numbers of Strings, I was able to get improvements by setting the `-XX:StringTableSize` argument to the VM to increase the table from its JDK11 default of 65536 (JDK 7-10 defaulted to 60013).\r\n\r\nI think if you aren't exceeding the string table size, then String.intern performance is probably comparable enough. But if you exceed, then it starts to degrade quickly. I'm not suggesting to skip this change, but it's just something to think about.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776691790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776726514","html_url":"https://github.com/apache/accumulo/pull/1921#issuecomment-776726514","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1921","id":776726514,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjcyNjUxNA==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T14:03:48Z","updated_at":"2021-02-10T14:03:48Z","author_association":"CONTRIBUTOR","body":"Possibly. I followed what was in `VolumeManager` and that uses RTE. I'm fine with either but I am not sure they add anything to the error itself.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776726514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776770843","html_url":"https://github.com/apache/accumulo/pull/1921#issuecomment-776770843","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1921","id":776770843,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Njc3MDg0Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T15:06:26Z","updated_at":"2021-02-10T15:06:26Z","author_association":"MEMBER","body":"> Possibly. I followed what was in `VolumeManager` and that uses RTE. I'm fine with either but I am not sure they add anything to the error itself.\r\n\r\nMore specific exceptions increase the caller's ability to handle them on a case-by-case basis. If a UI was designed to initialize and run Accumulo based on a user's input from a prompt for the volumes, for example, an IllegalArgumentException could be detected and cause the user to be prompted for a better value. A generic RuntimeException, on the other hand, would not imply any specific handling. So, a UI like I describe wouldn't be know whether to prompt for a new value, or do something else.\r\n\r\nIn general, more specific exceptions are best, whenever possible. It's usually just a matter of finding the right one, or creating one that is appropriate. We probably have lots of existing generic RTE uses throughout our code, but I try to catch new ones in pull requests, and fix old ones, as we go, because it is better to be more specific whenever possible.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776770843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776774210","html_url":"https://github.com/apache/accumulo/pull/1921#issuecomment-776774210","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1921","id":776774210,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Njc3NDIxMA==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T15:11:35Z","updated_at":"2021-02-10T15:11:35Z","author_association":"CONTRIBUTOR","body":"> More specific exceptions increase the caller's ability to handle them on a case-by-case basis. If a UI was designed to initialize and run Accumulo based on a user's input from a prompt for the volumes, for example, an IllegalArgumentException could be detected and cause the user to be prompted for a better value. A generic RuntimeException, on the other hand, would not imply any specific handling. So, a UI like I describe wouldn't know whether to prompt for a new value, or do something else\r\n\r\nI understand, that makes sense in that scenario. I will make a change for `IllegalArgumentException` because I think that would fit best for this error. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776774210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776795695","html_url":"https://github.com/apache/accumulo/pull/1920#issuecomment-776795695","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1920","id":776795695,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Njc5NTY5NQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T15:33:46Z","updated_at":"2021-02-10T15:33:46Z","author_association":"MEMBER","body":"> In the [discussion thread](https://lists.apache.org/thread.html/r716826039c63640d7b1d983acc60b8c9116ade3e7f68fac39913144c%40%3Cdev.accumulo.apache.org%3E) about this, the Guava code was cited since they recommend against String.intern. I looked at the git history, and the documentation of that recommendation is only 4 months old, so I started looking around for any performance comparisons, and I couldn't find anything recent.\r\n\r\nThe comment was added in 2020, yes, but based on the git log, it was added as a clarification that it could also be used for String in addition to other immutable types. The note about performance was added based on a comment from 2010, when this functionality was added to Guava back in v3.0. It does not appear to be based on newer performance information, just a note about the original intent.\r\n\r\nThe more recent performance information (since 2010) I was looking at were at http://java-performance.info/string-intern-in-java-6-7-8/ (and has the same observations as yours below).\r\n\r\n> \r\n> I took a gist from a [stackoverflow post](https://stackoverflow.com/questions/10624232/performance-penalty-of-string-intern) discussing String.intern performance, and ran it on JDK 11 on a MacBook Pro laptop. While it's probably not the best benchmark, I found that even in JDK 11, String.intern can be significantly slower than a ConcurrentHashMap. It was mostly bad when I tried with a large number of interned strings. For a small number of interned strings, String.intern performance was comparable to ConcurrentHashMap, though lookup (calling intern on an already interned string) was always slower for String.intern. For large numbers of Strings, I was able to get improvements by setting the `-XX:StringTableSize` argument to the VM to increase the table from its JDK11 default of 65536 (JDK 7-10 defaulted to 60013).\r\n\r\nI'm curious how small/large your tests were, and which were more reasonable for Accumulo.\r\n\r\n> \r\n> I think if you aren't exceeding the string table size, then String.intern performance is probably comparable enough. But if you exceed, then it starts to degrade quickly. I'm not suggesting to skip this change, but it's just something to think about.\r\n\r\nRight. That's the idea. The default value of 65536 for JDK11 seems reasonable to me for our usage. If it needs to be higher, based on the user's operating environment, then they can tune it accordingly.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776795695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776815394","html_url":"https://github.com/apache/accumulo/pull/1920#issuecomment-776815394","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1920","id":776815394,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjgxNTM5NA==","user":{"login":"brianloss","id":5400335,"node_id":"MDQ6VXNlcjU0MDAzMzU=","avatar_url":"https://avatars.githubusercontent.com/u/5400335?v=4","gravatar_id":"","url":"https://api.github.com/users/brianloss","html_url":"https://github.com/brianloss","followers_url":"https://api.github.com/users/brianloss/followers","following_url":"https://api.github.com/users/brianloss/following{/other_user}","gists_url":"https://api.github.com/users/brianloss/gists{/gist_id}","starred_url":"https://api.github.com/users/brianloss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brianloss/subscriptions","organizations_url":"https://api.github.com/users/brianloss/orgs","repos_url":"https://api.github.com/users/brianloss/repos","events_url":"https://api.github.com/users/brianloss/events{/privacy}","received_events_url":"https://api.github.com/users/brianloss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T16:01:48Z","updated_at":"2021-02-10T16:01:48Z","author_association":"MEMBER","body":"> I'm curious how small/large your tests were, and which were more reasonable for Accumulo.\r\n\r\nBased on that gist I took from the StackOverflow post, I did the same sizes: 10000, 20000, 40000, 80000, 100000, 400000, 800000, 1000000 and I added 10,000,000. I wasn't very rigorous (e.g., didn't run each size multiple times and take an average or anything like that), but I ended up with the following results. It looks like maybe up to ~100k strings interned, the differences are in the noise.\r\n\r\n```java\r\n/*\r\n * intern() many different strings:\r\n * ================================\r\n * count       initial intern   lookup same string  lookup equal string\r\n *10'000'000            71803                32455                14831\r\n * 1'000'000             1840                 1490                 1502\r\n *   800'000             1244                 1139                 1063\r\n *   400'000              427                  340                  327\r\n *   200'000              161                  118                  106\r\n *   100'000               71                   46                   47\r\n *    80'000               49                   34                   35\r\n *    40'000               20                   14                   13\r\n *    20'000                8                    5                    4\r\n *    10'000                3                    2                    2\r\n *\r\n * intern() many different strings (and large string table):\r\n * =========================================================\r\n * count       initial intern   lookup same string  lookup equal string\r\n *10'000'000             4642                 3190                 3136\r\n * 1'000'000              389                  259                  262\r\n *   800'000              378                  255                  214\r\n *   400'000              209                  145                   99\r\n *   200'000              110                   73                   68\r\n *   100'000               56                   36                   42\r\n *    80'000               43                   33                   34\r\n *    40'000               19                   15                   15\r\n *    20'000                9                    6                    6\r\n *    10'000                4                    3                    2\r\n *\r\n * Manual \"interning\" with ConcurrentHashMap:\r\n * ==========================================\r\n *10'000'000             2283                  883                 1139\r\n * 1'000'000              252                   62                   79\r\n *   800'000              308                   51                   73\r\n *   400'000              272                   34                   41\r\n *   200'000              125                   39                   29\r\n *   100'000               83                   17                   15\r\n *    80'000               42                   18                   12\r\n *    40'000               20                    6                    5\r\n *    20'000                7                    3                    2\r\n *    10'000                3                    1                    1\r\n * /\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776815394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776832839","html_url":"https://github.com/apache/accumulo/pull/1917#issuecomment-776832839","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1917","id":776832839,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjgzMjgzOQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T16:25:24Z","updated_at":"2021-02-10T16:25:24Z","author_association":"CONTRIBUTOR","body":"> Okay, cool. So, we throw the IAE on `build()`. I do think it would make more sense on `to()`, at the time the incorrect argument is actually provided. (See my PR to your PR at [milleruntime#15](https://github.com/milleruntime/accumulo/pull/15))\r\n\r\nDo we want to make this change in a bug fix version? Also, what is the benefit of also throwing on the `to()` method when users have to always call `build()` and will typically in the same line of code?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776832839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776868416","html_url":"https://github.com/apache/accumulo/pull/1920#issuecomment-776868416","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1920","id":776868416,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Njg2ODQxNg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T17:10:10Z","updated_at":"2021-02-10T17:10:10Z","author_association":"MEMBER","body":"I did a similar comparison. Here's the results for `-XX:StringTableSize=1000003` and 1,000,000 strings:\r\n\r\n| Implementation |  load (ms) | lookup same (ms) | lookup equal (ms) |\r\n| ----- | ----- | ----- | ----- |\r\n| String.intern() | 553 | 414 | 400 |\r\n| Our WeakHashMap | 633 | 216 | 254 |\r\n| ConcurrentHashMap | 356 | 109 | 101 |\r\n\r\nBased on this, it looks like the ConcurrentHashMap is definitely much faster. However, it doesn't garbage collect. Comparing with our WeakHashMap implementation, the differences with String.intern are much smaller.\r\n\r\nHere's a more realistic comparison for our use case with the default StringTableSize for Java 11 of 65536, and 100,000 strings:\r\n\r\n| Implementation |  load (ms) | lookup same (ms) | lookup equal (ms) |\r\n| ----- | ----- | ----- | ----- |\r\n| String.intern() | 88 | 66 | 46 |\r\n| Our WeakHashMap | 115 | 58 | 41 |\r\n| ConcurrentHashMap | 104 | 35 | 17 |\r\n\r\nAlso, after running many times, I also observed `String.intern()` to have much more consistent performance (about +/- 5%). The two HashMap implementations seemed to have a lot more variance (about +/- 20%), but I didn't compute it precisely. This is only an approximation.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776868416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776875548","html_url":"https://github.com/apache/accumulo/pull/1920#issuecomment-776875548","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1920","id":776875548,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Njg3NTU0OA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T17:20:38Z","updated_at":"2021-02-10T17:20:38Z","author_association":"MEMBER","body":"While the ConcurrentHashMap might give the best performance (except for initial load in the realistic case), the WeakHashMap is a better comparison, since that's what we use today. For the realistic case (100,000 strings), the interning is better than our WeakHashMap for loads (probably because of early rehashing as it resizes), and not substantially worse for lookups. Even under the extreme case (1,000,000 strings) interning is only moderately worse than the WeakHashMap after tuning.\r\n\r\nOverall, I'm still leaning towards preferring `String.intern()`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776875548/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776882511","html_url":"https://github.com/apache/accumulo/pull/1917#issuecomment-776882511","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1917","id":776882511,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Njg4MjUxMQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T17:31:07Z","updated_at":"2021-02-10T17:31:36Z","author_association":"MEMBER","body":"> > Okay, cool. So, we throw the IAE on `build()`. I do think it would make more sense on `to()`, at the time the incorrect argument is actually provided. (See my PR to your PR at [milleruntime#15](https://github.com/milleruntime/accumulo/pull/15))\r\n> \r\n> Do we want to make this change in a bug fix version?\r\n\r\nI think so. It doesn't change the overall behavior... just makes it slightly better, and it would be accompanied by the corresponding javadoc clarification. It's a better user experience to have an argument failure at the time the argument is provided.\r\n\r\n> Also, what is the benefit of also throwing on the `to()` method when users have to always call `build()` and will typically in the same line of code?\r\n\r\nFast(er)-failure, and easier to debug the specific argument for the specific method that failed. Even if they don't do anything more complex to debug than view the line number in the stack trace, not everybody formats their chained methods on a single line. So, this can make the line number from the stack trace more useful. But, not everybody will call build right away either, so it helps even more in those cases.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776882511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776900236","html_url":"https://github.com/apache/accumulo/pull/1920#issuecomment-776900236","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1920","id":776900236,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjkwMDIzNg==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T17:59:34Z","updated_at":"2021-02-10T17:59:34Z","author_association":"CONTRIBUTOR","body":"I see this is used for deduping locations and sessions.  The locations and sessions should be relatively low cardinality at a given point in time.  However over longer periods the cardinality could be higher (tservers restarts create a new session and possibly could use different port) for all seen.  But the active set would always be much smaller.  I assume that String.intern() handles strings that are no longer referenced well, but was not quite sure.  Curious if anyone who has done research knows?  Also curious if anyone knows anything about the behavior of String.intern() under concurrent load (like 100 threads all calling String.intern())?    I suspect String.intern() could only be better or the same as the current weak hashmap w.r.t to concurrency.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776900236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776913731","html_url":"https://github.com/apache/accumulo/pull/1920#issuecomment-776913731","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1920","id":776913731,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjkxMzczMQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T18:21:40Z","updated_at":"2021-02-10T18:21:40Z","author_association":"MEMBER","body":"> I assume that String.intern() handles strings that are no longer referenced well, but was not quite sure. Curious if anyone who has done research knows?\r\n\r\nThe exact behavior is implementation-specific, as it is a native method. However, everything I've found says that yes, manually-interned strings are eligible for garbage collection and removal from the string pool once they are no longer referenced in the program. For string literals, they are eligible for garbage collection once their containing class is unloaded. However, it's hard to find exact documentation on this.\r\n\r\n> Also curious if anyone knows anything about the behavior of String.intern() under concurrent load (like 100 threads all calling String.intern())? I suspect String.intern() could only be better or the same as the current weak hashmap w.r.t to concurrency.\r\n\r\nI have not done any experimentation with concurrent access performance, and I've only found one broken link to a blog discussing it. I know it's thread-safe, but I don't know about performance. I might play around with that a bit to investigate it further.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776913731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776944886","html_url":"https://github.com/apache/accumulo/pull/1920#issuecomment-776944886","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1920","id":776944886,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Njk0NDg4Ng==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T19:12:46Z","updated_at":"2021-02-10T19:12:46Z","author_association":"CONTRIBUTOR","body":"Realized this change goes from a deduplication mechanism that is localized to a class to one that is JVM wide.  So if a user loads two libraries (Accumulo client and some other lib) that both use String.intern(),  if the non-accumulo library uses String.intern() for a much higher cardinality set of Strings than Accumlo does, then it could possibly impact Accumulo.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776944886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776974969","html_url":"https://github.com/apache/accumulo/pull/1920#issuecomment-776974969","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1920","id":776974969,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Njk3NDk2OQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T19:56:10Z","updated_at":"2021-02-10T19:56:10Z","author_association":"MEMBER","body":"Here's some representative numbers for the 1,000,000 strings case with 1000 concurrent threads (and `-XX:StringTableSize=1000003`):\r\n\r\n|   Implementation  | load (ms) | lookup same (ms) | lookup equal (ms) |\r\n|-------------------|-----------|------------------|-------------------|\r\n|   String.intern() |      1902 |             1274 |              1166 |\r\n|       WeakHashMap |      1491 |              907 |               743 |\r\n| ConcurrentHashMap |      1196 |              648 |               387 |\r\n\r\nAnd here's the more realistic case (100,000 strings, 100 threads, default string table size):\r\n\r\n|   Implementation  | load (ms) | lookup same (ms) | lookup equal (ms) |\r\n|-------------------|-----------|------------------|-------------------|\r\n|   String.intern() |       271 |              150 |                94 |\r\n|       WeakHashMap |       256 |              131 |                79 |\r\n| ConcurrentHashMap |       291 |               92 |                92 |\r\n\r\nIt looks like intern has slightly more overhead that adds up over time, but for the realistic case, they are all very similar.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776974969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776976681","html_url":"https://github.com/apache/accumulo/pull/1920#issuecomment-776976681","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1920","id":776976681,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Njk3NjY4MQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T19:59:11Z","updated_at":"2021-02-10T19:59:11Z","author_association":"MEMBER","body":"Okay, so I'm going to scrap this PR, and just create a simple Interning utility that puts this deduplication code in one place. This is the only time we use it for String types, but we do use it for a few other types elsewhere. Guava's built-in Interner is beta, so I won't use that, but will just move our existing code into a separate util class and add generics, so it can be re-used if we need it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776976681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776994388","html_url":"https://github.com/apache/accumulo/issues/1922#issuecomment-776994388","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1922","id":776994388,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Njk5NDM4OA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T20:14:09Z","updated_at":"2021-02-10T20:14:09Z","author_association":"CONTRIBUTOR","body":"@brianloss while it is still fresh in memory, can you add something to the `Upgrader9to10` javadoc for your recent master to manager renames?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/776994388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777005149","html_url":"https://github.com/apache/accumulo/issues/1922#issuecomment-777005149","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1922","id":777005149,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NzAwNTE0OQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T20:23:19Z","updated_at":"2021-02-10T20:23:19Z","author_association":"MEMBER","body":"I'm not opposed to this idea, but what's wrong with `git log -p **/Upgrader9to10.java`?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777005149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777006575","html_url":"https://github.com/apache/accumulo/pull/1892#issuecomment-777006575","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1892","id":777006575,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NzAwNjU3NQ==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T20:26:01Z","updated_at":"2021-02-10T20:26:01Z","author_association":"MEMBER","body":"Did a bit of rough testing and found that with this change, the tests ran a bit over 10 minutes faster on average.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777006575/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777032867","html_url":"https://github.com/apache/accumulo/issues/1922#issuecomment-777032867","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1922","id":777032867,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NzAzMjg2Nw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T21:00:57Z","updated_at":"2021-02-10T21:00:57Z","author_association":"CONTRIBUTOR","body":"> I'm not opposed to this idea, but what's wrong with `git log -p **/Upgrader9to10.java`?\r\n\r\nWhile that works great for you, the people performing the upgrade have a much better chance of looking at the documentation where the error in the file occurred than they do of taking the extra steps on that file to use git to track the history.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777032867/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777104293","html_url":"https://github.com/apache/accumulo/pull/1920#issuecomment-777104293","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1920","id":777104293,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NzEwNDI5Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T23:25:05Z","updated_at":"2021-02-10T23:25:05Z","author_association":"MEMBER","body":"This is superseded by #1925 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777104293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777106043","html_url":"https://github.com/apache/accumulo/pull/1923#issuecomment-777106043","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1923","id":777106043,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NzEwNjA0Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T23:29:44Z","updated_at":"2021-02-10T23:29:44Z","author_association":"MEMBER","body":"This PR has conflicts with its target branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777106043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777422985","html_url":"https://github.com/apache/accumulo/pull/1923#issuecomment-777422985","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1923","id":777422985,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NzQyMjk4NQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-11T12:35:26Z","updated_at":"2021-02-11T12:35:26Z","author_association":"CONTRIBUTOR","body":"> This PR has conflicts with its target branch.\r\n\r\nRebase'd and force pushed branch. Should be good now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777422985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777564622","html_url":"https://github.com/apache/accumulo/pull/1899#issuecomment-777564622","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1899","id":777564622,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NzU2NDYyMg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-11T15:13:17Z","updated_at":"2021-02-11T15:13:17Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I made another improvement to this PR in dfc579b that you may want to look over. I added another check to prevent tablets being deleted from added to the list. I am not sure if I want to include this and/or the previous change where I remove the tablet from the reports.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777564622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777705235","html_url":"https://github.com/apache/accumulo/pull/1899#issuecomment-777705235","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1899","id":777705235,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NzcwNTIzNQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-11T18:41:31Z","updated_at":"2021-02-11T18:41:31Z","author_association":"CONTRIBUTOR","body":"After some testing, I think I am going to change the log statement in `LargestFirstMemoryManager` back to trace. My change in dfc579b will skip over the tablet about 4x a second (which should give flushes better throughput) but can get spammy.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777705235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777783518","html_url":"https://github.com/apache/accumulo/issues/1928#issuecomment-777783518","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1928","id":777783518,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Nzc4MzUxOA==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-11T20:55:36Z","updated_at":"2021-02-11T20:55:36Z","author_association":"MEMBER","body":"@ctubbsii is this different from #1789?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777783518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777784628","html_url":"https://github.com/apache/accumulo/issues/1928#issuecomment-777784628","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1928","id":777784628,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Nzc4NDYyOA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-11T20:57:39Z","updated_at":"2021-02-11T20:57:39Z","author_association":"MEMBER","body":"> @ctubbsii is this different from #1789?\r\n\r\nLooks the same. I will close as duplicate.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777784628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777797567","html_url":"https://github.com/apache/accumulo/issues/1924#issuecomment-777797567","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1924","id":777797567,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Nzc5NzU2Nw==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-11T21:17:44Z","updated_at":"2021-02-11T21:17:44Z","author_association":"MEMBER","body":"> the constructor stores a strong reference to `name` as a member variable\r\n\r\nWhich constructor are you referring to?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777797567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777802398","html_url":"https://github.com/apache/accumulo/issues/1924#issuecomment-777802398","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1924","id":777802398,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NzgwMjM5OA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-11T21:26:01Z","updated_at":"2021-02-11T21:26:01Z","author_association":"MEMBER","body":"> > the constructor stores a strong reference to `name` as a member variable\r\n> \r\n> Which constructor are you referring to?\r\n\r\n`new SharedRateLImiter`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/777802398/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778151349","html_url":"https://github.com/apache/accumulo/issues/1928#issuecomment-778151349","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1928","id":778151349,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODE1MTM0OQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T11:53:56Z","updated_at":"2021-02-12T11:53:56Z","author_association":"CONTRIBUTOR","body":"The line numbers in the error on this one match up with the latest revision. The line numbers in the older error in #1789 are out of date due to changes to the file on 12/8/20.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778151349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778165056","html_url":"https://github.com/apache/accumulo/issues/1789#issuecomment-778165056","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1789","id":778165056,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODE2NTA1Ng==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T12:24:01Z","updated_at":"2021-02-12T12:33:25Z","author_association":"CONTRIBUTOR","body":"There are timing elements to the `LargestFirstMemoryManager` that I think will cause it to behave differently if the test takes too long to run. For instance, there is a variable that is clocked when the class is loaded (`ZERO_TIME`) that is used to compare for compaction idle times. The value here could become over 15 minutes (`getMinCIdleThreshold()`one of the overridden methods returns):\r\nhttps://github.com/apache/accumulo/blob/906aef9101b04c956dee71625590d79fdc7d97d4/server/tserver/src/main/java/org/apache/accumulo/tserver/memory/LargestFirstMemoryManager.java#L184\r\nThe commit times in the test are set to the time the class is loaded, so the idle time can vary, depending when classes were loaded.\r\n\r\nThe test shouldn't take longer than 1 minute (it takes just over 1 second on my machine) so if there is a way we can add a timeout, we should.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778165056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778166173","html_url":"https://github.com/apache/accumulo/issues/1789#issuecomment-778166173","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1789","id":778166173,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODE2NjE3Mw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T12:26:34Z","updated_at":"2021-02-12T12:26:34Z","author_association":"CONTRIBUTOR","body":"I have been looking at this test for #1899 so I can try and fix it there.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778166173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778170679","html_url":"https://github.com/apache/accumulo/issues/1789#issuecomment-778170679","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1789","id":778170679,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODE3MDY3OQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T12:36:24Z","updated_at":"2021-02-12T12:36:24Z","author_association":"CONTRIBUTOR","body":"There could be an issue with the timing of the `LargestFirstMemoryManager` class being loaded by the JVM long before (perhaps by another test since that class is used quite frequently) the test class is loaded. I don't know how we could fix that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778170679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778183201","html_url":"https://github.com/apache/accumulo/issues/1789#issuecomment-778183201","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1789","id":778183201,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODE4MzIwMQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T13:04:05Z","updated_at":"2021-02-12T13:04:05Z","author_association":"MEMBER","body":"We use `<reuseForks>false</reuseForks>` in `maven-surefire-plugin`, so it shouldn't use the same JVM as another test, and shouldn't be affected by another test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778183201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778201865","html_url":"https://github.com/apache/accumulo/issues/1789#issuecomment-778201865","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1789","id":778201865,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODIwMTg2NQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T13:41:28Z","updated_at":"2021-02-12T13:41:28Z","author_association":"CONTRIBUTOR","body":"> We use `<reuseForks>false</reuseForks>` in `maven-surefire-plugin`, so it shouldn't use the same JVM as another test, and shouldn't be affected by another test.\r\n\r\nOK cool. So maybe just the timeout will suffice.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778201865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778239989","html_url":"https://github.com/apache/accumulo/pull/1899#issuecomment-778239989","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1899","id":778239989,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODIzOTk4OQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T14:49:51Z","updated_at":"2021-02-12T14:49:51Z","author_association":"CONTRIBUTOR","body":"I think this PR is good to go. I added `isBeingDeleted()` to Tablet because I already found another spot we can call it to prevent extra work on Deletes. I will do this in another PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778239989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778245506","html_url":"https://github.com/apache/accumulo/pull/1899#issuecomment-778245506","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1899","id":778245506,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODI0NTUwNg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T14:59:17Z","updated_at":"2021-02-12T14:59:17Z","author_association":"CONTRIBUTOR","body":"> I think this PR is good to go. I added `isBeingDeleted()` to Tablet because I already found another spot we can call it to prevent extra work on Deletes. I will do this in another PR.\r\n\r\nHold up, one more fix...","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778245506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778272456","html_url":"https://github.com/apache/accumulo/pull/1899#issuecomment-778272456","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1899","id":778272456,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODI3MjQ1Ng==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T15:45:40Z","updated_at":"2021-02-12T15:45:40Z","author_association":"CONTRIBUTOR","body":"> > I think this PR is good to go. I added `isBeingDeleted()` to Tablet because I already found another spot we can call it to prevent extra work on Deletes. I will do this in another PR.\r\n> \r\n> Hold up, one more fix...\r\n\r\nOK NOW I think its good to go.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778272456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778359835","html_url":"https://github.com/apache/accumulo/issues/1789#issuecomment-778359835","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1789","id":778359835,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODM1OTgzNQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T18:18:38Z","updated_at":"2021-02-12T18:18:38Z","author_association":"CONTRIBUTOR","body":"Added a timeout in 0d5ea4b51e5f781c35280789d281817d4bb730ee so I guess we will see if we get the timeout, then we will know its probably a timing issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778359835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778445238","html_url":"https://github.com/apache/accumulo/issues/1789#issuecomment-778445238","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1789","id":778445238,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODQ0NTIzOA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T20:45:32Z","updated_at":"2021-02-12T20:45:32Z","author_association":"MEMBER","body":"When the test failed in #1928, it did so after 3.2 seconds. So, I'm not sure if this would be a timing issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778445238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778462710","html_url":"https://github.com/apache/accumulo/pull/1888#issuecomment-778462710","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1888","id":778462710,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODQ2MjcxMA==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T21:23:28Z","updated_at":"2021-02-12T21:23:28Z","author_association":"MEMBER","body":"@Manno15 and I have done some more investigation.\r\n\r\nThe main issue we have found stems from the way the tservers are shutdown. This portion of the test often hangs between the time two tservers are shut down. This time difference can lead to the suspend time expiring which leaves the tablets free to migrate. There are two parts to the test. One that shuts down the servers and one that crashes the servers. The version that crashes the servers leaves no time in between server deaths for this migration inducing gap. It seems that the rest of the test behaves as expected majority of the time and the flaky process that is used to shutdown the servers is causing the error.\r\n\r\nI'm not sure what a solution to this might be since the tests purpose is to ensure suspending tablets behaves as expected whether servers are crashed or shutdown meaning we need to test with server shutdown.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778462710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778491267","html_url":"https://github.com/apache/accumulo/pull/1888#issuecomment-778491267","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1888","id":778491267,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODQ5MTI2Nw==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-12T22:29:40Z","updated_at":"2021-02-12T22:29:40Z","author_association":"CONTRIBUTOR","body":"> The main issue we have found stems from the way the tservers are shutdown. This portion of the test often hangs between the time two tservers are shut down\r\n\r\nThis seems to be the part that has the highest resource and performance dependency of the test. Where it will pass in intellij but fail in terminal. \r\n\r\nIt does stand to reason that increasing the SuspendDuration will increase reliability. Less of a chance the tablets become unsuspended before the tservers are properly recovered. This will increase the amount of time the test will take since the latter part of each test does wait for the suspend duration to end to see if those tablets are properly unsuspended due to it running out  \r\n(https://github.com/apache/accumulo/blob/87548d42c7bc02d567918f8333f0be9ed24698e8/test/src/main/java/org/apache/accumulo/test/manager/SuspendedTabletsIT.java#L248). To combat this, we would have to increase the timeout. \r\n\r\nI would suggest splitting that feature of the test up and having it in its own test. This way, we can have a longer duration for the initial issue mentioned above and then a table with a shorter SuspendDuration (since it is a per-table property I believe) for specifically testing that tablets get reassigned once that duration ends. This will hopefully make things more reliable without increasing the amount of time the test by too much. \r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/778491267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780029591","html_url":"https://github.com/apache/accumulo/issues/1789#issuecomment-780029591","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1789","id":780029591,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDAyOTU5MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-16T18:23:40Z","updated_at":"2021-02-16T18:23:40Z","author_association":"CONTRIBUTOR","body":"> When the test failed in #1928, it did so after 3.2 seconds. So, I'm not sure if this would be a timing issue.\r\n\r\nAh OK. You wouldn't know if the class was loaded at the same time the test started up would you? I don't know enough about the maven test plugin to know when it loads classes and when the timer on the test would start.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780029591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780041763","html_url":"https://github.com/apache/accumulo/issues/1932#issuecomment-780041763","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1932","id":780041763,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDA0MTc2Mw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-16T18:44:35Z","updated_at":"2021-02-16T18:44:35Z","author_association":"CONTRIBUTOR","body":"While I was looking at why this test was passing in 1.10, I added improvements to the test so I figured might as well merge them in case we start seeing failures in 1.10 as well. Opened #1933","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780041763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780053261","html_url":"https://github.com/apache/accumulo/pull/1933#issuecomment-780053261","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1933","id":780053261,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDA1MzI2MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-16T19:04:42Z","updated_at":"2021-02-16T19:04:42Z","author_association":"CONTRIBUTOR","body":"These improvements seem to have fixed the issue in 2.1 as well so as soon as the checks pass I will go ahead and merge.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780053261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780054312","html_url":"https://github.com/apache/accumulo/pull/1933#issuecomment-780054312","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1933","id":780054312,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDA1NDMxMg==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-16T19:06:41Z","updated_at":"2021-02-16T19:07:33Z","author_association":"MEMBER","body":"Another small improvement may be to pre-split the table in the createTable method. I'm not too sure what is going on with the online/offline of the table, however if it is found that the split does not need to occur after the table is created for this test, it has been found that pre-splitting the table leads to greater stability and efficiency.\r\n\r\nThe updated code could look something like this:\r\n```java\r\nprivate void createTable(String t, boolean online) throws AccumuloSecurityException, AccumuloException, TableNotFoundException, TableExistsException {\r\n    Connector conn = getConnector();\r\n    SortedSet<Text> partitionKeys = new TreeSet<>(Arrays.asList(new Text(\"some split\"));\r\n    NewTableConfiguration ntc = new NewTableConfiguration().withSplits(partitionKeys);\r\n    conn.tableOperations().create(t, ntc);\r\n    conn.tableOperations().online(t, true);\r\n    if (!online) {\r\n      conn.tableOperations().offline(t, true);\r\n    }\r\n  }\r\n```\r\nNot sure if this is something worth including, just thought I would point it out though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780054312/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780058577","html_url":"https://github.com/apache/accumulo/pull/1888#issuecomment-780058577","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1888","id":780058577,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDA1ODU3Nw==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-16T19:14:49Z","updated_at":"2021-02-16T19:14:49Z","author_association":"MEMBER","body":"It was suggested to look into using a custom balancer in this test. It is speculated that the issue we are seeing with hanging shutdowns may be caused by shutting down the server which is hosting the metadata. The custom balancer may allow us to make sure the server that is hosting the metadata table is not one of the tables we attempt to shutdown in the test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780058577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780059943","html_url":"https://github.com/apache/accumulo/pull/1933#issuecomment-780059943","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1933","id":780059943,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDA1OTk0Mw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-16T19:17:24Z","updated_at":"2021-02-16T19:17:24Z","author_association":"CONTRIBUTOR","body":"Thanks @DomGarguilo good idea.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780059943/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780069532","html_url":"https://github.com/apache/accumulo/pull/1933#issuecomment-780069532","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1933","id":780069532,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDA2OTUzMg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-16T19:35:05Z","updated_at":"2021-02-16T19:35:05Z","author_association":"CONTRIBUTOR","body":"> Another small improvement may be to pre-split the table in the createTable method. I'm not too sure what is going on with the online/offline of the table, however if it is found that the split does not need to occur after the table is created for this test, it has been found that pre-splitting the table leads to greater stability and efficiency.\r\n> \r\n> The updated code could look something like this:\r\n> \r\n> ```java\r\n> private void createTable(String t, boolean online) throws AccumuloSecurityException, AccumuloException, TableNotFoundException, TableExistsException {\r\n>     Connector conn = getConnector();\r\n>     SortedSet<Text> partitionKeys = new TreeSet<>(Arrays.asList(new Text(\"some split\"));\r\n>     NewTableConfiguration ntc = new NewTableConfiguration().withSplits(partitionKeys);\r\n>     conn.tableOperations().create(t, ntc);\r\n>     conn.tableOperations().online(t, true);\r\n>     if (!online) {\r\n>       conn.tableOperations().offline(t, true);\r\n>     }\r\n>   }\r\n> ```\r\n> \r\n> Not sure if this is something worth including, just thought I would point it out though.\r\n\r\nThis won't work in 1.10. The ability to pre-split tables wasn't added until 2.0. Ugh! I forgot about how crappy our API used to be. Be glad that you aren't cursed with that knowledge :grin: ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780069532/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780075969","html_url":"https://github.com/apache/accumulo/pull/1933#issuecomment-780075969","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1933","id":780075969,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDA3NTk2OQ==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-16T19:46:28Z","updated_at":"2021-02-16T19:46:28Z","author_association":"MEMBER","body":"> This won't work in 1.10. \r\n\r\nWhoops. Maybe something to keep in mind if changes are made to the current version in that case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780075969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780106439","html_url":"https://github.com/apache/accumulo/issues/1303#issuecomment-780106439","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1303","id":780106439,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDEwNjQzOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-16T20:44:29Z","updated_at":"2021-02-16T20:44:29Z","author_association":"MEMBER","body":"Closing based on conclusion in https://github.com/apache/accumulo/pull/1803#issuecomment-771883813","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780106439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780109240","html_url":"https://github.com/apache/accumulo/issues/1789#issuecomment-780109240","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1789","id":780109240,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDEwOTI0MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-16T20:50:11Z","updated_at":"2021-02-16T20:50:11Z","author_association":"MEMBER","body":"> > When the test failed in #1928, it did so after 3.2 seconds. So, I'm not sure if this would be a timing issue.\r\n> \r\n> Ah OK. You wouldn't know if the class was loaded at the same time the test started up would you? I don't know enough about the maven test plugin to know when it loads classes and when the timer on the test would start.\r\n\r\nWe have maven-surefire-plugin configured to not reuse forks, so it should have been a fresh JVM, and the class loaded at the start of the test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780109240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780558860","html_url":"https://github.com/apache/accumulo/issues/1872#issuecomment-780558860","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1872","id":780558860,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDU1ODg2MA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-17T13:33:36Z","updated_at":"2021-02-17T13:33:36Z","author_association":"CONTRIBUTOR","body":"I merged another related improvement here: https://github.com/apache/accumulo/pull/1931","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780558860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780840341","html_url":"https://github.com/apache/accumulo/issues/1935#issuecomment-780840341","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1935","id":780840341,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDg0MDM0MQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-17T20:42:28Z","updated_at":"2021-02-17T20:42:28Z","author_association":"CONTRIBUTOR","body":"I believe what's happening here is something other than ZooLock is creating `/accumulo/d4197716-1810-44e9-bda9-2f4f8b1afd1a/table_locks/35/lock-0000000000` and then ZooLock later see's it and complains about it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/780840341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/781458338","html_url":"https://github.com/apache/accumulo/issues/1930#issuecomment-781458338","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1930","id":781458338,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTQ1ODMzOA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T16:15:49Z","updated_at":"2021-02-18T16:15:49Z","author_association":"CONTRIBUTOR","body":"I think the MajC stats are fixed with #1937 but it appears that the Split stats have been missing since 2.0.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/781458338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/781525996","html_url":"https://github.com/apache/accumulo/pull/1937#issuecomment-781525996","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1937","id":781525996,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTUyNTk5Ng==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T17:53:31Z","updated_at":"2021-02-18T17:53:31Z","author_association":"CONTRIBUTOR","body":"This will also fix the splits in the monitor.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/781525996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/781623503","html_url":"https://github.com/apache/accumulo/pull/1939#issuecomment-781623503","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1939","id":781623503,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTYyMzUwMw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T20:45:29Z","updated_at":"2021-02-18T20:45:29Z","author_association":"MEMBER","body":"I think this PR was unintentionally created, and is a duplicate of the work being drafted at #1910 .","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/781623503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/781643735","html_url":"https://github.com/apache/accumulo/pull/1937#issuecomment-781643735","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1937","id":781643735,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTY0MzczNQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T21:23:01Z","updated_at":"2021-02-18T21:23:01Z","author_association":"CONTRIBUTOR","body":"My only concern with this fix was that it modifies the new `Compactable` interface, by adding a param to the `compact()` method.  @keith-turner any thoughts?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/781643735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/781672952","html_url":"https://github.com/apache/accumulo/pull/1937#issuecomment-781672952","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1937","id":781672952,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTY3Mjk1Mg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T22:21:22Z","updated_at":"2021-02-18T22:21:22Z","author_association":"MEMBER","body":"> My only concern with this fix was that it modifies the new `Compactable` interface\r\n\r\nBut, that's not public API or SPI, so it shouldn't matter.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/781672952/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782009941","html_url":"https://github.com/apache/accumulo/pull/1939#issuecomment-782009941","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1939","id":782009941,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjAwOTk0MQ==","user":{"login":"slackwinner","id":50567198,"node_id":"MDQ6VXNlcjUwNTY3MTk4","avatar_url":"https://avatars.githubusercontent.com/u/50567198?v=4","gravatar_id":"","url":"https://api.github.com/users/slackwinner","html_url":"https://github.com/slackwinner","followers_url":"https://api.github.com/users/slackwinner/followers","following_url":"https://api.github.com/users/slackwinner/following{/other_user}","gists_url":"https://api.github.com/users/slackwinner/gists{/gist_id}","starred_url":"https://api.github.com/users/slackwinner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/slackwinner/subscriptions","organizations_url":"https://api.github.com/users/slackwinner/orgs","repos_url":"https://api.github.com/users/slackwinner/repos","events_url":"https://api.github.com/users/slackwinner/events{/privacy}","received_events_url":"https://api.github.com/users/slackwinner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-19T11:15:17Z","updated_at":"2021-02-19T11:15:17Z","author_association":"CONTRIBUTOR","body":"@ctubbsii Yes that is correct. I accidentally didn't checkout the right git branch which resulted in this PR creation. After realizing this, I closed out this PR immediately and  pushed my work through the correct git branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782009941/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782162252","html_url":"https://github.com/apache/accumulo/pull/1888#issuecomment-782162252","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1888","id":782162252,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjE2MjI1Mg==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-19T15:51:38Z","updated_at":"2021-02-19T15:51:38Z","author_association":"MEMBER","body":"Upon further investigation, @Manno15  and I confirmed that the error causing this test to be flaky stemmed from shutting down the tserver hosting the metadata. The changes in the newest commits prevent shutting down the tserver with the metadata on it. This should be ready for review now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782162252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782272991","html_url":"https://github.com/apache/accumulo/issues/1940#issuecomment-782272991","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1940","id":782272991,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjI3Mjk5MQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-19T18:55:03Z","updated_at":"2021-02-19T18:55:03Z","author_association":"MEMBER","body":"I thought we had a command in the shell to list tablets in a de-obfuscated way, for an authenticated user, so they can cross-reference with the monitor.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/782272991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]