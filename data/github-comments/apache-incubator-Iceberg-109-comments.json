[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912225187","html_url":"https://github.com/apache/iceberg/pull/2807#issuecomment-912225187","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2807","id":912225187,"node_id":"IC_kwDOCW7NX842X3Oj","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T03:22:26Z","updated_at":"2021-09-03T03:22:26Z","author_association":"MEMBER","body":"> I generally agree that we want to be able to run tests that exercise the actual code against a working back-end\r\n\r\n@rdblue , your prefer is definitely right if we don't consider the private vendor services.  The Dell ECS cannot be publicly accessed when we release manager decide to check the candidate release,  it will need to deploy their software in their required hardware + hosts to verify the correctness ( free or charge ? @mechgouki ) .  So that's why I think we need a services simulator provided from Dell ECS to align the protocol between iceberg tests and Dell real production services.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912225187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912267428","html_url":"https://github.com/apache/iceberg/pull/2807#issuecomment-912267428","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2807","id":912267428,"node_id":"IC_kwDOCW7NX842YBik","user":{"login":"mechgouki","id":8364215,"node_id":"MDQ6VXNlcjgzNjQyMTU=","avatar_url":"https://avatars.githubusercontent.com/u/8364215?v=4","gravatar_id":"","url":"https://api.github.com/users/mechgouki","html_url":"https://github.com/mechgouki","followers_url":"https://api.github.com/users/mechgouki/followers","following_url":"https://api.github.com/users/mechgouki/following{/other_user}","gists_url":"https://api.github.com/users/mechgouki/gists{/gist_id}","starred_url":"https://api.github.com/users/mechgouki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mechgouki/subscriptions","organizations_url":"https://api.github.com/users/mechgouki/orgs","repos_url":"https://api.github.com/users/mechgouki/repos","events_url":"https://api.github.com/users/mechgouki/events{/privacy}","received_events_url":"https://api.github.com/users/mechgouki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T05:33:00Z","updated_at":"2021-09-03T05:33:00Z","author_association":"NONE","body":"Thanks @rdblue and @openinx  for the feedback.\r\nYes, today we (Dell EMC Object storage) mainly runs as private service, so even we do have the process for customer to try but that could be an over-kill for community. So I would like to suggest that we provide a new S3 mock service( which will base on Adobe one and focus on special extension APIs since we do have good compatibility with AWS S3)\r\n\r\n For the real integration with our customers, we will take the responsibility, instead of community.   ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912267428/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912269882","html_url":"https://github.com/apache/iceberg/pull/2807#issuecomment-912269882","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2807","id":912269882,"node_id":"IC_kwDOCW7NX842YCI6","user":{"login":"mechgouki","id":8364215,"node_id":"MDQ6VXNlcjgzNjQyMTU=","avatar_url":"https://avatars.githubusercontent.com/u/8364215?v=4","gravatar_id":"","url":"https://api.github.com/users/mechgouki","html_url":"https://github.com/mechgouki","followers_url":"https://api.github.com/users/mechgouki/followers","following_url":"https://api.github.com/users/mechgouki/following{/other_user}","gists_url":"https://api.github.com/users/mechgouki/gists{/gist_id}","starred_url":"https://api.github.com/users/mechgouki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mechgouki/subscriptions","organizations_url":"https://api.github.com/users/mechgouki/orgs","repos_url":"https://api.github.com/users/mechgouki/repos","events_url":"https://api.github.com/users/mechgouki/events{/privacy}","received_events_url":"https://api.github.com/users/mechgouki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T05:36:29Z","updated_at":"2021-09-03T05:36:29Z","author_association":"NONE","body":"We are also moving to cloud native approach, so maybe in the future we could deploy on cloud and run the integration test there.\r\n\r\nBut right now we would like to explore a new testing strategy with community and get ball rolling ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912269882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912271230","html_url":"https://github.com/apache/iceberg/pull/2240#issuecomment-912271230","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2240","id":912271230,"node_id":"IC_kwDOCW7NX842YCd-","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T05:40:42Z","updated_at":"2021-09-03T05:40:42Z","author_association":"COLLABORATOR","body":"@rdblue and @karuppayya thanks for taking a look!  Addressed the comments, hope I understood them correctly.  For the original format V2 hardcoding in the test, I parameterize the new tests with v1 and v2, let me know if that's not what we want to do.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912271230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912278449","html_url":"https://github.com/apache/iceberg/pull/2847#issuecomment-912278449","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2847","id":912278449,"node_id":"IC_kwDOCW7NX842YEOx","user":{"login":"mechgouki","id":8364215,"node_id":"MDQ6VXNlcjgzNjQyMTU=","avatar_url":"https://avatars.githubusercontent.com/u/8364215?v=4","gravatar_id":"","url":"https://api.github.com/users/mechgouki","html_url":"https://github.com/mechgouki","followers_url":"https://api.github.com/users/mechgouki/followers","following_url":"https://api.github.com/users/mechgouki/following{/other_user}","gists_url":"https://api.github.com/users/mechgouki/gists{/gist_id}","starred_url":"https://api.github.com/users/mechgouki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mechgouki/subscriptions","organizations_url":"https://api.github.com/users/mechgouki/orgs","repos_url":"https://api.github.com/users/mechgouki/repos","events_url":"https://api.github.com/users/mechgouki/events{/privacy}","received_events_url":"https://api.github.com/users/mechgouki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T05:57:07Z","updated_at":"2021-09-03T05:57:07Z","author_association":"NONE","body":"> @wang-x-xia, if EMC is S3 compatible and uses the v1 S3 API, why not make this an implementation of FileIO that uses the older S3 API? Can you help me understand why this is specific to EMC?\r\n\r\nThe short answer is the V2 SDK added limitation for extension, while some extension APIs will benefit Iceberg to have better performance run on our product.\r\nAs Xia said, we could switch to use DellEMC Client which also open source https://github.com/EMCECS/ecs-object-client-java  \r\nBut we might need additional check on legal as the license is BSD.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912278449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912336270","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-912336270","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":912336270,"node_id":"IC_kwDOCW7NX842YSWO","user":{"login":"ayush-san","id":57655135,"node_id":"MDQ6VXNlcjU3NjU1MTM1","avatar_url":"https://avatars.githubusercontent.com/u/57655135?v=4","gravatar_id":"","url":"https://api.github.com/users/ayush-san","html_url":"https://github.com/ayush-san","followers_url":"https://api.github.com/users/ayush-san/followers","following_url":"https://api.github.com/users/ayush-san/following{/other_user}","gists_url":"https://api.github.com/users/ayush-san/gists{/gist_id}","starred_url":"https://api.github.com/users/ayush-san/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayush-san/subscriptions","organizations_url":"https://api.github.com/users/ayush-san/orgs","repos_url":"https://api.github.com/users/ayush-san/repos","events_url":"https://api.github.com/users/ayush-san/events{/privacy}","received_events_url":"https://api.github.com/users/ayush-san/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T07:53:54Z","updated_at":"2021-09-03T07:53:54Z","author_association":"NONE","body":"@rdblue We were stopping the job while performing the maintenance ops(expire snapshot, compaction) due this - https://github.com/apache/iceberg/issues/2308\r\nSince this is fixed in 0.12, I will start using it. Is there any documentation regarding any breaking changes while updating the iceberg runtime jar? Just like what airflow offers - https://github.com/apache/airflow/blob/main/UPDATING.md#airflow-212","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912336270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912412963","html_url":"https://github.com/apache/iceberg/pull/3061#issuecomment-912412963","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3061","id":912412963,"node_id":"IC_kwDOCW7NX842YlEj","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T09:52:20Z","updated_at":"2021-09-03T09:52:20Z","author_association":"MEMBER","body":"Checked the ci log, and it says: \r\n![image](https://user-images.githubusercontent.com/5028729/131986634-8f0c88fc-a149-4e84-9220-2946a9ffab12.png)\r\n\r\nNot sure why it was canceled..  Let's retry the ci.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912412963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912422832","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-912422832","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":912422832,"node_id":"IC_kwDOCW7NX842Ynew","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T10:08:23Z","updated_at":"2021-09-03T10:08:23Z","author_association":"MEMBER","body":"@ayush-san , there is a known memory consumer in the flink CDC write path,  I publish a PR here: https://github.com/apache/iceberg/pull/2680,  but still don't get the reviewer to get this merged...","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912422832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912453808","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-912453808","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":912453808,"node_id":"IC_kwDOCW7NX842YvCw","user":{"login":"ayush-san","id":57655135,"node_id":"MDQ6VXNlcjU3NjU1MTM1","avatar_url":"https://avatars.githubusercontent.com/u/57655135?v=4","gravatar_id":"","url":"https://api.github.com/users/ayush-san","html_url":"https://github.com/ayush-san","followers_url":"https://api.github.com/users/ayush-san/followers","following_url":"https://api.github.com/users/ayush-san/following{/other_user}","gists_url":"https://api.github.com/users/ayush-san/gists{/gist_id}","starred_url":"https://api.github.com/users/ayush-san/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayush-san/subscriptions","organizations_url":"https://api.github.com/users/ayush-san/orgs","repos_url":"https://api.github.com/users/ayush-san/repos","events_url":"https://api.github.com/users/ayush-san/events{/privacy}","received_events_url":"https://api.github.com/users/ayush-san/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T11:03:45Z","updated_at":"2021-09-03T11:03:45Z","author_association":"NONE","body":"But @openinx this shouldn't cause GC right?\r\n\r\nYes after your PR, CDC flink job memory req will go down drastically but can you help me understand why does almost all the time taken by tables during checkpointing is due to opening multiple Avro metadata files? \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912453808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912525875","html_url":"https://github.com/apache/iceberg/pull/2933#issuecomment-912525875","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2933","id":912525875,"node_id":"IC_kwDOCW7NX842ZAoz","user":{"login":"mayursrivastava","id":8659624,"node_id":"MDQ6VXNlcjg2NTk2MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8659624?v=4","gravatar_id":"","url":"https://api.github.com/users/mayursrivastava","html_url":"https://github.com/mayursrivastava","followers_url":"https://api.github.com/users/mayursrivastava/followers","following_url":"https://api.github.com/users/mayursrivastava/following{/other_user}","gists_url":"https://api.github.com/users/mayursrivastava/gists{/gist_id}","starred_url":"https://api.github.com/users/mayursrivastava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayursrivastava/subscriptions","organizations_url":"https://api.github.com/users/mayursrivastava/orgs","repos_url":"https://api.github.com/users/mayursrivastava/repos","events_url":"https://api.github.com/users/mayursrivastava/events{/privacy}","received_events_url":"https://api.github.com/users/mayursrivastava/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T13:07:59Z","updated_at":"2021-09-03T13:07:59Z","author_association":"CONTRIBUTOR","body":"@rdblue is this pr ready to be merged?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912525875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912741943","html_url":"https://github.com/apache/iceberg/pull/3069#issuecomment-912741943","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3069","id":912741943,"node_id":"IC_kwDOCW7NX842Z1Y3","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T18:51:55Z","updated_at":"2021-09-03T18:51:55Z","author_association":"CONTRIBUTOR","body":"cc @openinx @rdblue @RussellSpitzer @jackye1995 @yyanyy @flyrain @kbendick @karuppayya @raptond","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912741943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912821574","html_url":"https://github.com/apache/iceberg/pull/2989#issuecomment-912821574","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2989","id":912821574,"node_id":"IC_kwDOCW7NX842aI1G","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T21:30:55Z","updated_at":"2021-09-03T21:30:55Z","author_association":"COLLABORATOR","body":"@openinx done, thanks for taking a look!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912821574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912858763","html_url":"https://github.com/apache/iceberg/pull/3071#issuecomment-912858763","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3071","id":912858763,"node_id":"IC_kwDOCW7NX842aR6L","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T23:15:34Z","updated_at":"2021-09-03T23:15:34Z","author_association":"CONTRIBUTOR","body":"cc @openinx @rdblue @RussellSpitzer @jackye1995 @yyanyy @flyrain @kbendick @karuppayya @raptond","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912858763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912873134","html_url":"https://github.com/apache/iceberg/pull/3072#issuecomment-912873134","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3072","id":912873134,"node_id":"IC_kwDOCW7NX842aVau","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T00:17:54Z","updated_at":"2021-09-04T00:17:54Z","author_association":"MEMBER","body":"@kbendick + @aokolnychyi  + @rdblue The invalidate table issue. Could you please review?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912873134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912874899","html_url":"https://github.com/apache/iceberg/pull/1508#issuecomment-912874899","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1508","id":912874899,"node_id":"IC_kwDOCW7NX842aV2T","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T00:28:12Z","updated_at":"2021-09-04T00:28:12Z","author_association":"CONTRIBUTOR","body":"@rdblue, thanks for your detailed review. I'm working through addressing your feedback and will post an update very soon. I also looked more carefully at `BaseTableScan` and will update the schema there when `useSnapshot` is called.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912874899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912882575","html_url":"https://github.com/apache/iceberg/issues/430#issuecomment-912882575","issue_url":"https://api.github.com/repos/apache/iceberg/issues/430","id":912882575,"node_id":"IC_kwDOCW7NX842aXuP","user":{"login":"sunchao","id":506679,"node_id":"MDQ6VXNlcjUwNjY3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/506679?v=4","gravatar_id":"","url":"https://api.github.com/users/sunchao","html_url":"https://github.com/sunchao","followers_url":"https://api.github.com/users/sunchao/followers","following_url":"https://api.github.com/users/sunchao/following{/other_user}","gists_url":"https://api.github.com/users/sunchao/gists{/gist_id}","starred_url":"https://api.github.com/users/sunchao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunchao/subscriptions","organizations_url":"https://api.github.com/users/sunchao/orgs","repos_url":"https://api.github.com/users/sunchao/repos","events_url":"https://api.github.com/users/sunchao/events{/privacy}","received_events_url":"https://api.github.com/users/sunchao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T01:14:28Z","updated_at":"2021-09-04T01:14:28Z","author_association":"MEMBER","body":"@yupbank sure, here is the [design doc](https://docs.google.com/document/d/1foTkDSM91VxKgkEcBMsuAvEjNybjja-uHk-r3vtXWFE/edit#heading=h.82w8qxfl2uwl). It'd be great to get more comments & feedback on it!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912882575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912899342","html_url":"https://github.com/apache/iceberg/pull/3072#issuecomment-912899342","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3072","id":912899342,"node_id":"IC_kwDOCW7NX842ab0O","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T03:24:19Z","updated_at":"2021-09-04T03:24:19Z","author_association":"MEMBER","body":"Somehow this test is failing on CI but passing locally ... I'll try to repo with more tests","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912899342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912902181","html_url":"https://github.com/apache/iceberg/pull/3072#issuecomment-912902181","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3072","id":912902181,"node_id":"IC_kwDOCW7NX842acgl","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T03:57:06Z","updated_at":"2021-09-04T03:57:06Z","author_association":"MEMBER","body":"Ok it passes in the Intellij Test Runner but not in the gradle one...","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912902181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912906276","html_url":"https://github.com/apache/iceberg/pull/3072#issuecomment-912906276","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3072","id":912906276,"node_id":"IC_kwDOCW7NX842adgk","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T04:41:26Z","updated_at":"2021-09-04T04:41:26Z","author_association":"MEMBER","body":"Truly bizzare, I put in some print debug messages locally and found that in intellij refresh table is running SparkSessionCatalog invalidateTable but in gradle it doesn't hit that path at all... I'll have to look at this tomorrow","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912906276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912924920","html_url":"https://github.com/apache/iceberg/pull/2989#issuecomment-912924920","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2989","id":912924920,"node_id":"IC_kwDOCW7NX842aiD4","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T07:13:45Z","updated_at":"2021-09-04T07:13:45Z","author_association":"MEMBER","body":"LGTM, thanks for the contribution!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912924920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912986362","html_url":"https://github.com/apache/iceberg/pull/3072#issuecomment-912986362","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3072","id":912986362,"node_id":"IC_kwDOCW7NX842axD6","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T14:49:32Z","updated_at":"2021-09-04T14:49:32Z","author_association":"MEMBER","body":"I think the root cause is Spark 3.0 vs Spark 3.1","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912986362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912989573","html_url":"https://github.com/apache/iceberg/pull/3072#issuecomment-912989573","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3072","id":912989573,"node_id":"IC_kwDOCW7NX842ax2F","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T15:11:17Z","updated_at":"2021-09-04T15:11:17Z","author_association":"MEMBER","body":"The culprit is I believe https://issues.apache.org/jira/browse/SPARK-32990, in Spark 3.0.X the RefreshTable Command does not get executed on the V2 catalog for the Session catalog, meaning it will only refresh using the internal session refresh code.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912989573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912995847","html_url":"https://github.com/apache/iceberg/pull/3072#issuecomment-912995847","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3072","id":912995847,"node_id":"IC_kwDOCW7NX842azYH","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T15:55:12Z","updated_at":"2021-09-04T15:55:12Z","author_association":"MEMBER","body":"Ok all wrapped up now, \r\n\r\nIn Spark 3.1 Refresh Table will work\r\nIn Spark 3.0 as a workaround you can clone the session ```cloneSession()``` which will recreate the catalog and clear the cache","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912995847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912996077","html_url":"https://github.com/apache/iceberg/pull/3072#issuecomment-912996077","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3072","id":912996077,"node_id":"IC_kwDOCW7NX842azbt","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T15:56:43Z","updated_at":"2021-09-04T15:56:43Z","author_association":"MEMBER","body":"All good to go now","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912996077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912996622","html_url":"https://github.com/apache/iceberg/issues/2972#issuecomment-912996622","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2972","id":912996622,"node_id":"IC_kwDOCW7NX842azkO","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T16:00:18Z","updated_at":"2021-09-04T16:00:18Z","author_association":"MEMBER","body":"For any future readers, this is unpatchable on Spark 3.0 (3.1 + are fine once the above pr is merged). The underlying issue there is prior to [SPARK-32990](https://issues.apache.org/jira/browse/SPARK-32990) the V1 SparkSession catalog refresh method is called whenever `REFRESH TABLE` is invoked. This means we can't change the behavior of the refresh table command. A workaround is too instead use ```cloneSession()``` on  the `SparkSession` class and discard the previous session. This will recreate the catalog and pick up new Iceberg Table changes.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912996622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913025303","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-913025303","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":913025303,"node_id":"IC_kwDOCW7NX842a6kX","user":{"login":"WinkerDu","id":11454734,"node_id":"MDQ6VXNlcjExNDU0NzM0","avatar_url":"https://avatars.githubusercontent.com/u/11454734?v=4","gravatar_id":"","url":"https://api.github.com/users/WinkerDu","html_url":"https://github.com/WinkerDu","followers_url":"https://api.github.com/users/WinkerDu/followers","following_url":"https://api.github.com/users/WinkerDu/following{/other_user}","gists_url":"https://api.github.com/users/WinkerDu/gists{/gist_id}","starred_url":"https://api.github.com/users/WinkerDu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WinkerDu/subscriptions","organizations_url":"https://api.github.com/users/WinkerDu/orgs","repos_url":"https://api.github.com/users/WinkerDu/repos","events_url":"https://api.github.com/users/WinkerDu/events{/privacy}","received_events_url":"https://api.github.com/users/WinkerDu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T19:15:16Z","updated_at":"2021-09-04T19:19:46Z","author_association":"CONTRIBUTOR","body":"@rdblue @openinx @RussellSpitzer could you please review this patch?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913025303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913054535","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-913054535","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":913054535,"node_id":"IC_kwDOCW7NX842bBtH","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-04T23:31:43Z","updated_at":"2021-09-04T23:31:43Z","author_association":"MEMBER","body":"I think this is a good feature to add but perhaps the name should be something along the lines of \r\n`items-per-bin` or `max-items-per-bin` ? \r\n\r\nOr maybe we could hit this use case directly and set a max number of `delete files` referenced per bin?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913054535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913093349","html_url":"https://github.com/apache/iceberg/pull/2863#issuecomment-913093349","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2863","id":913093349,"node_id":"IC_kwDOCW7NX842bLLl","user":{"login":"Reo-LEI","id":17312872,"node_id":"MDQ6VXNlcjE3MzEyODcy","avatar_url":"https://avatars.githubusercontent.com/u/17312872?v=4","gravatar_id":"","url":"https://api.github.com/users/Reo-LEI","html_url":"https://github.com/Reo-LEI","followers_url":"https://api.github.com/users/Reo-LEI/followers","following_url":"https://api.github.com/users/Reo-LEI/following{/other_user}","gists_url":"https://api.github.com/users/Reo-LEI/gists{/gist_id}","starred_url":"https://api.github.com/users/Reo-LEI/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Reo-LEI/subscriptions","organizations_url":"https://api.github.com/users/Reo-LEI/orgs","repos_url":"https://api.github.com/users/Reo-LEI/repos","events_url":"https://api.github.com/users/Reo-LEI/events{/privacy}","received_events_url":"https://api.github.com/users/Reo-LEI/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-05T06:13:13Z","updated_at":"2021-09-05T06:13:13Z","author_association":"CONTRIBUTOR","body":"I have fixed the unittest, could you retry the ci? :) @openinx ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913093349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913158740","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-913158740","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":913158740,"node_id":"IC_kwDOCW7NX842bbJU","user":{"login":"WinkerDu","id":11454734,"node_id":"MDQ6VXNlcjExNDU0NzM0","avatar_url":"https://avatars.githubusercontent.com/u/11454734?v=4","gravatar_id":"","url":"https://api.github.com/users/WinkerDu","html_url":"https://github.com/WinkerDu","followers_url":"https://api.github.com/users/WinkerDu/followers","following_url":"https://api.github.com/users/WinkerDu/following{/other_user}","gists_url":"https://api.github.com/users/WinkerDu/gists{/gist_id}","starred_url":"https://api.github.com/users/WinkerDu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WinkerDu/subscriptions","organizations_url":"https://api.github.com/users/WinkerDu/orgs","repos_url":"https://api.github.com/users/WinkerDu/repos","events_url":"https://api.github.com/users/WinkerDu/events{/privacy}","received_events_url":"https://api.github.com/users/WinkerDu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-05T13:52:05Z","updated_at":"2021-09-05T13:52:05Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer thanks for your replay. The name has changed to `items-per-bin`\r\n\r\nI think the number of data files and delete referenced per bin should be specified separately, `insert` operation only add data files for example. I am glad to deal with delete-files situation in following PR\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913158740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913196002","html_url":"https://github.com/apache/iceberg/pull/3078#issuecomment-913196002","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3078","id":913196002,"node_id":"IC_kwDOCW7NX842bkPi","user":{"login":"ismailsimsek","id":6005685,"node_id":"MDQ6VXNlcjYwMDU2ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6005685?v=4","gravatar_id":"","url":"https://api.github.com/users/ismailsimsek","html_url":"https://github.com/ismailsimsek","followers_url":"https://api.github.com/users/ismailsimsek/followers","following_url":"https://api.github.com/users/ismailsimsek/following{/other_user}","gists_url":"https://api.github.com/users/ismailsimsek/gists{/gist_id}","starred_url":"https://api.github.com/users/ismailsimsek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ismailsimsek/subscriptions","organizations_url":"https://api.github.com/users/ismailsimsek/orgs","repos_url":"https://api.github.com/users/ismailsimsek/repos","events_url":"https://api.github.com/users/ismailsimsek/events{/privacy}","received_events_url":"https://api.github.com/users/ismailsimsek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-05T17:37:40Z","updated_at":"2021-09-05T17:37:40Z","author_association":"CONTRIBUTOR","body":"good catch, LGTM","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913196002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913266641","html_url":"https://github.com/apache/iceberg/pull/3078#issuecomment-913266641","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3078","id":913266641,"node_id":"IC_kwDOCW7NX842b1fR","user":{"login":"LuPan2015","id":10804128,"node_id":"MDQ6VXNlcjEwODA0MTI4","avatar_url":"https://avatars.githubusercontent.com/u/10804128?v=4","gravatar_id":"","url":"https://api.github.com/users/LuPan2015","html_url":"https://github.com/LuPan2015","followers_url":"https://api.github.com/users/LuPan2015/followers","following_url":"https://api.github.com/users/LuPan2015/following{/other_user}","gists_url":"https://api.github.com/users/LuPan2015/gists{/gist_id}","starred_url":"https://api.github.com/users/LuPan2015/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LuPan2015/subscriptions","organizations_url":"https://api.github.com/users/LuPan2015/orgs","repos_url":"https://api.github.com/users/LuPan2015/repos","events_url":"https://api.github.com/users/LuPan2015/events{/privacy}","received_events_url":"https://api.github.com/users/LuPan2015/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T01:06:39Z","updated_at":"2021-09-06T01:06:39Z","author_association":"NONE","body":"I found the same problem.  #3060  Thanks. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913266641/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913286170","html_url":"https://github.com/apache/iceberg/pull/3067#issuecomment-913286170","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3067","id":913286170,"node_id":"IC_kwDOCW7NX842b6Qa","user":{"login":"xingbowu","id":12458911,"node_id":"MDQ6VXNlcjEyNDU4OTEx","avatar_url":"https://avatars.githubusercontent.com/u/12458911?v=4","gravatar_id":"","url":"https://api.github.com/users/xingbowu","html_url":"https://github.com/xingbowu","followers_url":"https://api.github.com/users/xingbowu/followers","following_url":"https://api.github.com/users/xingbowu/following{/other_user}","gists_url":"https://api.github.com/users/xingbowu/gists{/gist_id}","starred_url":"https://api.github.com/users/xingbowu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xingbowu/subscriptions","organizations_url":"https://api.github.com/users/xingbowu/orgs","repos_url":"https://api.github.com/users/xingbowu/repos","events_url":"https://api.github.com/users/xingbowu/events{/privacy}","received_events_url":"https://api.github.com/users/xingbowu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T02:09:31Z","updated_at":"2021-09-06T02:09:31Z","author_association":"CONTRIBUTOR","body":"@rdblue @openinx Could you help to take a look at this PR? Thanks in advance.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913286170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913298581","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-913298581","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":913298581,"node_id":"IC_kwDOCW7NX842b9SV","user":{"login":"WinkerDu","id":11454734,"node_id":"MDQ6VXNlcjExNDU0NzM0","avatar_url":"https://avatars.githubusercontent.com/u/11454734?v=4","gravatar_id":"","url":"https://api.github.com/users/WinkerDu","html_url":"https://github.com/WinkerDu","followers_url":"https://api.github.com/users/WinkerDu/followers","following_url":"https://api.github.com/users/WinkerDu/following{/other_user}","gists_url":"https://api.github.com/users/WinkerDu/gists{/gist_id}","starred_url":"https://api.github.com/users/WinkerDu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WinkerDu/subscriptions","organizations_url":"https://api.github.com/users/WinkerDu/orgs","repos_url":"https://api.github.com/users/WinkerDu/repos","events_url":"https://api.github.com/users/WinkerDu/events{/privacy}","received_events_url":"https://api.github.com/users/WinkerDu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T02:52:15Z","updated_at":"2021-09-06T02:52:15Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi @kbendick @jackye1995 please have a further review","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913298581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913321192","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-913321192","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":913321192,"node_id":"IC_kwDOCW7NX842cCzo","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T04:06:07Z","updated_at":"2021-09-06T04:06:13Z","author_association":"MEMBER","body":"I'll take a full pass on tuesday, I'm just getting settled back home but we have power and internet so should be plenty of time then.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913321192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913384794","html_url":"https://github.com/apache/iceberg/pull/2847#issuecomment-913384794","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2847","id":913384794,"node_id":"IC_kwDOCW7NX842cSVa","user":{"login":"mechgouki","id":8364215,"node_id":"MDQ6VXNlcjgzNjQyMTU=","avatar_url":"https://avatars.githubusercontent.com/u/8364215?v=4","gravatar_id":"","url":"https://api.github.com/users/mechgouki","html_url":"https://github.com/mechgouki","followers_url":"https://api.github.com/users/mechgouki/followers","following_url":"https://api.github.com/users/mechgouki/following{/other_user}","gists_url":"https://api.github.com/users/mechgouki/gists{/gist_id}","starred_url":"https://api.github.com/users/mechgouki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mechgouki/subscriptions","organizations_url":"https://api.github.com/users/mechgouki/orgs","repos_url":"https://api.github.com/users/mechgouki/repos","events_url":"https://api.github.com/users/mechgouki/events{/privacy}","received_events_url":"https://api.github.com/users/mechgouki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T06:42:07Z","updated_at":"2021-09-06T06:42:07Z","author_association":"NONE","body":"> @wang-x-xia, if EMC is S3 compatible and uses the v1 S3 API, why not make this an implementation of FileIO that uses the older S3 API? Can you help me understand why this is specific to EMC?\r\n\r\nDiscussed internally, we plan to switch to DellEMC ECS Client lib here as it is fully open source and we are supporting/will support it ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913384794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913489936","html_url":"https://github.com/apache/iceberg/issues/2808#issuecomment-913489936","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2808","id":913489936,"node_id":"IC_kwDOCW7NX842csAQ","user":{"login":"coolderli","id":38486782,"node_id":"MDQ6VXNlcjM4NDg2Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/38486782?v=4","gravatar_id":"","url":"https://api.github.com/users/coolderli","html_url":"https://github.com/coolderli","followers_url":"https://api.github.com/users/coolderli/followers","following_url":"https://api.github.com/users/coolderli/following{/other_user}","gists_url":"https://api.github.com/users/coolderli/gists{/gist_id}","starred_url":"https://api.github.com/users/coolderli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coolderli/subscriptions","organizations_url":"https://api.github.com/users/coolderli/orgs","repos_url":"https://api.github.com/users/coolderli/repos","events_url":"https://api.github.com/users/coolderli/events{/privacy}","received_events_url":"https://api.github.com/users/coolderli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T09:18:57Z","updated_at":"2021-09-06T09:18:57Z","author_association":"CONTRIBUTOR","body":"@stevenzwu @wg1026688210  I have already set the config.  I've had thise problem #2632. But this is different.\r\nI think the socket timeout Txn1 is committed successfully finally and then the job restores before the Txn1 is committed, and the restored job commits normally. Then there will be two same `max-committed-checkpointid` snapshots.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913489936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913491550","html_url":"https://github.com/apache/iceberg/issues/2808#issuecomment-913491550","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2808","id":913491550,"node_id":"IC_kwDOCW7NX842csZe","user":{"login":"coolderli","id":38486782,"node_id":"MDQ6VXNlcjM4NDg2Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/38486782?v=4","gravatar_id":"","url":"https://api.github.com/users/coolderli","html_url":"https://github.com/coolderli","followers_url":"https://api.github.com/users/coolderli/followers","following_url":"https://api.github.com/users/coolderli/following{/other_user}","gists_url":"https://api.github.com/users/coolderli/gists{/gist_id}","starred_url":"https://api.github.com/users/coolderli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coolderli/subscriptions","organizations_url":"https://api.github.com/users/coolderli/orgs","repos_url":"https://api.github.com/users/coolderli/repos","events_url":"https://api.github.com/users/coolderli/events{/privacy}","received_events_url":"https://api.github.com/users/coolderli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T09:21:06Z","updated_at":"2021-09-06T09:21:06Z","author_association":"CONTRIBUTOR","body":"I didn't found the solution to this scenario. Maybe the hive meta store should ignore the socket timeout requests.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913491550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913521847","html_url":"https://github.com/apache/iceberg/issues/2808#issuecomment-913521847","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2808","id":913521847,"node_id":"IC_kwDOCW7NX842czy3","user":{"login":"coolderli","id":38486782,"node_id":"MDQ6VXNlcjM4NDg2Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/38486782?v=4","gravatar_id":"","url":"https://api.github.com/users/coolderli","html_url":"https://github.com/coolderli","followers_url":"https://api.github.com/users/coolderli/followers","following_url":"https://api.github.com/users/coolderli/following{/other_user}","gists_url":"https://api.github.com/users/coolderli/gists{/gist_id}","starred_url":"https://api.github.com/users/coolderli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coolderli/subscriptions","organizations_url":"https://api.github.com/users/coolderli/orgs","repos_url":"https://api.github.com/users/coolderli/repos","events_url":"https://api.github.com/users/coolderli/events{/privacy}","received_events_url":"https://api.github.com/users/coolderli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T10:06:19Z","updated_at":"2021-09-06T10:06:19Z","author_association":"CONTRIBUTOR","body":"Maybe we should close the socket when there is a  socket timeout.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913521847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913592305","html_url":"https://github.com/apache/iceberg/pull/3076#issuecomment-913592305","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3076","id":913592305,"node_id":"IC_kwDOCW7NX842dE_x","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T12:01:31Z","updated_at":"2021-09-06T12:01:31Z","author_association":"MEMBER","body":"Get this merged, Thanks @hililiwei for contributing !","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913592305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913602308","html_url":"https://github.com/apache/iceberg/issues/2808#issuecomment-913602308","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2808","id":913602308,"node_id":"IC_kwDOCW7NX842dHcE","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T12:15:44Z","updated_at":"2021-09-06T12:15:44Z","author_association":"MEMBER","body":"Sorry for missed this issue , @coolderli !  That's an interesting case,  Let me consider what's the reason...","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913602308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913624007","html_url":"https://github.com/apache/iceberg/pull/2847#issuecomment-913624007","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2847","id":913624007,"node_id":"IC_kwDOCW7NX842dMvH","user":{"login":"wang-x-xia","id":83057695,"node_id":"MDQ6VXNlcjgzMDU3Njk1","avatar_url":"https://avatars.githubusercontent.com/u/83057695?v=4","gravatar_id":"","url":"https://api.github.com/users/wang-x-xia","html_url":"https://github.com/wang-x-xia","followers_url":"https://api.github.com/users/wang-x-xia/followers","following_url":"https://api.github.com/users/wang-x-xia/following{/other_user}","gists_url":"https://api.github.com/users/wang-x-xia/gists{/gist_id}","starred_url":"https://api.github.com/users/wang-x-xia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wang-x-xia/subscriptions","organizations_url":"https://api.github.com/users/wang-x-xia/orgs","repos_url":"https://api.github.com/users/wang-x-xia/repos","events_url":"https://api.github.com/users/wang-x-xia/events{/privacy}","received_events_url":"https://api.github.com/users/wang-x-xia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T12:49:36Z","updated_at":"2021-09-06T12:49:36Z","author_association":"CONTRIBUTOR","body":"@rdblue Here is a problem with using our own SDK. \r\nI noticed that https://github.com/EMCECS/ecs-object-client-java uses a BSD-3 license.\r\nIf I use this, what more actions should I take?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913624007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913629145","html_url":"https://github.com/apache/iceberg/issues/2808#issuecomment-913629145","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2808","id":913629145,"node_id":"IC_kwDOCW7NX842dN_Z","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T12:57:55Z","updated_at":"2021-09-06T12:57:55Z","author_association":"MEMBER","body":"> I think the socket timeout Txn1 is committed successfully finally and then the job restores before the Txn1 is committed, and the restored job commits normally. Then there will be two same max-committed-checkpointid snapshots.\r\n\r\nThis could explain why there're two same txn commits in the metadata.  I am thinking the candidate way to resolve this consistent issue are: \r\n\r\n1. Just quit the flink streaming job when encountering CommitStateUnknownException  and let people to check whether it's OK to restart the flink job. \r\n2. Catch the CommitStateUnknownException in [commitOperation](https://github.com/apache/iceberg/blob/e20088449daec9ed431754044b520b3ac5fa3eaa/flink/src/main/java/org/apache/iceberg/flink/sink/IcebergFilesCommitter.java#L308),  and retry to check the iceberg table whether it has been committed the stale txn.   If it has been exhausted and timeout to check the table ( I mean it does not commit the txn successfully finally) , then we start to failover.   In this way we will need to use an experience timeout to evaluate whether it's OK to stop to check the hive-metastore, and start the flink job failover....","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913629145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913654757","html_url":"https://github.com/apache/iceberg/pull/3067#issuecomment-913654757","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3067","id":913654757,"node_id":"IC_kwDOCW7NX842dUPl","user":{"login":"xingbowu","id":12458911,"node_id":"MDQ6VXNlcjEyNDU4OTEx","avatar_url":"https://avatars.githubusercontent.com/u/12458911?v=4","gravatar_id":"","url":"https://api.github.com/users/xingbowu","html_url":"https://github.com/xingbowu","followers_url":"https://api.github.com/users/xingbowu/followers","following_url":"https://api.github.com/users/xingbowu/following{/other_user}","gists_url":"https://api.github.com/users/xingbowu/gists{/gist_id}","starred_url":"https://api.github.com/users/xingbowu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xingbowu/subscriptions","organizations_url":"https://api.github.com/users/xingbowu/orgs","repos_url":"https://api.github.com/users/xingbowu/repos","events_url":"https://api.github.com/users/xingbowu/events{/privacy}","received_events_url":"https://api.github.com/users/xingbowu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T13:32:40Z","updated_at":"2021-09-06T13:32:40Z","author_association":"CONTRIBUTOR","body":"> Thanks @xingbowu to make a smaller PR for the Aliyun [OSS integration](https://github.com/apache/iceberg/pull/2230) work. I skimmed the whole PR, this PR is trying to introduce the aliyun oss mock app server, so that we could build oss test cases on top of it (We don't need to mock all the called OSS API in a relative complex test cases , such as multi-upload test cases). It's a good thing for us to introduce a simple simulator to align the local mock app and aliyun online oss server.\r\n> \r\n> The most important thing for me is: How do we guarantee the local mock app is aligning correctly to the aliyun online oss server ? In the parent PR #2230 , we introduced a class test rule named OSSTestRule and the rule has two different impl:\r\n> \r\n> * OSSMockRule:  The rule will start a local mini aliyun oss server, which could serving the remote OSS client http requests.\r\n> * OSSIntegrationTestRule: The rule will prepare testing buckets in the remote oss server, so that the test cases  could write real data to.\r\n> \r\n> For the local oss application, we provide tests cases in [TestLocalOSS](https://github.com/apache/iceberg/blob/3755c967f61035097abbebfe419d17473bf5fefd/aliyun/src/test/java/org/apache/iceberg/aliyun/oss/mock/TestLocalOSS.java) , which was designed to run different TestRule according to the intentional environment variables (will run local mock app by default). If the tests could be passes on both local env and remote oss env, then we could definitely ensure the local oss app is implemented correctly.\r\n\r\n\r\n\r\n> Thanks @xingbowu to make a smaller PR for the Aliyun [OSS integration](https://github.com/apache/iceberg/pull/2230) work. I skimmed the whole PR, this PR is trying to introduce the aliyun oss mock app server, so that we could build oss test cases on top of it (We don't need to mock all the called OSS API in a relative complex test cases , such as multi-upload test cases). It's a good thing for us to introduce a simple simulator to align the local mock app and aliyun online oss server.\r\n> \r\n> The most important thing for me is: How do we guarantee the local mock app is aligning correctly to the aliyun online oss server ? In the parent PR #2230 , we introduced a class test rule named OSSTestRule and the rule has two different impl:\r\n> \r\n> * OSSMockRule:  The rule will start a local mini aliyun oss server, which could serving the remote OSS client http requests.\r\n> * OSSIntegrationTestRule: The rule will prepare testing buckets in the remote oss server, so that the test cases  could write real data to.\r\n> \r\n> For the local oss application, we provide tests cases in [TestLocalOSS](https://github.com/apache/iceberg/blob/3755c967f61035097abbebfe419d17473bf5fefd/aliyun/src/test/java/org/apache/iceberg/aliyun/oss/mock/TestLocalOSS.java) , which was designed to run different TestRule according to the intentional environment variables (will run local mock app by default). If the tests could be passes on both local env and remote oss env, then we could definitely ensure the local oss app is implemented correctly.\r\n\r\nThanks a lot for pointing out missing part. I have done rework and added local test here to guarantee quality. comparing with 2230,  implemented more test case, such as range get. \r\n\r\nAdditionally, followed up your review comments to simulate basic aliyun oss behavior including create/put/delete and excluded multi-parts , feel free to let me know if you have further comments.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913654757/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913751666","html_url":"https://github.com/apache/iceberg/issues/2808#issuecomment-913751666","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2808","id":913751666,"node_id":"IC_kwDOCW7NX842dr5y","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T16:11:52Z","updated_at":"2021-09-06T16:11:52Z","author_association":"CONTRIBUTOR","body":"We need to come up with some good hypothesis. Right now, none makes sense. \r\n\r\nLet me recap the two observations from the thread\r\n1. both transactions have the same `max-committed-checkpointid`\r\n2. those two duplicate transactions have linear relationship, as we can see from the parent snapshot id\r\n\r\n> Just quit the flink streaming job when encountering CommitStateUnknownException and let people to check whether it's OK to restart the flink job.\r\n\r\nI thought this already the case as @coolderli configured `execution.checkpointing.tolerable-failed-checkpoints=0`\r\n\r\n> Catch the CommitStateUnknownException in commitOperation, and retry to check the iceberg table whether it has been committed the stale txn.\r\n\r\nThis is also our solution when we encountered this problem. Note that this is not bullet proof as re-check can also fail. But it should reduce the chance of happening a lot. However, this still doesn't explain why @coolderli were seeing the duplicate transactions.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913751666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913786246","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-913786246","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":913786246,"node_id":"IC_kwDOCW7NX842d0WG","user":{"login":"WinkerDu","id":11454734,"node_id":"MDQ6VXNlcjExNDU0NzM0","avatar_url":"https://avatars.githubusercontent.com/u/11454734?v=4","gravatar_id":"","url":"https://api.github.com/users/WinkerDu","html_url":"https://github.com/WinkerDu","followers_url":"https://api.github.com/users/WinkerDu/followers","following_url":"https://api.github.com/users/WinkerDu/following{/other_user}","gists_url":"https://api.github.com/users/WinkerDu/gists{/gist_id}","starred_url":"https://api.github.com/users/WinkerDu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WinkerDu/subscriptions","organizations_url":"https://api.github.com/users/WinkerDu/orgs","repos_url":"https://api.github.com/users/WinkerDu/repos","events_url":"https://api.github.com/users/WinkerDu/events{/privacy}","received_events_url":"https://api.github.com/users/WinkerDu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T17:35:30Z","updated_at":"2021-09-06T17:35:30Z","author_association":"CONTRIBUTOR","body":"![image](https://user-images.githubusercontent.com/11454734/132249412-6174fc2f-ae0d-47c3-96f6-f85ec7197b92.png)\r\nchecked the ci log, not sure why it was cancelled. Can I retry this ci? @RussellSpitzer ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913786246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913786532","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-913786532","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":913786532,"node_id":"IC_kwDOCW7NX842d0ak","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T17:36:28Z","updated_at":"2021-09-06T17:36:28Z","author_association":"MEMBER","body":"I think this is the timeout issue me and @kbendick were discussing yesterday","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913786532/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913786742","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-913786742","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":913786742,"node_id":"IC_kwDOCW7NX842d0d2","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T17:37:07Z","updated_at":"2021-09-06T17:37:07Z","author_association":"MEMBER","body":"I wouldn't worry about doing a retry till we get the reviews done, if it passed java 11 (and it did) it just means it is an unrelated issue I think","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913786742/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913789529","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-913789529","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":913789529,"node_id":"IC_kwDOCW7NX842d1JZ","user":{"login":"WinkerDu","id":11454734,"node_id":"MDQ6VXNlcjExNDU0NzM0","avatar_url":"https://avatars.githubusercontent.com/u/11454734?v=4","gravatar_id":"","url":"https://api.github.com/users/WinkerDu","html_url":"https://github.com/WinkerDu","followers_url":"https://api.github.com/users/WinkerDu/followers","following_url":"https://api.github.com/users/WinkerDu/following{/other_user}","gists_url":"https://api.github.com/users/WinkerDu/gists{/gist_id}","starred_url":"https://api.github.com/users/WinkerDu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WinkerDu/subscriptions","organizations_url":"https://api.github.com/users/WinkerDu/orgs","repos_url":"https://api.github.com/users/WinkerDu/repos","events_url":"https://api.github.com/users/WinkerDu/events{/privacy}","received_events_url":"https://api.github.com/users/WinkerDu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T17:46:18Z","updated_at":"2021-09-06T17:46:18Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer OK, let's get the review done first :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913789529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913962175","html_url":"https://github.com/apache/iceberg/pull/3061#issuecomment-913962175","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3061","id":913962175,"node_id":"IC_kwDOCW7NX842efS_","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T03:24:28Z","updated_at":"2021-09-07T03:24:28Z","author_association":"MEMBER","body":"Ping @rdblue , could you help to check this minor PR again ?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913962175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913962703","html_url":"https://github.com/apache/iceberg/pull/3039#issuecomment-913962703","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3039","id":913962703,"node_id":"IC_kwDOCW7NX842efbP","user":{"login":"SreeramGarlapati","id":11813428,"node_id":"MDQ6VXNlcjExODEzNDI4","avatar_url":"https://avatars.githubusercontent.com/u/11813428?v=4","gravatar_id":"","url":"https://api.github.com/users/SreeramGarlapati","html_url":"https://github.com/SreeramGarlapati","followers_url":"https://api.github.com/users/SreeramGarlapati/followers","following_url":"https://api.github.com/users/SreeramGarlapati/following{/other_user}","gists_url":"https://api.github.com/users/SreeramGarlapati/gists{/gist_id}","starred_url":"https://api.github.com/users/SreeramGarlapati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SreeramGarlapati/subscriptions","organizations_url":"https://api.github.com/users/SreeramGarlapati/orgs","repos_url":"https://api.github.com/users/SreeramGarlapati/repos","events_url":"https://api.github.com/users/SreeramGarlapati/events{/privacy}","received_events_url":"https://api.github.com/users/SreeramGarlapati/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T03:26:21Z","updated_at":"2021-09-07T03:27:14Z","author_association":"COLLABORATOR","body":"> Can we please use `as-of-timestamp` instead of introducing a new configuration option? If users need to be strictly greater than some time or strictly less than some time, I believe they can use `as-of-timestamp` and simply add one to the milliseconds as we dont store snapshot timestamps at a lower granularity than milliseconds iirc (will double check the spec but Im almost certain).\r\n> \r\n> We need `as-of-timestamp` to be consistent with the batch API and Flink streaming APIs anyway and it already exists.\r\n> \r\n> If there's a motivating reason that we _can't_ use `as-of-timestamp`, I'd love to hear it. Very open to the existence of a possibility that I didn't consider which would prevent the use of `as-of-timestamp`. \r\n\r\n@kbendick - the existing flag - `as-of-timestamp` is intended to be use for time travel scenarios. Using this flag - users would read full table data.\r\nwhereas - the new flag `stream-from-timestamp` is for streaming reads. In this case - the flag need to explicitly express that - user is interested to read data that is added to the table - **from** this timestamp - **NOT** the existing data - but the new data that is added to that table starting **FROM** this timestamp...\r\n\r\nDid this rationale make sense!?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913962703/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913982936","html_url":"https://github.com/apache/iceberg/issues/3079#issuecomment-913982936","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3079","id":913982936,"node_id":"IC_kwDOCW7NX842ekXY","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T04:32:59Z","updated_at":"2021-09-07T04:32:59Z","author_association":"CONTRIBUTOR","body":"There were changes around catalog configuration in 0.12. Maybe this effects the FlinkCatalog as well. I would try to check how the HiveCatalog should be parameterized in Flink use-cases.\r\n\r\nThanks, Peter ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/913982936/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914046315","html_url":"https://github.com/apache/iceberg/pull/3081#issuecomment-914046315","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3081","id":914046315,"node_id":"IC_kwDOCW7NX842ez1r","user":{"login":"zhongyujiang","id":42907416,"node_id":"MDQ6VXNlcjQyOTA3NDE2","avatar_url":"https://avatars.githubusercontent.com/u/42907416?v=4","gravatar_id":"","url":"https://api.github.com/users/zhongyujiang","html_url":"https://github.com/zhongyujiang","followers_url":"https://api.github.com/users/zhongyujiang/followers","following_url":"https://api.github.com/users/zhongyujiang/following{/other_user}","gists_url":"https://api.github.com/users/zhongyujiang/gists{/gist_id}","starred_url":"https://api.github.com/users/zhongyujiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhongyujiang/subscriptions","organizations_url":"https://api.github.com/users/zhongyujiang/orgs","repos_url":"https://api.github.com/users/zhongyujiang/repos","events_url":"https://api.github.com/users/zhongyujiang/events{/privacy}","received_events_url":"https://api.github.com/users/zhongyujiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T07:04:21Z","updated_at":"2021-09-07T07:04:21Z","author_association":"CONTRIBUTOR","body":"@openinx @chenjunjiedada, could you help to review this PR? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914046315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914103917","html_url":"https://github.com/apache/iceberg/pull/1978#issuecomment-914103917","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1978","id":914103917,"node_id":"IC_kwDOCW7NX842fB5t","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T08:32:49Z","updated_at":"2021-09-07T08:32:49Z","author_association":"MEMBER","body":"Closed via https://github.com/apache/iceberg/pull/2410.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914103917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914113853","html_url":"https://github.com/apache/iceberg/issues/3079#issuecomment-914113853","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3079","id":914113853,"node_id":"IC_kwDOCW7NX842fEU9","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T08:47:49Z","updated_at":"2021-09-07T08:47:49Z","author_association":"MEMBER","body":"@shengkui , It's insecure to expose your s3 accessKey & accessSecret in this open issue. So I masked them in the issue. About the issue, I will also try under my local host.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914113853/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914138067","html_url":"https://github.com/apache/iceberg/issues/3084#issuecomment-914138067","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3084","id":914138067,"node_id":"IC_kwDOCW7NX842fKPT","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T09:17:24Z","updated_at":"2021-09-07T09:17:24Z","author_association":"MEMBER","body":"FYI @RussellSpitzer ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914138067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914138961","html_url":"https://github.com/apache/iceberg/issues/3079#issuecomment-914138961","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3079","id":914138961,"node_id":"IC_kwDOCW7NX842fKdR","user":{"login":"shengkui","id":17078500,"node_id":"MDQ6VXNlcjE3MDc4NTAw","avatar_url":"https://avatars.githubusercontent.com/u/17078500?v=4","gravatar_id":"","url":"https://api.github.com/users/shengkui","html_url":"https://github.com/shengkui","followers_url":"https://api.github.com/users/shengkui/followers","following_url":"https://api.github.com/users/shengkui/following{/other_user}","gists_url":"https://api.github.com/users/shengkui/gists{/gist_id}","starred_url":"https://api.github.com/users/shengkui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shengkui/subscriptions","organizations_url":"https://api.github.com/users/shengkui/orgs","repos_url":"https://api.github.com/users/shengkui/repos","events_url":"https://api.github.com/users/shengkui/events{/privacy}","received_events_url":"https://api.github.com/users/shengkui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T09:18:38Z","updated_at":"2021-09-07T09:18:38Z","author_association":"NONE","body":"> @shengkui , It's insecure to expose your s3 accessKey & accessSecret in this open issue. So I masked them in the issue. About the issue, I will also try under my local host.\r\n\r\nThanks","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914138961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914141729","html_url":"https://github.com/apache/iceberg/issues/3084#issuecomment-914141729","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3084","id":914141729,"node_id":"IC_kwDOCW7NX842fLIh","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T09:22:40Z","updated_at":"2021-09-07T09:22:40Z","author_association":"MEMBER","body":"After I reverted the https://github.com/apache/iceberg/pull/2872/files in my own repo,  the build process won't run all the `testSpark31` related tests now.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914141729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914159475","html_url":"https://github.com/apache/iceberg/issues/3079#issuecomment-914159475","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3079","id":914159475,"node_id":"IC_kwDOCW7NX842fPdz","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T09:44:51Z","updated_at":"2021-09-07T09:44:51Z","author_association":"MEMBER","body":"@shengkui I think you need to use the master branch to build the latest flink-iceberg-runtime jar because the PR #2666 was got merged only in master branch now ( Not get released in 0.12.0). \r\n\r\nI tried to use the connector to executing the following SQL: \r\n\r\n```shell\r\n./bin/sql-client.sh embedded -j /Users/openinx/software/apache-iceberg/flink-runtime/build/libs/iceberg-flink-runtime-5f90476.jar shell\r\n\r\n\r\nFlink SQL> CREATE TABLE iceberg_table (\r\n>     id   BIGINT,\r\n>     data STRING\r\n> ) WITH (\r\n>     'connector'='iceberg',\r\n>     'catalog-name'='hive_prod',\r\n>     'uri'='thrift://localhost:9083',\r\n>     'warehouse'='file:///Users/openinx/test/iceberg-warehouse'\r\n> );\r\n[INFO] Table has been created.\r\n\r\nFlink SQL> INSERT INTO iceberg_table values (1, 'AAA'), (2, 'BBB'), (3, 'CCC');\r\n[INFO] Submitting SQL update statement to the cluster...\r\n[INFO] Table update statement has been successfully submitted to the cluster:\r\nJob ID: c9742d48cbd35502f9a3093d0d668543\r\n\r\nFlink SQL> select * from iceberg_table ;\r\n+----+------+\r\n| id | data |\r\n+----+------+\r\n|  1 |  AAA |\r\n|  2 |  BBB |\r\n|  3 |  CCC |\r\n+----+------+\r\n3 rows in set\r\n```\r\n\r\nAll seems OK.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914159475/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914174350","html_url":"https://github.com/apache/iceberg/pull/3081#issuecomment-914174350","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3081","id":914174350,"node_id":"IC_kwDOCW7NX842fTGO","user":{"login":"coolderli","id":38486782,"node_id":"MDQ6VXNlcjM4NDg2Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/38486782?v=4","gravatar_id":"","url":"https://api.github.com/users/coolderli","html_url":"https://github.com/coolderli","followers_url":"https://api.github.com/users/coolderli/followers","following_url":"https://api.github.com/users/coolderli/following{/other_user}","gists_url":"https://api.github.com/users/coolderli/gists{/gist_id}","starred_url":"https://api.github.com/users/coolderli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coolderli/subscriptions","organizations_url":"https://api.github.com/users/coolderli/orgs","repos_url":"https://api.github.com/users/coolderli/repos","events_url":"https://api.github.com/users/coolderli/events{/privacy}","received_events_url":"https://api.github.com/users/coolderli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T10:07:10Z","updated_at":"2021-09-07T10:07:10Z","author_association":"CONTRIBUTOR","body":"Make sense to me!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914174350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914186171","html_url":"https://github.com/apache/iceberg/pull/3081#issuecomment-914186171","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3081","id":914186171,"node_id":"IC_kwDOCW7NX842fV-7","user":{"login":"zlzhang0122","id":5321584,"node_id":"MDQ6VXNlcjUzMjE1ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/5321584?v=4","gravatar_id":"","url":"https://api.github.com/users/zlzhang0122","html_url":"https://github.com/zlzhang0122","followers_url":"https://api.github.com/users/zlzhang0122/followers","following_url":"https://api.github.com/users/zlzhang0122/following{/other_user}","gists_url":"https://api.github.com/users/zlzhang0122/gists{/gist_id}","starred_url":"https://api.github.com/users/zlzhang0122/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zlzhang0122/subscriptions","organizations_url":"https://api.github.com/users/zlzhang0122/orgs","repos_url":"https://api.github.com/users/zlzhang0122/repos","events_url":"https://api.github.com/users/zlzhang0122/events{/privacy}","received_events_url":"https://api.github.com/users/zlzhang0122/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T10:24:55Z","updated_at":"2021-09-07T10:24:55Z","author_association":"NONE","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914186171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914247097","html_url":"https://github.com/apache/iceberg/issues/3079#issuecomment-914247097","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3079","id":914247097,"node_id":"IC_kwDOCW7NX842fk25","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T12:05:12Z","updated_at":"2021-09-07T12:05:12Z","author_association":"MEMBER","body":"@shengkui ,  I've proposed a PR to add the flink iceberg connector document in #3085 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914247097/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914248979","html_url":"https://github.com/apache/iceberg/issues/3082#issuecomment-914248979","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3082","id":914248979,"node_id":"IC_kwDOCW7NX842flUT","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T12:08:07Z","updated_at":"2021-09-07T12:08:07Z","author_association":"MEMBER","body":"Hi @GrigorievNick ,  Yes, we did not add any document for the row-level delete feature yet.  It's a necessary thing in our plan but still don't do.  What's your case that wanna to use the iceberg row-level feature ?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914248979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914251703","html_url":"https://github.com/apache/iceberg/issues/3082#issuecomment-914251703","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3082","id":914251703,"node_id":"IC_kwDOCW7NX842fl-3","user":{"login":"GrigorievNick","id":16338643,"node_id":"MDQ6VXNlcjE2MzM4NjQz","avatar_url":"https://avatars.githubusercontent.com/u/16338643?v=4","gravatar_id":"","url":"https://api.github.com/users/GrigorievNick","html_url":"https://github.com/GrigorievNick","followers_url":"https://api.github.com/users/GrigorievNick/followers","following_url":"https://api.github.com/users/GrigorievNick/following{/other_user}","gists_url":"https://api.github.com/users/GrigorievNick/gists{/gist_id}","starred_url":"https://api.github.com/users/GrigorievNick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrigorievNick/subscriptions","organizations_url":"https://api.github.com/users/GrigorievNick/orgs","repos_url":"https://api.github.com/users/GrigorievNick/repos","events_url":"https://api.github.com/users/GrigorievNick/events{/privacy}","received_events_url":"https://api.github.com/users/GrigorievNick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T12:12:35Z","updated_at":"2021-09-11T15:45:30Z","author_association":"CONTRIBUTOR","body":"hi @openinx,\r\nI use java API to query the iceberg table from spark executors.\r\n My iceberg table is organized as a sequential index. So I can do join by sorted keys without\r\nshuffle data.\r\nFor simplicity, we can name this operation enrichment by a range of monotonically sequential keys.\r\n\r\nI create this issue in pair to my [PR](https://github.com/apache/iceberg/pull/3083). So repo maintainer can track it in\r\na more comfortable way, than just pr without details. Please close it, if\r\nit's not necessary.\r\n\r\n, 7 . 2021 ., 15:08 openinx ***@***.***>:\r\n\r\n> Hi @GrigorievNick <https://github.com/GrigorievNick> , Yes, we did not\r\n> add any document for the row-level delete feature yet. It's a necessary\r\n> thing in our plan but still don't do. What's your case that wanna to use\r\n> the iceberg row-level feature ?\r\n>\r\n> \r\n> You are receiving this because you were mentioned.\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/apache/iceberg/issues/3082#issuecomment-914248979>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AD4U5U5MOCY2UB3STCROC4DUAX6DFANCNFSM5DRXOJTQ>\r\n> .\r\n> Triage notifications on the go with GitHub Mobile for iOS\r\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\r\n> or Android\r\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\r\n>\r\n>\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914251703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914343333","html_url":"https://github.com/apache/iceberg/issues/3084#issuecomment-914343333","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3084","id":914343333,"node_id":"IC_kwDOCW7NX842f8Wl","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T14:14:53Z","updated_at":"2021-09-07T14:15:17Z","author_association":"MEMBER","body":"when i don't want to run test I do\r\n```\r\ng build -x test  -x integrationTest -x testSpark31 -x spark31IntegrationTest\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914343333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914421661","html_url":"https://github.com/apache/iceberg/pull/3074#issuecomment-914421661","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3074","id":914421661,"node_id":"IC_kwDOCW7NX842gPed","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T15:47:36Z","updated_at":"2021-09-07T15:47:36Z","author_association":"CONTRIBUTOR","body":"@jun-he It feels like we're combining two different things into this PR that we should probably split out.  The first is the existing project relocation.  I would separate the creation of the new project into a separate PR.\r\n\r\nA couple other things I see that I'll comment on directly as well. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914421661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914513519","html_url":"https://github.com/apache/iceberg/issues/3086#issuecomment-914513519","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3086","id":914513519,"node_id":"IC_kwDOCW7NX842gl5v","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T18:05:46Z","updated_at":"2021-09-07T18:05:46Z","author_association":"COLLABORATOR","body":"Do folks think this will be useful?  @jackye1995 for feedback","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914513519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914547520","html_url":"https://github.com/apache/iceberg/issues/2972#issuecomment-914547520","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2972","id":914547520,"node_id":"IC_kwDOCW7NX842guNA","user":{"login":"rodfsouza","id":6119775,"node_id":"MDQ6VXNlcjYxMTk3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6119775?v=4","gravatar_id":"","url":"https://api.github.com/users/rodfsouza","html_url":"https://github.com/rodfsouza","followers_url":"https://api.github.com/users/rodfsouza/followers","following_url":"https://api.github.com/users/rodfsouza/following{/other_user}","gists_url":"https://api.github.com/users/rodfsouza/gists{/gist_id}","starred_url":"https://api.github.com/users/rodfsouza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rodfsouza/subscriptions","organizations_url":"https://api.github.com/users/rodfsouza/orgs","repos_url":"https://api.github.com/users/rodfsouza/repos","events_url":"https://api.github.com/users/rodfsouza/events{/privacy}","received_events_url":"https://api.github.com/users/rodfsouza/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T18:58:11Z","updated_at":"2021-09-07T18:58:11Z","author_association":"NONE","body":"@kbendick, I got caught on my daily work and could not get back to you nor @RussellSpitzer . If you're already working on it, please go ahead.\r\n\r\n> Hi @rodfsouza, are you still working on this issue?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914547520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914558988","html_url":"https://github.com/apache/iceberg/issues/2972#issuecomment-914558988","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2972","id":914558988,"node_id":"IC_kwDOCW7NX842gxAM","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T19:17:38Z","updated_at":"2021-09-07T19:17:38Z","author_association":"MEMBER","body":"Yep posted a PR after we chatted last week ^\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914558988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914573807","html_url":"https://github.com/apache/iceberg/issues/2991#issuecomment-914573807","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2991","id":914573807,"node_id":"IC_kwDOCW7NX842g0nv","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T19:37:37Z","updated_at":"2021-09-07T19:37:37Z","author_association":"CONTRIBUTOR","body":"Hi @fcvr1010! Thank you for your input. Sorry for the delay, was out sick for a good portion of last week.\r\n\r\nI'll take a closer look at what you've reported, though if the `File.createTempFile` was created by a java process that had already closed, that would explain why it wasn't available to view via `bpftrace` (throwing that out there in case that were the case).\r\n\r\nBut it is interesting that EMR (and possibly more generally, yarn) has this conflicting `tmp` issue. Thank you for your report and please, feel free to provide ANY further information you might think is relevant. =)\r\n\r\nI'd also ask you to reach out to your AWS rep (if you have one), in case this is an EMR specific oddity (or a yarn specific oddity that they can help you debug).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914573807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914637027","html_url":"https://github.com/apache/iceberg/pull/3043#issuecomment-914637027","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3043","id":914637027,"node_id":"IC_kwDOCW7NX842hEDj","user":{"login":"hankfanchiu","id":13294681,"node_id":"MDQ6VXNlcjEzMjk0Njgx","avatar_url":"https://avatars.githubusercontent.com/u/13294681?v=4","gravatar_id":"","url":"https://api.github.com/users/hankfanchiu","html_url":"https://github.com/hankfanchiu","followers_url":"https://api.github.com/users/hankfanchiu/followers","following_url":"https://api.github.com/users/hankfanchiu/following{/other_user}","gists_url":"https://api.github.com/users/hankfanchiu/gists{/gist_id}","starred_url":"https://api.github.com/users/hankfanchiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankfanchiu/subscriptions","organizations_url":"https://api.github.com/users/hankfanchiu/orgs","repos_url":"https://api.github.com/users/hankfanchiu/repos","events_url":"https://api.github.com/users/hankfanchiu/events{/privacy}","received_events_url":"https://api.github.com/users/hankfanchiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T21:19:52Z","updated_at":"2021-09-07T21:19:52Z","author_association":"NONE","body":"> we need to add a new table option, and check it on whether or not to make the commit in the MergingSnapshotProducer apply method.\r\n\r\nWhat would you suggest as the name of this configuration option? How about one of the following?\r\n\r\n1. `commit.allow-empty.enabled`, default: `false`\r\n2. `commit.skip-empty.enabled`, default: `true`\r\n3. `commit.omit-empty.enabled`, default: `true`\r\n\r\nHaving the verb first is different than an existing option that has the affected entity followed by the action, i.e. noun and then verb:\r\n\r\nhttps://github.com/apache/iceberg/blob/5f9047602bb23fa4d0f5cf63eea00f38329fb7bf/core/src/main/java/org/apache/iceberg/TableProperties.java#L83-L84\r\n\r\nSome other options:\r\n\r\n* `empty-allow` or `empty-skip` or `empty-omit` seems unintuitive?\r\n* `empty-allowed.enabled` or `empty-skipped.enabled` or `empty-omitted.enabled` stutters a bit?\r\n* `empty.enabled` might be ambiguous?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914637027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914669941","html_url":"https://github.com/apache/iceberg/pull/2804#issuecomment-914669941","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2804","id":914669941,"node_id":"IC_kwDOCW7NX842hMF1","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T22:32:33Z","updated_at":"2021-09-07T22:32:33Z","author_association":"COLLABORATOR","body":"Actually on second look, it looks like ClientPoolImpl already does the retry logic (though no configurable retries), so if we replace it it will need to be a bigger replacement..","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914669941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914691440","html_url":"https://github.com/apache/iceberg/issues/3087#issuecomment-914691440","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3087","id":914691440,"node_id":"IC_kwDOCW7NX842hRVw","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T23:28:53Z","updated_at":"2021-09-07T23:28:53Z","author_association":"COLLABORATOR","body":"@pvary @rymurr  @rdblue do you guys have thoughts on it?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914691440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914757553","html_url":"https://github.com/apache/iceberg/issues/3079#issuecomment-914757553","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3079","id":914757553,"node_id":"IC_kwDOCW7NX842hhex","user":{"login":"shengkui","id":17078500,"node_id":"MDQ6VXNlcjE3MDc4NTAw","avatar_url":"https://avatars.githubusercontent.com/u/17078500?v=4","gravatar_id":"","url":"https://api.github.com/users/shengkui","html_url":"https://github.com/shengkui","followers_url":"https://api.github.com/users/shengkui/followers","following_url":"https://api.github.com/users/shengkui/following{/other_user}","gists_url":"https://api.github.com/users/shengkui/gists{/gist_id}","starred_url":"https://api.github.com/users/shengkui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shengkui/subscriptions","organizations_url":"https://api.github.com/users/shengkui/orgs","repos_url":"https://api.github.com/users/shengkui/repos","events_url":"https://api.github.com/users/shengkui/events{/privacy}","received_events_url":"https://api.github.com/users/shengkui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T01:09:01Z","updated_at":"2021-09-08T01:09:01Z","author_association":"NONE","body":"@openinx Thanks for your help , I'll try it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914757553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914791848","html_url":"https://github.com/apache/iceberg/pull/2863#issuecomment-914791848","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2863","id":914791848,"node_id":"IC_kwDOCW7NX842hp2o","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T01:39:34Z","updated_at":"2021-09-08T01:39:34Z","author_association":"MEMBER","body":"Retry to run CI ...","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914791848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914800861","html_url":"https://github.com/apache/iceberg/pull/3039#issuecomment-914800861","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3039","id":914800861,"node_id":"IC_kwDOCW7NX842hsDd","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T01:47:22Z","updated_at":"2021-09-08T01:47:22Z","author_association":"CONTRIBUTOR","body":"> > Can we please use `as-of-timestamp` instead of introducing a new configuration option? If users need to be strictly greater than some time or strictly less than some time, I believe they can use `as-of-timestamp` and simply add one to the milliseconds as we dont store snapshot timestamps at a lower granularity than milliseconds iirc (will double check the spec but Im almost certain).\r\n> > We need `as-of-timestamp` to be consistent with the batch API and Flink streaming APIs anyway and it already exists.\r\n> > If there's a motivating reason that we _can't_ use `as-of-timestamp`, I'd love to hear it. Very open to the existence of a possibility that I didn't consider which would prevent the use of `as-of-timestamp`. \r\n> \r\n> @kbendick - the existing flag - `as-of-timestamp` is intended to be use for time travel scenarios. Using this flag - users would read full table data.\r\n> whereas - the new flag `stream-from-timestamp` is for streaming reads. In this case - the flag need to explicitly express that - user is interested to read data that is added to the table - **from** this timestamp - **NOT** the existing data - but the new data that is added to that table starting **FROM** this timestamp...\r\n> \r\n> Did this rationale make sense!?\r\n\r\nHi @SreeramGarlapati, yeah that distinction makes sense. Thanks for clarifying. Can we put something similar to your last line (`We need this config as opposed to `as-of-timestamp` as we only want to get data written after the specified timestamp`) as a comment?\r\n\r\nIt's clear now that it's said, but it was admittedly a little confusing for me prior to that. I'll leave any clarification up to you two. Thanks for the info.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914800861/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914821058","html_url":"https://github.com/apache/iceberg/pull/3058#issuecomment-914821058","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3058","id":914821058,"node_id":"IC_kwDOCW7NX842hw_C","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T02:04:46Z","updated_at":"2021-09-08T02:04:46Z","author_association":"MEMBER","body":"@jackye1995 would u pls take a look as well?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914821058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914860458","html_url":"https://github.com/apache/iceberg/pull/2863#issuecomment-914860458","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2863","id":914860458,"node_id":"IC_kwDOCW7NX842h6mq","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T02:48:00Z","updated_at":"2021-09-08T02:48:00Z","author_association":"MEMBER","body":"LGTM if the travis CI says OK !  Thanks for @Reo-LEI for picking this up !","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914860458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914861620","html_url":"https://github.com/apache/iceberg/pull/1508#issuecomment-914861620","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1508","id":914861620,"node_id":"IC_kwDOCW7NX842h640","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T02:50:09Z","updated_at":"2021-09-08T02:50:09Z","author_association":"CONTRIBUTOR","body":"@rdblue, I have rebased on master and updated the PR with most of your suggestions. The only change you suggested that I did not adopt concerns having both `snapshotId` and `asOfTimestamp` in `SnapshotAwareIdentifier`. I explained my reason above.\r\nI hope that this is ready to merge now.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914861620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914865186","html_url":"https://github.com/apache/iceberg/issues/3084#issuecomment-914865186","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3084","id":914865186,"node_id":"IC_kwDOCW7NX842h7wi","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T02:56:48Z","updated_at":"2021-09-08T02:56:48Z","author_association":"MEMBER","body":"Okay,  let's close this issue now.  Thanks for the checking ! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914865186/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914870892","html_url":"https://github.com/apache/iceberg/pull/3039#issuecomment-914870892","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3039","id":914870892,"node_id":"IC_kwDOCW7NX842h9Js","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T03:06:51Z","updated_at":"2021-09-08T03:06:51Z","author_association":"CONTRIBUTOR","body":"Now that Im thinking about it. If we wanted to read all of the data that was committed at and updated as of some time X, then wed want to grab all changed data from time X (inclusive).\r\n\r\nCould we get at least an approximation (with possible duplicates) by checking the metadata from the commit at time stamp X?  Such as updated files, things like that?\r\n\r\nI feel if users dont mind possibly getting extra rows, they might prefer / also want to get changed data as of a given time stamp.\r\n\r\nWed still need this PR, but this would also line up more with how delta currently handles append only streams - users can pick to get all rows committed as of a time stamp and then _possibly_ get duplicates because the file was updated (even if the row is not).\r\n\r\nThe only part of this PR this would affect is maybe the configs name (as its a separate feature), but it could be nice to have. I can envision use cases for it, where youd prefer duplicates to losing data.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914870892/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914905167","html_url":"https://github.com/apache/iceberg/pull/3081#issuecomment-914905167","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3081","id":914905167,"node_id":"IC_kwDOCW7NX842iFhP","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T04:35:23Z","updated_at":"2021-09-08T04:35:23Z","author_association":"MEMBER","body":"I tried this by building flink-iceberg-runtime.jar and running the SQL in flink 1.13.2 local cluster.  All things works as expected \r\n![image](https://user-images.githubusercontent.com/5028729/132447062-ee51168f-6739-4060-9d4f-b68f46c8acb7.png) . \r\n\r\nLet's just close this PR , and turn to upgrade the flink version to 1.13.2 #2629 .  Close this now.  Thanks @zhong-yj for your reporting and contribution !\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914905167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914905480","html_url":"https://github.com/apache/iceberg/issues/3080#issuecomment-914905480","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3080","id":914905480,"node_id":"IC_kwDOCW7NX842iFmI","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T04:36:29Z","updated_at":"2021-09-08T04:36:29Z","author_association":"MEMBER","body":"Closed via #3081 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914905480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914950939","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-914950939","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":914950939,"node_id":"IC_kwDOCW7NX842iQsb","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T06:17:24Z","updated_at":"2021-09-08T06:17:24Z","author_association":"MEMBER","body":"Let's retry the travis CI ..","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914950939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914996494","html_url":"https://github.com/apache/iceberg/pull/3039#issuecomment-914996494","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3039","id":914996494,"node_id":"IC_kwDOCW7NX842ib0O","user":{"login":"zhengzengprc","id":1111402,"node_id":"MDQ6VXNlcjExMTE0MDI=","avatar_url":"https://avatars.githubusercontent.com/u/1111402?v=4","gravatar_id":"","url":"https://api.github.com/users/zhengzengprc","html_url":"https://github.com/zhengzengprc","followers_url":"https://api.github.com/users/zhengzengprc/followers","following_url":"https://api.github.com/users/zhengzengprc/following{/other_user}","gists_url":"https://api.github.com/users/zhengzengprc/gists{/gist_id}","starred_url":"https://api.github.com/users/zhengzengprc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhengzengprc/subscriptions","organizations_url":"https://api.github.com/users/zhengzengprc/orgs","repos_url":"https://api.github.com/users/zhengzengprc/repos","events_url":"https://api.github.com/users/zhengzengprc/events{/privacy}","received_events_url":"https://api.github.com/users/zhengzengprc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T07:38:41Z","updated_at":"2021-09-08T07:38:41Z","author_association":"CONTRIBUTOR","body":"@kbendick I thanks for the reviewing and hope you feel much better these days\r\nI have updated a little bit of the pr according to comments, could you review a second time when you have chance? Thanks","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914996494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914997015","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-914997015","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":914997015,"node_id":"IC_kwDOCW7NX842ib8X","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T07:39:37Z","updated_at":"2021-09-08T07:39:37Z","author_association":"MEMBER","body":"@WinkerDu I definitely agreed the v2 bin-pack algorithm should be improved for v2 to consider the total size of insert & delete files.  I think the `iterms-per-bin` proposed from you team is trying to resolve the unbalanced issue,  but I'm concerning it's hard to set the correct `iterms-per-bin` value for a given table in real production environment,  because the `iterms-per-bin` is still controlling the data file's count.  We actually don't have a real suitable approach to evaluate the cost about joining the data file size & its delete records.  I think we need more accurate approach to decide which scan tasks should be dispatched to different tasks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/914997015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915022408","html_url":"https://github.com/apache/iceberg/issues/3079#issuecomment-915022408","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3079","id":915022408,"node_id":"IC_kwDOCW7NX842iiJI","user":{"login":"shengkui","id":17078500,"node_id":"MDQ6VXNlcjE3MDc4NTAw","avatar_url":"https://avatars.githubusercontent.com/u/17078500?v=4","gravatar_id":"","url":"https://api.github.com/users/shengkui","html_url":"https://github.com/shengkui","followers_url":"https://api.github.com/users/shengkui/followers","following_url":"https://api.github.com/users/shengkui/following{/other_user}","gists_url":"https://api.github.com/users/shengkui/gists{/gist_id}","starred_url":"https://api.github.com/users/shengkui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shengkui/subscriptions","organizations_url":"https://api.github.com/users/shengkui/orgs","repos_url":"https://api.github.com/users/shengkui/repos","events_url":"https://api.github.com/users/shengkui/events{/privacy}","received_events_url":"https://api.github.com/users/shengkui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T08:17:26Z","updated_at":"2021-09-08T08:17:26Z","author_association":"NONE","body":"@openinx I've tried the latest flink-iceberg-runtime jar(built from master branch), it works when I use \"file://\" as warehouse. But it doesn't work with \"s3a://\".\r\n\r\nI've put following JARs into flink/lib/ directory:\r\n\r\n- flink-iceberg-runtime.jar\r\n- flink-sql-connector-hive.jar \r\n \r\nIs there any other JAR should be placed under Flink's lib/ directory?\r\n\r\nCould you please give me some advice for configuration of \"s3a\"? I'm not very sure if I've written right parameter to the right place.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915022408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915025497","html_url":"https://github.com/apache/iceberg/pull/2629#issuecomment-915025497","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2629","id":915025497,"node_id":"IC_kwDOCW7NX842ii5Z","user":{"login":"Flyangz","id":39462475,"node_id":"MDQ6VXNlcjM5NDYyNDc1","avatar_url":"https://avatars.githubusercontent.com/u/39462475?v=4","gravatar_id":"","url":"https://api.github.com/users/Flyangz","html_url":"https://github.com/Flyangz","followers_url":"https://api.github.com/users/Flyangz/followers","following_url":"https://api.github.com/users/Flyangz/following{/other_user}","gists_url":"https://api.github.com/users/Flyangz/gists{/gist_id}","starred_url":"https://api.github.com/users/Flyangz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Flyangz/subscriptions","organizations_url":"https://api.github.com/users/Flyangz/orgs","repos_url":"https://api.github.com/users/Flyangz/repos","events_url":"https://api.github.com/users/Flyangz/events{/privacy}","received_events_url":"https://api.github.com/users/Flyangz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T08:21:59Z","updated_at":"2021-09-08T08:21:59Z","author_association":"CONTRIBUTOR","body":"@zhangjun0x01 , are you still working on it? If not or you do not have time to fix it, I would like to pick it up.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915025497/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915044545","html_url":"https://github.com/apache/iceberg/issues/3079#issuecomment-915044545","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3079","id":915044545,"node_id":"IC_kwDOCW7NX842injB","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T08:50:20Z","updated_at":"2021-09-08T08:50:20Z","author_association":"MEMBER","body":"@shengkui ,  I don't have a correct aws s3 enviroment,  but I've configured this flink connector correctly in our alibaba public object storage before (Just use the open hadoop distribution with aliyun-oss hdfs implementation). The first thing you need to do is :  configurate the hadoop hdfs correctly by setting the key-values in core-site.xml and verify this by using `hadoop hdfs` command. Then you will need to make sure your flink cluster & hive-metastore are using the correct hadoop classpath you've configured above.  In theory, you can submit the flink job correctly then. \r\n\r\nWe don't need to configure any s3 configurations in the flink table properties.  There's a [document](https://developer.aliyun.com/article/783957) describing how to write data into aliyun oss in Chinese.  You may need to replace all the oss configurations to s3 according to the doc.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915044545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915059716","html_url":"https://github.com/apache/iceberg/issues/3087#issuecomment-915059716","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3087","id":915059716,"node_id":"IC_kwDOCW7NX842irQE","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T09:10:06Z","updated_at":"2021-09-08T09:10:06Z","author_association":"CONTRIBUTOR","body":"@szehon-ho: I consider it a tech debt that we are using `HiveMetastoreClient` in Iceberg instead of `IMetaStoreClient`. So I would prefer a solution where we start to use `IMetaStoreClient`, and the `RetryingMetastoreClient`, but I am clearly Hive biased , so others might have different thoughts","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915059716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915089953","html_url":"https://github.com/apache/iceberg/issues/3079#issuecomment-915089953","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3079","id":915089953,"node_id":"IC_kwDOCW7NX842iyoh","user":{"login":"shengkui","id":17078500,"node_id":"MDQ6VXNlcjE3MDc4NTAw","avatar_url":"https://avatars.githubusercontent.com/u/17078500?v=4","gravatar_id":"","url":"https://api.github.com/users/shengkui","html_url":"https://github.com/shengkui","followers_url":"https://api.github.com/users/shengkui/followers","following_url":"https://api.github.com/users/shengkui/following{/other_user}","gists_url":"https://api.github.com/users/shengkui/gists{/gist_id}","starred_url":"https://api.github.com/users/shengkui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shengkui/subscriptions","organizations_url":"https://api.github.com/users/shengkui/orgs","repos_url":"https://api.github.com/users/shengkui/repos","events_url":"https://api.github.com/users/shengkui/events{/privacy}","received_events_url":"https://api.github.com/users/shengkui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T09:48:04Z","updated_at":"2021-09-08T09:48:04Z","author_association":"NONE","body":"@openinx thanks, I'll have a try.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915089953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915355537","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-915355537","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":915355537,"node_id":"IC_kwDOCW7NX842jzeR","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T15:46:51Z","updated_at":"2021-09-08T15:46:51Z","author_association":"MEMBER","body":"I agree with @openinx that ideally we really should try to get a more V2-style algorithm here that is able to take into account deletes and such. But I don't have an issue with adding more parameters to bin-pack.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915355537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915401031","html_url":"https://github.com/apache/iceberg/issues/3087#issuecomment-915401031","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3087","id":915401031,"node_id":"IC_kwDOCW7NX842j-lH","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T16:48:00Z","updated_at":"2021-09-08T16:57:59Z","author_association":"COLLABORATOR","body":"@pvary thanks, yea that makes sense.  Looking at it, the only small problem is that ClientPool would add one more layer of retry and so that probably should be removed based on this approach, and if other client pools implementations are planned that would have taken advantage of retry at that layer (probably should disable the ClientPool layer retry just for Hive then)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915401031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915403020","html_url":"https://github.com/apache/iceberg/pull/2804#issuecomment-915403020","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2804","id":915403020,"node_id":"IC_kwDOCW7NX842j_EM","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T16:50:43Z","updated_at":"2021-09-08T16:50:43Z","author_association":"COLLABORATOR","body":"@jhsenjaliya do you plan to continue working on it, or I can also help?  Probably we need to get rid of the extra retry at ClientPool layer and refactor more codes to get it to work.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915403020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915492512","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-915492512","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":915492512,"node_id":"IC_kwDOCW7NX842kU6g","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T19:01:22Z","updated_at":"2021-09-08T19:01:22Z","author_association":"CONTRIBUTOR","body":"> @WinkerDu I definitely agreed the v2 bin-pack algorithm should be improved for v2 to consider the total size of insert & delete files. I think the `iterms-per-bin` proposed from you team is trying to resolve the unbalanced issue, but I'm concerning it's hard to set the correct `iterms-per-bin` value for a given table in real production environment, because the `iterms-per-bin` is still controlling the data file's count. We actually don't have a real suitable approach to evaluate the cost about joining the data file size & its delete records. I think we need more accurate approach to decide which scan tasks should be dispatched to different tasks.\r\n\r\nI need to spend some time looking closer at the test cases (and probably try this out on some V2 tables), but I share the concern that this config value might be really hard to determine in a production env. Especially for example Flink users who have CDC streams, often times databases will experience a burst of deletes / updates due to some cron schedule and will then have an outsized number of delete files for a period of time (assuming partitioned by time as well).\r\n\r\nWondering how we would go about picking a good number (or how often one would need to set a non-standard number, or change the number for individual sections of the table).\r\n\r\nThat said, I'm also not adverse to adding another argument to make bin packing more useful in the near-term while we figure out the best way to have a more \"V2 native\" algorithm / parameter set.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915492512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915508215","html_url":"https://github.com/apache/iceberg/pull/3078#issuecomment-915508215","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3078","id":915508215,"node_id":"IC_kwDOCW7NX842kYv3","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T19:24:47Z","updated_at":"2021-09-08T19:24:47Z","author_association":"CONTRIBUTOR","body":"> I just try JDBC Catalog in my local machine following [this guide](https://iceberg.apache.org/jdbc/), but I got the following exception:\r\n\r\n\r\n@dungdm93 once this is merged in, would you mind updating that guide in a follow up PR?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915508215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915566593","html_url":"https://github.com/apache/iceberg/pull/2820#issuecomment-915566593","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2820","id":915566593,"node_id":"IC_kwDOCW7NX842knAB","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T21:00:03Z","updated_at":"2021-09-08T21:00:03Z","author_association":"MEMBER","body":"@rdblue Are we good to go with this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915566593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915599021","html_url":"https://github.com/apache/iceberg/pull/2804#issuecomment-915599021","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2804","id":915599021,"node_id":"IC_kwDOCW7NX842ku6t","user":{"login":"jhsenjaliya","id":5017402,"node_id":"MDQ6VXNlcjUwMTc0MDI=","avatar_url":"https://avatars.githubusercontent.com/u/5017402?v=4","gravatar_id":"","url":"https://api.github.com/users/jhsenjaliya","html_url":"https://github.com/jhsenjaliya","followers_url":"https://api.github.com/users/jhsenjaliya/followers","following_url":"https://api.github.com/users/jhsenjaliya/following{/other_user}","gists_url":"https://api.github.com/users/jhsenjaliya/gists{/gist_id}","starred_url":"https://api.github.com/users/jhsenjaliya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhsenjaliya/subscriptions","organizations_url":"https://api.github.com/users/jhsenjaliya/orgs","repos_url":"https://api.github.com/users/jhsenjaliya/repos","events_url":"https://api.github.com/users/jhsenjaliya/events{/privacy}","received_events_url":"https://api.github.com/users/jhsenjaliya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T21:53:18Z","updated_at":"2021-09-08T21:53:18Z","author_association":"NONE","body":"Hi @szehon-ho , yes, since the clientPool is designed to take care of reties, and RetryingHiveMetastore client does not really allow individual object creation, its hard to replace it without significant code replacement which i feel now unnecessary, I explained the issue in discussion at #2741","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915599021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915638970","html_url":"https://github.com/apache/iceberg/pull/2820#issuecomment-915638970","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2820","id":915638970,"node_id":"IC_kwDOCW7NX842k4q6","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T23:25:21Z","updated_at":"2021-09-08T23:25:21Z","author_association":"CONTRIBUTOR","body":"Looks good to me. The other build settings weren't needed after all?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915638970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915641643","html_url":"https://github.com/apache/iceberg/pull/3089#issuecomment-915641643","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3089","id":915641643,"node_id":"IC_kwDOCW7NX842k5Ur","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T23:32:40Z","updated_at":"2021-09-08T23:32:40Z","author_association":"CONTRIBUTOR","body":"`StaticTableOperations` is still used for the base table, since we are using an older version of table metadata as a read-only table. The difference here is that we pass the table based on `StaticTableOperations` through to create metadata tables, so that they use the correct `FileIO`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915641643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915646119","html_url":"https://github.com/apache/iceberg/pull/3073#issuecomment-915646119","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3073","id":915646119,"node_id":"IC_kwDOCW7NX842k6an","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T23:45:02Z","updated_at":"2021-09-08T23:45:02Z","author_association":"CONTRIBUTOR","body":"This doesn't seem like the right way to solve the problem that some splits are too expensive because there are too many delete files. A symptom of the problem is that it isn't obvious how to set the maximum number of items per bin.\r\n\r\nI think that the right approach to solve the problem is to modify the weight function that we use for splits, _not_ to modify the bin packing algorithm itself.\r\n\r\nA straightforward way to fix this problem is to make the weight function take into account how much of a penalty a delete file is. Right now, the weight function is this, in `TableScanUtil`:\r\n\r\n```java\r\n    Function<FileScanTask, Long> weightFunc = file -> Math.max(file.length(), openFileCost);\r\n```\r\n\r\nThat could easily be updated so that each delete file that must be opened is added to the open cost:\r\n\r\n```java\r\n    Function<FileScanTask, Long> weightFunc = file -> Math.max(file.length(), (1 + file.deletes().size()) * openFileCost);\r\n```\r\n\r\nAnother option is to check the size of the delete data as well:\r\n\r\n```java\r\n    Function<FileScanTask, Long> weightFunc = file -> Math.max(\r\n        file.length() + file.deletes().stream().mapToLong(ContentFile::fileSizeInBytes).sum(),\r\n        (1 + file.deletes().size()) * openFileCost);\r\n```\r\n\r\nLet's try those options instead of modifying bin packing. I think modifying the packing algorithm is the wrong direction.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/915646119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]