[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775886630","html_url":"https://github.com/apache/accumulo/issues/3844#issuecomment-1775886630","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3844","id":1775886630,"node_id":"IC_kwDOACaFSM5p2eEm","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T19:29:12Z","updated_at":"2023-10-23T19:29:12Z","author_association":"CONTRIBUTOR","body":"> @dlmarion you had mentioned making log recovery separate from hosting of a tablet in a conversation we had a while ago. I can not remember the context as to why you suggested that. Having that capability that would clean up this situation.\r\n\r\nThe only conversation I remember regarding this is related to making log recovery a task that is executed within the changes of #3801 . ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775886630/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775934470","html_url":"https://github.com/apache/accumulo/issues/3844#issuecomment-1775934470","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3844","id":1775934470,"node_id":"IC_kwDOACaFSM5p2pwG","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T20:03:52Z","updated_at":"2023-10-23T20:03:52Z","author_association":"CONTRIBUTOR","body":"> Would it be an issue in general if a tablets with a hosting goal of NEVER having a wal at all?\r\n\r\n\r\nYeah, its not good, need to do something about that situation","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775934470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775955273","html_url":"https://github.com/apache/accumulo/issues/3871#issuecomment-1775955273","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3871","id":1775955273,"node_id":"IC_kwDOACaFSM5p2u1J","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T20:18:45Z","updated_at":"2023-10-23T20:18:45Z","author_association":"CONTRIBUTOR","body":"I think there is a case where a NoClassDefFoundError could be thrown without the use of a context set on a table and the ContextClassLoaderFactory. Consider an iterator class that is configured for a scan, which would be loaded [here](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/iteratorsImpl/IteratorConfigUtil.java#L247). The iterator class could be found, but could possibly be dependent on a class in a jar that is not on the classpath.\r\n\r\nI believe in this scenario a NoClassDefFoundError would be thrown and the TabletServer terminated. The scan for the Tablet would fail, the Tablet would be re-hosted, and possibly take down another TabletServer. If it's the case that an adminnistrator forgot to deploy the jar on several or all TabletServers, then this could cascade to many or all TabletServers.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775955273/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775959141","html_url":"https://github.com/apache/accumulo/issues/3825#issuecomment-1775959141","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3825","id":1775959141,"node_id":"IC_kwDOACaFSM5p2vxl","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T20:21:32Z","updated_at":"2023-10-23T20:28:44Z","author_association":"CONTRIBUTOR","body":"@dlmarion #3826 only removed the sunny tag from a subset of tests in the main branch.  Did not remove the sunny tag from more test when merging from main.   I opened #3881 to roll back all of the sunny additions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775959141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775987227","html_url":"https://github.com/apache/accumulo/issues/3880#issuecomment-1775987227","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3880","id":1775987227,"node_id":"IC_kwDOACaFSM5p22ob","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T20:41:51Z","updated_at":"2023-10-23T20:41:51Z","author_association":"CONTRIBUTOR","body":"Is this somewhat of a duplicate of #3663  ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775987227/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775994821","html_url":"https://github.com/apache/accumulo/issues/3666#issuecomment-1775994821","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3666","id":1775994821,"node_id":"IC_kwDOACaFSM5p24fF","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T20:47:32Z","updated_at":"2023-10-23T20:47:32Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - does #3705 close this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775994821/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1776100108","html_url":"https://github.com/apache/accumulo/issues/3663#issuecomment-1776100108","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3663","id":1776100108,"node_id":"IC_kwDOACaFSM5p3SMM","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T22:09:26Z","updated_at":"2023-10-23T22:09:26Z","author_association":"CONTRIBUTOR","body":"Closing #3880 as a duplicate. As mentioned in comments on that issue, do not want to let walogs linger indefinitely.   So may want to host tablets that have a hosting goal of never or ondemand if they have walogs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1776100108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1776107695","html_url":"https://github.com/apache/accumulo/issues/3880#issuecomment-1776107695","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3880","id":1776107695,"node_id":"IC_kwDOACaFSM5p3UCv","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T22:16:07Z","updated_at":"2023-10-23T22:16:07Z","author_association":"CONTRIBUTOR","body":"Closed this because it was a duplicate of #3663","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1776107695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1776261977","html_url":"https://github.com/apache/accumulo/pull/3876#issuecomment-1776261977","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3876","id":1776261977,"node_id":"IC_kwDOACaFSM5p35tZ","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T00:23:53Z","updated_at":"2023-10-24T00:23:53Z","author_association":"CONTRIBUTOR","body":"Added tests for Upgrader11to12 with 3ff4d1655b432a","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1776261977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777369635","html_url":"https://github.com/apache/accumulo/pull/3877#issuecomment-1777369635","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3877","id":1777369635,"node_id":"IC_kwDOACaFSM5p8IIj","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T14:40:10Z","updated_at":"2023-10-24T14:40:10Z","author_association":"CONTRIBUTOR","body":"> I'm thinking that we should only have the check that the description ends with a period. Then it doesn't matter what the content is. I'm not sure why we would enforce content in one case and not the other. What if more information is needed before the \"see jlink...\" part?\r\n\r\nThat makes sense. I looked into other properties a bit more and it turns out we have different ways of generating jlink statements. \r\n\r\nI wanted to validate their format was correct, but to avoid a very rigid structure I think that's a problem that should be handled as part of the jekyll rendering in accumulo-website vs attempting to handle it here in a java test.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777369635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777472590","html_url":"https://github.com/apache/accumulo/issues/3834#issuecomment-1777472590","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3834","id":1777472590,"node_id":"IC_kwDOACaFSM5p8hRO","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T15:22:31Z","updated_at":"2023-10-24T15:22:31Z","author_association":"CONTRIBUTOR","body":"> @dlmarion that approach sounds good. Could add a 4th step of opening an issue to ensure all the `@Ignore` tags are removed in elasticity.\r\n\r\nI'm not sure that an issue to remove all of the Ignore annotations is necessary. I added \"//ELASTICITY_TODO\" to all of the Ignore annotations that I added in #3884. I am 100% positive that we are going to be  looking for all of the TODOs and resolving them, and looking at the failing tests in Jenkins.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777472590/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777518609","html_url":"https://github.com/apache/accumulo/pull/3884#issuecomment-1777518609","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3884","id":1777518609,"node_id":"IC_kwDOACaFSM5p8sgR","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T15:45:37Z","updated_at":"2023-10-24T15:45:37Z","author_association":"CONTRIBUTOR","body":"A lot of the test failures are due to timeouts. Some of the tests that failed initially due to a timeout succeeded on a retry. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777518609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777533727","html_url":"https://github.com/apache/accumulo/issues/3767#issuecomment-1777533727","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3767","id":1777533727,"node_id":"IC_kwDOACaFSM5p8wMf","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T15:52:39Z","updated_at":"2023-10-24T15:52:39Z","author_association":"CONTRIBUTOR","body":"Looks like https://github.com/apache/accumulo/pull/3885 might address this or maybe partially","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777533727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777545506","html_url":"https://github.com/apache/accumulo/issues/3834#issuecomment-1777545506","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3834","id":1777545506,"node_id":"IC_kwDOACaFSM5p8zEi","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T15:58:24Z","updated_at":"2023-10-24T15:58:24Z","author_association":"CONTRIBUTOR","body":"Kicked off another Full IT build after merging #3884 to see if I got all of the tests.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777545506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777545832","html_url":"https://github.com/apache/accumulo/issues/3767#issuecomment-1777545832","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3767","id":1777545832,"node_id":"IC_kwDOACaFSM5p8zJo","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T15:58:33Z","updated_at":"2023-10-24T15:58:33Z","author_association":"CONTRIBUTOR","body":"> Looks like https://github.com/apache/accumulo/pull/3885 might address this or maybe partially\r\n\r\nYeah it is partial, not all file logging is consistent.  I focused on the logging that just logs the file name in #3885 as it was logging incomplete information.  For this issue it may be good to look at making more logging of tablet files use the same methods.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777545832/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777550194","html_url":"https://github.com/apache/accumulo/issues/3767#issuecomment-1777550194","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3767","id":1777550194,"node_id":"IC_kwDOACaFSM5p80Ny","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T16:00:44Z","updated_at":"2023-10-24T16:00:44Z","author_association":"CONTRIBUTOR","body":"Also may want to refactor the code in #3885 to support logging full URI + row range.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777550194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777619044","html_url":"https://github.com/apache/accumulo/pull/3872#issuecomment-1777619044","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3872","id":1777619044,"node_id":"IC_kwDOACaFSM5p9FBk","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T16:39:30Z","updated_at":"2023-10-24T16:39:30Z","author_association":"CONTRIBUTOR","body":"> @dlmarion would it make sense to remove `ManagementAction.BAD_STATE` and roll it into this new more general error handling? \r\n\r\nBAD_STATE is set in TabletManagementIterator when `tm.isFutureAndCurrentLocationSet()`. However, it's never checked in TabletGroupWatcher. Instead, TGW also checks `tm.isFutureAndCurrentLocationSet()` and throws `BadLocationStateException` in this case. When this is thrown, `repairMetadata` is called to fix it. I think we can get rid of BAD_STATE in the iterator entirely, as it's checked in TGW. I don't think we should roll it into the error handling.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777619044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777640877","html_url":"https://github.com/apache/accumulo/pull/3872#issuecomment-1777640877","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3872","id":1777640877,"node_id":"IC_kwDOACaFSM5p9KWt","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T16:50:30Z","updated_at":"2023-10-24T16:50:30Z","author_association":"CONTRIBUTOR","body":"Looking at the code further, I think we should leave as is. If we are not going to add an error for this condition, then we need to add an action so that the TabletMetadata gets returned.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777640877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777859093","html_url":"https://github.com/apache/accumulo/issues/3888#issuecomment-1777859093","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3888","id":1777859093,"node_id":"IC_kwDOACaFSM5p9_oV","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T19:06:57Z","updated_at":"2023-10-24T19:06:57Z","author_association":"CONTRIBUTOR","body":"See the comments on #3872.  Depending on what happens with the repairMetadata function, it may make sense to remove ManagementAction.BAD_STATE and turn it into an error condition.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777859093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777862708","html_url":"https://github.com/apache/accumulo/pull/3872#issuecomment-1777862708","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3872","id":1777862708,"node_id":"IC_kwDOACaFSM5p-Ag0","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T19:09:24Z","updated_at":"2023-10-24T19:09:35Z","author_association":"CONTRIBUTOR","body":"> When this is thrown, repairMetadata is called to fix it. \r\n\r\nI had an item on the project board to look into the repairMetadata function and I just converted it to an issue #3888 and commented on it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1777862708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1778122881","html_url":"https://github.com/apache/accumulo/issues/3889#issuecomment-1778122881","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3889","id":1778122881,"node_id":"IC_kwDOACaFSM5p_ACB","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T22:09:36Z","updated_at":"2023-10-24T22:09:36Z","author_association":"CONTRIBUTOR","body":"Looked into this and found what the problem was. When the tablet minor compacts after log recovery its requiring the tablet server to be the current location.  However in the log recovery case, the tablet server is still the future location.  Looking into fixing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1778122881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1778129946","html_url":"https://github.com/apache/accumulo/issues/2264#issuecomment-1778129946","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2264","id":1778129946,"node_id":"IC_kwDOACaFSM5p_Bwa","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T22:15:56Z","updated_at":"2023-10-26T18:17:45Z","author_association":"MEMBER","body":"It looks like there are 3 separate tasks for this:\r\n\r\n1. Make sure `-f, --show-few` stops showing up in the MaxRowCommand's help\r\n2. Make sure GrepCommand (and by extension, EGrepCommand) make use of the `showFewOpt` in a similar way as in ScanCommand\r\n3. Make sure `--show-few` is not documented and does not function in the DeleteManyCommand (the corresponding shortname `-f` is already clobbered for `--force` in this command)\r\n\r\nThe much cleaner solution is to just get rid of the `-f, --show-few` option entirely. It's an edge case for formatting output that is probably just not needed, as it adds too much complexity and is poorly documented.\r\n\r\nAnother option is to split out the construction of the ScanCommand options into those without the `-f, --show-few` option and those with it. The ScanCommand itself could use the version with it, but subclasses could use the set of options without it. That way, it still works on the ScanCommand where it's documented and working already, but is removed from the help for any subclasses. The only issue with this is that you really have to be careful to get the correct set of options in all of ScanCommand's subclasses. This option would be suitable as a fix for 2.1, whether or not we decide to remove it later.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1778129946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1778190682","html_url":"https://github.com/apache/accumulo/pull/3891#issuecomment-1778190682","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3891","id":1778190682,"node_id":"IC_kwDOACaFSM5p_Qla","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-24T23:03:36Z","updated_at":"2023-10-24T23:04:52Z","author_association":"CONTRIBUTOR","body":"@dlmarion  this change gets all of the test running in `RestartIT` except for `killedTabletServerDuringShutdown()`.  That test seems to be having an additional problem, the scan server is not starting for some reason.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1778190682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1778546222","html_url":"https://github.com/apache/accumulo/issues/3871#issuecomment-1778546222","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3871","id":1778546222,"node_id":"IC_kwDOACaFSM5qAnYu","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T05:35:46Z","updated_at":"2023-10-25T05:35:46Z","author_association":"MEMBER","body":"Rather than a low-level bypass of JVM error handling, I would rather focus our attention on safer alternative solutions to protect users from common configuration management errors, such as (possibly):\r\n\r\n* Encourage the use of our `testClassLoad` API. Maybe improve this if it has shortcomings,\r\n* Add high level checks during the setup of the iterator stack, catching ClassNotFoundException, or add a \"check\" method to iterators (if they implement a Checkable interface), so we can get fast (and recoverable) failures from scans,\r\n* Automatically do a `testClassLoad` check whenever a table property is attempted to be set that involves a property of type CLASSNAME (and on startup), similar to how we now check the context name in #3683\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1778546222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1779109779","html_url":"https://github.com/apache/accumulo/issues/3871#issuecomment-1779109779","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3871","id":1779109779,"node_id":"IC_kwDOACaFSM5qCw-T","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T11:58:41Z","updated_at":"2023-10-25T11:58:41Z","author_association":"CONTRIBUTOR","body":"> NoClassDefFoundError can be accompanied by serious state changes in the JVM. For example, a NoClassDefFoundError can occur because of an exception in a static initializer block while trying to load a class. One problem is that that static initializer can change some JVM-wide state before it fails, leading to an unknowable state. So, even though the class couldn't load, it doesn't mean the JVM is in a knowable good state. These errors are fatal because they can leave the JVM in a bad, often unknowably bad, state.\r\n\r\nBased on [this](https://docs.oracle.com/javase/specs/jvms/se11/html/jvms-5.html#jvms-5.5) and its preceding sections, I\"m not sure that this can happen. It appears that when loading a class the object hierarchy is loaded, resolved, and verified before any initialization happens.\r\n\r\nThe problem with the `testClassLoad` method, if I remember correctly what it does, is that it reaches out to a random TabletServer to see if it can load a class. If a subset of the TabletServers are missing a jar, then this would only randomly test the condition, but would always terminate the TabletServer when the user scan attempts to scan a hosted Tablet. Your second bullet, checks during the setup of the iterator stack, might be a good compromise. If we added `LinkageError` to the catch statement [here](https://github.com/apache/accumulo/blob/2.1/core/src/main/java/org/apache/accumulo/core/iteratorsImpl/IteratorConfigUtil.java#L229) for example.\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1779109779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1779171789","html_url":"https://github.com/apache/accumulo/issues/3871#issuecomment-1779171789","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3871","id":1779171789,"node_id":"IC_kwDOACaFSM5qDAHN","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T12:31:42Z","updated_at":"2023-10-25T12:37:46Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I did handle all errors in a separate class loader and class loader factory.  This time the errors were outside of that path.  Indeed my class loader threw a class not found exception, and the system class loader turned that into a class no def error which subsequently halted the tserver.  Now I have to change the uncaught exception handler in our fork to catch LinkageError as well and not halt in that case.  There may be a better place to put that catch as @dlmarion suggests to narrow the scope down to just scans.  I will dig up the stack trace tomorrow and send it around.\r\n\r\nThe basic issue here is that any user could setup a scan (intentionally or unintentionally) with classes that end up with this error and take down the system.  This cannot be allowed to happen.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1779171789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1779188584","html_url":"https://github.com/apache/accumulo/issues/3871#issuecomment-1779188584","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3871","id":1779188584,"node_id":"IC_kwDOACaFSM5qDENo","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T12:41:31Z","updated_at":"2023-10-25T12:41:31Z","author_association":"MEMBER","body":"For scan time iterators, I definitely think we should check that the specified class is available on the class path before we allow the scan to continue. It definitely shouldn't kill the tablet server if the user specified a scan with an unavailable iterator. That's not a configuration management error. That's a fail on Accumulo's part in validating user input. You shouldn't have to override the default behavior to get that. That should just happen by default, at least for CNFE. For an iterator that is available, but whose dependencies aren't, and that causes NoClassDefFoundError, that admin error is harder to deal with by default, as the error can cause problems later and may not be recoverable and it's not possible for Accumulo to automatically know if it is or isn't. But we can at least do the first thing by default, so the user doesn't have to do custom things for that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1779188584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1779345845","html_url":"https://github.com/apache/accumulo/pull/3875#issuecomment-1779345845","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3875","id":1779345845,"node_id":"IC_kwDOACaFSM5qDqm1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T14:01:33Z","updated_at":"2023-10-25T14:01:33Z","author_association":"CONTRIBUTOR","body":"@keith-turner - does this close #3763 ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1779345845/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1779543767","html_url":"https://github.com/apache/accumulo/issues/3892#issuecomment-1779543767","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3892","id":1779543767,"node_id":"IC_kwDOACaFSM5qEa7X","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T15:31:58Z","updated_at":"2023-10-25T15:31:58Z","author_association":"CONTRIBUTOR","body":"It is an interface and that is just providing a default implementation. Is it not the responsibility of the classes that extend it to provide an implementation?\r\n\r\nThe fact that it throws an UnsupportedOperationException is true.\r\nThe fact that it will be removed in a future version is also true.\r\n\r\nIf the message was \"this operation is not implemented and must be overridden\" would be accurate, but sort of redundant with the UnsupportedOperationException itself.  Stating that it will be removed may be help for developers - rather than just implementing the method, maybe they'd choose another path?\r\n\r\nThe message may not be the most user friendly message, but it is providing accurate information and does not seem to be a bug. The code is functionally correct - unless you think there should be a different default implementation?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1779543767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1780107506","html_url":"https://github.com/apache/accumulo/pull/3893#issuecomment-1780107506","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3893","id":1780107506,"node_id":"IC_kwDOACaFSM5qGkjy","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-25T21:52:05Z","updated_at":"2023-10-25T21:52:05Z","author_association":"CONTRIBUTOR","body":"Thought of the following while looking at this.\r\n\r\n * If a tablet needs volume replacement, then its probably not functional (at least for scans, maybe write would work).\r\n * Volume replacement is an instance prop, so it cant change while manager process is running.  \r\n * Only need to have TabletMgmtIter look for volume replacements for a bit after the manager starts. Do not need to always do it. Inspecting tablets for volume replacement may be expensive and doing it all the time is probably not nessecary.\r\n * Trying to refresh the tablets is tricky in the face of process death, like the manager dies after making metadata update but before refreshing tablet.  To deal with this could either use fate or generalize the mechanism that compaction use to do the refresh.  However the compaction mechanism has an issue open to use FATE and jettison its custom mechanism.  Bulk import also refreshes tablets, but its running in FATE so it makes things simple.\r\n \r\nWith the above in mind, thinking could take the following approach for this change.\r\n \r\n * After the first full scan by the TabletGroupWatcher where it sees no tablets need volume replacements, then it no longer will ask the TabletMgmtIterator to look for volume replacements for all of its subsequent full scans.  Seems like after this point it could alway pass an empty list of volume replacements to the tabletmgmtiterator.\r\n\r\n * For tablets that need volume replacement, we unassign them or avoid assigning them if they are not assigned. This avoids having to worry about refreshing the tablet. The tablet group watcher only replaces volumes on tablets with no location and no operation id, checked using conditional mutations.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1780107506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781414027","html_url":"https://github.com/apache/accumulo/issues/3485#issuecomment-1781414027","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3485","id":1781414027,"node_id":"IC_kwDOACaFSM5qLjiL","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T16:02:18Z","updated_at":"2023-10-26T16:02:18Z","author_association":"CONTRIBUTOR","body":"JLine 3.24.0 was released - working on testing it now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781414027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781457175","html_url":"https://github.com/apache/accumulo/issues/3823#issuecomment-1781457175","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3823","id":1781457175,"node_id":"IC_kwDOACaFSM5qLuEX","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T16:29:30Z","updated_at":"2023-10-26T16:30:40Z","author_association":"CONTRIBUTOR","body":"The interaction of Merge with other operations would need the most attention if removing table locks.  Currently the table locks prevents other operations from running concurrently with merge.  The following is an initial pass of thinking through problems with table operations and merge.\r\n\r\n\r\n## User compactions\r\n\r\nUser compactions create two tablet metadata columns, one for running compactions and one for completed compactions.  Without table locks, merge would need to handle these in some way.  These columns can not be copied during a merge operation.  Would conceptually want merge to wait on compaction or cancel them.  A nice behavior would be if merge cancels running compactions and lets existing completed compaction markers be processed before starting to merge.  \r\n\r\n * Merge places operation id on tablet and in the same mutation deletes any entries for running compactions.\r\n * After placing the operation ids, merge waits for all tablets to have no location and no compaction completed markers.  \r\n\r\nThe above would make merge wait on completed compactions to be acknowledged without waiting on running compactions or allowing new compactions to start until after the merge is complete.\r\n\r\n## Bulk import\r\n Bulk import adds loaded markers to tablets.  During merge these loaded markers would need to be handled.  Currently bulk import does the following.\r\n\r\n 1. Checks that its load mapping aligns with actual split points in the table and if not throws a concurrent merge exception. The checks for merge that happened between file inspection to create the load mapping and acquiring the table lock.\r\n 2. Starts loading files into tablets with the assumption that a concurrent merge will not happen because of the table lock. Write load columns to individual tablets.\r\n 3.  After all tablets are loaded, deletes the loaded mappings from each tablet.\r\n\r\nThe reason step 1 is done that files need to be imported into the exact tablets specified.  However with the ability of files to now have ranges, it may be that if the load mapping does not align with the tables splits that we could add ranges to the bulk loaded files to handle this situation.  The merge operation could also adjust these ranges on loaded mappings like it does for file mappings, this would allow bulk import to detect ranges that are not completely covered.\r\n\r\nAdding ranges to the load mapping may also remove the need to ever throw concurrent merge exception in the bulk API, as concurrent merges could now be handled.  So maybe [this check](https://github.com/apache/accumulo/blob/c44216d7643c50830e0619a2037d4a8d20c15a01/server/manager/src/main/java/org/apache/accumulo/manager/tableOps/bulkVer2/PrepBulkImport.java#L181) could be modified or removed.\r\n\r\n## Split tablets\r\n\r\nSplit and merge both set operation ids on tablets, so this case is easy.  They can wait on each via the operation id.\r\n\r\n## Merge\r\n\r\nConcurrent merge operations that run on the same table with overlapping ranges could deadlock if acquiring operation ids is not done with care.  If merge operations observer other merge operations in the metadata table, one of them could remove its operation ids to let the other proceed.  Could be the merge operation with the highest fate tx id.  Relinquishing opids would only need to be done when a merge operation is in the phase of acquiring operation ids on all of its tablets.  Once a merge operation is past the acquisition phase, it can just complete and no longer needs to worry about relinquishing.\r\n\r\n## Clone\r\n\r\nThe clone code makes repeated passes over the source and destination metadata until convergence is confirmed.  This clone code is currently split tolerant, would need to make this code also merge tolerant.\r\n\r\n## Delete table\r\n\r\nIf delete table acquires operation ids on a tablet, then it will mostly be fine with concurrent merges.  However when a merge operation is in its acquisition phase, it should relinquish any operation ids it has obtained if it sees delete table operation ids.\r\n\r\n## Offline table\r\n\r\nCurrently taking a table offline would wait for any running merge to complete and after taking the table offline would prevent any merge from starting.  Without table locks this would be hard to achieve without placing information in each tablet for an offline table.  Maybe tablets could have a state of enabled or disabled (using terminology from #3860).  This per tablet state could have the following properties.\r\n \r\n * Can only transition to disabled when there are no operation ids and no location.\r\n * A merge operation can not set an operation id on a tablet if its state is disabled\r\n\r\nMaybe the APIs for online/offline of a table goes away and turns conceptually into a concept of enabling and disabling ranges of a table.\r\n\r\n## Export table\r\n\r\nExporting  a t table currently depends on the table being offline, so the conflict of offline with merge should consider export.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781457175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781464698","html_url":"https://github.com/apache/accumulo/issues/3412#issuecomment-1781464698","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3412","id":1781464698,"node_id":"IC_kwDOACaFSM5qLv56","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T16:34:04Z","updated_at":"2023-10-26T16:34:04Z","author_association":"CONTRIBUTOR","body":"One problem with not getting a tablet lock is that splits could run on an offline table.  See [this comment](https://github.com/apache/accumulo/issues/3823#issuecomment-1781457175)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781464698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781527230","html_url":"https://github.com/apache/accumulo/issues/3823#issuecomment-1781527230","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3823","id":1781527230,"node_id":"IC_kwDOACaFSM5qL_K-","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T17:17:50Z","updated_at":"2023-10-26T17:21:35Z","author_association":"CONTRIBUTOR","body":"To address the problem outlined in the previous comment between merge and offlline table, could replace offline/online of table with per tablet states. Could have the following tablet states.  Tablet states would generalize and replace the existing tablet operation id column.  It would offer the same functionality that operation id currently offers, plus more with the concept of enabled and disabled.\r\n\r\n| Tablet state | Description |\r\n|-----------------|----------------|\r\n| NEW | While a table is in the process of being created its tablets would have this state. |\r\nENABLED | A tablet in this state is available for read,write, compaction, split, merge, etc. |\r\nDISABLED | A tablet in this state is only available for clone, delete, clone, and export table.  All other operations should fail |\r\nSPLITTING | A tablet in this state is currently splitting and is not available for other operations |\r\nMERGING | A tablet in this state is currently merging and is not available for other operations |\r\nDELETING | When a tablet is in this state, its table is in process of being deleted and its not available for any operations |\r\n\r\n\r\nBelow is a table of valid tablet state transitions.   \r\n\r\n| From                | to NEW | to ENABLED | to DISABLED | to SPLITTING | to MERGING | to DELETING |\r\n|---------------|-|-|-|-|-|-|\r\n| NEW          |         |                  |                  |                    |                   |                   |\r\n| ENABLED  |         |                   |                  |                   |                 |                 |\r\n| DISABLED |         |                  |                   |                    |                   |                  |\r\n| SPLITTING |         |                 |                   |                    |                   |                   |\r\n| MERGING  |         |                  |                   |                    |                   |                   |\r\n| DELETING |         |                   |                   |                    |                   |                   |\r\n\r\nThe table operations `offline()` and `online()` could possibly replaced with `enable(RowRange range)` and `disable(RowRange range)`.  The impl of `offline()` and `online()` could call `enable(RowRange range)` and `disable(RowRange range)` with infinite ranges.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781527230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781535705","html_url":"https://github.com/apache/accumulo/pull/3895#issuecomment-1781535705","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3895","id":1781535705,"node_id":"IC_kwDOACaFSM5qMBPZ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T17:23:49Z","updated_at":"2023-10-26T17:23:49Z","author_association":"CONTRIBUTOR","body":"@EdColeman - you have this marked for 2.1.3, but are merging into `main`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781535705/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781556499","html_url":"https://github.com/apache/accumulo/pull/3895#issuecomment-1781556499","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3895","id":1781556499,"node_id":"IC_kwDOACaFSM5qMGUT","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T17:39:33Z","updated_at":"2023-10-26T17:39:33Z","author_association":"CONTRIBUTOR","body":"Changed base to 2.1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781556499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781817606","html_url":"https://github.com/apache/accumulo/pull/3896#issuecomment-1781817606","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3896","id":1781817606,"node_id":"IC_kwDOACaFSM5qNGEG","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T20:02:19Z","updated_at":"2023-10-26T20:03:21Z","author_association":"CONTRIBUTOR","body":"Looking at this, I was thinking that the set of servers to shutdown could percolate through the tablet group watchers.   Not sure if it would work.  Was thinking of something like the following.\r\n\r\n * User TGW  uses the managers set of servers to shutdown\r\n * Metadata TGW uses the User TGW set of servers to shutdown\r\n * Root TGW uses the Metadata TGW set of servers to shutdown\r\n\r\nWhen a TGW does a full metadata scan it does the following.\r\n\r\n 1. tmpshutdownServers = dependentWatcher.getServersToShutdown() (for the user TGW it would do tmpshutdownServers=manager.shutdownServers() )\r\n 2. pass tmpshutdownServers to tablet mgmt iterator\r\n 3. do full scan of metadata and remove any servers seen from tmpshutdownServers\r\n 4. set serversToShutdownForParent=tmpshutdownServers\r\n\r\nThinking that TGW would have a method named `getServersToShutdown()` and that it would return `serversToShutdownForParent`.  Also `serversToShutdownForParent` would initially be the empty set and would only be set after TGW does a full scan.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781817606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781940214","html_url":"https://github.com/apache/accumulo/issues/3823#issuecomment-1781940214","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3823","id":1781940214,"node_id":"IC_kwDOACaFSM5qNj_2","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T21:49:02Z","updated_at":"2023-10-26T21:49:46Z","author_association":"CONTRIBUTOR","body":"Trying to work through the possibility of allowing bulk import and merge to run concurrently and it seems like it would be complex and not worth the effort.  For example consider the situation where a bulk import wants to load file F1 into tablets T1, T2, and T3.  Also concurrently a merge wants to merge tablets T1,T2, and T3.\r\n\r\n * bulk load F1 into T1 adding a loaded marker\r\n * merge code sets an operation id on tablet T2\r\n * bulk load F1 into T3 adding a loaded marker\r\n\r\nSince the merge operation set an opid on T2, the bulk operation can not load into it.  If the merge operation were to wait on the loaded markers on T1 and T2, then deadlock would happen.  If the merge operation were to continue and set operation ids on T1,T3 and then proceed with the merge, then it would need to merge the loaded markers.  If T1,T2,T3 were merged into tablet T4, then T4 would need load markers with ranges so that the bulk import code can reason about the missing T2 range that is needed to complete the bulk import.\r\n\r\nAdding ranges to the load markers introduces a lot of complexity into the bulk import code when there is not a strong need for it.  It would be easier to somehow prevent bulk import and merge from running concurrently.  Both are quick metadata operations (unlike compactions) so there is not performance penalty to preventing them from running concurrently.  Without table locks, a possible way to do this is to add a new metadata column that prevents merges from starting. Bulk import could then do the following.\r\n\r\n  * For each tablet in the bulk import range set a new column that prevents merge from starting.\r\n  * If the merge block was successfully set, then proceed with the bulk import w/o having to worry about partial load of data and a merge happening.\r\n\r\nIf the merge block and merge opid are both observed, then one operation needs to back out its changes and wait to let the other operation start. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1781940214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782064768","html_url":"https://github.com/apache/accumulo/pull/3897#issuecomment-1782064768","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3897","id":1782064768,"node_id":"IC_kwDOACaFSM5qOCaA","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T23:26:34Z","updated_at":"2023-10-26T23:26:34Z","author_association":"CONTRIBUTOR","body":"Saw the following exception in the tserver where the metadata table could not close because its write to the root tablet failed.  Seems the code would throw an exception when trying to write to the root tablet when it did not have a location.  This change fixes the following bug.  Saw this while running SslIT.adminStop() test.\r\n\r\n```\r\n2023-10-26T18:52:14,985 [tserver.UnloadTabletHandler] ERROR: Failed to close tablet !0;~<... Aborting migration\r\njava.lang.RuntimeException: Exception occurred during minor compaction on !0;~<\r\n        at org.apache.accumulo.tserver.tablet.Tablet.minorCompact(Tablet.java:386) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.tablet.MinorCompactionTask.run(MinorCompactionTask.java:114) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.tablet.Tablet.initiateClose(Tablet.java:795) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.tablet.Tablet.close(Tablet.java:746) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.UnloadTabletHandler.run(UnloadTabletHandler.java:93) [classes/:?]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) [classes/:?]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) [classes/:?]\r\n        at java.lang.Thread.run(Thread.java:829) [?:?]\r\nCaused by: java.lang.RuntimeException: org.apache.accumulo.core.client.AccumuloException: java.util.NoSuchElementException: No value present\r\n        at org.apache.accumulo.server.metadata.ConditionalTabletsMutatorImpl.partitionResults(ConditionalTabletsMutatorImpl.java:142) ~[classes/:?]\r\n        at org.apache.accumulo.server.metadata.ConditionalTabletsMutatorImpl.writeMutations(ConditionalTabletsMutatorImpl.java:152) ~[classes/:?]\r\n        at org.apache.accumulo.server.metadata.ConditionalTabletsMutatorImpl.process(ConditionalTabletsMutatorImpl.java:206) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.tablet.Tablet.updateTabletDataFile(Tablet.java:1357) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.tablet.Tablet.bringMinorCompactionOnline(Tablet.java:1490) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.tablet.Tablet.minorCompact(Tablet.java:373) ~[classes/:?]\r\n        ... 9 more\r\nCaused by: org.apache.accumulo.core.client.AccumuloException: java.util.NoSuchElementException: No value present\r\n        at org.apache.accumulo.core.client.ConditionalWriter$Result.getStatus(ConditionalWriter.java:71) ~[classes/:?]\r\n        at org.apache.accumulo.server.metadata.ConditionalTabletsMutatorImpl.partitionResults(ConditionalTabletsMutatorImpl.java:136) ~[classes/:?]\r\n        at org.apache.accumulo.server.metadata.ConditionalTabletsMutatorImpl.writeMutations(ConditionalTabletsMutatorImpl.java:152) ~[classes/:?]\r\n        at org.apache.accumulo.server.metadata.ConditionalTabletsMutatorImpl.process(ConditionalTabletsMutatorImpl.java:206) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.tablet.Tablet.updateTabletDataFile(Tablet.java:1357) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.tablet.Tablet.bringMinorCompactionOnline(Tablet.java:1490) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.tablet.Tablet.minorCompact(Tablet.java:373) ~[classes/:?]\r\n        ... 9 more\r\nCaused by: java.util.NoSuchElementException: No value present\r\n        at java.util.Optional.orElseThrow(Optional.java:382) ~[?:?]\r\n        at org.apache.accumulo.core.clientImpl.RootClientTabletCache.binMutations(RootClientTabletCache.java:62) ~[classes/:?]\r\n        at org.apache.accumulo.core.clientImpl.SyncingClientTabletCache.binMutations(SyncingClientTabletCache.java:82) ~[classes/:?]\r\n        at org.apache.accumulo.core.clientImpl.ConditionalWriterImpl.queue(ConditionalWriterImpl.java:288) ~[classes/:?]\r\n        at org.apache.accumulo.core.clientImpl.ConditionalWriterImpl.write(ConditionalWriterImpl.java:429) ~[classes/:?]\r\n        at org.apache.accumulo.server.metadata.ConditionalTabletsMutatorImpl.writeMutations(ConditionalTabletsMutatorImpl.java:148) ~[classes/:?]\r\n        at org.apache.accumulo.server.metadata.ConditionalTabletsMutatorImpl.process(ConditionalTabletsMutatorImpl.java:206) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.tablet.Tablet.updateTabletDataFile(Tablet.java:1357) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.tablet.Tablet.bringMinorCompactionOnline(Tablet.java:1490) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.tablet.Tablet.minorCompact(Tablet.java:373) ~[classes/:?]\r\n        ... 9 more\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782064768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782068732","html_url":"https://github.com/apache/accumulo/pull/3898#issuecomment-1782068732","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3898","id":1782068732,"node_id":"IC_kwDOACaFSM5qODX8","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T23:29:23Z","updated_at":"2023-10-26T23:29:42Z","author_association":"CONTRIBUTOR","body":"Was seeing the following error in the manager when running SslIT.adminStop() and it was causing the test to hang.  Seem the TGW for root could never run to assign the root tablet.\r\n\r\n```\r\n2023-10-26T18:18:50,691 [manager.Manager] ERROR: Error processing table state for store Root Table\r\njava.lang.IllegalStateException: TabletServer localhost:33197[1000585e1560006] in default TabletServer group, but not in set of all TabletServers\r\n        at org.apache.accumulo.core.spi.balancer.TableLoadBalancer.lambda$getCurrentSetForTable$0(TableLoadBalancer.java:152) ~[classes/:?]\r\n        at java.lang.Iterable.forEach(Iterable.java:75) ~[?:?]\r\n        at org.apache.accumulo.core.spi.balancer.TableLoadBalancer.getCurrentSetForTable(TableLoadBalancer.java:149) ~[classes/:?]\r\n        at org.apache.accumulo.core.spi.balancer.TableLoadBalancer.getAssignments(TableLoadBalancer.java:171) ~[classes/:?]\r\n        at org.apache.accumulo.manager.Manager.getAssignments(Manager.java:1760) ~[classes/:?]\r\n        at org.apache.accumulo.manager.TabletGroupWatcher.getAssignmentsFromBalancer(TabletGroupWatcher.java:815) ~[classes/:?]\r\n        at org.apache.accumulo.manager.TabletGroupWatcher.flushChanges(TabletGroupWatcher.java:859) ~[classes/:?]\r\n        at org.apache.accumulo.manager.TabletGroupWatcher.manageTablets(TabletGroupWatcher.java:540) ~[classes/:?]\r\n        at org.apache.accumulo.manager.TabletGroupWatcher.run(TabletGroupWatcher.java:587) [classes/:?]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782068732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782069566","html_url":"https://github.com/apache/accumulo/pull/3896#issuecomment-1782069566","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3896","id":1782069566,"node_id":"IC_kwDOACaFSM5qODk-","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T23:30:33Z","updated_at":"2023-10-26T23:30:33Z","author_association":"CONTRIBUTOR","body":"@dlmarion try running the admin stop ITs with the fixes from #3897 and #3898 and see how it goes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782069566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782072510","html_url":"https://github.com/apache/accumulo/pull/3898#issuecomment-1782072510","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3898","id":1782072510,"node_id":"IC_kwDOACaFSM5qOES-","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-26T23:34:08Z","updated_at":"2023-10-26T23:34:08Z","author_association":"CONTRIBUTOR","body":"Realized the change in this PR is not checking both directions.  It does not check for tservers in the set of all tservers that have no entry in the resource group set.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782072510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782753938","html_url":"https://github.com/apache/accumulo/issues/3845#issuecomment-1782753938","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3845","id":1782753938,"node_id":"IC_kwDOACaFSM5qQqqS","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T11:29:20Z","updated_at":"2023-10-27T11:29:20Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I think your proposed changes make sense. I think adding checks to the verifyMergeConsistency() make the most sense as it can be shared in 2.1 and 3.1 and the purpose of the method is a verification before starting so it's the logical spot. As you said, in 2.1 it may be more redundant since the WALs are checked before but wouldn't hurt. It's definitely needed in 3.1 since those checks were removed when I removed chopped compactions. For testing, I agree, it may not be easy to test with an IT, we may just need some unit testing. I can start working on a PR for the changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782753938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782857357","html_url":"https://github.com/apache/accumulo/pull/3897#issuecomment-1782857357","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3897","id":1782857357,"node_id":"IC_kwDOACaFSM5qRD6N","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T12:45:58Z","updated_at":"2023-10-27T12:45:58Z","author_association":"CONTRIBUTOR","body":"Great find. I didn't look in the tserver log, just the Manager log.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782857357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782952551","html_url":"https://github.com/apache/accumulo/issues/3823#issuecomment-1782952551","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3823","id":1782952551,"node_id":"IC_kwDOACaFSM5qRbJn","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T13:48:42Z","updated_at":"2023-10-27T13:48:42Z","author_association":"CONTRIBUTOR","body":"For concurrent merge and bulk import, thought of the following strategy that I like.\r\n\r\n * Merge does not acquire opid when loaded flags are present, using conditional mutations.\r\n * When the merge code is in the process of acquiring opids and observes loaded flags, it relinquishes the opids it has obtained.  This is to allow for overlapping bulk imports to load into those tablets.\r\n\r\nWith the above strategy bulk import and merge will not run concurrently.  Also bulk import does not have to take any extra step, only the merge code.   So since bulk import will run much more frequently than merge, its good to not add extra steps to bulk import to handle a rare condition.  One downside with this strategy is that its possible that merge could never run if there are continuous bulk imports.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782952551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782963674","html_url":"https://github.com/apache/accumulo/issues/3892#issuecomment-1782963674","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3892","id":1782963674,"node_id":"IC_kwDOACaFSM5qRd3a","user":{"login":"alerman","id":119506,"node_id":"MDQ6VXNlcjExOTUwNg==","avatar_url":"https://avatars.githubusercontent.com/u/119506?v=4","gravatar_id":"","url":"https://api.github.com/users/alerman","html_url":"https://github.com/alerman","followers_url":"https://api.github.com/users/alerman/followers","following_url":"https://api.github.com/users/alerman/following{/other_user}","gists_url":"https://api.github.com/users/alerman/gists{/gist_id}","starred_url":"https://api.github.com/users/alerman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alerman/subscriptions","organizations_url":"https://api.github.com/users/alerman/orgs","repos_url":"https://api.github.com/users/alerman/repos","events_url":"https://api.github.com/users/alerman/events{/privacy}","received_events_url":"https://api.github.com/users/alerman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T13:56:30Z","updated_at":"2023-10-27T13:56:30Z","author_association":"CONTRIBUTOR","body":"@EdColeman  I can't remember the details exactly, but i can tell you with 100% confidence that I hit this error message. I believe I was working on a volume chooser that extended from either the SpaceAware or from the Preferred. This message was hit, running in a test cluster, only after updating the version of accumulo I depended on from 1.x to 2.x.\r\n\r\nIn this case, a chooser that worked fine in 1.x, now threw exceptions in 2.x which stated that this \"would be removed in 3.0\". Code that I remember to have been working was now broken. \r\n\r\nPerhaps there is more to it I am not remembering, but regardless the message is not correct. If you dont want to be redundant just remove the message. But I would rather the message say something like \"You have hit the default implementation of this method, in a package which has been deprecated. Please see `link to SPI package`\"","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1782963674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783027905","html_url":"https://github.com/apache/accumulo/pull/3898#issuecomment-1783027905","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3898","id":1783027905,"node_id":"IC_kwDOACaFSM5qRtjB","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T14:37:14Z","updated_at":"2023-10-27T14:37:14Z","author_association":"CONTRIBUTOR","body":"> Realized the change in this PR is not checking both directions. It does not check for tservers in the set of all tservers that have no entry in the resource group set.\r\n\r\nI'm not sure we need to check that. Going back and looking at this code, it's somewhat of a mess, and doing all the translations for the SPI restrictions doesn't help.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783027905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783228644","html_url":"https://github.com/apache/accumulo/pull/3900#issuecomment-1783228644","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3900","id":1783228644,"node_id":"IC_kwDOACaFSM5qSejk","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T16:57:09Z","updated_at":"2023-10-27T16:57:09Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I moved some of the new logic into a couple package level methods to add a couple tests but most of this stuff is very hard to test without spending a ton of time mocking or setting up ITs. I figure the existing merge and delete ITs should be able to check things.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783228644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783240590","html_url":"https://github.com/apache/accumulo/pull/3898#issuecomment-1783240590","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3898","id":1783240590,"node_id":"IC_kwDOACaFSM5qSheO","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T17:06:39Z","updated_at":"2023-10-27T17:06:39Z","author_association":"CONTRIBUTOR","body":"I think I will have an alternate PR here in a bit. I applied this change, but I was still seeing errors in the logs. I might have it cleaned up.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783240590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783250146","html_url":"https://github.com/apache/accumulo/issues/3823#issuecomment-1783250146","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3823","id":1783250146,"node_id":"IC_kwDOACaFSM5qSjzi","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T17:14:21Z","updated_at":"2023-10-27T17:14:21Z","author_association":"CONTRIBUTOR","body":"Met with @dlmarion, @cshannon, @ddanielr , and @EdColeman  to discuss this issue, below are notes from the meeting for thing I can remember.   Please add more comments if there are things I missed.  Meeting info [here](https://the-asf.slack.com/archives/CERNB8NDC/p1698351188844809)\r\n\r\nWith table locks the current behavior is that a merge operation will wait on a compaction or bulk import.  Consensus was it would be good to maintain this behavior.\r\n\r\nWith the current table locks, a merge can prevent compactions and bulk imports from running  even the ranges are disjoint.  Like in the the following situation.\r\n\r\n  1. Really long running user compaction is started on range (a,m]\r\n  2. Merge is initiated on range (o,p], however it can not start because of the compaction.  Places a write lock entry in the zookeeper table lock queue.\r\n  3. A bulk import for range (x,z] is initiated, but it blocks when is sees there is a write lock queued for the above merge.\r\n\r\nSo in the situation above a bulk import is blocked by a merge that is blocked by a long running user compaction.  Since these ranges are disjoint, if locking were moved to the tablet level all of the operations could proceed.\r\n\r\nAdding a tablet state of disabled would be useful for manual metadata edits.  We discussed how this aligns with the tablet hosting goal.  If a tablet has a hosting goal of never, then it will not be hosted but in elasticity compactions, splits, bulk import, etc could still change the tablet metadata.\r\n\r\nFor exporting a table, potentially having a partially disabled tablet is kinda confusing.  The export table operation could verify that all tablets are in the disabled state when it starts, but there is no way to prevent this from changing later.  Discussed have another tablet state of readonly or snapshot (snapshot is a terminal read only state).  So tablet export could require all the tablet to be in the snapshot state before it would start.\r\n\r\nDiscussed where the valid state transitions for tablet might exists in the code.  This could exists in ample, where it checks the transitions before its made.\r\n\r\nIf write locks were removed and fate storage was moved to a zookeeper table, then bulk imports may have zero zookeeper writes which may help with scalability. \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783250146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783283167","html_url":"https://github.com/apache/accumulo/pull/3898#issuecomment-1783283167","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3898","id":1783283167,"node_id":"IC_kwDOACaFSM5qSr3f","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T17:41:57Z","updated_at":"2023-10-27T17:41:57Z","author_association":"CONTRIBUTOR","body":"See #3901 \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783283167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783415372","html_url":"https://github.com/apache/accumulo/pull/3901#issuecomment-1783415372","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3901","id":1783415372,"node_id":"IC_kwDOACaFSM5qTMJM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T19:38:37Z","updated_at":"2023-10-27T19:38:37Z","author_association":"CONTRIBUTOR","body":"I think this should supercede #3898 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783415372/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783436931","html_url":"https://github.com/apache/accumulo/pull/3896#issuecomment-1783436931","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3896","id":1783436931,"node_id":"IC_kwDOACaFSM5qTRaD","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T19:58:37Z","updated_at":"2023-10-27T19:58:37Z","author_association":"CONTRIBUTOR","body":"> @dlmarion try running the admin stop ITs with the fixes from #3897 and #3898 and see how it goes.\r\n\r\nAfter looking at those issues, I created #3901, which I think should replace #3898 and this PR. #3897 has already been merged, and the tests pass with #3897 and this PR. I'm going to close this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783436931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783553981","html_url":"https://github.com/apache/accumulo/pull/3900#issuecomment-1783553981","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3900","id":1783553981,"node_id":"IC_kwDOACaFSM5qTt-9","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-27T21:57:07Z","updated_at":"2023-10-27T21:57:07Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I added the requested changes but one thing I was just thinking is that I added the WALs check to the deleteTablets code but we shouldn't really care about that if we are deleting the tablets anyways.  We would only care about the tablets at the start/end of the delete that are being kept so not sure if I need to keep the check. It probably doesn't hurt to keep it so it's in a consistent state and we don't have to deal with edge cases around start/end range. Things are also a bit different depending on the version. In 2.1 obviously tablets chopped and splitt at the deletion range and whole tablets are gone but things work different with no chop merge and fencing (fence start/end tablet without splitting) and in elasticity (fence and merge empty tablets)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783553981/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783810070","html_url":"https://github.com/apache/accumulo/issues/3845#issuecomment-1783810070","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3845","id":1783810070,"node_id":"IC_kwDOACaFSM5qUsgW","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-28T13:27:15Z","updated_at":"2023-10-28T13:27:15Z","author_association":"CONTRIBUTOR","body":"This is done in 2.1.3 and merged into main for 3.1.0. I merged an empty commit forward into elasticity as the changes are going to be completely different so it's best to create a new PR which I will work on. After elasticity is done we can close this issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1783810070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1784221431","html_url":"https://github.com/apache/accumulo/pull/3903#issuecomment-1784221431","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3903","id":1784221431,"node_id":"IC_kwDOACaFSM5qWQ73","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-29T20:50:36Z","updated_at":"2023-10-29T20:50:36Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I made the requested changes and I think everything is correct so I marked this as ready. I started working on a test update in `TabletManagementIteratorIT` but didn't have time to finish yet as it's taking some time because I am trying to figure out how `TabletManagementIterator` works as all of that code is new to me and pretty complex. So you can either merge this now (if you think it's ok) and I can create a follow on issue to add some ITs or you can wait to merge this until I have more time later this week to try and work on some tests.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1784221431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1785767403","html_url":"https://github.com/apache/accumulo/pull/3903#issuecomment-1785767403","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3903","id":1785767403,"node_id":"IC_kwDOACaFSM5qcKXr","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-30T17:59:00Z","updated_at":"2023-10-30T17:59:00Z","author_association":"CONTRIBUTOR","body":"I opened #3904 to refactor the TGW and TabletMgmtIterator code to avoid having logic like what this PR is adding in two places.  After this is merged I can merge these changes into #3904 and resolve conflicts.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1785767403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1785917162","html_url":"https://github.com/apache/accumulo/issues/2264#issuecomment-1785917162","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2264","id":1785917162,"node_id":"IC_kwDOACaFSM5qcu7q","user":{"login":"rsingh433","id":74160026,"node_id":"MDQ6VXNlcjc0MTYwMDI2","avatar_url":"https://avatars.githubusercontent.com/u/74160026?v=4","gravatar_id":"","url":"https://api.github.com/users/rsingh433","html_url":"https://github.com/rsingh433","followers_url":"https://api.github.com/users/rsingh433/followers","following_url":"https://api.github.com/users/rsingh433/following{/other_user}","gists_url":"https://api.github.com/users/rsingh433/gists{/gist_id}","starred_url":"https://api.github.com/users/rsingh433/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsingh433/subscriptions","organizations_url":"https://api.github.com/users/rsingh433/orgs","repos_url":"https://api.github.com/users/rsingh433/repos","events_url":"https://api.github.com/users/rsingh433/events{/privacy}","received_events_url":"https://api.github.com/users/rsingh433/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-30T19:39:41Z","updated_at":"2023-10-30T19:39:41Z","author_association":"CONTRIBUTOR","body":"I created a pull request https://github.com/apache/accumulo/pull/3905 but I am still testing it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1785917162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1786058668","html_url":"https://github.com/apache/accumulo/pull/3904#issuecomment-1786058668","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3904","id":1786058668,"node_id":"IC_kwDOACaFSM5qdRes","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-30T21:16:01Z","updated_at":"2023-10-30T21:19:03Z","author_association":"CONTRIBUTOR","body":"> Please also check that ManagerAssignmentIT is still passing.\r\n\r\n@dlmarion that was a good call on running that test. Ran and it blew up.  Turned out the best way to fix was to move a lot of code from using the tablet mgmt scanner to using ample.  Made that change in e1da6f0.  After that change the only thing left using the tabletmgmt iterator is TGW which is good.\r\n\r\nGot LocatorIT working while cleaning up the code and removed Disabled from it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1786058668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787484093","html_url":"https://github.com/apache/accumulo/issues/3909#issuecomment-1787484093","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3909","id":1787484093,"node_id":"IC_kwDOACaFSM5qite9","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T15:44:15Z","updated_at":"2023-10-31T15:44:15Z","author_association":"CONTRIBUTOR","body":"We likely need to add some logic to PropUtil.validateProperties for this. However, without annotating which properties accept json, we might have to hardcode the list for now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787484093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787685193","html_url":"https://github.com/apache/accumulo/issues/3909#issuecomment-1787685193","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3909","id":1787685193,"node_id":"IC_kwDOACaFSM5qjelJ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T17:40:40Z","updated_at":"2023-10-31T17:41:40Z","author_association":"CONTRIBUTOR","body":"> We likely need to add some logic to PropUtil.validateProperties for this. However, without annotating which properties accept json, we might have to hardcode the list for now.\r\n\r\n\r\nIt would be nice to validate these properties at set time, but not sure its possible.  Would need to overcome the following in validation\r\n\r\n * The compaction service config spans multiple properties.\r\n * Validating JSON would not be enough and could break plugins that are not the default.  A planner plugin implementation may not take json, or it could take json but expect a very specific schema.  Would probably be best to try to create the plugin and see if throws an exception, but setting the config over multiple props makes this tricky.\r\n\r\nOpened #3912 to make the system behave better when there is bad config as identified in this issue. Need to do some more general follow on work to address per table compaction dispatchers having config that makes them throw an exception, that may cause a similar log storm.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787685193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787771565","html_url":"https://github.com/apache/accumulo/pull/3886#issuecomment-1787771565","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3886","id":1787771565,"node_id":"IC_kwDOACaFSM5qjzqt","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T18:33:45Z","updated_at":"2023-10-31T18:33:45Z","author_association":"MEMBER","body":"Marked this as ready for review. I think I addressed the points from #3878 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787771565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787777391","html_url":"https://github.com/apache/accumulo/pull/3912#issuecomment-1787777391","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3912","id":1787777391,"node_id":"IC_kwDOACaFSM5qj1Fv","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T18:36:19Z","updated_at":"2023-11-14T13:24:05Z","author_association":"CONTRIBUTOR","body":"I created #3913 concurrent to this and it addresses some of the problem, but differently. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787777391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787797012","html_url":"https://github.com/apache/accumulo/pull/3913#issuecomment-1787797012","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3913","id":1787797012,"node_id":"IC_kwDOACaFSM5qj54U","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T18:45:01Z","updated_at":"2023-10-31T18:45:01Z","author_association":"CONTRIBUTOR","body":"I was looking into adding a new PropertyType that would be in addition to the  String type and allow testing to see if it was a valid json string.  That would still likely leave a hole for validation that it was \"proper\" in respect to its usage and should still be handled when \"used\".  Say `{ \"maxThreads\", \"10\", ... }` was expected by the user and `{ \"myValue\", \"default\", ...}` was passed.  If they are both \"valid\" JSON, that would not make one or the other as invalid for usage.\r\n\r\nIf there was a PropertyType.JSON - would that change your approach to this?  It could at least handle checking that the JSON string was valid.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787797012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787805179","html_url":"https://github.com/apache/accumulo/pull/3913#issuecomment-1787805179","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3913","id":1787805179,"node_id":"IC_kwDOACaFSM5qj737","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T18:48:47Z","updated_at":"2023-10-31T18:48:47Z","author_association":"CONTRIBUTOR","body":"I was thinking about a property type of JSON, but I ran into the same issue ... validation. So, I opted to test for proper JSON instead. To do this properly, I think we would need a property type of JSON **and** and a class name so that we could use GSON to deserialize the JSON string into the configuration class type.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787805179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787814100","html_url":"https://github.com/apache/accumulo/pull/3913#issuecomment-1787814100","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3913","id":1787814100,"node_id":"IC_kwDOACaFSM5qj-DU","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T18:52:28Z","updated_at":"2023-10-31T18:52:28Z","author_association":"CONTRIBUTOR","body":"Regarding \"doing it the right way\", I did look and I think that this property is the only property that uses JSON in 2.1. We could do it the right way with the PropertyType.JSON in a 3.1 or future version where there are more than 1 property that uses JSON.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787814100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787939709","html_url":"https://github.com/apache/accumulo/pull/3913#issuecomment-1787939709","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3913","id":1787939709,"node_id":"IC_kwDOACaFSM5qkct9","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T19:52:42Z","updated_at":"2023-10-31T19:52:42Z","author_association":"CONTRIBUTOR","body":"Closing in favor of #3912 after discussion with @EdColeman  and @keith-turner ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1787939709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1788052410","html_url":"https://github.com/apache/accumulo/pull/3893#issuecomment-1788052410","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3893","id":1788052410,"node_id":"IC_kwDOACaFSM5qk4O6","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-31T21:20:40Z","updated_at":"2023-10-31T21:20:40Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - I think this implements your suggested approach now","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1788052410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1789099263","html_url":"https://github.com/apache/accumulo/issues/3693#issuecomment-1789099263","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3693","id":1789099263,"node_id":"IC_kwDOACaFSM5qo3z_","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-01T14:53:52Z","updated_at":"2023-12-22T05:24:43Z","author_association":"CONTRIBUTOR","body":"The majority of this work has been completed and merged.\r\n#3918 has been created to enable the in-use deletion behavior in the 3.1 branch to ensure that GC behavior is consistent for users upgrading between the 2.1.x versions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1789099263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1789447596","html_url":"https://github.com/apache/accumulo/issues/3868#issuecomment-1789447596","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3868","id":1789447596,"node_id":"IC_kwDOACaFSM5qqM2s","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-01T18:27:09Z","updated_at":"2023-11-01T18:29:19Z","author_association":"CONTRIBUTOR","body":"I ran the MinC IT twice using JDK 17 and `mvn clean verify -Dit.test=MemoryStarvedMinCIT -Dtest=foo -Dspotbugs.skip` and both times the `tserver` process failed with:\r\n```\r\njava.lang.OutOfMemoryError: Java heap space\r\n        at org.apache.accumulo.test.functional.MemoryConsumingIterator.seek(MemoryConsumingIterator.java:80)\r\n        at org.apache.accumulo.core.iterators.WrappingIterator.seek(WrappingIterator.java:107)\r\n        at org.apache.accumulo.core.iterators.user.VersioningIterator.seek(VersioningIterator.java:84)\r\n        at org.apache.accumulo.core.iteratorsImpl.system.SourceSwitchingIterator.readNext(SourceSwitchingIterator.java:165)\r\n        at org.apache.accumulo.core.iteratorsImpl.system.SourceSwitchingIterator.seek(SourceSwitchingIterator.java:237)\r\n        at org.apache.accumulo.tserver.tablet.TabletBase.nextBatch(TabletBase.java:278)\r\n        at org.apache.accumulo.tserver.tablet.Scanner.read(Scanner.java:120)\r\n        at org.apache.accumulo.tserver.scan.NextBatchTask.run(NextBatchTask.java:78)\r\n...\r\n```\r\n\r\nThe tserver log entries for the MemoryConsumingIterator are:\r\n```\r\n2023-11-01T18:24:20,151 [functional.MemoryConsumingIterator] INFO : seek called\r\n2023-11-01T18:24:20,167 [functional.MemoryConsumingIterator] INFO : max: 268435456, free: 238481208, minFree: 53687091, amountToConsume: 195279877\r\n2023-11-01T18:24:20,167 [functional.MemoryConsumingIterator] INFO : allocating memory: 195279877\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1789447596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1789634730","html_url":"https://github.com/apache/accumulo/issues/3909#issuecomment-1789634730","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3909","id":1789634730,"node_id":"IC_kwDOACaFSM5qq6iq","user":{"login":"dtspence","id":33552925,"node_id":"MDQ6VXNlcjMzNTUyOTI1","avatar_url":"https://avatars.githubusercontent.com/u/33552925?v=4","gravatar_id":"","url":"https://api.github.com/users/dtspence","html_url":"https://github.com/dtspence","followers_url":"https://api.github.com/users/dtspence/followers","following_url":"https://api.github.com/users/dtspence/following{/other_user}","gists_url":"https://api.github.com/users/dtspence/gists{/gist_id}","starred_url":"https://api.github.com/users/dtspence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtspence/subscriptions","organizations_url":"https://api.github.com/users/dtspence/orgs","repos_url":"https://api.github.com/users/dtspence/repos","events_url":"https://api.github.com/users/dtspence/events{/privacy}","received_events_url":"https://api.github.com/users/dtspence/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-01T20:32:39Z","updated_at":"2023-11-01T20:32:39Z","author_association":"CONTRIBUTOR","body":"@keith-turner @dlmarion As a possibly related issue (but less severe), we observed that an incorrect `accumulo.properties` configuration caused the default compaction planner to report an exception during initialization - but still allow the tablet-server to start-up (i.e. without a default service).\r\n\r\nThe error manifested in the tablet-server logs as (note we believe there is no default service due to the error at start-up):\r\n```\r\nERROR: Tablet<> returned non-existent compaction service default for compaction type SYSTEM. Check the table compaction dispatcher configuration. Attempting to fall back to default service.\r\n```\r\n\r\nAt tablet server start-up there is a message:\r\n```\r\n[compactions.CompactionManager] ERROR: Failed to create compaction service default with planner:<attempted configuration>\r\ncom.google.gson.JsonSyntaxException ...\r\n...\r\nat org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner.init(DefaultCompactionPlanner.java:54)\r\nat org.apache.accumulo.tserver.compactions.CompactionService.<init>(CompactionService.java:107)\r\nat org.apache.accumulo.tserver.compactions.CompactionManager.<init>(CompactionManager.java:200)\r\nat org.apache.accumulo.tserver.TabletServer.run(TabletServer.java:774)\r\n...\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1789634730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1789678304","html_url":"https://github.com/apache/accumulo/pull/3921#issuecomment-1789678304","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3921","id":1789678304,"node_id":"IC_kwDOACaFSM5qrFLg","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-01T21:00:54Z","updated_at":"2023-11-02T14:49:42Z","author_association":"CONTRIBUTOR","body":"Before this change, the Monitor would likely show `0(0)` for major compactions on the tserver page. I'm not sure what it will show now, it could even be broken. However, we might need to re-imagine how the Monitor is going to work anyway.\r\n\r\nEdit: Looks like this issue might be covered in #3608 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1789678304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1790897950","html_url":"https://github.com/apache/accumulo/issues/3334#issuecomment-1790897950","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3334","id":1790897950,"node_id":"IC_kwDOACaFSM5qvu8e","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T14:57:59Z","updated_at":"2023-11-02T14:57:59Z","author_association":"CONTRIBUTOR","body":"So we had another situation with #3909 that could be considered partially because of this ticket.  In that case it was not only the monitor that could not handle the truth, but the tservers as well.  The monitor fell over, and the node became unaccessible because of the nober if IRQ requests hitting it from the tservers.  Many tservers fall over because of out of memory and many others had various threads die (out of memory) but remained running.  The result in the end was the entire system had to be brought down hard.\r\n\r\nSo, probably the best thing that can be done for this ticket is not to modify the monitor, but rather focus on the number of messages being sent by the tservers.  Even if there is a loop that is spamming messages (on the order of 1 per millisecond in that case), we should not be trying to send every single message to the monitor.  There needs to be some dedupping of messages done on the tserver side if possible and perhaps the queue size of messages being sent to the logger needs to be restricted in size.  I don't know if we can do this given we are using the standard logging infrastructure such as log4j but it should be investigated.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1790897950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1790930637","html_url":"https://github.com/apache/accumulo/pull/3921#issuecomment-1790930637","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3921","id":1790930637,"node_id":"IC_kwDOACaFSM5qv27N","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T15:13:31Z","updated_at":"2023-11-02T15:13:51Z","author_association":"CONTRIBUTOR","body":"> Before this change, the Monitor would likely show 0(0) for major compactions on the tserver page. I'm not sure what it will show now, it could even be broken. However, we might need to re-imagine how the Monitor is going to work anyway.\r\n\r\nInteresting, we do need to decide what we want to do with that column in the monitor.  We could still gather per table information on queued and running compactions, but it would be done in a very different way that in used to.  May need a follow on issue for that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1790930637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1790996383","html_url":"https://github.com/apache/accumulo/pull/3921#issuecomment-1790996383","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3921","id":1790996383,"node_id":"IC_kwDOACaFSM5qwG-f","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T15:49:14Z","updated_at":"2023-11-02T15:49:14Z","author_association":"CONTRIBUTOR","body":"> Thinking before this and its issue is closed out, need to open a new issue to decide what do with the column in the monitor.\r\n\r\nDo you think this is covered by #3608?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1790996383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1791014434","html_url":"https://github.com/apache/accumulo/issues/3608#issuecomment-1791014434","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3608","id":1791014434,"node_id":"IC_kwDOACaFSM5qwLYi","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T15:58:38Z","updated_at":"2023-11-02T16:00:12Z","author_association":"CONTRIBUTOR","body":"The changes in #3921 removed unused code related to getting major compaction information from the tablet servers.  Going forward need to decide what to about display per table compaction information in the monitor.  Could remove [this column](https://github.com/apache/accumulo/blob/a4cc5f82c37b4ff1cb2bb44d99e0b7cef1302fc1/server/monitor/src/main/resources/org/apache/accumulo/monitor/resources/js/table.js#L147) from the monitor OR gather the information in a different way.  The information on running and queued compactions could still be gathered and displayed, it would just need to be done differently (can not get it from tservers anymore, can get it from monitor and metadata table now).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1791014434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1791015454","html_url":"https://github.com/apache/accumulo/pull/3921#issuecomment-1791015454","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3921","id":1791015454,"node_id":"IC_kwDOACaFSM5qwLoe","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T15:59:12Z","updated_at":"2023-11-02T15:59:12Z","author_association":"CONTRIBUTOR","body":"> Do you think this is covered by https://github.com/apache/accumulo/issues/3608?\r\n\r\nI added a comment to the issue about what still needs to be done.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1791015454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1791017669","html_url":"https://github.com/apache/accumulo/issues/3608#issuecomment-1791017669","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3608","id":1791017669,"node_id":"IC_kwDOACaFSM5qwMLF","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T16:00:21Z","updated_at":"2023-11-02T16:00:21Z","author_association":"CONTRIBUTOR","body":"The CompactionCoordinator is running in the Manager, so that information could be returned as part of the ManagerMonitorInfo","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1791017669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1791090337","html_url":"https://github.com/apache/accumulo/issues/3337#issuecomment-1791090337","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3337","id":1791090337,"node_id":"IC_kwDOACaFSM5qwd6h","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T16:40:08Z","updated_at":"2023-11-02T16:40:08Z","author_association":"CONTRIBUTOR","body":"@keith-turner - since follow-on issues have been created, can this be closed?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1791090337/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1791653682","html_url":"https://github.com/apache/accumulo/issues/3849#issuecomment-1791653682","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3849","id":1791653682,"node_id":"IC_kwDOACaFSM5qyncy","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T22:32:59Z","updated_at":"2023-11-02T22:32:59Z","author_association":"CONTRIBUTOR","body":"One of the items on the list in https://github.com/apache/accumulo/issues/3766 was to test import with ranges so maybe we can test this as well with the old format once we decide the best way to handle the conversion.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1791653682/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1792396104","html_url":"https://github.com/apache/accumulo/issues/3878#issuecomment-1792396104","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3878","id":1792396104,"node_id":"IC_kwDOACaFSM5q1ctI","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-03T12:58:16Z","updated_at":"2023-11-03T12:58:16Z","author_association":"MEMBER","body":"Fixed via #3886 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1792396104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1792401017","html_url":"https://github.com/apache/accumulo/issues/3878#issuecomment-1792401017","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3878","id":1792401017,"node_id":"IC_kwDOACaFSM5q1d55","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-03T13:02:04Z","updated_at":"2023-11-03T13:02:04Z","author_association":"MEMBER","body":"Oops I just realized this ticket was marked for 3.1.0 however the PR, 3886 was merged into elasticity.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1792401017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1792860491","html_url":"https://github.com/apache/accumulo/issues/3867#issuecomment-1792860491","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3867","id":1792860491,"node_id":"IC_kwDOACaFSM5q3OFL","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-03T17:33:24Z","updated_at":"2023-11-03T17:33:24Z","author_association":"CONTRIBUTOR","body":"Merged #3917 to 2.1 and main branches. Since merging I haven't been able to reproduce the test failing. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1792860491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1798470266","html_url":"https://github.com/apache/accumulo/pull/3923#issuecomment-1798470266","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3923","id":1798470266,"node_id":"IC_kwDOACaFSM5rMnp6","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T13:07:14Z","updated_at":"2023-11-07T13:07:14Z","author_association":"CONTRIBUTOR","body":"> Would be nice to check split in addition to merge in the test.\r\n\r\nI added split as well on the latest update","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1798470266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1800218982","html_url":"https://github.com/apache/accumulo/pull/3934#issuecomment-1800218982","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3934","id":1800218982,"node_id":"IC_kwDOACaFSM5rTSlm","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T21:42:38Z","updated_at":"2023-11-07T21:42:38Z","author_association":"CONTRIBUTOR","body":"Adding to @cshannon  comment, we did come up with ways to work around the issues identified.  However, we came to the conclusion that making merge able to create a single tablet with more files than can fit in memory would cause problems for split, compaction, scan, etc.  Realized it was not worthwhile pursing these changes and decided it would be best to do the following.\r\n\r\n * Add a property that limits the amount files that would be merged into a single tablet.  For example if the limit was 10K and if a merge tried to run on 1000 tablets each having 100 files then it would fail before making any metadata changes.  If the merge ran then it would create a single tablet with 100K files.\r\n * Still allow merging a large number of tablets as long as there is not a large number of files.  For example merging 1 million tablets with a total of 100 file across all tablets would still work.\r\n\r\nGoing to close this PR, rework this code and open a new PR that supports the above.  \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1800218982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1802550985","html_url":"https://github.com/apache/accumulo/pull/3934#issuecomment-1802550985","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3934","id":1802550985,"node_id":"IC_kwDOACaFSM5rcL7J","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-08T19:51:16Z","updated_at":"2023-11-08T19:51:45Z","author_association":"CONTRIBUTOR","body":"@cshannon I reopened this PR after making the changes 4113dc5.   Thought that made more sense than opening a new PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1802550985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1804094013","html_url":"https://github.com/apache/accumulo/pull/3941#issuecomment-1804094013","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3941","id":1804094013,"node_id":"IC_kwDOACaFSM5riEo9","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T15:53:44Z","updated_at":"2023-11-09T15:53:44Z","author_association":"CONTRIBUTOR","body":"@EdColeman once Keith's documentation suggestions are committed, I think this is good to merge.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1804094013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1804763087","html_url":"https://github.com/apache/accumulo/pull/3942#issuecomment-1804763087","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3942","id":1804763087,"node_id":"IC_kwDOACaFSM5rkn_P","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T22:11:55Z","updated_at":"2023-11-09T22:11:55Z","author_association":"MEMBER","body":"These changes will make implementing #3847 easier once they are merged up to elasticity.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1804763087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1806870195","html_url":"https://github.com/apache/accumulo/pull/3944#issuecomment-1806870195","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3944","id":1806870195,"node_id":"IC_kwDOACaFSM5rsqaz","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-11T17:21:41Z","updated_at":"2023-11-11T17:21:41Z","author_association":"CONTRIBUTOR","body":"Noticed this in a failure of running integration test in the elasticity branch, but the bug exists in main also so fixing it main first.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1806870195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1807132063","html_url":"https://github.com/apache/accumulo/issues/3946#issuecomment-1807132063","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3946","id":1807132063,"node_id":"IC_kwDOACaFSM5rtqWf","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-12T13:39:59Z","updated_at":"2023-11-12T13:39:59Z","author_association":"CONTRIBUTOR","body":"@keith-turner - Any thoughts on this, in particular solving problem number 2 when no tablets exist so the retry doesn't happen?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1807132063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1808380956","html_url":"https://github.com/apache/accumulo/issues/3946#issuecomment-1808380956","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3946","id":1808380956,"node_id":"IC_kwDOACaFSM5rybQc","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T15:28:13Z","updated_at":"2023-11-13T15:28:13Z","author_association":"CONTRIBUTOR","body":"For option 1, TableOperations.getTimeType() read the time type from the first tablet in the metadata table for the table.  If the table has no tablets then it will throw an exception.\r\n\r\nOne way to solve option 1 and 2 may be to never delete all of the tablets, always leave at least one tablet.  Not sure how this would look in the code though.  Wonder if it would be easiest to refactor the 2.1 and main code to follow the pattern in elasticity where delete rows only drops files or fences/chops and then calls the merge code.  That pattern never deletes all of the tablets.  Not sure if that is a good pattern to follow for 2.1 and main though.  It depends on how much complexity adding a special case to always keep at least one tablet introduces to the current delete rows code.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1808380956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1808625257","html_url":"https://github.com/apache/accumulo/pull/3926#issuecomment-1808625257","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3926","id":1808625257,"node_id":"IC_kwDOACaFSM5rzW5p","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T17:18:48Z","updated_at":"2023-11-13T17:18:48Z","author_association":"CONTRIBUTOR","body":"Wondering it is would be better to  remove the `tserver.last.location.mode` property and always set the last location on assignment.  There would be less code to maintain and test (do not need to test the property or handle removing last when its set to none).   For the case where a balancer plugin is not interested in the last location information, it can ignore it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1808625257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1809180852","html_url":"https://github.com/apache/accumulo/pull/3926#issuecomment-1809180852","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3926","id":1809180852,"node_id":"IC_kwDOACaFSM5r1ei0","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T21:47:16Z","updated_at":"2023-11-13T21:47:16Z","author_association":"MEMBER","body":"> Wondering it is would be better to remove the `tserver.last.location.mode` property and always set the last location on assignment. There would be less code to maintain and test (do not need to test the property or handle removing last when its set to none). For the case where a balancer plugin is not interested in the last location information, it can ignore it.\r\n\r\nCan we emit information, such as last assignment, last hosted location for write, etc. that users can use to empower their own pluggable balancer? It seems like historically we made assumptions about how users might want to balance, and then we had to add this property to handle some additional use cases that users preferred, but it'd probably better to just to emit data that the users might want to use, and leave the balancing strategy up to them. That would maximally empower users and minimize the code we need to maintain (except for the code to emit the requested info, which should be simpler, and generally useful enough to warrant any complexity it might require).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1809180852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1809203254","html_url":"https://github.com/apache/accumulo/issues/3334#issuecomment-1809203254","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3334","id":1809203254,"node_id":"IC_kwDOACaFSM5r1kA2","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T22:00:47Z","updated_at":"2023-11-13T22:00:47Z","author_association":"MEMBER","body":"> So, probably the best thing that can be done for this ticket is not to modify the monitor, but rather focus on the number of messages being sent by the tservers. Even if there is a loop that is spamming messages (on the order of 1 per millisecond in that case), we should not be trying to send every single message to the monitor. There needs to be some dedupping of messages done on the tserver side if possible and perhaps the queue size of messages being sent to the logger needs to be restricted in size. I don't know if we can do this given we are using the standard logging infrastructure such as log4j but it should be investigated.\r\n\r\nThis kind of thing can definitely done... I've already linked to the log4j docs on filters above that are capable of customizing the logging in the way you're interested in doing. If an existing filter isn't suitable, the APIs are very simple, and it should be easy to create a custom filter that keeps logs from flooding your systems based on your specific requirements.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1809203254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1809297208","html_url":"https://github.com/apache/accumulo/issues/3946#issuecomment-1809297208","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3946","id":1809297208,"node_id":"IC_kwDOACaFSM5r1684","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T23:29:18Z","updated_at":"2023-11-13T23:29:18Z","author_association":"CONTRIBUTOR","body":"Thanks @keith-turner, I will take a look and see which of those options are best. I can experiment with a special case to prevent all tablets from being deleted and compare the implementation vs trying to refactor everything to keep empty tablets and merge them away. My hope is maybe it would be not too hard to just detect there's only 1 tablet left as we delete the tablets and if it's the last one then to just drop only the files from that tablet.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1809297208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1810199795","html_url":"https://github.com/apache/accumulo/issues/3909#issuecomment-1810199795","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3909","id":1810199795,"node_id":"IC_kwDOACaFSM5r5XTz","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T13:25:06Z","updated_at":"2023-11-14T13:25:06Z","author_association":"MEMBER","body":"Fixed with #3912 and further validation of JSON in general being partially added with #3927.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1810199795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1810205504","html_url":"https://github.com/apache/accumulo/pull/3928#issuecomment-1810205504","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3928","id":1810205504,"node_id":"IC_kwDOACaFSM5r5YtA","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T13:28:49Z","updated_at":"2023-11-14T13:28:49Z","author_association":"MEMBER","body":"@dlmarion Can this also be done in the main branch? It's probably not as important there, since plenty of tservers are likely to be running on a non-elastic deployment, but it could reduce the number of unnecessary differences in behavior with the elasticity branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1810205504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1810221325","html_url":"https://github.com/apache/accumulo/pull/3928#issuecomment-1810221325","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3928","id":1810221325,"node_id":"IC_kwDOACaFSM5r5ckN","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T13:38:10Z","updated_at":"2023-11-14T13:38:10Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - I think it could be, I can try that later today.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1810221325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1810230955","html_url":"https://github.com/apache/accumulo/issues/3946#issuecomment-1810230955","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3946","id":1810230955,"node_id":"IC_kwDOACaFSM5r5e6r","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T13:44:24Z","updated_at":"2023-11-14T13:44:24Z","author_association":"MEMBER","body":"> My hope is maybe it would be not too hard to just detect there's only 1 tablet left as we delete the tablets and if it's the last one then to just drop only the files from that tablet.\r\n\r\nI think you should be able to easily add a check to just not delete the default tablet (the last tablet in a table; the one with the end row `tableId<`, but just fence/drop its files and update its prev End Row `~tab:~pr`).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1810230955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1810239500","html_url":"https://github.com/apache/accumulo/pull/3926#issuecomment-1810239500","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3926","id":1810239500,"node_id":"IC_kwDOACaFSM5r5hAM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T13:49:58Z","updated_at":"2023-11-14T13:50:36Z","author_association":"CONTRIBUTOR","body":"> @keith-turner said, \"Wondering it is would be better to remove the tserver.last.location.mode property and always set the last location on assignment.\"\r\n\r\nI think the `none` value supports the following use-cases:\r\n\r\n  1. Deployment to an orchestrated environment (e.g. Kubernetes). I'm not sure how meaningful, or repeatable, hostnames are in this environment. Using `none` here allows the tablet to be assigned to one of the TabletServers in the assigned resource group.\r\n  2. When an admin wants to unset the last location for a tables tablets allowing the configured balancer to make a new initial determination.\r\n  \r\n> @ctubbsii said, \"Can we emit information...\"\r\n\r\nWhen you say emit, I think metrics. Is that what you mean?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1810239500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]