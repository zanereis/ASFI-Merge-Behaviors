[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/929635168","html_url":"https://github.com/apache/accumulo/issues/2280#issuecomment-929635168","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2280","id":929635168,"node_id":"IC_kwDOACaFSM43aRtg","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-28T21:22:03Z","updated_at":"2021-09-28T21:22:03Z","author_association":"CONTRIBUTOR","body":"> @keith-turner or @ctubbsii do you know if there a ticket for this work?\r\n\r\nWould probably make sense to open an issue for each thing that [registers with the singleton manager](https://github.com/apache/accumulo/blob/d4cb0ebacddcad11a520e87829714f3f67dc71d5/core/src/main/java/org/apache/accumulo/core/singletons/SingletonManager.java#L115) to explore moving it to client or server context.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/929635168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/929636240","html_url":"https://github.com/apache/accumulo/pull/2273#issuecomment-929636240","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2273","id":929636240,"node_id":"IC_kwDOACaFSM43aR-Q","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-28T21:23:44Z","updated_at":"2021-09-28T21:23:44Z","author_association":"CONTRIBUTOR","body":"All the ITs passed for me locally. Finished in around 4 hours. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/929636240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/929680660","html_url":"https://github.com/apache/accumulo/pull/2224#issuecomment-929680660","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2224","id":929680660,"node_id":"IC_kwDOACaFSM43ac0U","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-28T22:51:24Z","updated_at":"2021-09-28T22:52:26Z","author_association":"CONTRIBUTOR","body":"The partially addresses https://github.com/apache/accumulo/issues/1454 and https://github.com/apache/accumulo/issues/1225","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/929680660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/930102235","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-930102235","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":930102235,"node_id":"IC_kwDOACaFSM43cDvb","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T11:48:49Z","updated_at":"2021-09-29T11:48:49Z","author_association":"MEMBER","body":"So this gets a list of the table IDs (tableIDsBefore) before scanning the metadata table and then gets a list of the table IDs afterwards (tableIDsAfter.  While scanning the metadata, we keep track of the tables we have seen.  The idea here is to fail if we miss an entire table, which can happen with one scan if if the metadata has custom splits at table boundaries.\r\n\r\nTwo cases here to considers, so I want to document my assumptions for review/discussion\r\n1 - a table is added after tableIDsBefore.  This means it is added after grabbing the delete markers, so there should be no delete markers for the added table that we need remove if they are still in use.  Based on that, we don't care if miss scanning the metadata for the new table\r\n2 - a table is deleted after tableIDsBefore.  If the table has been deleted, we can safely remove all delete markers associated with that table.  Meaning scanning the metadata for the deleted table is not needed.\r\n\r\nI am worried my assumptions are wrong here, but assuming they are correct the logic in ensureAllTablesChecked is this.\r\n\r\nTableIDsAfter will have extra ids for tables there were added and will be missing tables ids for deleted tables.  So intersect tableIDsBefore and tableIDsAfter.  Then remove all the tables IDs we saw.  If anything is left, we missed scanning a table in the metadata and should throw an error and abort the GC cycle.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/930102235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/930132036","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-930132036","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":930132036,"node_id":"IC_kwDOACaFSM43cLBE","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T12:32:42Z","updated_at":"2021-09-29T12:32:42Z","author_association":"CONTRIBUTOR","body":"I think you are on the right track but I just had a thought. If we only care about the split points maybe it would be better to check the split points before and after instead of table IDs. I think there is code during bulk import that checks for merges or splits but it is very confusing. This is probably more difficult but it was just something I thought I would share. \r\nhttps://github.com/apache/accumulo/blob/f2adfedda8d4efee48c5138b1373b2d4e2cd7598/server/manager/src/main/java/org/apache/accumulo/manager/tableOps/bulkVer2/PrepBulkImport.java#L182","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/930132036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/930247672","html_url":"https://github.com/apache/accumulo/pull/2215#issuecomment-930247672","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2215","id":930247672,"node_id":"IC_kwDOACaFSM43cnP4","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T14:46:34Z","updated_at":"2021-09-29T14:46:34Z","author_association":"CONTRIBUTOR","body":"The latest commit includes the upgrade to thrift 0.15.0","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/930247672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/930484037","html_url":"https://github.com/apache/accumulo/pull/2283#issuecomment-930484037","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2283","id":930484037,"node_id":"IC_kwDOACaFSM43dg9F","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T19:37:31Z","updated_at":"2021-09-29T19:37:31Z","author_association":"CONTRIBUTOR","body":"I created #2294 as a follow on for the concerns discussed in this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/930484037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/930491615","html_url":"https://github.com/apache/accumulo/pull/2294#issuecomment-930491615","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2294","id":930491615,"node_id":"IC_kwDOACaFSM43dizf","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T19:49:23Z","updated_at":"2021-09-29T19:49:23Z","author_association":"CONTRIBUTOR","body":"Screenshots of the 2 pages:\r\n![active-compactions](https://user-images.githubusercontent.com/11872539/135338427-5d121a2c-8a7a-489b-9082-297cdbc33051.png)\r\n![scans](https://user-images.githubusercontent.com/11872539/135338439-f0c6c64b-2655-4e9c-905b-699f33069253.png)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/930491615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931476197","html_url":"https://github.com/apache/accumulo/pull/2278#issuecomment-931476197","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2278","id":931476197,"node_id":"IC_kwDOACaFSM43hTLl","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T16:25:34Z","updated_at":"2021-09-30T16:25:34Z","author_association":"CONTRIBUTOR","body":"I think this change still might be a problem. It is causing some of our previously stable ITs to timeout. I am not sure why but they were fine before the initial commit of https://github.com/apache/accumulo/pull/2274. The two ITs timing out are MergeIT and ShellServerIT","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931476197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931503372","html_url":"https://github.com/apache/accumulo/issues/2295#issuecomment-931503372","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2295","id":931503372,"node_id":"IC_kwDOACaFSM43hZ0M","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T17:03:22Z","updated_at":"2021-09-30T19:15:55Z","author_association":"CONTRIBUTOR","body":"This IT didn't have any problems until recent ThreadPool changes, beginning with https://github.com/apache/accumulo/pull/2274\r\n\r\nEdit: That PR was the start of the ThreadPool changes but not the actual culprit. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931503372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931518384","html_url":"https://github.com/apache/accumulo/pull/2259#issuecomment-931518384","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2259","id":931518384,"node_id":"IC_kwDOACaFSM43hdew","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T17:24:39Z","updated_at":"2021-09-30T17:24:39Z","author_association":"CONTRIBUTOR","body":"I re-tested this by doing the following:\r\n\r\n1. Started Accumulo with no changes, confirmed via logging that trace is disabled.\r\n2. Started Accumulo after setting `general.opentelemetry.enabled=true` in `accumulo.properties`, confirmed via logging that trace is still disabled (the autoconfigured jar is not on the classpath)\r\n3. Started Accumulo after downloading `https://search.maven.org/remotecontent?filepath=io/opentelemetry/javaagent/opentelemetry-javaagent/1.6.2/opentelemetry-javaagent-1.6.2-all.jar` and putting it into the `lib` directory. Confirmed via logging that trace is disabled. The javaagent jar is shaded, so the autoconfigured classes cant be loaded.\r\n4. Uncommented / set the following in `accumulo-env.sh`:\r\n```\r\n## Optionally setup OpenTelemetry SDK AutoConfigure\r\n## See https://github.com/open-telemetry/opentelemetry-java/tree/main/sdk-extensions/autoconfigure\r\nJAVA_OPTS=(\"${JAVA_OPTS[@]}\"\r\n  \"-Dotel.traces.exporter=jaeger\"\r\n)\r\n\r\n## Optionally setup OpenTelemetry Java Agent\r\n## See https://github.com/open-telemetry/opentelemetry-java-instrumentation for more options\r\nJAVA_OPTS=(\"${JAVA_OPTS[@]}\"\r\n  \"-javaagent:${lib}/opentelemetry-javaagent-1.6.2-all.jar\"\r\n)\r\n```\r\n\r\nStarted Jaeger:\r\n```\r\ndocker run -d --name jaeger -e COLLECTOR_ZIPKIN_HOST_PORT=:9411 -p 5775:5775/udp -p 6831:6831/udp -p 6832:6832/udp -p 5778:5778 -p 16686:16686 -p 14268:14268 -p 14250:14250 -p 9411:9411 jaegertracing/all-in-one:1.25\r\n```\r\n\r\nStarted Accumulo with the `enabled` property set to `true`, the changes to `accumulo-env.sh` and the javaagent jar file. Confirmed via Jaeger UI (http://localhost:16686/) that traces were showing up.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931518384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931534743","html_url":"https://github.com/apache/accumulo/pull/2259#issuecomment-931534743","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2259","id":931534743,"node_id":"IC_kwDOACaFSM43hheX","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T17:47:48Z","updated_at":"2021-09-30T17:47:48Z","author_association":"MEMBER","body":"> Started Accumulo with the `enabled` property set to `true`, the changes to `accumulo-env.sh` and the javaagent jar file. Confirmed via Jaeger UI (http://localhost:16686/) that traces were showing up.\r\n\r\nI'd be curious to know if tracing works as expected by merely putting the required classes on the classpath, without using the javaagent.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931534743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931538304","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-931538304","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":931538304,"node_id":"IC_kwDOACaFSM43hiWA","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T17:53:11Z","updated_at":"2021-09-30T17:53:11Z","author_association":"CONTRIBUTOR","body":"@mjwall I pulled these changes locally and experimented with writing the following unit test and it passed.\r\n\r\n```java\r\n  @Test\r\n  public void testMissingTableIds() throws Exception {\r\n    GarbageCollectionAlgorithm gca = new GarbageCollectionAlgorithm();\r\n\r\n    TestGCE gce = new TestGCE();\r\n\r\n    gce.candidates.add(\"hdfs://foo.com:6000/user/foo/tables/a/t-0/F00.rf\");\r\n\r\n    gce.addFileReference(\"a\", null, \"hdfs://foo.com:6000/user/foo/tables/a/t-0/F00.rf\");\r\n    gce.addFileReference(\"c\", null, \"hdfs://foo.com:6000/user/foo/tables/c/t-0/F00.rf\");\r\n\r\n    // the following table ids must be seen in the references\r\n    gce.tableIds.add(\"a\");\r\n    gce.tableIds.add(\"b\");\r\n    gce.tableIds.add(\"c\");\r\n    gce.tableIds.add(\"d\");\r\n\r\n    String msg = Assert.assertThrows(RuntimeException.class, () -> gca.collect(gce)).getMessage();\r\n    Assert.assertTrue(msg, (msg.contains(\"[b, d]\") || msg.contains(\"[d, b]\"))\r\n        && msg.contains(\"Missed checking tables\"));\r\n  }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931538304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931540589","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-931540589","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":931540589,"node_id":"IC_kwDOACaFSM43hi5t","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T17:56:39Z","updated_at":"2021-09-30T17:56:39Z","author_association":"CONTRIBUTOR","body":"@mjwall thinking about unit testing the cases where table ids changes during scanning the refs.  Maybe we could simulate this by making TestGCE.getReferenceIterator() change the tableid set.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931540589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931542115","html_url":"https://github.com/apache/accumulo/pull/2259#issuecomment-931542115","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2259","id":931542115,"node_id":"IC_kwDOACaFSM43hjRj","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T17:58:45Z","updated_at":"2021-09-30T17:58:45Z","author_association":"CONTRIBUTOR","body":"> I'd be curious to know if tracing works as expected by merely putting the required classes on the classpath, without using the javaagent.\r\n\r\nIt should, but it would require someone to get all the dependencies and put them there. Since the tracer module (and the shaded jar) have been removed, it's not as easy to do anymore.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931542115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931573493","html_url":"https://github.com/apache/accumulo/pull/2259#issuecomment-931573493","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2259","id":931573493,"node_id":"IC_kwDOACaFSM43hq71","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T18:44:28Z","updated_at":"2021-09-30T18:44:28Z","author_association":"MEMBER","body":"> It should, but it would require someone to get all the dependencies and put them there. Since the tracer module (and the shaded jar) have been removed, it's not as easy to do anymore.\r\n\r\nHere's an example minimal POM to collect specified dependencies and transitive into a folder:\r\n\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n  <modelVersion>4.0.0</modelVersion>\r\n  <groupId>org.apache.accumulo.tracing</groupId>\r\n  <artifactId>opentelemetry-autoconf-deps</artifactId>\r\n  <version>1.0.0-SNAPSHOT</version>\r\n  <packaging>pom</packaging>\r\n  <dependencyManagement>\r\n    <dependencies>\r\n      <dependency>\r\n        <groupId>io.opentelemetry</groupId>\r\n        <artifactId>opentelemetry-bom</artifactId>\r\n        <version>1.5.0</version>\r\n        <type>pom</type>\r\n        <scope>import</scope>\r\n      </dependency>\r\n    </dependencies>\r\n  </dependencyManagement>\r\n  <dependencies>\r\n    <dependency>\r\n      <groupId>io.opentelemetry</groupId>\r\n      <artifactId>opentelemetry-exporter-zipkin</artifactId>\r\n    </dependency>\r\n  </dependencies>\r\n  <build>\r\n    <defaultGoal>dependency:copy-dependencies</defaultGoal>\r\n  </build>\r\n</project>\r\n```\r\n\r\nDownload deps to `target/dependecy` with `mvn` (use `mvn clean` to clear).\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931573493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931582986","html_url":"https://github.com/apache/accumulo/issues/2295#issuecomment-931582986","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2295","id":931582986,"node_id":"IC_kwDOACaFSM43htQK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T18:58:27Z","updated_at":"2021-09-30T18:58:27Z","author_association":"CONTRIBUTOR","body":"I believe I have found the culprit [here](https://github.com/apache/accumulo/pull/2278/files#diff-467b6cb7af0f7b7339d81d3112329b8e19557e685a3c659bc623160826c8f01dL64). Fate.TransactionRunner would sit in a loop until the Fate transaction was successful. Now, it runs once, and if `op.isReady` returns <> 0, then it bails.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931582986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931587227","html_url":"https://github.com/apache/accumulo/issues/2295#issuecomment-931587227","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2295","id":931587227,"node_id":"IC_kwDOACaFSM43huSb","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T19:04:21Z","updated_at":"2021-09-30T19:04:21Z","author_association":"CONTRIBUTOR","body":"That was my suspicion as well. I reverted some of the changes in Fate, including that one, and the ITs pass. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931587227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931595658","html_url":"https://github.com/apache/accumulo/issues/2295#issuecomment-931595658","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2295","id":931595658,"node_id":"IC_kwDOACaFSM43hwWK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T19:16:49Z","updated_at":"2021-09-30T19:16:49Z","author_association":"CONTRIBUTOR","body":"Putting up a PR shortly","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931595658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931601981","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-931601981","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":931601981,"node_id":"IC_kwDOACaFSM43hx49","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T19:26:56Z","updated_at":"2021-09-30T19:26:56Z","author_association":"CONTRIBUTOR","body":"> I am worried my assumptions are wrong here, but assuming they are correct the logic in ensureAllTablesChecked is this.\r\n\r\nThe logic in ensureAllTablesChecked looks great and I really like the variable names.  As for the assumptions, I was thinking of this a bit differently.  Not in terms of the delete markers, but more in terms of what we should see in the table section of the metadata table when scanning for file references.\r\n\r\n 1. If a table id exists in zookeeper before and after scanning the metadata table for references then that table id should be seen in the metadata table when scanning for file references.\r\n 2. If table id exists in zookeeper before xor after scanning the metadata table for references then that table id may be seen in the metadata table when scanning for file references.\r\n\r\nThis PR is adding a sanity check for case 1 above.  For case 2 we are not adding any sanity checks, the question is are there any checks that could be added for that case?\r\n\r\nI think there is a special case of case 2 where we could be a bit more strict.  If we see no table ids in ZK before and after scanning the metadata table, but we do see table id references in the metadata table and delete markers.  We may want to avoid doing any GC in this case as this indicate that reading from ZK is problematic.  Seeing zero table ids in ZK could also be caused by there being in zero tables in Accumulo, however in this case we would not expect to see any table id references in the metadata table.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931601981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931645728","html_url":"https://github.com/apache/accumulo/pull/2296#issuecomment-931645728","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2296","id":931645728,"node_id":"IC_kwDOACaFSM43h8kg","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T20:35:33Z","updated_at":"2021-09-30T20:35:33Z","author_association":"CONTRIBUTOR","body":"Since this is difficult to review, I checked out your branch and did a diff with what was in Fate.java before your changes:\r\n```diff --git a/core/src/main/java/org/apache/accumulo/fate/Fate.java b/core/src/main/java/org/apache/accumulo/fate/Fate.java\r\nindex cf02c56cf6..cd53546b74 100644\r\n--- a/core/src/main/java/org/apache/accumulo/fate/Fate.java\r\n+++ b/core/src/main/java/org/apache/accumulo/fate/Fate.java\r\n@@ -21,6 +21,9 @@ package org.apache.accumulo.fate;\r\n import java.io.IOException;\r\n import java.util.EnumSet;\r\n import java.util.concurrent.ExecutorService;\r\n+import java.util.concurrent.RejectedExecutionException;\r\n+import java.util.concurrent.ScheduledThreadPoolExecutor;\r\n+import java.util.concurrent.ThreadPoolExecutor;\r\n import java.util.concurrent.TimeUnit;\r\n import java.util.concurrent.atomic.AtomicBoolean;\r\n import java.util.function.Function;\r\n@@ -50,6 +53,7 @@ public class Fate<T> {\r\n \r\n   private final TStore<T> store;\r\n   private final T environment;\r\n+  private ScheduledThreadPoolExecutor fatePoolWatcher;\r\n   private ExecutorService executor;\r\n \r\n   private static final EnumSet<TStatus> FINISHED_STATES =\r\n@@ -113,7 +117,6 @@ public class Fate<T> {\r\n             store.unreserve(tid, deferTime);\r\n           }\r\n         }\r\n-\r\n       }\r\n     }\r\n \r\n@@ -226,11 +229,33 @@ public class Fate<T> {\r\n    * Launches the specified number of worker threads.\r\n    */\r\n   public void startTransactionRunners(AccumuloConfiguration conf) {\r\n-    int numThreads = conf.getCount(Property.MANAGER_FATE_THREADPOOL_SIZE);\r\n-    executor = ThreadPools.createExecutorService(conf, Property.MANAGER_FATE_THREADPOOL_SIZE);\r\n-    for (int i = 0; i < numThreads; i++) {\r\n-      executor.execute(new TransactionRunner());\r\n-    }\r\n+    final ThreadPoolExecutor pool = (ThreadPoolExecutor) ThreadPools.createExecutorService(conf,\r\n+        Property.MANAGER_FATE_THREADPOOL_SIZE);\r\n+    fatePoolWatcher = ThreadPools.createGeneralScheduledExecutorService(conf);\r\n+    fatePoolWatcher.schedule(() -> {\r\n+      // resize the pool if the property changed\r\n+      ThreadPools.resizePool(pool, conf, Property.MANAGER_FATE_THREADPOOL_SIZE);\r\n+      // If the pool grew, then ensure that there is a TransactionRunner for each thread\r\n+      int needed = conf.getCount(Property.MANAGER_FATE_THREADPOOL_SIZE) - pool.getQueue().size();\r\n+      if (needed > 0) {\r\n+        for (int i = 0; i < needed; i++) {\r\n+          try {\r\n+            pool.execute(new TransactionRunner());\r\n+          } catch (RejectedExecutionException e) {\r\n+            // RejectedExecutionException could be shutting down\r\n+            if (pool.isShutdown()) {\r\n+              // The exception is expected in this case, no need to spam the logs.\r\n+              log.trace(\"Error adding transaction runner to FaTE executor pool.\", e);\r\n+            } else {\r\n+              // This is bad, FaTE may no longer work!\r\n+              log.error(\"Error adding transaction runner to FaTE executor pool.\", e);\r\n+            }\r\n+            break;\r\n+          }\r\n+        }\r\n+      }\r\n+    }, 3, TimeUnit.SECONDS);\r\n+    executor = pool;\r\n   }\r\n \r\n   // get a transaction id back to the requester before doing any work\r\n@@ -325,6 +350,7 @@ public class Fate<T> {\r\n    */\r\n   public void shutdown() {\r\n     keepRunning.set(false);\r\n+    fatePoolWatcher.shutdown();\r\n     executor.shutdown();\r\n   }\r\n```\r\n\r\nI assume this is a follow-up fix for your fix in #2278 but it's hard to tell without a description or link to the earlier commit. If so, I think this revert is OK. What do you think, do these changes look correct?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931645728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931653551","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-931653551","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":931653551,"node_id":"IC_kwDOACaFSM43h-ev","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T20:48:38Z","updated_at":"2021-09-30T20:48:38Z","author_association":"MEMBER","body":"> @mjwall I pulled these changes locally and experimented with writing the following unit test and it passed.\r\n> \r\n> ```java\r\n>   @Test\r\n>   public void testMissingTableIds() throws Exception {\r\n>     GarbageCollectionAlgorithm gca = new GarbageCollectionAlgorithm();\r\n> \r\n>     TestGCE gce = new TestGCE();\r\n> \r\n>     gce.candidates.add(\"hdfs://foo.com:6000/user/foo/tables/a/t-0/F00.rf\");\r\n> \r\n>     gce.addFileReference(\"a\", null, \"hdfs://foo.com:6000/user/foo/tables/a/t-0/F00.rf\");\r\n>     gce.addFileReference(\"c\", null, \"hdfs://foo.com:6000/user/foo/tables/c/t-0/F00.rf\");\r\n> \r\n>     // the following table ids must be seen in the references\r\n>     gce.tableIds.add(\"a\");\r\n>     gce.tableIds.add(\"b\");\r\n>     gce.tableIds.add(\"c\");\r\n>     gce.tableIds.add(\"d\");\r\n> \r\n>     String msg = Assert.assertThrows(RuntimeException.class, () -> gca.collect(gce)).getMessage();\r\n>     Assert.assertTrue(msg, (msg.contains(\"[b, d]\") || msg.contains(\"[d, b]\"))\r\n>         && msg.contains(\"Missed checking tables\"));\r\n>   }\r\n> ```\r\n\r\nSweet, thanks","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931653551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931656235","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-931656235","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":931656235,"node_id":"IC_kwDOACaFSM43h_Ir","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T20:50:38Z","updated_at":"2021-09-30T20:50:38Z","author_association":"MEMBER","body":"> @mjwall thinking about unit testing the cases where table ids changes during scanning the refs. Maybe we could simulate this by making TestGCE.getReferenceIterator() change the tableid set.\r\n\r\nI considered adding some functions to TestGCE but then pulled out the logic to one method.  I was hoping it would be enough to just test that method with different scenarios.  That way we can explicitly pass in the before, seen and after and assert based on that.  Interested in your thoughts.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931656235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931666584","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-931666584","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":931666584,"node_id":"IC_kwDOACaFSM43iBqY","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T20:54:50Z","updated_at":"2021-09-30T20:54:50Z","author_association":"MEMBER","body":"> > I am worried my assumptions are wrong here, but assuming they are correct the logic in ensureAllTablesChecked is this.\r\n> \r\n> The logic in ensureAllTablesChecked looks great and I really like the variable names. As for the assumptions, I was thinking of this a bit differently. Not in terms of the delete markers, but more in terms of what we should see in the table section of the metadata table when scanning for file references.\r\n> \r\n> 1. If a table id exists in zookeeper before and after scanning the metadata table for references then that table id should be seen in the metadata table when scanning for file references.\r\n> 2. If table id exists in zookeeper before xor after scanning the metadata table for references then that table id may be seen in the metadata table when scanning for file references.\r\n> \r\n> This PR is adding a sanity check for case 1 above. For case 2 we are not adding any sanity checks, the question is are there any checks that could be added for that case?\r\n> \r\n> I think there is a special case of case 2 where we could be a bit more strict. If we see no table ids in ZK before and after scanning the metadata table, but we do see table id references in the metadata table and delete markers. We may want to avoid doing any GC in this case as this indicate that reading from ZK is problematic. Seeing zero table ids in ZK could also be caused by there being in zero tables in Accumulo, however in this case we would not expect to see any table id references in the metadata table.\r\n\r\n@keith-turner thanks so much for looking at this.  You are right, I was only concerned about #1.  Failing to remove candidates still in use cause deletion of needed files\r\n\r\nMy first thought about scenario 2 was this.  If we scan things in metadata that weren't in the before or after ids, we run the risk of over removing candidates, which results in those candidates not be deleted.\r\n\r\nBut thinking about it further, I realize you might be getting at this.  For whatever reason, something unexpected happened during our scan of the metadata table.  Therefore, we should except and start the GC process again.  Is that accurate?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931666584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931672579","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-931672579","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":931672579,"node_id":"IC_kwDOACaFSM43iDID","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T20:56:40Z","updated_at":"2021-09-30T20:56:40Z","author_association":"CONTRIBUTOR","body":"> I considered adding some functions to TestGCE but then pulled out the logic to one method. I was hoping it would be enough to just test that method with different scenarios. That way we can explicitly pass in the before, seen and after and assert based on that. Interested in your thoughts.\r\n\r\nNot sure.  The GCE/GCA distinction was created so that GCA could be tested.  My goal would be to to get the most coverage of the GCA code as possible, but not sure of the best way to do that.  I do like how you broke that method out and I do think unit test directly for that method would be very nice.  Could possible make the method static instead of protected to test it.  The question is can we also get coverage of other code in GCA that interacts with that method.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931672579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931686306","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-931686306","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":931686306,"node_id":"IC_kwDOACaFSM43iGei","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T21:00:35Z","updated_at":"2021-09-30T21:00:35Z","author_association":"MEMBER","body":"> I think you are on the right track but I just had a thought. If we only care about the split points maybe it would be better to check the split points before and after instead of table IDs. I think there is code during bulk import that checks for merges or splits but it is very confusing. This is probably more difficult but it was just something I thought I would share.\r\n> \r\n> https://github.com/apache/accumulo/blob/f2adfedda8d4efee48c5138b1373b2d4e2cd7598/server/manager/src/main/java/org/apache/accumulo/manager/tableOps/bulkVer2/PrepBulkImport.java#L182\r\n\r\nThanks for looking @milleruntime.  Are you envisioning a check for merges in the metadata table or the data table?  I am trying to wrap my head around what that means.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931686306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931690766","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-931690766","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":931690766,"node_id":"IC_kwDOACaFSM43iHkO","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T21:01:48Z","updated_at":"2021-09-30T21:01:48Z","author_association":"MEMBER","body":"> > I considered adding some functions to TestGCE but then pulled out the logic to one method. I was hoping it would be enough to just test that method with different scenarios. That way we can explicitly pass in the before, seen and after and assert based on that. Interested in your thoughts.\r\n> \r\n> Not sure. The GCE/GCA distinction was created so that GCA could be tested. My goal would be to to get the most coverage of the GCA code as possible, but not sure of the best way to do that. I do like how you broke that method out and I do think unit test directly for that method would be very nice. Could possible make the method static instead of protected to test it. The question is can we also get coverage of other code in GCA that interacts with that method.\r\n\r\nOk, thanks. I'll start with unit tests of that method and see about more \"integrationy\" tests as well.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931690766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931707269","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-931707269","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":931707269,"node_id":"IC_kwDOACaFSM43iLmF","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T21:09:59Z","updated_at":"2021-09-30T21:09:59Z","author_association":"CONTRIBUTOR","body":"> But thinking about it further, I realize you might be getting at this. For whatever reason, something unexpected happened during our scan of the metadata table. Therefore, we should except and start the GC process again. Is that accurate?\r\n\r\nCurrently I am not sure of any action to take for case 2 (except for that very special case I mentioned).  There could be shenanigans happening but there is also normal accumulo activity like a tables being deleted/added.  With the information we have there is no way to differentiate between the shenanigans and normal activity.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931707269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931737860","html_url":"https://github.com/apache/accumulo/pull/2235#issuecomment-931737860","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2235","id":931737860,"node_id":"IC_kwDOACaFSM43iTEE","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T22:06:33Z","updated_at":"2021-09-30T22:06:33Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo in there is a method named `getCandidates()` that has the following bit of code in it.\r\n\r\n```java\r\n        case CHOP: {\r\n          switch (chopStatus) {\r\n            case NOT_ACTIVE:\r\n            case SELECTING:\r\n              return Set.of();\r\n```\r\n\r\nneed to add the new enum to this switch like the following.\r\n\r\n```java\r\n        case CHOP: {\r\n          switch (chopStatus) {\r\n            case NOT_ACTIVE:\r\n            case SELECTING:\r\n            case MARKING:\r\n              return Set.of();\r\n```\r\n\r\nThis is the code that detemines which files are candidates for a chop compaction.  Unless chopStatus is SELECTED it should return the empty set.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/931737860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932154265","html_url":"https://github.com/apache/accumulo/pull/2296#issuecomment-932154265","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2296","id":932154265,"node_id":"IC_kwDOACaFSM43j4uZ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T11:39:58Z","updated_at":"2021-10-01T11:39:58Z","author_association":"CONTRIBUTOR","body":"I think you are seeing different issues being addressed.These changes do look correct, here's why.\r\n\r\n1. [Here](https://github.com/apache/accumulo/commit/e62ace6a9d37572d95999f5412c6148efbba50b9#diff-467b6cb7af0f7b7339d81d3112329b8e19557e685a3c659bc623160826c8f01dL228) I modified Fate.java to use the new ThreadPools class as part of ThreadPools PR.\r\n\r\n2. [Here](https://github.com/apache/accumulo/commit/e67ffa0a4be2140234fb3c0ea0742dff192bce91#diff-467b6cb7af0f7b7339d81d3112329b8e19557e685a3c659bc623160826c8f01dL229) includes changes for multiple issues. The change is part of a PR that closes #2272 and #2276. #2272 was an issue that @keith-turner submitted where he noticed that properties marked as mutable were not being honored. Specifically, there were some thread pool properties that were marked as mutable but were either not being resized or were done differently. I consolidated the pool resize logic and updated the code to use it for the ThreadPools that were marked as mutable in a PR for #2278.\r\n\r\n3. As part of #2278 I also included a resolution to [this](https://github.com/apache/accumulo/issues/2272#issuecomment-922119524) comment in #2272 . This is where the bug lies.\r\n\r\nThis PR reverts the code changes for # 3 above, keeps the ThreadPool resizing, and ensures that there is a TransactionRunner running for each Thread.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932154265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932157525","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-932157525","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":932157525,"node_id":"IC_kwDOACaFSM43j5hV","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T11:45:44Z","updated_at":"2021-10-01T11:45:44Z","author_association":"CONTRIBUTOR","body":"> Thanks for looking @milleruntime. Are you envisioning a check for merges in the metadata table or the data table? I am trying to wrap my head around what that means.\r\n\r\nI was thinking to keep track of the splits of the data tables. But I guess you could for the metadata table as well. I am not sure this would be better though. It seems like you would have to keep track of a lot more than just the table IDs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932157525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932164351","html_url":"https://github.com/apache/accumulo/pull/2296#issuecomment-932164351","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2296","id":932164351,"node_id":"IC_kwDOACaFSM43j7L_","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T11:57:26Z","updated_at":"2021-10-01T11:57:26Z","author_association":"CONTRIBUTOR","body":"@dlmarion thanks for the detailed explanation, that helps a lot.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932164351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932211761","html_url":"https://github.com/apache/accumulo/pull/2296#issuecomment-932211761","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2296","id":932211761,"node_id":"IC_kwDOACaFSM43kGwx","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T13:07:37Z","updated_at":"2021-10-01T13:07:37Z","author_association":"CONTRIBUTOR","body":"+1 for the branch name BTW ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932211761/reactions","total_count":3,"+1":0,"-1":0,"laugh":3,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932263109","html_url":"https://github.com/apache/accumulo/pull/2238#issuecomment-932263109","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2238","id":932263109,"node_id":"IC_kwDOACaFSM43kTTF","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T14:09:06Z","updated_at":"2021-10-01T14:09:06Z","author_association":"CONTRIBUTOR","body":"FYI this change broke the Uno install scripts. I opened an issue in Fluo: https://github.com/apache/fluo-uno/issues/271","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932263109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932394590","html_url":"https://github.com/apache/accumulo/pull/2259#issuecomment-932394590","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2259","id":932394590,"node_id":"IC_kwDOACaFSM43kzZe","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T16:58:35Z","updated_at":"2021-10-01T17:18:39Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - I used the following pom file to create a shaded jar, which I then dropped into the `lib` directory and I left the javaagent configuration section in `accumulo-env.sh` commented out. I think this tests the other case, not using the java agent. Confirmed traces in Jaeger UI.\r\n\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n  <modelVersion>4.0.0</modelVersion>\r\n  <groupId>org.apache.accumulo.tracing</groupId>\r\n  <artifactId>opentelemetry-autoconf-deps</artifactId>\r\n  <version>1.0.0-SNAPSHOT</version>\r\n  <packaging>pom</packaging>\r\n  <properties>\r\n    <version.opentelemetry>1.6.0</version.opentelemetry>\r\n  </properties>\r\n  <dependencyManagement>\r\n    <dependencies>\r\n      <dependency>\r\n        <groupId>io.opentelemetry</groupId>\r\n        <artifactId>opentelemetry-bom</artifactId>\r\n        <version>1.6.0</version>\r\n        <type>pom</type>\r\n        <scope>import</scope>\r\n      </dependency>\r\n    </dependencies>\r\n  </dependencyManagement>\r\n  <dependencies>\r\n    <dependency>\r\n      <groupId>io.grpc</groupId>\r\n      <artifactId>grpc-netty-shaded</artifactId>\r\n      <version>1.38.0</version>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>io.opentelemetry</groupId>\r\n      <artifactId>opentelemetry-exporter-jaeger</artifactId>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>io.opentelemetry</groupId>\r\n      <artifactId>opentelemetry-exporter-logging</artifactId>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>io.opentelemetry</groupId>\r\n      <artifactId>opentelemetry-exporter-otlp</artifactId>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>io.opentelemetry</groupId>\r\n      <artifactId>opentelemetry-exporter-otlp-common</artifactId>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>io.opentelemetry</groupId>\r\n      <artifactId>opentelemetry-exporter-otlp-trace</artifactId>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>io.opentelemetry</groupId>\r\n      <artifactId>opentelemetry-exporter-prometheus</artifactId>\r\n      <version>1.6.0-alpha</version>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>io.opentelemetry</groupId>\r\n      <artifactId>opentelemetry-exporter-zipkin</artifactId>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>io.opentelemetry</groupId>\r\n      <artifactId>opentelemetry-sdk-extension-autoconfigure</artifactId>\r\n      <version>1.6.0-alpha</version>\r\n    </dependency>\r\n  </dependencies>\r\n  <build>\r\n    <plugins>\r\n      <plugin>\r\n        <groupId>org.apache.maven.plugins</groupId>\r\n        <artifactId>maven-shade-plugin</artifactId>\r\n        <version>3.2.4</version>\r\n        <dependencies>\r\n          <dependency>\r\n            <groupId>com.hazelcast</groupId>\r\n            <artifactId>hazelcast-build-utils</artifactId>\r\n            <version>4.2.2</version>\r\n          </dependency>\r\n        </dependencies>\r\n        <executions>\r\n          <execution>\r\n            <goals>\r\n              <goal>shade</goal>\r\n            </goals>\r\n            <phase>package</phase>\r\n            <configuration>\r\n              <artifactSet>\r\n                <includes>\r\n                  <include>*.*</include>\r\n                </includes>\r\n              </artifactSet>\r\n              <createSourcesJar>true</createSourcesJar>\r\n              <dependencyReducedPomLocation>${project.build.directory}/.</dependencyReducedPomLocation>\r\n              <outputFile>${project.build.directory}/opentelemetry-autoconf-deps-${project.version}-shaded.jar</outputFile>\r\n              <shadedArtifactAttached>true</shadedArtifactAttached>\r\n              <shadeSourcesContent>true</shadeSourcesContent>\r\n              <transformers>\r\n                <transformer implementation=\"com.hazelcast.buildutils.HazelcastManifestTransformer\">\r\n                  <!-- the tag below is required due to a missing null-check it seems -->\r\n                  <overrideInstructions />\r\n                </transformer>\r\n                <transformer implementation=\"org.apache.maven.plugins.shade.resource.ApacheLicenseResourceTransformer\" />\r\n                <transformer implementation=\"org.apache.maven.plugins.shade.resource.ApacheNoticeResourceTransformer\" />\r\n                <transformer implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\" />\r\n              </transformers>\r\n            </configuration>\r\n          </execution>\r\n        </executions>\r\n      </plugin>\r\n    </plugins>\r\n  </build>\r\n</project>\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932394590/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932399981","html_url":"https://github.com/apache/accumulo/pull/2259#issuecomment-932399981","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2259","id":932399981,"node_id":"IC_kwDOACaFSM43k0tt","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T17:04:54Z","updated_at":"2021-10-01T17:04:54Z","author_association":"CONTRIBUTOR","body":"Adding `general.opentelemetry.enabled=true` to `accumulo-client.properties` and the traces show up in Jaeger.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/932399981/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/933800505","html_url":"https://github.com/apache/accumulo/issues/1841#issuecomment-933800505","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1841","id":933800505,"node_id":"IC_kwDOACaFSM43qKo5","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T19:46:10Z","updated_at":"2021-10-04T19:46:10Z","author_association":"CONTRIBUTOR","body":"The fixes made in #2296 appear to have fixed the timeout issues. The test still appears to be flaky, however. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/933800505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/933802631","html_url":"https://github.com/apache/accumulo/issues/1841#issuecomment-933802631","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1841","id":933802631,"node_id":"IC_kwDOACaFSM43qLKH","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T19:49:32Z","updated_at":"2021-10-04T19:49:32Z","author_association":"MEMBER","body":"> The fixes made in #2296 appear to have fixed the timeout issues. The test still appears to be flaky, however.\r\n\r\nIt does seem like the current code no longer times out. I am still seeing the test error out with `java.lang.RuntimeException: org.apache.accumulo.core.client.AccumuloException: Table is being deleted` which to me seems like it should be expected since the test is concurrently deleting tables and performing other ops. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/933802631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934262204","html_url":"https://github.com/apache/accumulo/issues/2290#issuecomment-934262204","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2290","id":934262204,"node_id":"IC_kwDOACaFSM43r7W8","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T10:06:26Z","updated_at":"2021-10-05T10:06:26Z","author_association":"CONTRIBUTOR","body":"@keith-turner @dlmarion Any ideas for this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934262204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934312920","html_url":"https://github.com/apache/accumulo/issues/2290#issuecomment-934312920","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2290","id":934312920,"node_id":"IC_kwDOACaFSM43sHvY","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T11:16:21Z","updated_at":"2021-10-05T11:17:56Z","author_association":"CONTRIBUTOR","body":"IIRC the external compactions *are* included currently in the number of running and queued compactions displayed on the monitor. This is because the external compactions are queued up from the tserver and the tserver knows when they are running/finished/failed. There are several places where external compaction information is stored.\r\n\r\n1. When an external compaction is running an `ecomp` column is added in the metadata table for the Tablet. It lists the files included in the compaction, the compactor address, the compaction settings, etc.\r\n\r\n2. When a compaction is finished the entry for the tablet in the metadata table is removed and an `~ecomp` entry is added to signify that the external compaction is finshed (succeeded or failed).\r\n\r\nThe [blog](https://accumulo.apache.org/blog/2021/07/08/external-compactions.html#compaction-coordinator) provides a description for both 1 and 2. However, I'm not sure that this provides a complete picture. There are two data structures in the CompactionCoordinator that may also be of use. Specifically the [QueueSummaries](https://github.com/apache/accumulo/blob/main/server/compaction-coordinator/src/main/java/org/apache/accumulo/coordinator/CompactionCoordinator.java#L90) and the [RUNNING](https://github.com/apache/accumulo/blob/main/server/compaction-coordinator/src/main/java/org/apache/accumulo/coordinator/CompactionCoordinator.java#L93) collections. As their name implies, the QueueSummaries collection contains a summary of the external compaction queues for each tserver and the RUNNING collection has information about what is active now.\r\n\r\nTo populate the QueueSummaries, the CompactionCoordinator asks each TServer about the external compactions that are queued up. When a Compactor is free to do work, the CompactionCoordinator assigns it the highest priority compaction for the queue that it is working on. An entry is put into the RUNNING collection for that compaction and then the Compactor calls back periodically to update the state using [this](https://github.com/apache/accumulo/blob/main/server/compactor/src/main/java/org/apache/accumulo/compactor/Compactor.java#L358) method. If you look at where this is used, you will see that it tell the CompactionCoordinator when the compaction starts/succeeds/fails and also updates it periodically on how many entries it has written out to show progress information.\r\n\r\nI don't think we have exposed the information in the CompactionCoordinator yet, except for in the tests. In some of the tests I start up the [TestCompactionCoordinator](https://github.com/apache/accumulo/blob/main/test/src/main/java/org/apache/accumulo/test/compaction/TestCompactionCoordinator.java) so that I can use the information in the RUNNING collection to determine external compaction success / failure.\r\n\r\nSo, I wrote you an essay, I'm not sure what information you want to show in the monitor, but at least this gives you an idea of what's available. When we figure out what we want to show, then we can dig in further on how to do it","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934312920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934369035","html_url":"https://github.com/apache/accumulo/issues/2290#issuecomment-934369035","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2290","id":934369035,"node_id":"IC_kwDOACaFSM43sVcL","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T12:34:15Z","updated_at":"2021-10-05T12:34:15Z","author_association":"CONTRIBUTOR","body":"I am not sure what exactly we should show but I think the important part now would be to determine if we need to create any Thrift RPCs in `ManagerMonitorInfo` to expose the information to the Monitor. We won't be able to create new RPCs in a bug fix release. As long as the information is available to the monitor, we should be able to change how the information is viewed in a bug fix release though. So if there is anything you can think of, such as information from the CompactionCoordinator, that we will need to create RPCs for, we should take care of that now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934369035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934425382","html_url":"https://github.com/apache/accumulo/issues/2299#issuecomment-934425382","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2299","id":934425382,"node_id":"IC_kwDOACaFSM43sjMm","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T13:39:50Z","updated_at":"2021-10-05T13:39:50Z","author_association":"MEMBER","body":"@EdColeman is working on versioned properties in ZK to reduce the number of watchers per table, among other benefits (I don't have the ticket numbers immediately available to reference). That work is replacing the use of ZooCache with another caching mechanism for config properties stored in ZK. Since config properties are a substantial use case for ZooCache, it might sense to limit the scope of any refactoring here, in order to avoid wasting effort refactoring for uses that are being dropped and to focus on the uses that will remain.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934425382/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934448399","html_url":"https://github.com/apache/accumulo/issues/1841#issuecomment-934448399","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1841","id":934448399,"node_id":"IC_kwDOACaFSM43so0P","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T14:08:19Z","updated_at":"2021-10-05T14:08:19Z","author_association":"MEMBER","body":"> It does seem like the current code no longer times out. I am still seeing the test error out with `java.lang.RuntimeException: org.apache.accumulo.core.client.AccumuloException: Table is being deleted` which to me seems like it should be expected since the test is concurrently deleting tables and performing other ops.\r\n\r\nThe fact that the table is being deleted might be expected, but the exception being propagated and erroring out the test is not. :frowning_face: ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934448399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934449551","html_url":"https://github.com/apache/accumulo/issues/2300#issuecomment-934449551","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2300","id":934449551,"node_id":"IC_kwDOACaFSM43spGP","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T14:09:41Z","updated_at":"2021-10-05T14:09:41Z","author_association":"MEMBER","body":"I'll take a look at this one. This class has been annoying me for awhile, and it overlaps with some of the code I've been looking at recently regarding tablename/id lookups for RPC calls.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934449551/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934508008","html_url":"https://github.com/apache/accumulo/issues/2290#issuecomment-934508008","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2290","id":934508008,"node_id":"IC_kwDOACaFSM43s3Xo","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T15:21:45Z","updated_at":"2021-10-05T15:21:45Z","author_association":"CONTRIBUTOR","body":"> IIRC the external compactions are included currently in the number of running and queued compactions displayed on the monitor. This is because the external compactions are queued up from the tserver and the tserver knows when they are running/finished/failed. \r\n\r\nIf this is the case, then perhaps there is nothing that we need to do for now. I will leave this ticket open until someone can confirm this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934508008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934513943","html_url":"https://github.com/apache/accumulo/issues/2302#issuecomment-934513943","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2302","id":934513943,"node_id":"IC_kwDOACaFSM43s40X","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T15:28:31Z","updated_at":"2021-10-05T15:28:31Z","author_association":"CONTRIBUTOR","body":"I will take a look at this one. It seems less disruptive than the other ones and shouldn't interfere with ZooKeeper and configuration changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934513943/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934678239","html_url":"https://github.com/apache/accumulo/issues/2111#issuecomment-934678239","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2111","id":934678239,"node_id":"IC_kwDOACaFSM43tg7f","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T18:50:29Z","updated_at":"2021-10-05T18:50:29Z","author_association":"CONTRIBUTOR","body":"@dlmarion you recently refactored the ExternalCompaction ITs, do you know if they cover this scenario?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934678239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934819301","html_url":"https://github.com/apache/accumulo/issues/2111#issuecomment-934819301","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2111","id":934819301,"node_id":"IC_kwDOACaFSM43uDXl","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T20:54:49Z","updated_at":"2021-10-05T20:54:49Z","author_association":"CONTRIBUTOR","body":"I actually started working on some unit test that are related to this this morning.  Should be posting a PR shortly\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934819301/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934894714","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-934894714","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":934894714,"node_id":"IC_kwDOACaFSM43uVx6","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T21:48:17Z","updated_at":"2021-10-05T21:48:17Z","author_association":"MEMBER","body":"> > But thinking about it further, I realize you might be getting at this. For whatever reason, something unexpected happened during our scan of the metadata table. Therefore, we should except and start the GC process again. Is that accurate?\r\n> \r\n> Currently I am not sure of any action to take for case 2 (except for that very special case I mentioned). There could be shenanigans happening but there is also normal accumulo activity like a tables being deleted/added. With the information we have there is no way to differentiate between the shenanigans and normal activity.\r\n\r\nshenanigan ... lol","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/934894714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/936100525","html_url":"https://github.com/apache/accumulo/pull/2303#issuecomment-936100525","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2303","id":936100525,"node_id":"IC_kwDOACaFSM43y8Kt","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T12:00:42Z","updated_at":"2021-10-06T12:00:42Z","author_association":"CONTRIBUTOR","body":"All ITs are passing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/936100525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/936169190","html_url":"https://github.com/apache/accumulo/issues/2301#issuecomment-936169190","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2301","id":936169190,"node_id":"IC_kwDOACaFSM43zM7m","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T12:46:13Z","updated_at":"2021-10-06T12:46:13Z","author_association":"CONTRIBUTOR","body":"Another factor that makes this change difficult is the use of `TabletLocator` in the Map Reduce code. Both, the new and old Map Reduce API use it in a few places, mainly to get the splits. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/936169190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/936738038","html_url":"https://github.com/apache/accumulo/pull/2304#issuecomment-936738038","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2304","id":936738038,"node_id":"IC_kwDOACaFSM431Xz2","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T17:24:20Z","updated_at":"2021-10-06T17:24:20Z","author_association":"CONTRIBUTOR","body":"I still on occasion run into this exception:\r\n\r\n<details>\r\n\r\n<pre>\r\njava.util.concurrent.ExecutionException: java.lang.RuntimeException: org.apache.accumulo.core.client.AccumuloException: Compaction canceled\r\n\r\n\tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n\tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n\tat org.apache.accumulo.test.functional.ConcurrentDeleteTableIT.testConcurrentFateOpsWithDelete(ConcurrentDeleteTableIT.java:214)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)\r\n\tat java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.lang.RuntimeException: org.apache.accumulo.core.client.AccumuloException: Compaction canceled\r\n\tat org.apache.accumulo.test.functional.ConcurrentDeleteTableIT$DelayedTableOp.run(ConcurrentDeleteTableIT.java:254)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\tat java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\t... 1 more\r\nCaused by: org.apache.accumulo.core.client.AccumuloException: Compaction canceled\r\n\tat org.apache.accumulo.core.clientImpl.TableOperationsImpl.doFateOperation(TableOperationsImpl.java:401)\r\n\tat org.apache.accumulo.core.clientImpl.TableOperationsImpl.compact(TableOperationsImpl.java:866)\r\n\tat org.apache.accumulo.test.functional.ConcurrentDeleteTableIT$1.doTableOp(ConcurrentDeleteTableIT.java:163)\r\n\tat org.apache.accumulo.test.functional.ConcurrentDeleteTableIT$DelayedTableOp.run(ConcurrentDeleteTableIT.java:244)\r\n\t... 6 more\r\nCaused by: ThriftTableOperationException(tableId:3, tableName:null, op:COMPACT, type:OTHER, description:Compaction canceled)\r\n\tat org.apache.accumulo.core.manager.thrift.FateService$waitForFateOperation_result$waitForFateOperation_resultStandardScheme.read(FateService.java:4719)\r\n\tat org.apache.accumulo.core.manager.thrift.FateService$waitForFateOperation_result$waitForFateOperation_resultStandardScheme.read(FateService.java:4688)\r\n\tat org.apache.accumulo.core.manager.thrift.FateService$waitForFateOperation_result.read(FateService.java:4614)\r\n\tat org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:88)\r\n\tat org.apache.accumulo.core.manager.thrift.FateService$Client.recv_waitForFateOperation(FateService.java:157)\r\n\tat org.apache.accumulo.core.manager.thrift.FateService$Client.waitForFateOperation(FateService.java:142)\r\n\tat org.apache.accumulo.core.clientImpl.TableOperationsImpl.waitForFateOperation(TableOperationsImpl.java:303)\r\n\tat org.apache.accumulo.core.clientImpl.TableOperationsImpl.doFateOperation(TableOperationsImpl.java:372)\r\n\t... 9 more\r\n</pre>\r\n\r\n\r\n</details>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/936738038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/936743678","html_url":"https://github.com/apache/accumulo/pull/2304#issuecomment-936743678","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2304","id":936743678,"node_id":"IC_kwDOACaFSM431ZL-","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T17:27:26Z","updated_at":"2021-10-06T17:27:26Z","author_association":"MEMBER","body":"> I still on occasion run into this exception:\r\n\r\nOops forgot to include this. I've seen this too and believe its in the same boat as the other exception we are seeing. I'll account for that here as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/936743678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/936816925","html_url":"https://github.com/apache/accumulo/pull/2307#issuecomment-936816925","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2307","id":936816925,"node_id":"IC_kwDOACaFSM431rEd","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T18:07:31Z","updated_at":"2021-10-06T18:07:31Z","author_association":"CONTRIBUTOR","body":"Wouldn't it make more sense to create another `LogCloser`, like an `S3LogCloser`, or something more generic to handle your case? I wouldn't expect the `HadoopLogCloser` to work with other filesystems.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/936816925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/936831759","html_url":"https://github.com/apache/accumulo/pull/2307#issuecomment-936831759","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2307","id":936831759,"node_id":"IC_kwDOACaFSM431usP","user":{"login":"cbevard1","id":473011,"node_id":"MDQ6VXNlcjQ3MzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/473011?v=4","gravatar_id":"","url":"https://api.github.com/users/cbevard1","html_url":"https://github.com/cbevard1","followers_url":"https://api.github.com/users/cbevard1/followers","following_url":"https://api.github.com/users/cbevard1/following{/other_user}","gists_url":"https://api.github.com/users/cbevard1/gists{/gist_id}","starred_url":"https://api.github.com/users/cbevard1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbevard1/subscriptions","organizations_url":"https://api.github.com/users/cbevard1/orgs","repos_url":"https://api.github.com/users/cbevard1/repos","events_url":"https://api.github.com/users/cbevard1/events{/privacy}","received_events_url":"https://api.github.com/users/cbevard1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T18:16:00Z","updated_at":"2021-10-06T18:16:00Z","author_association":"NONE","body":"Oh, I see. I can set the property manager.wal.closer.implementation so use another implementation of LogCloser. That should work perfectly. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/936831759/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/937323634","html_url":"https://github.com/apache/accumulo/issues/2184#issuecomment-937323634","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2184","id":937323634,"node_id":"IC_kwDOACaFSM433mxy","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T23:32:44Z","updated_at":"2021-10-06T23:32:44Z","author_association":"CONTRIBUTOR","body":"The issue appears to be when the tablet server attempts to send a message to the manager during the upgrade process. The line in `TabletServer` and of the send function that calls `reportTabletStatus` is below.\r\n\r\nhttps://github.com/apache/accumulo/blob/1dc72fce2c781dee597c8c11876a3bc6c321c199/server/tserver/src/main/java/org/apache/accumulo/tserver/TabletServer.java#L811\r\n\r\nhttps://github.com/apache/accumulo/blob/30ce59fd94f51b60a30ced328156f02d3223330b/server/tserver/src/main/java/org/apache/accumulo/tserver/managermessage/TabletStatusMessage.java#L40-L42","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/937323634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/937502901","html_url":"https://github.com/apache/accumulo/issues/2306#issuecomment-937502901","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2306","id":937502901,"node_id":"IC_kwDOACaFSM434Si1","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-07T06:46:44Z","updated_at":"2021-10-07T06:46:44Z","author_association":"MEMBER","body":"I think this can be closed for the same reason the corresponding pull request at #2307 was closed.\r\n\r\nJust one note, @cbevard1 . I see you created this issue, and then immediately (4 minutes later) submitted the PR at #2307. I just wanted to let you know that we don't require a separate issue to be created as part of our workflow. The pull request can serve as its own issue on GitHub. Sometimes a separate issue can be useful, but other times, it's just avoidable noise. If you have a PR ready to go, please feel free to submit it without creating a separate issue first. If you feel the issue is necessary, that's fine too. I just wanted to make sure you knew that it is optional, and not strictly required by our workflow.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/937502901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/937708806","html_url":"https://github.com/apache/accumulo/issues/2306#issuecomment-937708806","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2306","id":937708806,"node_id":"IC_kwDOACaFSM435E0G","user":{"login":"cbevard1","id":473011,"node_id":"MDQ6VXNlcjQ3MzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/473011?v=4","gravatar_id":"","url":"https://api.github.com/users/cbevard1","html_url":"https://github.com/cbevard1","followers_url":"https://api.github.com/users/cbevard1/followers","following_url":"https://api.github.com/users/cbevard1/following{/other_user}","gists_url":"https://api.github.com/users/cbevard1/gists{/gist_id}","starred_url":"https://api.github.com/users/cbevard1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbevard1/subscriptions","organizations_url":"https://api.github.com/users/cbevard1/orgs","repos_url":"https://api.github.com/users/cbevard1/repos","events_url":"https://api.github.com/users/cbevard1/events{/privacy}","received_events_url":"https://api.github.com/users/cbevard1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-07T11:36:32Z","updated_at":"2021-10-07T11:36:32Z","author_association":"NONE","body":"@ctubbsii Agreed. I forgot that I had created the issue and should have closed it the same time I closed the PR. \r\n\r\n> The pull request can serve as its own issue on GitHub.\r\n\r\nUnderstood. I'll keep this in mind if I have any future PRs. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/937708806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/937838453","html_url":"https://github.com/apache/accumulo/pull/2188#issuecomment-937838453","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2188","id":937838453,"node_id":"IC_kwDOACaFSM435kd1","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-07T14:17:36Z","updated_at":"2021-10-07T14:17:36Z","author_association":"MEMBER","body":"Superseded by #2305 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/937838453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/938048837","html_url":"https://github.com/apache/accumulo/pull/2305#issuecomment-938048837","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2305","id":938048837,"node_id":"IC_kwDOACaFSM436X1F","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-07T18:29:12Z","updated_at":"2021-10-07T18:29:12Z","author_association":"CONTRIBUTOR","body":"I'm thinking that we should remove the [Rate](https://github.com/apache/accumulo/blob/main/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/Rate.java) class and the metrics used by it. Rates can be calculated by downstream systems.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/938048837/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/938583660","html_url":"https://github.com/apache/accumulo/pull/2297#issuecomment-938583660","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2297","id":938583660,"node_id":"IC_kwDOACaFSM438aZs","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-08T11:57:33Z","updated_at":"2021-10-08T11:57:33Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I was thinking more about our comments and was wondering what you think of renaming the classes in the Monitor that get turned into JSON?  I noticed that we have a lot of classes in the monitor with generic names, like `Compactions` and `Scans`. These classes contain the variable names for the JSON and if we change will break the front end code. It doesn't make sense to call them `Impl` as we do in other places. What do you think about renaming these classes to something like `CompactionsJSON` or `ScansJSON` to help differentiate it from other back-end classes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/938583660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/938763704","html_url":"https://github.com/apache/accumulo/pull/2309#issuecomment-938763704","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2309","id":938763704,"node_id":"IC_kwDOACaFSM439GW4","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-08T16:14:37Z","updated_at":"2021-10-08T16:14:37Z","author_association":"CONTRIBUTOR","body":"FYI the phrase \"sanity check\" currently gets flagged by the new Apache CLC - Conscious Language Checker tool https://clc.diversity.apache.org/","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/938763704/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/939047920","html_url":"https://github.com/apache/accumulo/pull/2310#issuecomment-939047920","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2310","id":939047920,"node_id":"IC_kwDOACaFSM43-Lvw","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-08T18:49:32Z","updated_at":"2021-10-08T18:49:32Z","author_association":"CONTRIBUTOR","body":"I was trying to test this using external compactions but kept running into this error: #2311 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/939047920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/939064466","html_url":"https://github.com/apache/accumulo/issues/2311#issuecomment-939064466","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2311","id":939064466,"node_id":"IC_kwDOACaFSM43-PyS","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-08T19:19:38Z","updated_at":"2021-10-08T19:19:38Z","author_association":"MEMBER","body":"This happens when I try as well. Based on [this thread](https://github.com/apache/accumulo-testing/pull/149#discussion_r693142298) I think its because the other compaction services needed for external compactions are not started.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/939064466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/940136884","html_url":"https://github.com/apache/accumulo/pull/2297#issuecomment-940136884","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2297","id":940136884,"node_id":"IC_kwDOACaFSM44CVm0","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-11T15:35:00Z","updated_at":"2021-10-11T15:35:00Z","author_association":"MEMBER","body":"> @ctubbsii I was thinking more about our comments and was wondering what you think of renaming the classes in the Monitor that get turned into JSON? I noticed that we have a lot of classes in the monitor with generic names, like `Compactions` and `Scans`. These classes contain the variable names for the JSON and if we change will break the front end code. It doesn't make sense to call them `Impl` as we do in other places. What do you think about renaming these classes to something like `CompactionsJSON` or `ScansJSON` to help differentiate it from other back-end classes.\r\n\r\nJSON wouldn't make sense as part of the name. The objects can be returned as XML also. It's the responsibility of Jackson to decide the presentation format based on the HTTP request. I think the fact that these are data types in the `/rest/` package is sufficient to document the risk of breaking the REST endpoints.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/940136884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/940473826","html_url":"https://github.com/apache/accumulo/pull/2309#issuecomment-940473826","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2309","id":940473826,"node_id":"IC_kwDOACaFSM44Dn3i","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-11T22:02:33Z","updated_at":"2021-10-11T22:02:33Z","author_association":"CONTRIBUTOR","body":"> FYI the phrase \"sanity check\" currently gets flagged by the new Apache CLC - Conscious Language Checker tool https://clc.diversity.apache.org/\r\n\r\n@milleruntime I updated the wording for those comments in 72e49b97a31476860256fd2a4913140a77f549fc","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/940473826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/940969333","html_url":"https://github.com/apache/accumulo/pull/2297#issuecomment-940969333","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2297","id":940969333,"node_id":"IC_kwDOACaFSM44Fg11","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-12T12:32:36Z","updated_at":"2021-10-12T12:32:36Z","author_association":"CONTRIBUTOR","body":"> JSON wouldn't make sense as part of the name. The objects can be returned as XML also. It's the responsibility of Jackson to decide the presentation format based on the HTTP request. I think the fact that these are data types in the `/rest/` package is sufficient to document the risk of breaking the REST endpoints.\r\n\r\nGood point. I forgot about the XML.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/940969333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/940973680","html_url":"https://github.com/apache/accumulo/issues/2311#issuecomment-940973680","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2311","id":940973680,"node_id":"IC_kwDOACaFSM44Fh5w","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-12T12:38:30Z","updated_at":"2021-10-12T12:38:30Z","author_association":"CONTRIBUTOR","body":"> This happens when I try as well. Based on [this thread](https://github.com/apache/accumulo-testing/pull/149#discussion_r693142298) I think its because the other compaction services needed for external compactions are not started.\r\n\r\nAre you talking about the `compactor` and `compaction-coordinator`? Because I had both running (locally) and was getting this error.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/940973680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/940975338","html_url":"https://github.com/apache/accumulo/issues/2311#issuecomment-940975338","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2311","id":940975338,"node_id":"IC_kwDOACaFSM44FiTq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-12T12:40:48Z","updated_at":"2021-10-12T12:40:48Z","author_association":"CONTRIBUTOR","body":"The compaction service and its configuration are used in the tablet server. I'm not sure that the inability to reconfigure it and the use of external compaction processes are related. Has anyone tried to reconfigure it w/out using external compactions?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/940975338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941025797","html_url":"https://github.com/apache/accumulo/issues/2311#issuecomment-941025797","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2311","id":941025797,"node_id":"IC_kwDOACaFSM44FuoF","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-12T13:42:38Z","updated_at":"2021-10-12T13:42:38Z","author_association":"CONTRIBUTOR","body":"I changed the title of this ticket because on a restart it is unable to create the service. The illegal argument check, while seems important in the code, is not very helpful to a user. It doesn't give me any clue as to what is wrong. \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941025797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941047623","html_url":"https://github.com/apache/accumulo/issues/2311#issuecomment-941047623","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2311","id":941047623,"node_id":"IC_kwDOACaFSM44Fz9H","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-12T14:07:45Z","updated_at":"2021-10-12T14:07:45Z","author_association":"MEMBER","body":"> Has anyone tried to reconfigure it w/out using external compactions?\r\n\r\nJust double checked and it seems to be working fine.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941047623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941075839","html_url":"https://github.com/apache/accumulo/issues/2311#issuecomment-941075839","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2311","id":941075839,"node_id":"IC_kwDOACaFSM44F61_","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-12T14:39:32Z","updated_at":"2021-10-12T14:39:32Z","author_association":"CONTRIBUTOR","body":"@milleruntime I noticed in the config posted there are two external executors configured to go to the same external queue `MikeQ`.  That is an odd config, not sure if it will cause problems in the code or if would be problematic if we have checks for it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941075839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941106749","html_url":"https://github.com/apache/accumulo/issues/2311#issuecomment-941106749","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2311","id":941106749,"node_id":"IC_kwDOACaFSM44GCY9","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-12T15:13:04Z","updated_at":"2021-10-12T21:41:31Z","author_association":"CONTRIBUTOR","body":"> @milleruntime I noticed in the config posted there are two external executors configured to go to the same external queue `MikeQ`. That is an odd config, not sure if it will cause problems in the code or if would be problematic if we have checks for it.\r\n\r\nOh, interesting. If it does cause problems (which so far it looks like it does weird things) then we should definitely check and error when configured that way.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941106749/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941248522","html_url":"https://github.com/apache/accumulo/pull/2259#issuecomment-941248522","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2259","id":941248522,"node_id":"IC_kwDOACaFSM44GlAK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-12T18:06:32Z","updated_at":"2021-10-28T12:49:19Z","author_association":"CONTRIBUTOR","body":"Successful build with ITs","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941248522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941330690","html_url":"https://github.com/apache/accumulo/pull/2314#issuecomment-941330690","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2314","id":941330690,"node_id":"IC_kwDOACaFSM44G5EC","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-12T19:17:49Z","updated_at":"2021-10-12T19:17:49Z","author_association":"CONTRIBUTOR","body":"@ctubbsii This PR renames one of the KeywordExecutable classes. I don't _think_ it will break any scripts since it doesn't actually rename the command (just the internal class name) but could you take a look at it just to be sure?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941330690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941630472","html_url":"https://github.com/apache/accumulo/issues/2311#issuecomment-941630472","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2311","id":941630472,"node_id":"IC_kwDOACaFSM44ICQI","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-12T22:00:11Z","updated_at":"2021-10-12T22:00:11Z","author_association":"CONTRIBUTOR","body":"> Oh, interesting. If it does cause problems (which so far it looks like it does weird things) then we should definitely check and error when configured that way.\r\n\r\nI can look into this and see what the behavior is and if any additional validation of config is needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/941630472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/942547372","html_url":"https://github.com/apache/accumulo/pull/2305#issuecomment-942547372","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2305","id":942547372,"node_id":"IC_kwDOACaFSM44LiGs","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-13T17:24:16Z","updated_at":"2021-10-20T18:36:02Z","author_association":"CONTRIBUTOR","body":"Tested by doing the following:\r\n\r\n1. Started Telegraf, InfluxDB, and Grafana using the Docker image and instructions from https://github.com/artlov/docker-telegraf-influxdb-grafana. Specifically, I created directories `/tmp/metrics/influxdb` (mode 777) and `/tmp/metrics/grafana` to mount to the Docker container for persistence. Also, I had to supply a custom [telegraf.conf](https://github.com/dlmarion/accumulo-micrometer-stuff/blob/master/telegraf.conf) file, which is configured such that the StatsD input will parse the DataDog format. The container can then be started using the command:\r\n```\r\ndocker run --ulimit nofile=66000:66000 -d \\\r\n  --name tig-stack \\\r\n  -p 3003:3003 \\\r\n  -p 3004:8888 \\\r\n  -p 8086:8086 \\\r\n  -p 22022:22 \\\r\n  -p 8125:8125/udp \\\r\n  -v /tmp/metrics/influxdb:/var/lib/influxdb \\\r\n  -v /tmp/metrics/grafana:/var/lib/grafana \\\r\n  -v /path/to/telegraf/conf:/etc/telegraf \\\r\n  artlov/docker-telegraf-influxdb-grafana:latest\r\n```\r\n\r\n2. Next, I modified the Accumulo configuration before starting it. First, I added the following to `accumulo.properties`:\r\n```\r\ngeneral.micrometer.enabled=true\r\ngeneral.micrometer.jvm.metrics.enabled=true\r\ngeneral.micrometer.factory=org.apache.accumulo.test.metrics.TestStatsDRegistryFactory\r\n```\r\n\r\nThen, I added the following to the JAVA_OPTS variable in `accumulo-env.sh`:\r\n```\r\n  \"-Dtest.meter.registry.host=127.0.0.1\"\r\n  \"-Dtest.meter.registry.port=8125\"\r\n```\r\n\r\nFinally, I had to copy the jar containing the `TestStatsDRegistryFactory` (which is in the accumulo-test jar) and the Micrometer StatsD Registry jar into the lib directory:\r\n```\r\ncd lib\r\ncp /path/to/accumulo-test-2.1.0-SNAPSHOT.jar .\r\ncurl -L -o micrometer-registry-statsd-1.7.4.jar https://search.maven.org/remotecontent?filepath=io/micrometer/micrometer-registry-statsd/1.7.4/micrometer-registry-statsd-1.7.4.jar\r\n```\r\n\r\n3. Next I logged into Grafana and setup the data source using the instructions at https://github.com/artlov/docker-telegraf-influxdb-grafana#grafana. Then, I built a sample dashboard (see below). The dashboard can be imported into Grafana from JSON located at https://github.com/dlmarion/accumulo-micrometer-stuff/blob/master/Accumulo%20Micrometer%20Test%20Dashboard-1634310897243.json\r\n\r\n![image](https://user-images.githubusercontent.com/567911/137182550-edd5f24c-969b-4016-84ea-ffd0cb66338c.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/942547372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/942548279","html_url":"https://github.com/apache/accumulo/pull/2305#issuecomment-942548279","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2305","id":942548279,"node_id":"IC_kwDOACaFSM44LiU3","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-13T17:25:24Z","updated_at":"2021-10-13T17:25:24Z","author_association":"CONTRIBUTOR","body":"It looks like my changes in 3455fe6 have caused an issue in the monitor, the ingest and scan metrics are only increasing. I'll have to look at that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/942548279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/942564794","html_url":"https://github.com/apache/accumulo/pull/2315#issuecomment-942564794","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2315","id":942564794,"node_id":"IC_kwDOACaFSM44LmW6","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-13T17:45:41Z","updated_at":"2021-10-13T17:45:41Z","author_association":"CONTRIBUTOR","body":"This error message is getting rave reviews :grin: ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/942564794/reactions","total_count":2,"+1":0,"-1":0,"laugh":2,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/943498872","html_url":"https://github.com/apache/accumulo/pull/2305#issuecomment-943498872","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2305","id":943498872,"node_id":"IC_kwDOACaFSM44PKZ4","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-14T16:03:56Z","updated_at":"2021-10-14T16:03:56Z","author_association":"CONTRIBUTOR","body":"Now that the tservers are returning counts instead of rates, the information on the monitor pages does not look like it used to. Will need to modify the monitor to return rate information to the UI.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/943498872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/944259571","html_url":"https://github.com/apache/accumulo/pull/2303#issuecomment-944259571","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2303","id":944259571,"node_id":"IC_kwDOACaFSM44SEHz","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-15T12:31:06Z","updated_at":"2021-10-15T12:31:06Z","author_association":"CONTRIBUTOR","body":">  it may be nice to nest this functionality under the context object.\r\n\r\nI like this idea. I can definitely look into it as a follow on task.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/944259571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/944382632","html_url":"https://github.com/apache/accumulo/pull/2305#issuecomment-944382632","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2305","id":944382632,"node_id":"IC_kwDOACaFSM44SiKo","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-15T15:14:19Z","updated_at":"2021-10-15T15:14:19Z","author_association":"CONTRIBUTOR","body":"Accumulo Monitor\r\n\r\n![image](https://user-images.githubusercontent.com/567911/137511111-1526d266-1234-4b43-a5bc-c9f7c1926aa4.png)\r\n\r\nGrafana\r\n\r\n![image](https://user-images.githubusercontent.com/567911/137511220-07097ac6-d0cc-42a3-8852-bd890bad12cb.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/944382632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/944632014","html_url":"https://github.com/apache/accumulo/pull/2317#issuecomment-944632014","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2317","id":944632014,"node_id":"IC_kwDOACaFSM44TfDO","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-15T20:12:40Z","updated_at":"2021-10-15T20:12:40Z","author_association":"CONTRIBUTOR","body":"Draft PR for the Coordinator changes is https://github.com/apache/accumulo/pull/2318. Need to fixup some ITs and then I can take it out of draft state.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/944632014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/947034084","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-947034084","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":947034084,"node_id":"IC_kwDOACaFSM44cpfk","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-19T19:19:32Z","updated_at":"2021-10-19T19:19:32Z","author_association":"MEMBER","body":"I think this is ready to go.  @keith-turner do you want one more pass?  Thanks to everyone who has provided feedback.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/947034084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/947058508","html_url":"https://github.com/apache/accumulo/issues/1916#issuecomment-947058508","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1916","id":947058508,"node_id":"IC_kwDOACaFSM44cvdM","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-19T19:56:33Z","updated_at":"2021-10-19T19:56:33Z","author_association":"MEMBER","body":"I can't be sure what I found is exactly what @DomGarguilo experienced when running SuspendedTabletsIT but there are 2 different scenarios that have the same affect of removing candidates during Accumulo GC that are still in use\r\n\r\n1. https://github.com/apache/accumulo/issues/1377 where entire tables are missed while scanning for references and the consistency checks failed to notice.  PR is up for this at https://github.com/apache/accumulo/pull/2293 to add more consistency checks.\r\n2. https://github.com/apache/accumulo/issues/2322 where I think a hardware failure and admin process of not stopping services led to a TabletDeletedException that is assumed to be normal enough to not fail the current GC cycle.  I would like to change that and have the GC cycle bail out, but waiting for community input to that issue.\r\n\r\nUnsure if this issue needs to remain open or can be closed","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/947058508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/947332423","html_url":"https://github.com/apache/accumulo/issues/1916#issuecomment-947332423","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1916","id":947332423,"node_id":"IC_kwDOACaFSM44dyVH","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-20T05:07:35Z","updated_at":"2021-10-20T05:07:35Z","author_association":"MEMBER","body":"> Unsure if this issue needs to remain open or can be closed\r\n\r\nWe can close this, since we haven't seen it in awhile, and it is likely covered by the other issues you mentioned. We can always revisit if new evidence arrives that leads us to believe the work in those other issues is insufficient.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/947332423/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/947333012","html_url":"https://github.com/apache/accumulo/issues/2322#issuecomment-947333012","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2322","id":947333012,"node_id":"IC_kwDOACaFSM44dyeU","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-20T05:09:04Z","updated_at":"2021-10-20T05:09:04Z","author_association":"MEMBER","body":"> I would like to suggest that if a TabletDeletedException is thrown during the TabletIterator scan, we cancel the entire GC cycle and start again.\r\n\r\nThat seems reasonable to me. It's safer than proceeding.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/947333012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/947994092","html_url":"https://github.com/apache/accumulo/pull/2321#issuecomment-947994092","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2321","id":947994092,"node_id":"IC_kwDOACaFSM44gT3s","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-20T20:02:59Z","updated_at":"2021-10-20T20:02:59Z","author_association":"CONTRIBUTOR","body":"Still testing around for what to return. Things are seemingly in working order even when returning null. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/947994092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/948011832","html_url":"https://github.com/apache/accumulo/pull/2321#issuecomment-948011832","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2321","id":948011832,"node_id":"IC_kwDOACaFSM44gYM4","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-20T20:28:14Z","updated_at":"2021-10-20T20:28:14Z","author_association":"CONTRIBUTOR","body":"Another approach that seemed to work was to sleep inside HighlyAvailableServiceInvocationHandler until upgrades were finished.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/948011832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/948674909","html_url":"https://github.com/apache/accumulo/pull/2305#issuecomment-948674909","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2305","id":948674909,"node_id":"IC_kwDOACaFSM44i6Fd","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-21T14:28:37Z","updated_at":"2021-10-21T14:28:37Z","author_association":"CONTRIBUTOR","body":"@dlmarion I was able to replicate your setup successfully and see stats properly displayed on the grafana dashboard. I took a look at your changes as well and it looks good to me.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/948674909/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/948826438","html_url":"https://github.com/apache/accumulo/issues/1613#issuecomment-948826438","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1613","id":948826438,"node_id":"IC_kwDOACaFSM44jfFG","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-21T17:10:26Z","updated_at":"2021-10-21T17:10:26Z","author_association":"CONTRIBUTOR","body":"I think this is completed. The changes were merged into the next release branch on the website","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/948826438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/948841571","html_url":"https://github.com/apache/accumulo/issues/1659#issuecomment-948841571","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1659","id":948841571,"node_id":"IC_kwDOACaFSM44jixj","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-21T17:20:01Z","updated_at":"2021-10-21T17:20:01Z","author_association":"CONTRIBUTOR","body":"With the completion of the other tickets mentioned above, this is now completed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/948841571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/948871030","html_url":"https://github.com/apache/accumulo/pull/2305#issuecomment-948871030","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2305","id":948871030,"node_id":"IC_kwDOACaFSM44jp92","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-21T17:59:50Z","updated_at":"2021-10-21T17:59:50Z","author_association":"CONTRIBUTOR","body":"Thanks @DomGarguilo  :metal: ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/948871030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/948980087","html_url":"https://github.com/apache/accumulo/pull/1400#issuecomment-948980087","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1400","id":948980087,"node_id":"IC_kwDOACaFSM44kEl3","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-21T20:30:15Z","updated_at":"2021-10-21T20:30:15Z","author_association":"CONTRIBUTOR","body":"@ctubbsii @keith-turner before this change was made, there were many classes in the `org.apache.accumulo.core.client.lexicoder` package that extend `org.apache.accumulo.core.clientImpl.lexicoder.AbstractLexicoder`. I can't figure out why the apilyzer plugin didn't hit on the super of these classes being the AbstractLexicoder in the `clientImpl.lexicoder` package. Since the parent class is in a `clientImpl` package, I would think this would violate the API by exposing an internal type and get dinged by the plugin. Could this be a bug with the plugin? Any ideas?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/948980087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/949551997","html_url":"https://github.com/apache/accumulo/pull/2324#issuecomment-949551997","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2324","id":949551997,"node_id":"IC_kwDOACaFSM44mQN9","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T11:42:14Z","updated_at":"2021-10-22T11:42:14Z","author_association":"CONTRIBUTOR","body":"I did a first pass, I want to dig deeper in another pass.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/949551997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/949703088","html_url":"https://github.com/apache/accumulo/pull/2303#issuecomment-949703088","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2303","id":949703088,"node_id":"IC_kwDOACaFSM44m1Gw","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T14:50:50Z","updated_at":"2021-10-22T14:50:50Z","author_association":"CONTRIBUTOR","body":"I think I addressed all concerns. I am merging this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/949703088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/949787531","html_url":"https://github.com/apache/accumulo/issues/1617#issuecomment-949787531","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1617","id":949787531,"node_id":"IC_kwDOACaFSM44nJuL","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T16:32:11Z","updated_at":"2021-10-22T16:32:11Z","author_association":"CONTRIBUTOR","body":"I added information about the breakage and a recommendation here: https://github.com/apache/accumulo-website/pull/297","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/949787531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/949883388","html_url":"https://github.com/apache/accumulo/pull/2325#issuecomment-949883388","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2325","id":949883388,"node_id":"IC_kwDOACaFSM44nhH8","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T18:49:07Z","updated_at":"2021-10-22T18:49:07Z","author_association":"CONTRIBUTOR","body":"> Were we able to confirm that this actually breaks compatibility?\r\n\r\nThe only breakage I was able to reproduce was a \"cannot find symbol\" error since the class was moved. But this is easily fixed by changing the import. And this is with the import of the class from a \"clientImpl\" package.\r\n\r\nI am not convinced this needs to be reverted. I only opened this PR in reference to the Slack conversation and your findings in https://people.apache.org/~ctubbsii/compliance/2.0-2.1.html. \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/949883388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/950402161","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-950402161","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":950402161,"node_id":"IC_kwDOACaFSM44pfxx","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T21:59:35Z","updated_at":"2021-10-24T21:59:35Z","author_association":"MEMBER","body":"@ctubbsii you still want to review this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/950402161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951092749","html_url":"https://github.com/apache/accumulo/pull/2326#issuecomment-951092749","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2326","id":951092749,"node_id":"IC_kwDOACaFSM44sIYN","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T16:23:01Z","updated_at":"2021-10-25T16:23:01Z","author_association":"CONTRIBUTOR","body":"Adding @mjwall  as a reviewer as he is currently working in the garbage collector","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951092749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]