[{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675077276","html_url":"https://github.com/apache/pinot/pull/5872#issuecomment-675077276","issue_url":"https://api.github.com/repos/apache/pinot/issues/5872","id":675077276,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTA3NzI3Ng==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T19:48:38Z","updated_at":"2020-08-17T19:48:38Z","author_association":"MEMBER","body":"> I think we might need to create a new function for this, or the existing `distinctCount` queries will face inconsistent results and performance degradation.\r\n\r\nExisting behavior is very hard to explain, we can add a new function ''distinctCountHash' to bring back the previous behavior but I don't know why would someone use that vs distinctCountHLL ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675077276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675094486","html_url":"https://github.com/apache/pinot/issues/5704#issuecomment-675094486","issue_url":"https://api.github.com/repos/apache/pinot/issues/5704","id":675094486,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTA5NDQ4Ng==","user":{"login":"deemoliu","id":15416419,"node_id":"MDQ6VXNlcjE1NDE2NDE5","avatar_url":"https://avatars.githubusercontent.com/u/15416419?v=4","gravatar_id":"","url":"https://api.github.com/users/deemoliu","html_url":"https://github.com/deemoliu","followers_url":"https://api.github.com/users/deemoliu/followers","following_url":"https://api.github.com/users/deemoliu/following{/other_user}","gists_url":"https://api.github.com/users/deemoliu/gists{/gist_id}","starred_url":"https://api.github.com/users/deemoliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deemoliu/subscriptions","organizations_url":"https://api.github.com/users/deemoliu/orgs","repos_url":"https://api.github.com/users/deemoliu/repos","events_url":"https://api.github.com/users/deemoliu/events{/privacy}","received_events_url":"https://api.github.com/users/deemoliu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T20:23:35Z","updated_at":"2020-08-17T20:23:35Z","author_association":"CONTRIBUTOR","body":"Thanks a lot @Jackie-Jiang I will take a look and give it a try.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675094486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675115511","html_url":"https://github.com/apache/pinot/pull/5882#issuecomment-675115511","issue_url":"https://api.github.com/repos/apache/pinot/issues/5882","id":675115511,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTExNTUxMQ==","user":{"login":"jihaozh","id":36778437,"node_id":"MDQ6VXNlcjM2Nzc4NDM3","avatar_url":"https://avatars.githubusercontent.com/u/36778437?v=4","gravatar_id":"","url":"https://api.github.com/users/jihaozh","html_url":"https://github.com/jihaozh","followers_url":"https://api.github.com/users/jihaozh/followers","following_url":"https://api.github.com/users/jihaozh/following{/other_user}","gists_url":"https://api.github.com/users/jihaozh/gists{/gist_id}","starred_url":"https://api.github.com/users/jihaozh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihaozh/subscriptions","organizations_url":"https://api.github.com/users/jihaozh/orgs","repos_url":"https://api.github.com/users/jihaozh/repos","events_url":"https://api.github.com/users/jihaozh/events{/privacy}","received_events_url":"https://api.github.com/users/jihaozh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T21:06:18Z","updated_at":"2020-08-17T21:06:18Z","author_association":"MEMBER","body":"> Looks great! If someone is continuously adding new dimensions without enough data, is there any logic that makes sure the new dimensions are checked later? For example, are nestedMetrics ordered?\r\n\r\nyes. The k is ordered by the data volume during the monitoring window.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675115511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675120018","html_url":"https://github.com/apache/pinot/issues/5883#issuecomment-675120018","issue_url":"https://api.github.com/repos/apache/pinot/issues/5883","id":675120018,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTEyMDAxOA==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T21:16:27Z","updated_at":"2020-08-17T21:16:54Z","author_association":"MEMBER","body":"single jar vs multiple external jars is something that keeps coming up once in a while. The biggest challenge is dealing with various versions of executions framework (spark, hadoop), file systems (hdfs, s3,gcs,adsl) and data format (json, csv, parquet, avro, protobuf) etc.\r\n\r\nCreating one jar for each combination is not scalable. that's the reason we added the concept of plugins and allowed users to include only the plugin's needed.\r\n\r\nOne other alternative is to provide a standalone tool that takes plugin names as input and create a uber jar. WDYT?\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675120018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675122795","html_url":"https://github.com/apache/pinot/issues/5876#issuecomment-675122795","issue_url":"https://api.github.com/repos/apache/pinot/issues/5876","id":675122795,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTEyMjc5NQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T21:23:10Z","updated_at":"2020-08-17T21:23:10Z","author_association":"CONTRIBUTOR","body":"Thanks for bringing this up. We can try to start broker and server in parallel always.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675122795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675123366","html_url":"https://github.com/apache/pinot/issues/5876#issuecomment-675123366","issue_url":"https://api.github.com/repos/apache/pinot/issues/5876","id":675123366,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTEyMzM2Ng==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T21:24:32Z","updated_at":"2020-08-17T21:24:32Z","author_association":"CONTRIBUTOR","body":"Also, if the cluster is already present, then the services can be started simultaneously","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675123366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675123916","html_url":"https://github.com/apache/pinot/pull/5864#issuecomment-675123916","issue_url":"https://api.github.com/repos/apache/pinot/issues/5864","id":675123916,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTEyMzkxNg==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T21:25:51Z","updated_at":"2020-08-17T21:25:51Z","author_association":"CONTRIBUTOR","body":"> This doesn't explain why we saw the first 4 segments complete successfully. Afaik, there was no restart between testTable__0__3 and testTable__0__4\r\n\r\nI think the user had a restart for this.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675123916/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675124357","html_url":"https://github.com/apache/pinot/pull/5864#issuecomment-675124357","issue_url":"https://api.github.com/repos/apache/pinot/issues/5864","id":675124357,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTEyNDM1Nw==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T21:26:59Z","updated_at":"2020-08-17T21:26:59Z","author_association":"CONTRIBUTOR","body":"> I think the right fix is to not field any state transitions until the start() method has completed.\r\n> \r\n> We can have the state transition call wait on a semaphore?\r\n\r\nWe set ServerInstance::start as a addPreConnectCallback, then the ServerInstance will always start after helixManager connected.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675124357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675127615","html_url":"https://github.com/apache/pinot/issues/5859#issuecomment-675127615","issue_url":"https://api.github.com/repos/apache/pinot/issues/5859","id":675127615,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTEyNzYxNQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T21:35:28Z","updated_at":"2020-08-17T21:35:36Z","author_association":"CONTRIBUTOR","body":"In general we expect the inter-communications across zookeeper/controller/broker/server. \r\nFrom externally access, we had:\r\n- external requests to Controller for cluster/table ops\r\n- external queries go to Controller for query console access\r\n- external queries go to Broker for programatic access with pinot clients\r\n- We expect controller and server to talk to data upstreams(kafka)/deepstore(s3/hdfs) etc\r\n\r\nAlso if using presto connector, Presto requires full access to pinot controller/broker/server.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675127615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675145536","html_url":"https://github.com/apache/pinot/issues/5881#issuecomment-675145536","issue_url":"https://api.github.com/repos/apache/pinot/issues/5881","id":675145536,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTE0NTUzNg==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T22:25:33Z","updated_at":"2020-08-17T22:26:28Z","author_association":"CONTRIBUTOR","body":"Thanks for raising this issue.\r\nI've also got many users asking for this.\r\n\r\nIn general we need to change min/max function to handle all types instead of just numeric values.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675145536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675153354","html_url":"https://github.com/apache/pinot/issues/5884#issuecomment-675153354","issue_url":"https://api.github.com/repos/apache/pinot/issues/5884","id":675153354,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTE1MzM1NA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T22:50:55Z","updated_at":"2020-08-17T22:50:55Z","author_association":"CONTRIBUTOR","body":"@KKcorps @elonazoulay ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675153354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675158679","html_url":"https://github.com/apache/pinot/issues/5878#issuecomment-675158679","issue_url":"https://api.github.com/repos/apache/pinot/issues/5878","id":675158679,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTE1ODY3OQ==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T23:08:21Z","updated_at":"2020-08-17T23:08:21Z","author_association":"CONTRIBUTOR","body":"@lgo FYI, we are planning to force schema to be the same name as table (without type suffix) in the future. Are there specific reasons why you want to have different names for them?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675158679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675162520","html_url":"https://github.com/apache/pinot/issues/5878#issuecomment-675162520","issue_url":"https://api.github.com/repos/apache/pinot/issues/5878","id":675162520,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTE2MjUyMA==","user":{"login":"lgo","id":1161183,"node_id":"MDQ6VXNlcjExNjExODM=","avatar_url":"https://avatars.githubusercontent.com/u/1161183?v=4","gravatar_id":"","url":"https://api.github.com/users/lgo","html_url":"https://github.com/lgo","followers_url":"https://api.github.com/users/lgo/followers","following_url":"https://api.github.com/users/lgo/following{/other_user}","gists_url":"https://api.github.com/users/lgo/gists{/gist_id}","starred_url":"https://api.github.com/users/lgo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lgo/subscriptions","organizations_url":"https://api.github.com/users/lgo/orgs","repos_url":"https://api.github.com/users/lgo/repos","events_url":"https://api.github.com/users/lgo/events{/privacy}","received_events_url":"https://api.github.com/users/lgo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T23:20:47Z","updated_at":"2020-08-17T23:20:47Z","author_association":"CONTRIBUTOR","body":"Makes sense!\n\nWe haven’t been using for anything that matters.\n\nWhile experimenting with Pinot I’ve been setting up multiple tables with\ndifferent indexing configurations, and further duplicating those by using\nmultiple test datasets for any particular table. In practice, there’s no\nreason these shouldn’t be separate schemas / tables.\n\nOn Mon, Aug 17, 2020 at 16:08 Xiaotian (Jackie) Jiang <\nnotifications@github.com> wrote:\n\n>\n>\n> @lgo <https://github.com/lgo> FYI, we are planning to force schema to be\n> the same name as table (without type suffix) in the future. Are there\n> specific reasons why you want to have different names for them?\n>\n>\n>\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-pinot/issues/5878#issuecomment-675158679>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAI3PXYZWETHDZCLPBJQ3V3SBGZ7FANCNFSM4QBY7HTA>\n> .\n>\n>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675162520/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675166648","html_url":"https://github.com/apache/pinot/pull/5872#issuecomment-675166648","issue_url":"https://api.github.com/repos/apache/pinot/issues/5872","id":675166648,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTE2NjY0OA==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T23:34:18Z","updated_at":"2020-08-17T23:34:18Z","author_association":"CONTRIBUTOR","body":"@mayankshriv Can you please check the existing use cases on `distinctCount`? If the column is not STRING type, then the overhead should be minimal.\r\nFor the existing behavior, you may use `distinctCountBitmap` which is the enhanced version of the current `distinctCount` using the `RoaringBitmap`","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675166648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675269434","html_url":"https://github.com/apache/pinot/issues/5738#issuecomment-675269434","issue_url":"https://api.github.com/repos/apache/pinot/issues/5738","id":675269434,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTI2OTQzNA==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T05:55:52Z","updated_at":"2020-08-18T05:55:52Z","author_association":"CONTRIBUTOR","body":"Having support: #5889","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675269434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675274138","html_url":"https://github.com/apache/pinot/pull/5888#issuecomment-675274138","issue_url":"https://api.github.com/repos/apache/pinot/issues/5888","id":675274138,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTI3NDEzOA==","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T06:07:39Z","updated_at":"2020-08-18T06:07:39Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5888?src=pr&el=h1) Report\n> Merging [#5888](https://codecov.io/gh/apache/incubator-pinot/pull/5888?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a&el=desc) will **increase** coverage by `0.93%`.\n> The diff coverage is `74.68%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/5888/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/5888?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #5888      +/-   ##\n==========================================\n+ Coverage   66.44%   67.38%   +0.93%     \n==========================================\n  Files        1075     1181     +106     \n  Lines       54773    61590    +6817     \n  Branches     8168     9412    +1244     \n==========================================\n+ Hits        36396    41500    +5104     \n- Misses      15700    17044    +1344     \n- Partials     2677     3046     +369     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #integration | `44.07% <52.55%> (?)` | |\n| #unittests | `58.65% <60.74%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/5888?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/5888/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/5888/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/5888/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `53.33% <0.00%> (-3.81%)` | :arrow_down: |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/5888/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `44.44% <0.00%> (-4.40%)` | :arrow_down: |\n| [.../org/apache/pinot/client/ResultTableResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/5888/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFRhYmxlUmVzdWx0U2V0LmphdmE=) | `24.00% <0.00%> (-10.29%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/AbstractMetrics.java](https://codecov.io/gh/apache/incubator-pinot/pull/5888/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9BYnN0cmFjdE1ldHJpY3MuamF2YQ==) | `82.57% <ø> (+7.90%)` | :arrow_up: |\n| [...a/org/apache/pinot/common/metrics/BrokerGauge.java](https://codecov.io/gh/apache/incubator-pinot/pull/5888/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJHYXVnZS5qYXZh) | `91.66% <ø> (+1.66%)` | :arrow_up: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/incubator-pinot/pull/5888/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...mxReporterMetricsRegistryRegistrationListener.java](https://codecov.io/gh/apache/incubator-pinot/pull/5888/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9KbXhSZXBvcnRlck1ldHJpY3NSZWdpc3RyeVJlZ2lzdHJhdGlvbkxpc3RlbmVyLmphdmE=) | `100.00% <ø> (ø)` | |\n| [...org/apache/pinot/common/metrics/MetricsHelper.java](https://codecov.io/gh/apache/incubator-pinot/pull/5888/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NZXRyaWNzSGVscGVyLmphdmE=) | `50.60% <ø> (+1.85%)` | :arrow_up: |\n| ... and [846 more](https://codecov.io/gh/apache/incubator-pinot/pull/5888/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5888?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5888?src=pr&el=footer). Last update [87b5b77...dc62e69](https://codecov.io/gh/apache/incubator-pinot/pull/5888?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675274138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675407962","html_url":"https://github.com/apache/pinot/issues/5829#issuecomment-675407962","issue_url":"https://api.github.com/repos/apache/pinot/issues/5829","id":675407962,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTQwNzk2Mg==","user":{"login":"mr-agrwal","id":24796847,"node_id":"MDQ6VXNlcjI0Nzk2ODQ3","avatar_url":"https://avatars.githubusercontent.com/u/24796847?v=4","gravatar_id":"","url":"https://api.github.com/users/mr-agrwal","html_url":"https://github.com/mr-agrwal","followers_url":"https://api.github.com/users/mr-agrwal/followers","following_url":"https://api.github.com/users/mr-agrwal/following{/other_user}","gists_url":"https://api.github.com/users/mr-agrwal/gists{/gist_id}","starred_url":"https://api.github.com/users/mr-agrwal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mr-agrwal/subscriptions","organizations_url":"https://api.github.com/users/mr-agrwal/orgs","repos_url":"https://api.github.com/users/mr-agrwal/repos","events_url":"https://api.github.com/users/mr-agrwal/events{/privacy}","received_events_url":"https://api.github.com/users/mr-agrwal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T10:50:55Z","updated_at":"2020-08-18T10:50:55Z","author_association":"CONTRIBUTOR","body":"@kishoreg Closing this, as this is an issue with javascript parsing long values. This is further discussed in detail in https://www.techempower.com/blog/2016/07/05/mangling-json-numbers/","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675407962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675540235","html_url":"https://github.com/apache/pinot/pull/5868#issuecomment-675540235","issue_url":"https://api.github.com/repos/apache/pinot/issues/5868","id":675540235,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTU0MDIzNQ==","user":{"login":"cyrilou242","id":27781189,"node_id":"MDQ6VXNlcjI3NzgxMTg5","avatar_url":"https://avatars.githubusercontent.com/u/27781189?v=4","gravatar_id":"","url":"https://api.github.com/users/cyrilou242","html_url":"https://github.com/cyrilou242","followers_url":"https://api.github.com/users/cyrilou242/followers","following_url":"https://api.github.com/users/cyrilou242/following{/other_user}","gists_url":"https://api.github.com/users/cyrilou242/gists{/gist_id}","starred_url":"https://api.github.com/users/cyrilou242/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cyrilou242/subscriptions","organizations_url":"https://api.github.com/users/cyrilou242/orgs","repos_url":"https://api.github.com/users/cyrilou242/repos","events_url":"https://api.github.com/users/cyrilou242/events{/privacy}","received_events_url":"https://api.github.com/users/cyrilou242/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T15:14:16Z","updated_at":"2020-08-18T15:34:37Z","author_association":"CONTRIBUTOR","body":"Sadly BigQuery does not have a mock server.\r\nIt's possible to test on some public, free (up to 1Tb) databases.\r\n\r\n### Requirements:\r\nHaving a GCP project (named `test-project` below) with the BigQuery API activated. See \"Before you begin\" step here:  \r\nhttps://cloud.google.com/bigquery/docs/quickstarts/quickstart-command-line#before-you-begin\r\n\r\n### Prepare the config file\r\nCreate the relevant `data-sources-config.yml`:\r\n```yaml\r\ndataSourceConfigs:\r\n  - className: org.apache.pinot.thirdeye.datasource.sql.SqlThirdEyeDataSource\r\n    properties:\r\n      BigQuery:\r\n        - db:\r\n            test: jdbc:bigquery://https://www.googleapis.com/bigquery/v2;ProjectId=test-project;OAuthType=3;\r\n          driver: com.simba.googlebigquery.jdbc42.Driver\r\n```\r\nHere for this quickstart the authentication method used is the application default credentials. \r\nIf the cloud sdk was installed normally, it should authenticate as the user of the project without problems. The user must have the rights to create bigquery jobs.\r\nSee https://www.simba.com/products/BigQuery/doc/JDBC_InstallGuide/content/jdbc/bq/authenticating/appdefaultcred.htm\r\n\r\n### Launch thirdeye\r\n`./run-frontend.sh`\r\n\r\n### Create a metric using a public dataset:  \r\nQuerying the table on the following columns will amount for 52Kb of data at each query.  \r\nThe first 1Tb per month is free so it should be ok.  \r\nSee https://cloud.google.com/bigquery/public-data\r\n\r\nGo to http://localhost:1426/app/#/self-serve/import-sql-metric  and create the metric\r\n```\r\nTable name: `bigquery-public-data.google_analytics_sample.ga_sessions_20170701`  (keep the backticks) \r\nTimeColumn: visitStartTime\r\nTimezone: UTC\r\nTime Format: EPOCH\r\nTime granularity: 1  SECONDS\r\n\r\nDimension 0: device.browser\r\n\r\nMetrics 0: totals.pageviews\r\nAggregation Method: SUM\r\n```\r\n\r\n###  Test\r\nGo to root cause analysis and select your metric http://localhost:1426/app/#/rootcause\r\n\r\nLet me know if integration tests are mandatory and/or if I should add the public dataset example in the doc.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675540235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675619506","html_url":"https://github.com/apache/pinot/issues/5877#issuecomment-675619506","issue_url":"https://api.github.com/repos/apache/pinot/issues/5877","id":675619506,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTYxOTUwNg==","user":{"login":"lgo","id":1161183,"node_id":"MDQ6VXNlcjExNjExODM=","avatar_url":"https://avatars.githubusercontent.com/u/1161183?v=4","gravatar_id":"","url":"https://api.github.com/users/lgo","html_url":"https://github.com/lgo","followers_url":"https://api.github.com/users/lgo/followers","following_url":"https://api.github.com/users/lgo/following{/other_user}","gists_url":"https://api.github.com/users/lgo/gists{/gist_id}","starred_url":"https://api.github.com/users/lgo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lgo/subscriptions","organizations_url":"https://api.github.com/users/lgo/orgs","repos_url":"https://api.github.com/users/lgo/repos","events_url":"https://api.github.com/users/lgo/events{/privacy}","received_events_url":"https://api.github.com/users/lgo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T17:42:49Z","updated_at":"2020-08-18T17:42:49Z","author_association":"CONTRIBUTOR","body":"Saw your earlier comment re `segmentUriPrefix`. I just got it to work with the configuration:\r\n```\r\nsegmentUriPrefix: 's3://mybucket'\r\n```\r\n\r\nBut your PR for removing the need for these and the complexity of configuring S3 is fantastic!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675619506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675620062","html_url":"https://github.com/apache/pinot/pull/5892#issuecomment-675620062","issue_url":"https://api.github.com/repos/apache/pinot/issues/5892","id":675620062,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTYyMDA2Mg==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T17:44:03Z","updated_at":"2020-08-18T17:44:03Z","author_association":"MEMBER","body":"@npawar @KKcorps can you please review this PR and make sure if handles both pql and sql path and jdbc ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675620062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675644651","html_url":"https://github.com/apache/pinot/issues/5893#issuecomment-675644651","issue_url":"https://api.github.com/repos/apache/pinot/issues/5893","id":675644651,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTY0NDY1MQ==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T18:34:09Z","updated_at":"2020-08-18T18:34:09Z","author_association":"CONTRIBUTOR","body":"@mr-agrwal It might not be efficient to support star-tree on `SegmentPartitionedDistinctCount` because:\r\n- In order to generate star-tree, we need to generate the intermediate aggregated values for each dimension combinations. For `SegmentPartitionedDistinctCount`, that is a `Set`, which contains all the distinct values and has unbounded size.\r\n- Storing all these sets could cause memory issue during segment creation, and the segment size could be huge\r\n- At query time, deserializing these set could be slow, and we won't get much performance gain as we still need to process all these distinct values\r\n\r\nWe usually add star-tree support for functions that has limited-sized intermediate aggregated values (e.g. Double, HyperLogLog, TDigest, etc.). For distinct count family, we have star-tree support on `DistinctCountHLL` and `DistinctCountBitmap`.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675644651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675663209","html_url":"https://github.com/apache/pinot/pull/5888#issuecomment-675663209","issue_url":"https://api.github.com/repos/apache/pinot/issues/5888","id":675663209,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTY2MzIwOQ==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T19:14:14Z","updated_at":"2020-08-18T19:14:14Z","author_association":"CONTRIBUTOR","body":"@jackjlli @mcvsubbu This change breaks quick-start tests on JDK 11-14. Can you please revert it and fix it accordingly? Let's make sure all the tests passed before merging","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675663209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675664230","html_url":"https://github.com/apache/pinot/pull/5888#issuecomment-675664230","issue_url":"https://api.github.com/repos/apache/pinot/issues/5888","id":675664230,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTY2NDIzMA==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T19:16:42Z","updated_at":"2020-08-18T19:16:42Z","author_association":"CONTRIBUTOR","body":"Here is the stacktrace of the exception\r\n```\r\nFailed to start a [ CONTROLLER ] Service\r\njava.lang.NullPointerException: null\r\n\tat java.util.ArrayDeque.addLast(ArrayDeque.java:304) ~[?:?]\r\n\tat java.util.ArrayDeque.add(ArrayDeque.java:495) ~[?:?]\r\n\tat jdk.internal.loader.URLClassPath.<init>(URLClassPath.java:154) ~[?:?]\r\n\tat jdk.internal.loader.URLClassPath.<init>(URLClassPath.java:171) ~[?:?]\r\n\tat java.net.URLClassLoader.<init>(URLClassLoader.java:165) ~[?:?]\r\n\tat org.apache.pinot.controller.api.ControllerAdminApiApplication.setupSwagger(ControllerAdminApiApplication.java:160) ~[pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.controller.api.ControllerAdminApiApplication.start(ControllerAdminApiApplication.java:125) ~[pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.controller.ControllerStarter.setUpPinotController(ControllerStarter.java:416) ~[pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.controller.ControllerStarter.start(ControllerStarter.java:287) ~[pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.tools.service.PinotServiceManager.startController(PinotServiceManager.java:113) ~[pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.tools.service.PinotServiceManager.startRole(PinotServiceManager.java:90) ~[pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.tools.admin.command.StartServiceManagerCommand.startPinotService(StartServiceManagerCommand.java:200) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.tools.admin.command.StartServiceManagerCommand.startPinotService(StartServiceManagerCommand.java:195) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.tools.admin.command.StartServiceManagerCommand.execute(StartServiceManagerCommand.java:166) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.tools.admin.command.StartControllerCommand.execute(StartControllerCommand.java:130) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.tools.admin.command.QuickstartRunner.startControllers(QuickstartRunner.java:105) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.tools.admin.command.QuickstartRunner.startAll(QuickstartRunner.java:140) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.tools.Quickstart.execute(Quickstart.java:167) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n\tat org.apache.pinot.tools.Quickstart.main(Quickstart.java:222) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-31137f31c282c11ce70c935ffc6557dc76ec2f0e]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675664230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675674744","html_url":"https://github.com/apache/pinot/pull/5888#issuecomment-675674744","issue_url":"https://api.github.com/repos/apache/pinot/issues/5888","id":675674744,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTY3NDc0NA==","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T19:40:17Z","updated_at":"2020-08-18T19:40:17Z","author_association":"MEMBER","body":"Let me roll back this PR and will take a look at this","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675674744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675684093","html_url":"https://github.com/apache/pinot/pull/5890#issuecomment-675684093","issue_url":"https://api.github.com/repos/apache/pinot/issues/5890","id":675684093,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTY4NDA5Mw==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T20:01:39Z","updated_at":"2020-08-18T20:01:39Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675684093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675711593","html_url":"https://github.com/apache/pinot/pull/5895#issuecomment-675711593","issue_url":"https://api.github.com/repos/apache/pinot/issues/5895","id":675711593,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTcxMTU5Mw==","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T20:46:11Z","updated_at":"2020-08-18T20:46:11Z","author_association":"MEMBER","body":"Closing this PR since we have a fix PR for that:\r\nhttps://github.com/apache/incubator-pinot/pull/5896","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675711593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675781224","html_url":"https://github.com/apache/pinot/pull/5872#issuecomment-675781224","issue_url":"https://api.github.com/repos/apache/pinot/issues/5872","id":675781224,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTc4MTIyNA==","user":{"login":"mayankshriv","id":12615885,"node_id":"MDQ6VXNlcjEyNjE1ODg1","avatar_url":"https://avatars.githubusercontent.com/u/12615885?v=4","gravatar_id":"","url":"https://api.github.com/users/mayankshriv","html_url":"https://github.com/mayankshriv","followers_url":"https://api.github.com/users/mayankshriv/followers","following_url":"https://api.github.com/users/mayankshriv/following{/other_user}","gists_url":"https://api.github.com/users/mayankshriv/gists{/gist_id}","starred_url":"https://api.github.com/users/mayankshriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayankshriv/subscriptions","organizations_url":"https://api.github.com/users/mayankshriv/orgs","repos_url":"https://api.github.com/users/mayankshriv/repos","events_url":"https://api.github.com/users/mayankshriv/events{/privacy}","received_events_url":"https://api.github.com/users/mayankshriv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T00:18:37Z","updated_at":"2020-08-19T00:18:37Z","author_association":"CONTRIBUTOR","body":"> @mayankshriv Can you please check the existing use cases on `distinctCount`? If the column is not STRING type, then the overhead should be minimal.\r\n> For the existing behavior, you may use `distinctCountBitmap` which is the enhanced version of the current `distinctCount` using the `RoaringBitmap`\r\n\r\n@Jackie-Jiang We have thousands of tables at LinkedIn, so they will likely cover all kinds of distinctCount use cases. I don't quite follow your suggestion on us using `distinctCountBitmap`. Are you suggesting we ask our customers to migrate to the bitmap based implementation?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675781224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675798956","html_url":"https://github.com/apache/pinot/pull/5872#issuecomment-675798956","issue_url":"https://api.github.com/repos/apache/pinot/issues/5872","id":675798956,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTc5ODk1Ng==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T01:26:43Z","updated_at":"2020-08-19T01:26:43Z","author_association":"CONTRIBUTOR","body":"@mayankshriv Currently the `DistinctCount` is not having the expected behavior of returning the exact distinct count because it is storing the `hashCode()` of the values instead of the actual values, and will return less than accurate result when hash collision happens. We are fixing this unexpected behavior in this PR, but that has performance overhead.\r\n`DistinctCountBitmap` will have the same behavior as the current `DistinctCount` (storing hash of the values) and similar or better performance. In case there are performance-sensitive use cases with `DistinctCount`, you might consider using `DistinctCountBitmap` instead. For non-performance-sensitive use cases, nothing need to be changed as `DistinctCount` will return the exact distinct count, which is the expected behavior.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/675798956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676488023","html_url":"https://github.com/apache/pinot/pull/5868#issuecomment-676488023","issue_url":"https://api.github.com/repos/apache/pinot/issues/5868","id":676488023,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjQ4ODAyMw==","user":{"login":"cyrilou242","id":27781189,"node_id":"MDQ6VXNlcjI3NzgxMTg5","avatar_url":"https://avatars.githubusercontent.com/u/27781189?v=4","gravatar_id":"","url":"https://api.github.com/users/cyrilou242","html_url":"https://github.com/cyrilou242","followers_url":"https://api.github.com/users/cyrilou242/followers","following_url":"https://api.github.com/users/cyrilou242/following{/other_user}","gists_url":"https://api.github.com/users/cyrilou242/gists{/gist_id}","starred_url":"https://api.github.com/users/cyrilou242/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cyrilou242/subscriptions","organizations_url":"https://api.github.com/users/cyrilou242/orgs","repos_url":"https://api.github.com/users/cyrilou242/repos","events_url":"https://api.github.com/users/cyrilou242/events{/privacy}","received_events_url":"https://api.github.com/users/cyrilou242/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T15:13:46Z","updated_at":"2020-08-19T15:14:27Z","author_association":"CONTRIBUTOR","body":"Hello, I've added a change to make integration with google apis easier.\r\n\r\nA recent commit (https://github.com/apache/incubator-pinot/commit/0c4a6733c79782d193167a76d94efa6a206b7631) introduced an implicit dependency to \"google-http-client library\" < 1.28.0 due to the following import in RootCauseTemplateResource:\r\n` import com.google.api.client.repackaged.com.google.common.base.Strings;`\r\nhttps://github.com/apache/incubator-pinot/blob/master/thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/dashboard/resources/v2/RootCauseTemplateResource.java#L23\r\n\r\nThe Strings class is being used from guava repackaged in google-http-client library, instead of the expected one from com.google.guava.\r\n\r\nThis makes very difficult to introduce other google-related libraries that bring newer version of `com.google.api-client:google-api-client` : newer version of this library depend on version '1.28.0' of the 'google-http-client' library which does not repackage guava anymore.\r\n\r\nThis PR adds the `google-auth-library-oauth2-http` dependency (for profile bigquery only), which requires google-http-client:jar:1.28.0, so we get at build a NoClassDefFoundError when calling Strings.\r\n\r\nGiven that this Strings dependency is only used 2 times to check if some strings are empty, I replaced it by some vanilla java. \r\n\r\nThis proposition is inspired by the same problem described here: https://issues.apache.org/jira/browse/CAMEL-14292\r\n\r\nI also removed a useless exclusion rule in a sub-project pom file.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676488023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676569119","html_url":"https://github.com/apache/pinot/issues/5877#issuecomment-676569119","issue_url":"https://api.github.com/repos/apache/pinot/issues/5877","id":676569119,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjU2OTExOQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T17:46:57Z","updated_at":"2020-08-19T17:46:57Z","author_association":"CONTRIBUTOR","body":"I've updated the ingestion uri push job in: https://github.com/apache/incubator-pinot/pull/5897\r\n\r\nSo users don't need to set `segmentUriPrefix` for push jobs","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676569119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676597798","html_url":"https://github.com/apache/pinot/issues/4484#issuecomment-676597798","issue_url":"https://api.github.com/repos/apache/pinot/issues/4484","id":676597798,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjU5Nzc5OA==","user":{"login":"icefury71","id":728023,"node_id":"MDQ6VXNlcjcyODAyMw==","avatar_url":"https://avatars.githubusercontent.com/u/728023?v=4","gravatar_id":"","url":"https://api.github.com/users/icefury71","html_url":"https://github.com/icefury71","followers_url":"https://api.github.com/users/icefury71/followers","following_url":"https://api.github.com/users/icefury71/following{/other_user}","gists_url":"https://api.github.com/users/icefury71/gists{/gist_id}","starred_url":"https://api.github.com/users/icefury71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icefury71/subscriptions","organizations_url":"https://api.github.com/users/icefury71/orgs","repos_url":"https://api.github.com/users/icefury71/repos","events_url":"https://api.github.com/users/icefury71/events{/privacy}","received_events_url":"https://api.github.com/users/icefury71/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T18:47:35Z","updated_at":"2020-08-19T18:48:16Z","author_association":"CONTRIBUTOR","body":"Thanks for the comments Subbu and Ting. Based on what @mcvsubbu mentioned, I'm thinking of adding a failure detector capability in the Pinot broker so that it can proactively prune bad server replicas. Although this is not a complete solution as mentioned, its still very useful for graceful degradation (instead of query failures).\r\n\r\nHigh level thoughts on the design: Have a failure detector interface (implemented with different algorithms) that keeps track of all servers in the External View and reports which Pinot servers are healthy. This can then be used by the Broker to determine where to route the query. \r\n\r\nThere are many different algorithms for failure detection in distributed systems ranging from periodic pings to piggybacking on the server responses to determine health after the fact.\r\n\r\nI'll add a formal design document for more details. Please let me know if there are any concerns up front. (CC @mayankshriv @kishoreg @Jackie-Jiang for visibility)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676597798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676603896","html_url":"https://github.com/apache/pinot/issues/4484#issuecomment-676603896","issue_url":"https://api.github.com/repos/apache/pinot/issues/4484","id":676603896,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjYwMzg5Ng==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T19:00:45Z","updated_at":"2020-08-19T19:00:45Z","author_association":"MEMBER","body":"There was another issue recently where a host was unreachable and the entire query would fail.\r\n\r\nHigh-level design sounds good. With Jackie changes to computing routing tables dynamically, this should be possible. We currently use live instances to compute the routing table. we can change it to liveinstances - badInstances. And badInstances is computed in the background periodically/based on response","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676603896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676692376","html_url":"https://github.com/apache/pinot/issues/5900#issuecomment-676692376","issue_url":"https://api.github.com/repos/apache/pinot/issues/5900","id":676692376,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjY5MjM3Ng==","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T20:52:30Z","updated_at":"2020-08-19T20:52:30Z","author_association":"CONTRIBUTOR","body":"Column name in ingestionCOnfigs should match the column name in the schema. Schema will contain the final names of the columns, post the transformation.\r\nIn your example above, the schema should have\r\n```\r\n{\r\n      \"name\": \"id_transform\",\r\n      \"dataType\": \"STRING\"\r\n    }\r\n```\r\nin the dimensionFieldSpecs, instead of `id`","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676692376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676757756","html_url":"https://github.com/apache/pinot/pull/5875#issuecomment-676757756","issue_url":"https://api.github.com/repos/apache/pinot/issues/5875","id":676757756,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Njc1Nzc1Ng==","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T22:16:33Z","updated_at":"2020-08-19T22:16:33Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5875?src=pr&el=h1) Report\n> Merging [#5875](https://codecov.io/gh/apache/incubator-pinot/pull/5875?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a&el=desc) will **decrease** coverage by `22.76%`.\n> The diff coverage is `52.69%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/5875/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/5875?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #5875       +/-   ##\n===========================================\n- Coverage   66.44%   43.68%   -22.77%     \n===========================================\n  Files        1075     1182      +107     \n  Lines       54773    61672     +6899     \n  Branches     8168     9427     +1259     \n===========================================\n- Hits        36396    26941     -9455     \n- Misses      15700    32308    +16608     \n+ Partials     2677     2423      -254     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #integration | `43.68% <52.69%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/5875?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/5875/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/5875/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/5875/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `26.66% <0.00%> (-30.48%)` | :arrow_down: |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/5875/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `22.22% <0.00%> (-26.62%)` | :arrow_down: |\n| [.../org/apache/pinot/client/ResultTableResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/5875/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFRhYmxlUmVzdWx0U2V0LmphdmE=) | `24.00% <0.00%> (-10.29%)` | :arrow_down: |\n| [.../org/apache/pinot/common/lineage/LineageEntry.java](https://codecov.io/gh/apache/incubator-pinot/pull/5875/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9MaW5lYWdlRW50cnkuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/pinot/common/lineage/LineageEntryState.java](https://codecov.io/gh/apache/incubator-pinot/pull/5875/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9MaW5lYWdlRW50cnlTdGF0ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...rg/apache/pinot/common/lineage/SegmentLineage.java](https://codecov.io/gh/apache/incubator-pinot/pull/5875/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9TZWdtZW50TGluZWFnZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/common/lineage/SegmentLineageUtils.java](https://codecov.io/gh/apache/incubator-pinot/pull/5875/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9TZWdtZW50TGluZWFnZVV0aWxzLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ot/common/messages/RoutingTableRebuildMessage.java](https://codecov.io/gh/apache/incubator-pinot/pull/5875/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvUm91dGluZ1RhYmxlUmVidWlsZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| ... and [1097 more](https://codecov.io/gh/apache/incubator-pinot/pull/5875/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5875?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5875?src=pr&el=footer). Last update [2b58bfb...70960d9](https://codecov.io/gh/apache/incubator-pinot/pull/5875?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676757756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676836660","html_url":"https://github.com/apache/pinot/issues/4484#issuecomment-676836660","issue_url":"https://api.github.com/repos/apache/pinot/issues/4484","id":676836660,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjgzNjY2MA==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T01:03:54Z","updated_at":"2020-08-20T01:03:54Z","author_association":"CONTRIBUTOR","body":"Helix provides us a view of \"good \" vs \"bad\" instances. IMO if we are adding algorithms on the broker, it should be based on response time of servers. If a server is responding slowly (relative to other servers for the same table), send it fewer  queries if possible.\r\n\r\nThe routing tables can be  updated whenever we detect \"slow\" servers. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676836660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676999527","html_url":"https://github.com/apache/pinot/pull/5872#issuecomment-676999527","issue_url":"https://api.github.com/repos/apache/pinot/issues/5872","id":676999527,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Njk5OTUyNw==","user":{"login":"mayankshriv","id":12615885,"node_id":"MDQ6VXNlcjEyNjE1ODg1","avatar_url":"https://avatars.githubusercontent.com/u/12615885?v=4","gravatar_id":"","url":"https://api.github.com/users/mayankshriv","html_url":"https://github.com/mayankshriv","followers_url":"https://api.github.com/users/mayankshriv/followers","following_url":"https://api.github.com/users/mayankshriv/following{/other_user}","gists_url":"https://api.github.com/users/mayankshriv/gists{/gist_id}","starred_url":"https://api.github.com/users/mayankshriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayankshriv/subscriptions","organizations_url":"https://api.github.com/users/mayankshriv/orgs","repos_url":"https://api.github.com/users/mayankshriv/repos","events_url":"https://api.github.com/users/mayankshriv/events{/privacy}","received_events_url":"https://api.github.com/users/mayankshriv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T04:08:50Z","updated_at":"2020-08-20T04:08:50Z","author_association":"CONTRIBUTOR","body":"> @mayankshriv Currently the `DistinctCount` is not having the expected behavior of returning the exact distinct count because it is storing the `hashCode()` of the values instead of the actual values, and will return less than accurate result when hash collision happens. We are fixing this unexpected behavior in this PR, but that has performance overhead.\r\n> `DistinctCountBitmap` will have the same behavior as the current `DistinctCount` (storing hash of the values) and similar or better performance. In case there are performance-sensitive use cases with `DistinctCount`, you might consider using `DistinctCountBitmap` instead. For non-performance-sensitive use cases, nothing need to be changed as `DistinctCount` will return the exact distinct count, which is the expected behavior.\r\n\r\n\r\n@Jackie-Jiang I completely agree that this is a good change for the functionality. I am just apprehensive that it can potentially have negative impact on performance, deployment (different versions of broker/server).\r\n\r\nIt is not just latency performance, there's memory impact as well, right? There are likely various use cases that call `distinctCount` on string columns (in fact, that is the most common use case). Given that we are going to use String hashSets instead of Int hashSets, there's a memory penalty as well. This can be amplified for multi-tenant cases where a single distinct query on a string column can put memory pressure and adversely impact all tables on the node.\r\n\r\nFor a large deployment, it is not practical to identify all use cases which may get impacted, manually evaluate the impact for each one of them, and ask the clients to move to the bit-map based aggregation function. For this reason, I was proposing to either have this as a new aggregation function, or provide a runtime way of disabling the new behavior in case issues happen in production.\r\n\r\nAt the same time, I am fine to have this PR merged (as I fundamentally agree with the functional side of the change). However, I do want to call out that large deployments might likely need to invest in manually validating this PR for the various use cases they may have.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/676999527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677030837","html_url":"https://github.com/apache/pinot/pull/5873#issuecomment-677030837","issue_url":"https://api.github.com/repos/apache/pinot/issues/5873","id":677030837,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzAzMDgzNw==","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T04:30:17Z","updated_at":"2020-08-20T04:30:17Z","author_association":"MEMBER","body":"> Most of these are already tracked in transformers. Invalid columns etc\r\n\r\nCorrect, but it's encapsulated in RecordRecorder and it will dirty the `RecordRecorder` interface if such statistics require more method in the interface. Added a class called `SchemaValidator` to track this.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677030837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677262648","html_url":"https://github.com/apache/pinot/pull/5892#issuecomment-677262648","issue_url":"https://api.github.com/repos/apache/pinot/issues/5892","id":677262648,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzI2MjY0OA==","user":{"login":"buchireddy","id":945283,"node_id":"MDQ6VXNlcjk0NTI4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/945283?v=4","gravatar_id":"","url":"https://api.github.com/users/buchireddy","html_url":"https://github.com/buchireddy","followers_url":"https://api.github.com/users/buchireddy/followers","following_url":"https://api.github.com/users/buchireddy/following{/other_user}","gists_url":"https://api.github.com/users/buchireddy/gists{/gist_id}","starred_url":"https://api.github.com/users/buchireddy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/buchireddy/subscriptions","organizations_url":"https://api.github.com/users/buchireddy/orgs","repos_url":"https://api.github.com/users/buchireddy/repos","events_url":"https://api.github.com/users/buchireddy/events{/privacy}","received_events_url":"https://api.github.com/users/buchireddy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T06:19:02Z","updated_at":"2020-08-20T17:13:06Z","author_association":"CONTRIBUTOR","body":"> @npawar @KKcorps can you please review this PR and make sure if handles both pql and sql path and jdbc\r\n\r\nAlthough I'm not fully convinced if putting stats in the ResultSet is good design, it's probably fine. I've fixed as per this suggestion. Please take a look.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677262648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677743083","html_url":"https://github.com/apache/pinot/pull/5872#issuecomment-677743083","issue_url":"https://api.github.com/repos/apache/pinot/issues/5872","id":677743083,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Nzc0MzA4Mw==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T15:41:51Z","updated_at":"2020-08-20T15:41:51Z","author_association":"CONTRIBUTOR","body":"> > @mayankshriv Currently the `DistinctCount` is not having the expected behavior of returning the exact distinct count because it is storing the `hashCode()` of the values instead of the actual values, and will return less than accurate result when hash collision happens. We are fixing this unexpected behavior in this PR, but that has performance overhead.\r\n> > `DistinctCountBitmap` will have the same behavior as the current `DistinctCount` (storing hash of the values) and similar or better performance. In case there are performance-sensitive use cases with `DistinctCount`, you might consider using `DistinctCountBitmap` instead. For non-performance-sensitive use cases, nothing need to be changed as `DistinctCount` will return the exact distinct count, which is the expected behavior.\r\n> \r\n> @Jackie-Jiang I completely agree that this is a good change for the functionality. I am just apprehensive that it can potentially have negative impact on performance, deployment (different versions of broker/server).\r\n> \r\n> It is not just latency performance, there's memory impact as well, right? There are likely various use cases that call `distinctCount` on string columns (in fact, that is the most common use case). Given that we are going to use String hashSets instead of Int hashSets, there's a memory penalty as well. This can be amplified for multi-tenant cases where a single distinct query on a string column can put memory pressure and adversely impact all tables on the node.\r\n> \r\n> For a large deployment, it is not practical to identify all use cases which may get impacted, manually evaluate the impact for each one of them, and ask the clients to move to the bit-map based aggregation function. For this reason, I was proposing to either have this as a new aggregation function, or provide a runtime way of disabling the new behavior in case issues happen in production.\r\n> \r\n> At the same time, I am fine to have this PR merged (as I fundamentally agree with the functional side of the change). However, I do want to call out that large deployments might likely need to invest in manually validating this PR for the various use cases they may have.\r\n\r\n+1 on this. Site facing use cases breaking after deployment is not something to look forward to.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677743083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677771872","html_url":"https://github.com/apache/pinot/pull/5902#issuecomment-677771872","issue_url":"https://api.github.com/repos/apache/pinot/issues/5902","id":677771872,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Nzc3MTg3Mg==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T16:34:41Z","updated_at":"2020-08-20T16:34:41Z","author_association":"CONTRIBUTOR","body":"Doesnt this PR provide a way to update an instance record? Do we need a separate one to update tags? https://github.com/apache/incubator-pinot/pull/4952","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677771872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677789176","html_url":"https://github.com/apache/pinot/pull/5902#issuecomment-677789176","issue_url":"https://api.github.com/repos/apache/pinot/issues/5902","id":677789176,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Nzc4OTE3Ng==","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T17:08:49Z","updated_at":"2020-08-20T17:08:49Z","author_association":"CONTRIBUTOR","body":"> Doesnt this PR provide a way to update an instance record? Do we need a separate one to update tags? #4952\r\n\r\nWe're seeing many instances of users getting into erroneous states when using that API. Reasons being:\r\n1. The template asks for too many things, which the users should not have to provide again. Asking for \"host\", \"port\", \"instanceType\" is redundant when the instance id like \"Server_hostname_port\" is already provided as PathParam.\r\n2. Breaking up the \"Server_hostname_port\" correctly and setting the right parts in host, port is confusing users, and leading to irrecoverable error states. (e.g. someone put  \"Server_hostname_port\" in host, someone put just \"Server_hostname\", whereas we need only \"hostname\".\r\n3. There is inconsistency between the output of the GET API and the expected input of PUT/POST API. As a result, if someone takes the output of GET and uses it to update/add, again error state. I don't know how or when that inconsistency happened, but now due to backward incompatibility reasons, we cannot change either API.\r\n\r\nWe can certainly deprecate the old APIs and introduce new APIs (as v2) to make it all consistent. But that would only solve 3. For a user who's just trying to update tags, having a simple API would help a lot. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677789176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677831512","html_url":"https://github.com/apache/pinot/pull/5872#issuecomment-677831512","issue_url":"https://api.github.com/repos/apache/pinot/issues/5872","id":677831512,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzgzMTUxMg==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T18:38:13Z","updated_at":"2020-08-20T18:38:35Z","author_association":"CONTRIBUTOR","body":"@mayankshriv @mcvsubbu Added a new boolean Helix cluster config `enable.distinct.count.bitmap.override` to auto-rewrite `DistinctCount` to `DistinctCountBitmap` on broker. If the cluster runs into performance issue because of the new `DistinctCount` behavior, this flag is able to switch to `DistinctCountBitmap` without restarting the machines.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677831512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677959184","html_url":"https://github.com/apache/pinot/pull/5903#issuecomment-677959184","issue_url":"https://api.github.com/repos/apache/pinot/issues/5903","id":677959184,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Nzk1OTE4NA==","user":{"login":"jihaozh","id":36778437,"node_id":"MDQ6VXNlcjM2Nzc4NDM3","avatar_url":"https://avatars.githubusercontent.com/u/36778437?v=4","gravatar_id":"","url":"https://api.github.com/users/jihaozh","html_url":"https://github.com/jihaozh","followers_url":"https://api.github.com/users/jihaozh/followers","following_url":"https://api.github.com/users/jihaozh/following{/other_user}","gists_url":"https://api.github.com/users/jihaozh/gists{/gist_id}","starred_url":"https://api.github.com/users/jihaozh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihaozh/subscriptions","organizations_url":"https://api.github.com/users/jihaozh/orgs","repos_url":"https://api.github.com/users/jihaozh/repos","events_url":"https://api.github.com/users/jihaozh/events{/privacy}","received_events_url":"https://api.github.com/users/jihaozh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T23:41:53Z","updated_at":"2020-08-20T23:41:53Z","author_association":"MEMBER","body":"> Do you think that we should rename `findByIdList` to `findByIds`? I don't think that there is any usage of `findByIdList`\r\n\r\nremoved the legacy `findByIdList` method.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/677959184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/678627276","html_url":"https://github.com/apache/pinot/issues/5804#issuecomment-678627276","issue_url":"https://api.github.com/repos/apache/pinot/issues/5804","id":678627276,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODYyNzI3Ng==","user":{"login":"renato2099","id":1325916,"node_id":"MDQ6VXNlcjEzMjU5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/1325916?v=4","gravatar_id":"","url":"https://api.github.com/users/renato2099","html_url":"https://github.com/renato2099","followers_url":"https://api.github.com/users/renato2099/followers","following_url":"https://api.github.com/users/renato2099/following{/other_user}","gists_url":"https://api.github.com/users/renato2099/gists{/gist_id}","starred_url":"https://api.github.com/users/renato2099/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renato2099/subscriptions","organizations_url":"https://api.github.com/users/renato2099/orgs","repos_url":"https://api.github.com/users/renato2099/repos","events_url":"https://api.github.com/users/renato2099/events{/privacy}","received_events_url":"https://api.github.com/users/renato2099/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-22T11:08:15Z","updated_at":"2020-08-22T11:08:15Z","author_association":"CONTRIBUTOR","body":"hey @kishoreg  I took a first stab at this in this PR https://github.com/apache/incubator-pinot/pull/5910\r\nlet me know what you think 👍 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/678627276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/678741190","html_url":"https://github.com/apache/pinot/pull/5911#issuecomment-678741190","issue_url":"https://api.github.com/repos/apache/pinot/issues/5911","id":678741190,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODc0MTE5MA==","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-23T07:39:27Z","updated_at":"2020-08-23T07:39:27Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5911?src=pr&el=h1) Report\n> Merging [#5911](https://codecov.io/gh/apache/incubator-pinot/pull/5911?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) will **increase** coverage by `0.81%`.\n> The diff coverage is `68.95%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/5911/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/5911?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #5911      +/-   ##\n==========================================\n+ Coverage   66.44%   67.26%   +0.81%     \n==========================================\n  Files        1075     1184     +109     \n  Lines       54773    62044    +7271     \n  Branches     8168     9479    +1311     \n==========================================\n+ Hits        36396    41735    +5339     \n- Misses      15700    17228    +1528     \n- Partials     2677     3081     +404     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #integration | `43.95% <48.81%> (?)` | |\n| #unittests | `58.66% <56.27%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/5911?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/5911/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/5911/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/5911/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `53.33% <0.00%> (-3.81%)` | :arrow_down: |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/5911/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `44.44% <0.00%> (-4.40%)` | :arrow_down: |\n| [.../org/apache/pinot/client/ResultTableResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/5911/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFRhYmxlUmVzdWx0U2V0LmphdmE=) | `24.00% <0.00%> (-10.29%)` | :arrow_down: |\n| [...ot/common/messages/RoutingTableRebuildMessage.java](https://codecov.io/gh/apache/incubator-pinot/pull/5911/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvUm91dGluZ1RhYmxlUmVidWlsZE1lc3NhZ2UuamF2YQ==) | `54.54% <ø> (ø)` | |\n| [...ache/pinot/common/metadata/ZKMetadataProvider.java](https://codecov.io/gh/apache/incubator-pinot/pull/5911/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0YWRhdGEvWktNZXRhZGF0YVByb3ZpZGVyLmphdmE=) | `72.22% <ø> (+5.36%)` | :arrow_up: |\n| [...metadata/segment/LLCRealtimeSegmentZKMetadata.java](https://codecov.io/gh/apache/incubator-pinot/pull/5911/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0YWRhdGEvc2VnbWVudC9MTENSZWFsdGltZVNlZ21lbnRaS01ldGFkYXRhLmphdmE=) | `47.61% <ø> (+3.35%)` | :arrow_up: |\n| [...g/apache/pinot/common/metrics/AbstractMetrics.java](https://codecov.io/gh/apache/incubator-pinot/pull/5911/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9BYnN0cmFjdE1ldHJpY3MuamF2YQ==) | `82.57% <ø> (+7.90%)` | :arrow_up: |\n| [...a/org/apache/pinot/common/metrics/BrokerGauge.java](https://codecov.io/gh/apache/incubator-pinot/pull/5911/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJHYXVnZS5qYXZh) | `91.66% <ø> (+1.66%)` | :arrow_up: |\n| ... and [852 more](https://codecov.io/gh/apache/incubator-pinot/pull/5911/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5911?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5911?src=pr&el=footer). Last update [331b874...21f2542](https://codecov.io/gh/apache/incubator-pinot/pull/5911?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/678741190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679273942","html_url":"https://github.com/apache/pinot/pull/5910#issuecomment-679273942","issue_url":"https://api.github.com/repos/apache/pinot/issues/5910","id":679273942,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTI3Mzk0Mg==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-24T17:50:18Z","updated_at":"2020-08-24T17:50:18Z","author_association":"CONTRIBUTOR","body":"It is better to log the bad file name in the `CreateSegmentCommand.java` under the catch of line 251, where bad files of all types can be logged","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679273942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679276523","html_url":"https://github.com/apache/pinot/issues/5907#issuecomment-679276523","issue_url":"https://api.github.com/repos/apache/pinot/issues/5907","id":679276523,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTI3NjUyMw==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-24T17:55:56Z","updated_at":"2020-08-24T17:55:56Z","author_association":"CONTRIBUTOR","body":"@buchireddy Thanks for reporting the issue. Could you please share more stats of the query? How many documents does this query scan? How many distinct values does it have?\r\nThe performance of these 3 queries should be: `DISTINCTCOUNTHLL` > `DISTINCTCOUNT` > Group-by, unless only partial groups are returned.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679276523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679329635","html_url":"https://github.com/apache/pinot/issues/5907#issuecomment-679329635","issue_url":"https://api.github.com/repos/apache/pinot/issues/5907","id":679329635,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTMyOTYzNQ==","user":{"login":"buchireddy","id":945283,"node_id":"MDQ6VXNlcjk0NTI4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/945283?v=4","gravatar_id":"","url":"https://api.github.com/users/buchireddy","html_url":"https://github.com/buchireddy","followers_url":"https://api.github.com/users/buchireddy/followers","following_url":"https://api.github.com/users/buchireddy/following{/other_user}","gists_url":"https://api.github.com/users/buchireddy/gists{/gist_id}","starred_url":"https://api.github.com/users/buchireddy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/buchireddy/subscriptions","organizations_url":"https://api.github.com/users/buchireddy/orgs","repos_url":"https://api.github.com/users/buchireddy/repos","events_url":"https://api.github.com/users/buchireddy/events{/privacy}","received_events_url":"https://api.github.com/users/buchireddy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-24T19:47:09Z","updated_at":"2020-08-24T19:47:09Z","author_association":"CONTRIBUTOR","body":"> @buchireddy Thanks for reporting the issue. Could you please share more stats of the query? How many documents does this query scan? How many distinct values does it have?\r\n> The performance of these 3 queries should be: `DISTINCTCOUNTHLL` > `DISTINCTCOUNT` > Group-by, unless only partial groups are returned.\r\n\r\n```json\r\n{\r\n    \"resultTable\": {\r\n        \"dataSchema\": {\r\n            \"columnDataTypes\": [\"INT\"],\r\n            \"columnNames\": [\"distinctcount(service_id)\"]\r\n        },\r\n        \"rows\": [\r\n            [2]\r\n        ]\r\n    },\r\n    \"exceptions\": [],\r\n    \"numServersQueried\": 4,\r\n    \"numServersResponded\": 4,\r\n    \"numSegmentsQueried\": 180,\r\n    \"numSegmentsProcessed\": 180,\r\n    \"numSegmentsMatched\": 179,\r\n    \"numConsumingSegmentsQueried\": 8,\r\n    \"numDocsScanned\": 127901110,\r\n    \"numEntriesScannedInFilter\": 131526370,\r\n    \"numEntriesScannedPostFilter\": 127901110,\r\n    \"numGroupsLimitReached\": false,\r\n    \"totalDocs\": 128941076,\r\n    \"timeUsedMs\": 3339,\r\n    \"segmentStatistics\": [],\r\n    \"traceInfo\": {},\r\n    \"minConsumingFreshnessTimeMs\": 1597961648907\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679329635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679342862","html_url":"https://github.com/apache/pinot/issues/5907#issuecomment-679342862","issue_url":"https://api.github.com/repos/apache/pinot/issues/5907","id":679342862,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTM0Mjg2Mg==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-24T20:15:43Z","updated_at":"2020-08-24T20:15:43Z","author_association":"MEMBER","body":"@Jackie-Jiang 500ms (group by) vs 3-6sec (distinct) is a big difference when there are only 2 distinct values","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679342862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679343326","html_url":"https://github.com/apache/pinot/issues/5907#issuecomment-679343326","issue_url":"https://api.github.com/repos/apache/pinot/issues/5907","id":679343326,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTM0MzMyNg==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-24T20:16:45Z","updated_at":"2020-08-24T20:16:45Z","author_association":"MEMBER","body":"one reason might be that group by was using dictionary whereas distinct is not. I think you have fixed this in the recent version.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679343326/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679415847","html_url":"https://github.com/apache/pinot/pull/5914#issuecomment-679415847","issue_url":"https://api.github.com/repos/apache/pinot/issues/5914","id":679415847,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTQxNTg0Nw==","user":{"login":"suvodeep-pyne","id":2577714,"node_id":"MDQ6VXNlcjI1Nzc3MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2577714?v=4","gravatar_id":"","url":"https://api.github.com/users/suvodeep-pyne","html_url":"https://github.com/suvodeep-pyne","followers_url":"https://api.github.com/users/suvodeep-pyne/followers","following_url":"https://api.github.com/users/suvodeep-pyne/following{/other_user}","gists_url":"https://api.github.com/users/suvodeep-pyne/gists{/gist_id}","starred_url":"https://api.github.com/users/suvodeep-pyne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suvodeep-pyne/subscriptions","organizations_url":"https://api.github.com/users/suvodeep-pyne/orgs","repos_url":"https://api.github.com/users/suvodeep-pyne/repos","events_url":"https://api.github.com/users/suvodeep-pyne/events{/privacy}","received_events_url":"https://api.github.com/users/suvodeep-pyne/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-24T23:26:49Z","updated_at":"2020-08-24T23:26:49Z","author_association":"CONTRIBUTOR","body":"Thanks @apucher !","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679415847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679440358","html_url":"https://github.com/apache/pinot/issues/5907#issuecomment-679440358","issue_url":"https://api.github.com/repos/apache/pinot/issues/5907","id":679440358,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTQ0MDM1OA==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T00:56:55Z","updated_at":"2020-08-25T00:56:55Z","author_association":"CONTRIBUTOR","body":"@kishoreg Good point, especially when the column is `STRING`.\r\n@buchireddy There is an optimization on `DISTINCTCOUNT` recently, which should make it always faster than the group-by. You might want to try it using the current master ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679440358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679482712","html_url":"https://github.com/apache/pinot/issues/5907#issuecomment-679482712","issue_url":"https://api.github.com/repos/apache/pinot/issues/5907","id":679482712,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTQ4MjcxMg==","user":{"login":"buchireddy","id":945283,"node_id":"MDQ6VXNlcjk0NTI4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/945283?v=4","gravatar_id":"","url":"https://api.github.com/users/buchireddy","html_url":"https://github.com/buchireddy","followers_url":"https://api.github.com/users/buchireddy/followers","following_url":"https://api.github.com/users/buchireddy/following{/other_user}","gists_url":"https://api.github.com/users/buchireddy/gists{/gist_id}","starred_url":"https://api.github.com/users/buchireddy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/buchireddy/subscriptions","organizations_url":"https://api.github.com/users/buchireddy/orgs","repos_url":"https://api.github.com/users/buchireddy/repos","events_url":"https://api.github.com/users/buchireddy/events{/privacy}","received_events_url":"https://api.github.com/users/buchireddy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T03:02:39Z","updated_at":"2020-08-25T03:02:39Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang do you know if that fix is present in `0.5.0` or after that?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679482712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679499350","html_url":"https://github.com/apache/pinot/pull/5911#issuecomment-679499350","issue_url":"https://api.github.com/repos/apache/pinot/issues/5911","id":679499350,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTQ5OTM1MA==","user":{"login":"saileshnankani","id":30644225,"node_id":"MDQ6VXNlcjMwNjQ0MjI1","avatar_url":"https://avatars.githubusercontent.com/u/30644225?v=4","gravatar_id":"","url":"https://api.github.com/users/saileshnankani","html_url":"https://github.com/saileshnankani","followers_url":"https://api.github.com/users/saileshnankani/followers","following_url":"https://api.github.com/users/saileshnankani/following{/other_user}","gists_url":"https://api.github.com/users/saileshnankani/gists{/gist_id}","starred_url":"https://api.github.com/users/saileshnankani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saileshnankani/subscriptions","organizations_url":"https://api.github.com/users/saileshnankani/orgs","repos_url":"https://api.github.com/users/saileshnankani/repos","events_url":"https://api.github.com/users/saileshnankani/events{/privacy}","received_events_url":"https://api.github.com/users/saileshnankani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T03:15:31Z","updated_at":"2020-08-25T16:04:21Z","author_association":"CONTRIBUTOR","body":"> Overall: Thanks for getting this started.\r\n> \r\n> 1. You don't need to use version\r\n> 2. Remove all prompts. The test should be push-button. Top-level goal is to enter a single command with two commit hashes (and maybe a working dir) and it should run all the tests we have.\r\n> 3. Please use camel case instead of underscores\r\n> 4. Use shell functions when possible. Adding a function for usage() has often been useful for me, to be invoked from anywhere we see discrepancies that we think are user errors.\r\n> \r\n> High-Level command:\r\n> `compatCheck.sh olderCommit newerCommit [workingDir]`\r\n> Sub-commands that you will find useful to develop, either as functions or separate commands:\r\n> `checkoutAndBuild commitHash dirName`\r\n> `startService serviceName dirName`\r\n> `stopService serviceName dirName`\r\n> \r\n> For now, functions should be enough, we can split the files as needed later.\r\n\r\nDo you suggest that startServices/stopServices functions should be available along with control-service subcommand or is it supposed to replace it? In the case it replaces the control-service.sh file entirely, its command syntax suggests that we can't do rolling upgrade using startService/stopService as we don't pass in a specific component unlike control-service.sh\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679499350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679842553","html_url":"https://github.com/apache/pinot/pull/5868#issuecomment-679842553","issue_url":"https://api.github.com/repos/apache/pinot/issues/5868","id":679842553,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTg0MjU1Mw==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T06:59:32Z","updated_at":"2020-08-25T06:59:32Z","author_association":"MEMBER","body":"@suvodeep-pyne can you please review this.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679842553/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679973918","html_url":"https://github.com/apache/pinot/issues/5876#issuecomment-679973918","issue_url":"https://api.github.com/repos/apache/pinot/issues/5876","id":679973918,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTk3MzkxOA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T11:42:52Z","updated_at":"2020-08-25T11:42:52Z","author_association":"CONTRIBUTOR","body":"PS it appears in ad-hoc testing that expanding the jars into a flat classpath significantly reduces startup time. Need to have some more eyes testing this of course. https://github.com/hypertrace/pinot/pull/12\r\n\r\nMeanwhile, I will try to start the broker and server in parallel in a PR.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/679973918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680016247","html_url":"https://github.com/apache/pinot/issues/5876#issuecomment-680016247","issue_url":"https://api.github.com/repos/apache/pinot/issues/5876","id":680016247,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDAxNjI0Nw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T13:12:23Z","updated_at":"2020-08-25T13:12:23Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/incubator-pinot/pull/5917","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680016247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680016620","html_url":"https://github.com/apache/pinot/issues/5876#issuecomment-680016620","issue_url":"https://api.github.com/repos/apache/pinot/issues/5876","id":680016620,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDAxNjYyMA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T13:13:04Z","updated_at":"2020-08-25T13:13:04Z","author_association":"CONTRIBUTOR","body":"> Thanks for bringing this up. We can try to start broker and server in parallel always.\r\n\r\nI assume this means controller cannot be in parallel until you tell me otherwise","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680016620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680122655","html_url":"https://github.com/apache/pinot/pull/5911#issuecomment-680122655","issue_url":"https://api.github.com/repos/apache/pinot/issues/5911","id":680122655,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDEyMjY1NQ==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T16:11:20Z","updated_at":"2020-08-25T16:11:20Z","author_association":"CONTRIBUTOR","body":"I fixed my comment. Hope that makes it clearer. Here is the general outline (as of now, and we can always refine it as we go along).\r\n`compatCheck.sh` does the following:\r\n1. Checkout and build in old-version\r\n2. checkout and build in new version.\r\n3. start  zookeeper in any one version (old or new, does not matter)\r\n4. Start all services  in old version (controller first, broker/server in any order).\r\n5. upgradeAnd Test()\r\n6. dowgradeAndTest()\r\n\r\n`upgradeAndTest()` does the following:\r\n1. Stop controller in old version\r\n2. Start controller in new version.\r\n2a. More code here later\r\n3. Stop broker in old version\r\n4. Start broker in new version.\r\n4a. More code in later\r\n5. Stop server in old version\r\n6. Start server in new version\r\n6a. More code here later.\r\n\r\n`downgradeAndTest()` does the folllowing:\r\n1. Stop server in new version\r\n2. Start server in old version\r\n2a. More code to add here later\r\n3. Stop broker in new version\r\n4. Start broker in old version\r\n4a. More code here later\r\n5. Stop controller in new version\r\n6. Start controlller in new version\r\n6a. More code here later.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680122655/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680133351","html_url":"https://github.com/apache/pinot/pull/5868#issuecomment-680133351","issue_url":"https://api.github.com/repos/apache/pinot/issues/5868","id":680133351,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDEzMzM1MQ==","user":{"login":"suvodeep-pyne","id":2577714,"node_id":"MDQ6VXNlcjI1Nzc3MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2577714?v=4","gravatar_id":"","url":"https://api.github.com/users/suvodeep-pyne","html_url":"https://github.com/suvodeep-pyne","followers_url":"https://api.github.com/users/suvodeep-pyne/followers","following_url":"https://api.github.com/users/suvodeep-pyne/following{/other_user}","gists_url":"https://api.github.com/users/suvodeep-pyne/gists{/gist_id}","starred_url":"https://api.github.com/users/suvodeep-pyne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suvodeep-pyne/subscriptions","organizations_url":"https://api.github.com/users/suvodeep-pyne/orgs","repos_url":"https://api.github.com/users/suvodeep-pyne/repos","events_url":"https://api.github.com/users/suvodeep-pyne/events{/privacy}","received_events_url":"https://api.github.com/users/suvodeep-pyne/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T16:30:05Z","updated_at":"2020-08-25T16:30:05Z","author_association":"CONTRIBUTOR","body":"Hi @cyrilou242 \r\n\r\nThanks for the contribution! \r\n- How to build docs: https://github.com/apache/incubator-pinot/blob/master/thirdeye/docs/README.md\r\n- What are the advantages of choosing a JDBC client over a REST Client?\r\n- Correct me if I'm wrong here: the core code change that I see here is the timestamp translation?\r\n- Apart dependencies, what are other issues of plugging in the BigQuery JDBC driver?\r\n- ThirdEye has a lot of dependencies. Would be great to cleanup. But can be done as a separate PR?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680133351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680194041","html_url":"https://github.com/apache/pinot/issues/5919#issuecomment-680194041","issue_url":"https://api.github.com/repos/apache/pinot/issues/5919","id":680194041,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDE5NDA0MQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T18:23:29Z","updated_at":"2020-08-25T18:23:29Z","author_association":"CONTRIBUTOR","body":"@kishoreg @agrawaldevesh @mr-agrwal @Jackie-Jiang @mayankshriv @mcvsubbu ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680194041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680206949","html_url":"https://github.com/apache/pinot/issues/5907#issuecomment-680206949","issue_url":"https://api.github.com/repos/apache/pinot/issues/5907","id":680206949,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDIwNjk0OQ==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T18:49:28Z","updated_at":"2020-08-25T18:49:28Z","author_association":"CONTRIBUTOR","body":"@buchireddy It will be included in the `0.5.0` release","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680206949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680210595","html_url":"https://github.com/apache/pinot/issues/5919#issuecomment-680210595","issue_url":"https://api.github.com/repos/apache/pinot/issues/5919","id":680210595,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDIxMDU5NQ==","user":{"login":"agrawaldevesh","id":20564223,"node_id":"MDQ6VXNlcjIwNTY0MjIz","avatar_url":"https://avatars.githubusercontent.com/u/20564223?v=4","gravatar_id":"","url":"https://api.github.com/users/agrawaldevesh","html_url":"https://github.com/agrawaldevesh","followers_url":"https://api.github.com/users/agrawaldevesh/followers","following_url":"https://api.github.com/users/agrawaldevesh/following{/other_user}","gists_url":"https://api.github.com/users/agrawaldevesh/gists{/gist_id}","starred_url":"https://api.github.com/users/agrawaldevesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agrawaldevesh/subscriptions","organizations_url":"https://api.github.com/users/agrawaldevesh/orgs","repos_url":"https://api.github.com/users/agrawaldevesh/repos","events_url":"https://api.github.com/users/agrawaldevesh/events{/privacy}","received_events_url":"https://api.github.com/users/agrawaldevesh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T18:56:44Z","updated_at":"2020-08-25T18:56:44Z","author_association":"CONTRIBUTOR","body":"They still would not help so much from a presto standpoint: we would need to know how to map the presto Udf to the Pinot udf. I am afraid that this mapping is a bit custom and presto may not be able to automatically map, except the simplest cases. \n\nPerhaps we can cater to that by including the name of the presto Udf name along with a flag saying if it is trivially convertible or not. \n\nHaving said that, this may at least improve the quality of error messages on the presto side.\n\nIt would be great if we can make This work because it reduces the coupling.\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680210595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680211977","html_url":"https://github.com/apache/pinot/issues/5919#issuecomment-680211977","issue_url":"https://api.github.com/repos/apache/pinot/issues/5919","id":680211977,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDIxMTk3Nw==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T18:59:34Z","updated_at":"2020-08-25T18:59:34Z","author_association":"CONTRIBUTOR","body":"How do you plan to maintain this endpoint?\r\nNot sure if this can help with query push down as the behavior must be identical on presto side and pinot side. IMO it is safer to manually select functions to push down instead of using name matching. It can cause unexpected behavior if the behavior is not exactly the same.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680211977/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680266648","html_url":"https://github.com/apache/pinot/pull/5920#issuecomment-680266648","issue_url":"https://api.github.com/repos/apache/pinot/issues/5920","id":680266648,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDI2NjY0OA==","user":{"login":"Ruoyingw","id":39412902,"node_id":"MDQ6VXNlcjM5NDEyOTAy","avatar_url":"https://avatars.githubusercontent.com/u/39412902?v=4","gravatar_id":"","url":"https://api.github.com/users/Ruoyingw","html_url":"https://github.com/Ruoyingw","followers_url":"https://api.github.com/users/Ruoyingw/followers","following_url":"https://api.github.com/users/Ruoyingw/following{/other_user}","gists_url":"https://api.github.com/users/Ruoyingw/gists{/gist_id}","starred_url":"https://api.github.com/users/Ruoyingw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ruoyingw/subscriptions","organizations_url":"https://api.github.com/users/Ruoyingw/orgs","repos_url":"https://api.github.com/users/Ruoyingw/repos","events_url":"https://api.github.com/users/Ruoyingw/events{/privacy}","received_events_url":"https://api.github.com/users/Ruoyingw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T20:58:50Z","updated_at":"2020-08-25T20:58:50Z","author_association":"CONTRIBUTOR","body":"lgtm. Thanks for the quick fix!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680266648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680318211","html_url":"https://github.com/apache/pinot/pull/5924#issuecomment-680318211","issue_url":"https://api.github.com/repos/apache/pinot/issues/5924","id":680318211,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDMxODIxMQ==","user":{"login":"suvodeep-pyne","id":2577714,"node_id":"MDQ6VXNlcjI1Nzc3MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2577714?v=4","gravatar_id":"","url":"https://api.github.com/users/suvodeep-pyne","html_url":"https://github.com/suvodeep-pyne","followers_url":"https://api.github.com/users/suvodeep-pyne/followers","following_url":"https://api.github.com/users/suvodeep-pyne/following{/other_user}","gists_url":"https://api.github.com/users/suvodeep-pyne/gists{/gist_id}","starred_url":"https://api.github.com/users/suvodeep-pyne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suvodeep-pyne/subscriptions","organizations_url":"https://api.github.com/users/suvodeep-pyne/orgs","repos_url":"https://api.github.com/users/suvodeep-pyne/repos","events_url":"https://api.github.com/users/suvodeep-pyne/events{/privacy}","received_events_url":"https://api.github.com/users/suvodeep-pyne/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-25T23:27:37Z","updated_at":"2020-08-25T23:27:37Z","author_association":"CONTRIBUTOR","body":"@akshayrai \r\nWanted to know your thoughts on this.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680318211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680417762","html_url":"https://github.com/apache/pinot/issues/5907#issuecomment-680417762","issue_url":"https://api.github.com/repos/apache/pinot/issues/5907","id":680417762,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDQxNzc2Mg==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T02:11:30Z","updated_at":"2020-08-26T02:11:30Z","author_association":"MEMBER","body":"@buchireddy please update this ticket once you have the new version","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680417762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680622115","html_url":"https://github.com/apache/pinot/issues/5925#issuecomment-680622115","issue_url":"https://api.github.com/repos/apache/pinot/issues/5925","id":680622115,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDYyMjExNQ==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T04:54:29Z","updated_at":"2020-08-26T04:54:29Z","author_association":"CONTRIBUTOR","body":"Add `IdSet` and `IdSetAggregationFunction`: #5926 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680622115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680647548","html_url":"https://github.com/apache/pinot/pull/5922#issuecomment-680647548","issue_url":"https://api.github.com/repos/apache/pinot/issues/5922","id":680647548,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDY0NzU0OA==","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T05:11:57Z","updated_at":"2020-08-26T05:13:31Z","author_association":"MEMBER","body":"> Shouldn't we be setting the value to \"Max qps within a second since the time the callback was invoked last\"? \r\n\r\nWe don't want to make the metrics system stateful. Every time the callback method gets called, it should return whatever the value should be.Thus, I don't think it's good to reset the counts when the callback gets called. Otherwise, we should have changed all the metrics to be stateful in Pinot cluster.\r\n\r\n> In some systems, the polling may be more often than 1 minute, and in others less often. So, we should keep a hit counter for some max time (say, 10m).\r\n\r\nI admit that the frequency of poll may vary. We can make it configurable. But the purpose of this new metric is to track the qps related statistics. It will only be emitted when the qps quota is set. If 10 mins is the granularity for a system to track qps, then I don't think they need to set qps quota for their tables.\r\n\r\n> The time interval could be close to a certain period, but can fluctuate by some small percentage either way. So, if the poll comes in 65 seconds, and our first second had a burst, we will lose it (as per your implementation).\r\n\r\nThis is a rare case. In fact, what we are trying to solve is to find a way to detect the burst of queries which last for a while. They may be ignored, but will never be ignored all the time. Plus, if it happens quite often, then I think there is some issue on polling instead of adjusting our stateless metric system. The callback function never knows when it will be called in advance; when the callback function gets called, it should return the exact max qps within a minute based on the requirement. \r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680647548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680687103","html_url":"https://github.com/apache/pinot/pull/5905#issuecomment-680687103","issue_url":"https://api.github.com/repos/apache/pinot/issues/5905","id":680687103,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDY4NzEwMw==","user":{"login":"chenboat","id":2549137,"node_id":"MDQ6VXNlcjI1NDkxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2549137?v=4","gravatar_id":"","url":"https://api.github.com/users/chenboat","html_url":"https://github.com/chenboat","followers_url":"https://api.github.com/users/chenboat/followers","following_url":"https://api.github.com/users/chenboat/following{/other_user}","gists_url":"https://api.github.com/users/chenboat/gists{/gist_id}","starred_url":"https://api.github.com/users/chenboat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenboat/subscriptions","organizations_url":"https://api.github.com/users/chenboat/orgs","repos_url":"https://api.github.com/users/chenboat/repos","events_url":"https://api.github.com/users/chenboat/events{/privacy}","received_events_url":"https://api.github.com/users/chenboat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T06:31:28Z","updated_at":"2020-08-26T06:31:28Z","author_association":"CONTRIBUTOR","body":"Thanks for the reviews. \r\n(1) org.apache.helix:helix-core:0.9.7 is still in the LICENSE-binary file. \r\n(2) cddl 1.0 should _not_ go away. I think the current runbook has ambiguity in it (quote below)\r\n   \"**Scroll down to the section on the project's compile dependencies (transitive)**\"       \r\n   The javax.servlet-api is the direct compile dependencies and thus it is NOT shown up in the transitive dep list. We should modify the instruction to include direct dependencies.\r\n    gpl will still go away as its jar got deleted completed — I can mentioned it in the commit msg.\r\n\r\n> Looks ok overall, but a few questions. If you can add that in the commit message that will be useful.\r\n> (1) Why did Apache Helix go away from LICENSE-binary?\r\n> (2) Why did cddl and gpl license go away?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680687103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680698790","html_url":"https://github.com/apache/pinot/pull/5905#issuecomment-680698790","issue_url":"https://api.github.com/repos/apache/pinot/issues/5905","id":680698790,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDY5ODc5MA==","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T07:01:28Z","updated_at":"2020-08-26T07:01:28Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5905?src=pr&el=h1) Report\n> Merging [#5905](https://codecov.io/gh/apache/incubator-pinot/pull/5905?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) will **increase** coverage by `0.61%`.\n> The diff coverage is `71.72%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/5905/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/5905?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #5905      +/-   ##\n==========================================\n+ Coverage   66.44%   67.06%   +0.61%     \n==========================================\n  Files        1075     1184     +109     \n  Lines       54773    62044    +7271     \n  Branches     8168     9479    +1311     \n==========================================\n+ Hits        36396    41611    +5215     \n- Misses      15700    17353    +1653     \n- Partials     2677     3080     +403     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #integration | `43.65% <50.67%> (?)` | |\n| #unittests | `58.67% <58.38%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/5905?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/5905/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/5905/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/5905/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `53.33% <0.00%> (-3.81%)` | :arrow_down: |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/5905/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `44.44% <0.00%> (-4.40%)` | :arrow_down: |\n| [.../org/apache/pinot/client/ResultTableResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/5905/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFRhYmxlUmVzdWx0U2V0LmphdmE=) | `24.00% <0.00%> (-10.29%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/AbstractMetrics.java](https://codecov.io/gh/apache/incubator-pinot/pull/5905/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9BYnN0cmFjdE1ldHJpY3MuamF2YQ==) | `82.57% <ø> (+7.90%)` | :arrow_up: |\n| [...a/org/apache/pinot/common/metrics/BrokerGauge.java](https://codecov.io/gh/apache/incubator-pinot/pull/5905/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJHYXVnZS5qYXZh) | `91.66% <ø> (+1.66%)` | :arrow_up: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/incubator-pinot/pull/5905/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...mxReporterMetricsRegistryRegistrationListener.java](https://codecov.io/gh/apache/incubator-pinot/pull/5905/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9KbXhSZXBvcnRlck1ldHJpY3NSZWdpc3RyeVJlZ2lzdHJhdGlvbkxpc3RlbmVyLmphdmE=) | `100.00% <ø> (ø)` | |\n| [...org/apache/pinot/common/metrics/MetricsHelper.java](https://codecov.io/gh/apache/incubator-pinot/pull/5905/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NZXRyaWNzSGVscGVyLmphdmE=) | `50.60% <ø> (+1.85%)` | :arrow_up: |\n| ... and [852 more](https://codecov.io/gh/apache/incubator-pinot/pull/5905/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5905?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5905?src=pr&el=footer). Last update [c223dfc...5a8a743](https://codecov.io/gh/apache/incubator-pinot/pull/5905?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680698790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680704778","html_url":"https://github.com/apache/pinot/pull/5917#issuecomment-680704778","issue_url":"https://api.github.com/repos/apache/pinot/issues/5917","id":680704778,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDcwNDc3OA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T07:16:04Z","updated_at":"2020-08-26T07:16:04Z","author_association":"CONTRIBUTOR","body":"ok here is what it looks like now:\r\n\r\n```\r\n$ docker logs pinot 2>&1|grep 'INFO.*since launch'\r\n07:12:45,859 INFO  [main] command.StartServiceManagerCommand (StartServiceManagerCommand.java:254) - Starting a Pinot [CONTROLLER] at 5.448s since launch\r\n07:12:51,703 INFO  [main] command.StartServiceManagerCommand (StartServiceManagerCommand.java:256) - Started Pinot [CONTROLLER] instance [Controller_f322d4ca725c_9000] at 11.293s since launch\r\n07:12:51,706 INFO  [Starting BROKER] command.StartServiceManagerCommand (StartServiceManagerCommand.java:254) - Starting a Pinot [BROKER] at 11.296s since launch\r\n07:12:51,706 INFO  [Starting SERVER] command.StartServiceManagerCommand (StartServiceManagerCommand.java:254) - Starting a Pinot [SERVER] at 11.296s since launch\r\n07:12:55,523 INFO  [Starting SERVER] command.StartServiceManagerCommand (StartServiceManagerCommand.java:256) - Started Pinot [SERVER] instance [Server_f322d4ca725c_8098] at 15.113s since launch\r\n07:12:55,593 INFO  [Starting BROKER] command.StartServiceManagerCommand (StartServiceManagerCommand.java:256) - Started Pinot [BROKER] instance [Broker_f322d4ca725c_8099] at 15.183s since launch\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680704778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680750417","html_url":"https://github.com/apache/pinot/pull/5917#issuecomment-680750417","issue_url":"https://api.github.com/repos/apache/pinot/issues/5917","id":680750417,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDc1MDQxNw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T08:53:29Z","updated_at":"2020-08-26T08:53:29Z","author_association":"CONTRIBUTOR","body":"I'm pretty satisfied with this now\r\n\r\n```\r\n$ docker logs pinot 2>&1|grep 'INFO.*since launch'\r\n08:51:48,903 INFO  [main] command.StartServiceManagerCommand (StartServiceManagerCommand.java:260) - Starting a Pinot [ServiceManager] at 0.02s since launch\r\n08:51:54,182 INFO  [main] command.StartServiceManagerCommand (StartServiceManagerCommand.java:262) - Started Pinot [ServiceManager] instance [ServiceManager_55e6f54e58a8_7098] at 5.299s since launch\r\n08:51:54,368 INFO  [main] command.StartServiceManagerCommand (StartServiceManagerCommand.java:260) - Starting a Pinot [CONTROLLER] at 5.485s since launch\r\n08:52:00,930 INFO  [main] command.StartServiceManagerCommand (StartServiceManagerCommand.java:262) - Started Pinot [CONTROLLER] instance [Controller_55e6f54e58a8_9000] at 12.047s since launch\r\n08:52:00,933 INFO  [Starting SERVER] command.StartServiceManagerCommand (StartServiceManagerCommand.java:260) - Starting a Pinot [SERVER] at 12.05s since launch\r\n08:52:00,933 INFO  [Starting BROKER] command.StartServiceManagerCommand (StartServiceManagerCommand.java:260) - Starting a Pinot [BROKER] at 12.05s since launch\r\n08:52:04,767 INFO  [Starting BROKER] command.StartServiceManagerCommand (StartServiceManagerCommand.java:262) - Started Pinot [BROKER] instance [Broker_55e6f54e58a8_8099] at 15.885s since launch\r\n08:52:04,834 INFO  [Starting SERVER] command.StartServiceManagerCommand (StartServiceManagerCommand.java:262) - Started Pinot [SERVER] instance [Server_55e6f54e58a8_8098] at 15.952s since launch\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680750417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680776682","html_url":"https://github.com/apache/pinot/pull/5917#issuecomment-680776682","issue_url":"https://api.github.com/repos/apache/pinot/issues/5917","id":680776682,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDc3NjY4Mg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T09:44:51Z","updated_at":"2020-08-26T09:44:51Z","author_association":"CONTRIBUTOR","body":"one problem is the logging of `org.apache.helix.manager.zk.ZKHelixManager`. Trying the cluster clutters the log like this even when we catch exception:\r\n\r\n```\r\nfail to createClient.\r\norg.apache.helix.HelixException: Cluster structure is not set up for cluster: QuickStartCluster\r\n\tat org.apache.helix.manager.zk.ZKHelixManager.handleNewSession(ZKHelixManager.java:1124) ~[pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.helix.manager.zk.ZKHelixManager.createClient(ZKHelixManager.java:701) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.helix.manager.zk.ZKHelixManager.connect(ZKHelixManager.java:738) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.admin.command.StartServiceManagerCommand.clusterExists(StartServiceManagerCommand.java:260) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.admin.command.StartServiceManagerCommand.startBootstrapServices(StartServiceManagerCommand.java:228) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.admin.command.StartServiceManagerCommand.execute(StartServiceManagerCommand.java:181) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.admin.command.StartControllerCommand.execute(StartControllerCommand.java:130) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.admin.command.QuickstartRunner.startControllers(QuickstartRunner.java:105) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.admin.command.QuickstartRunner.startAll(QuickstartRunner.java:140) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.HybridQuickstart.execute(HybridQuickstart.java:132) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.HybridQuickstart.main(HybridQuickstart.java:57) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\nfail to connect ServiceManager_localhost_-1\r\norg.apache.helix.HelixException: Cluster structure is not set up for cluster: QuickStartCluster\r\n\tat org.apache.helix.manager.zk.ZKHelixManager.handleNewSession(ZKHelixManager.java:1124) ~[pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.helix.manager.zk.ZKHelixManager.createClient(ZKHelixManager.java:701) ~[pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.helix.manager.zk.ZKHelixManager.connect(ZKHelixManager.java:738) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.admin.command.StartServiceManagerCommand.clusterExists(StartServiceManagerCommand.java:260) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.admin.command.StartServiceManagerCommand.startBootstrapServices(StartServiceManagerCommand.java:228) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.admin.command.StartServiceManagerCommand.execute(StartServiceManagerCommand.java:181) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.admin.command.StartControllerCommand.execute(StartControllerCommand.java:130) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.admin.command.QuickstartRunner.startControllers(QuickstartRunner.java:105) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.admin.command.QuickstartRunner.startAll(QuickstartRunner.java:140) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.HybridQuickstart.execute(HybridQuickstart.java:132) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n\tat org.apache.pinot.tools.HybridQuickstart.main(HybridQuickstart.java:57) [pinot-all-0.5.0-SNAPSHOT-jar-with-dependencies.jar:0.5.0-SNAPSHOT-3508311f31a79d45a279d3a2fe1437bdfd2358be]\r\n```\r\n\r\nI'm changing to always synchronously start CONTROLLER as it is better than scary logs","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680776682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680784776","html_url":"https://github.com/apache/pinot/pull/5917#issuecomment-680784776","issue_url":"https://api.github.com/repos/apache/pinot/issues/5917","id":680784776,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDc4NDc3Ng==","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T10:01:44Z","updated_at":"2020-08-26T10:04:31Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5917?src=pr&el=h1) Report\n> Merging [#5917](https://codecov.io/gh/apache/incubator-pinot/pull/5917?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) will **decrease** coverage by `22.53%`.\n> The diff coverage is `48.81%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/5917/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/5917?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #5917       +/-   ##\n===========================================\n- Coverage   66.44%   43.91%   -22.54%     \n===========================================\n  Files        1075     1184      +109     \n  Lines       54773    62044     +7271     \n  Branches     8168     9479     +1311     \n===========================================\n- Hits        36396    27248     -9148     \n- Misses      15700    32345    +16645     \n+ Partials     2677     2451      -226     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #integration | `43.91% <48.81%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/5917?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/5917/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/5917/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/5917/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `26.66% <0.00%> (-30.48%)` | :arrow_down: |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/5917/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `22.22% <0.00%> (-26.62%)` | :arrow_down: |\n| [.../org/apache/pinot/client/ResultTableResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/5917/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFRhYmxlUmVzdWx0U2V0LmphdmE=) | `24.00% <0.00%> (-10.29%)` | :arrow_down: |\n| [.../org/apache/pinot/common/lineage/LineageEntry.java](https://codecov.io/gh/apache/incubator-pinot/pull/5917/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9MaW5lYWdlRW50cnkuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...apache/pinot/common/lineage/LineageEntryState.java](https://codecov.io/gh/apache/incubator-pinot/pull/5917/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9MaW5lYWdlRW50cnlTdGF0ZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...rg/apache/pinot/common/lineage/SegmentLineage.java](https://codecov.io/gh/apache/incubator-pinot/pull/5917/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9TZWdtZW50TGluZWFnZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/common/lineage/SegmentLineageUtils.java](https://codecov.io/gh/apache/incubator-pinot/pull/5917/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9TZWdtZW50TGluZWFnZVV0aWxzLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ot/common/messages/RoutingTableRebuildMessage.java](https://codecov.io/gh/apache/incubator-pinot/pull/5917/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvUm91dGluZ1RhYmxlUmVidWlsZE1lc3NhZ2UuamF2YQ==) | `0.00% <ø> (ø)` | |\n| ... and [1102 more](https://codecov.io/gh/apache/incubator-pinot/pull/5917/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5917?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/5917?src=pr&el=footer). Last update [a8974c7...33ce463](https://codecov.io/gh/apache/incubator-pinot/pull/5917?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680784776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680824999","html_url":"https://github.com/apache/pinot/pull/5917#issuecomment-680824999","issue_url":"https://api.github.com/repos/apache/pinot/issues/5917","id":680824999,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDgyNDk5OQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T11:35:31Z","updated_at":"2020-08-26T11:35:31Z","author_association":"CONTRIBUTOR","body":"Looking at the below, I'm wondering if ServiceManager itself can be deferred to start? It takes 8s\r\n\r\n```\r\ndocker logs pinot 2>&1|grep 'INFO.*since launch'\r\n11:33:12,151 INFO  [main] command.StartServiceManagerCommand (StartServiceManagerCommand.java:260) - Starting a Pinot [SERVICE_MANAGER] at 0.04s since launch\r\n11:33:20,299 INFO  [main] command.StartServiceManagerCommand (StartServiceManagerCommand.java:262) - Started Pinot [SERVICE_MANAGER] instance [ServiceManager_f0292d096fa4_7098] at 8.189s since launch\r\n11:33:20,344 INFO  [main] command.StartServiceManagerCommand (StartServiceManagerCommand.java:260) - Starting a Pinot [CONTROLLER] at 8.235s since launch\r\n11:33:27,010 INFO  [main] command.StartServiceManagerCommand (StartServiceManagerCommand.java:262) - Started Pinot [CONTROLLER] instance [Controller_f0292d096fa4_9000] at 14.9s since launch\r\n11:33:27,012 INFO  [pool-13-thread-1] command.StartServiceManagerCommand (StartServiceManagerCommand.java:260) - Starting a Pinot [BROKER] at 14.902s since launch\r\n11:33:27,023 INFO  [pool-13-thread-2] command.StartServiceManagerCommand (StartServiceManagerCommand.java:260) - Starting a Pinot [SERVER] at 14.914s since launch\r\n11:33:30,771 INFO  [pool-13-thread-1] command.StartServiceManagerCommand (StartServiceManagerCommand.java:262) - Started Pinot [BROKER] instance [Broker_f0292d096fa4_8099] at 18.696s since launch\r\n11:33:30,821 INFO  [pool-13-thread-2] command.StartServiceManagerCommand (StartServiceManagerCommand.java:262) - Started Pinot [SERVER] instance [Server_f0292d096fa4_8098] at 18.747s since launch\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680824999/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680829587","html_url":"https://github.com/apache/pinot/pull/5917#issuecomment-680829587","issue_url":"https://api.github.com/repos/apache/pinot/issues/5917","id":680829587,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDgyOTU4Nw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T11:46:48Z","updated_at":"2020-08-26T11:46:48Z","author_association":"CONTRIBUTOR","body":"nah chicken, egg as servicemanager starts the roles. I think this is good as it gets.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680829587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680976015","html_url":"https://github.com/apache/pinot/pull/5922#issuecomment-680976015","issue_url":"https://api.github.com/repos/apache/pinot/issues/5922","id":680976015,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDk3NjAxNQ==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T16:09:17Z","updated_at":"2020-08-26T16:09:17Z","author_association":"CONTRIBUTOR","body":"> > Shouldn't we be setting the value to \"Max qps within a second since the time the callback was invoked last\"?\r\n> \r\n> We don't want to make the metrics system stateful. Every time the callback method gets called, it should return whatever the value should be.Thus, I don't think it's good to reset the counts when the callback gets called. Otherwise, we should have changed all the metrics to be stateful in Pinot cluster.\r\n> \r\nThere is a difference between this one and all the others that we have. In the others, the state is still there, it is being maintained by the metrics library. How else do you think we get percentiles? In this case, we want a much finer granularity, and hence the need for it to clear state and report the max that it recorded since the last call.  Otherwise, we will be emitting metrics that do not reflect the real state as we want to measure it.\r\n\r\n> > In some systems, the polling may be more often than 1 minute, and in others less often. So, we should keep a hit counter for some max time (say, 10m).\r\n> \r\n> I admit that the frequency of poll may vary. We can make it configurable. But the purpose of this new metric is to track the qps related statistics. It will only be emitted when the qps quota is set. If 10 mins is the granularity for a system to track qps, then I don't think they need to set qps quota for their tables.\r\n> \r\n> > The time interval could be close to a certain period, but can fluctuate by some small percentage either way. So, if the poll comes in 65 seconds, and our first second had a burst, we will lose it (as per your implementation).\r\n> \r\n> This is a rare case. In fact, what we are trying to solve is to find a way to detect the burst of queries which last for a while. They may be ignored, but will never be ignored all the time. Plus, if it happens quite often, then I think there is some issue on polling instead of adjusting our stateless metric system. The callback function never knows when it will be called in advance; when the callback function gets called, it should return the exact max qps within a minute based on the requirement.\r\n\r\nI am not sure how rare a case this is.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680976015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680989410","html_url":"https://github.com/apache/pinot/issues/5928#issuecomment-680989410","issue_url":"https://api.github.com/repos/apache/pinot/issues/5928","id":680989410,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDk4OTQxMA==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T16:32:29Z","updated_at":"2020-08-26T16:32:29Z","author_association":"MEMBER","body":"@mcvsubbu @npawar and I had an initial discussion around this topic but our understanding of Pravega is a bit weak to propose a complete solution. Flavio, it will be great if you can drive this discussion and guide us in the right direction. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680989410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680989516","html_url":"https://github.com/apache/pinot/issues/5928#issuecomment-680989516","issue_url":"https://api.github.com/repos/apache/pinot/issues/5928","id":680989516,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDk4OTUxNg==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T16:32:40Z","updated_at":"2020-08-26T16:32:40Z","author_association":"MEMBER","body":"@fpj","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680989516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680990156","html_url":"https://github.com/apache/pinot/issues/5928#issuecomment-680990156","issue_url":"https://api.github.com/repos/apache/pinot/issues/5928","id":680990156,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDk5MDE1Ng==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T16:33:54Z","updated_at":"2020-08-26T16:34:17Z","author_association":"MEMBER","body":"There is some prior work we did to support other streaming systems (this was done keeping Kinesis in mind). \r\n#5359 Extend offset support for other streams","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/680990156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681033126","html_url":"https://github.com/apache/pinot/pull/5922#issuecomment-681033126","issue_url":"https://api.github.com/repos/apache/pinot/issues/5922","id":681033126,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTAzMzEyNg==","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T17:56:56Z","updated_at":"2020-08-26T17:56:56Z","author_association":"MEMBER","body":"> > > Shouldn't we be setting the value to \"Max qps within a second since the time the callback was invoked last\"?\r\n> > \r\n> > \r\n> > We don't want to make the metrics system stateful. Every time the callback method gets called, it should return whatever the value should be.Thus, I don't think it's good to reset the counts when the callback gets called. Otherwise, we should have changed all the metrics to be stateful in Pinot cluster.\r\n> \r\n> There is a difference between this one and all the others that we have. In the others, the state is still there, it is being maintained by the metrics library. How else do you think we get percentiles? In this case, we want a much finer granularity, and hence the need for it to clear state and report the max that it recorded since the last call. Otherwise, we will be emitting metrics that do not reflect the real state as we want to measure it.\r\n\r\nI'm talking about the gauge values, not the meter values. The existing gauge values are maintained in a ConcurrentHashMap in `MetrcisHelper` class, which is Pinot's code. The emitted  gauge value is just the one when the callback function gets called. There is no state at all.\r\n> \r\n> > > In some systems, the polling may be more often than 1 minute, and in others less often. So, we should keep a hit counter for some max time (say, 10m).\r\n> > \r\n> > \r\n> > I admit that the frequency of poll may vary. We can make it configurable. But the purpose of this new metric is to track the qps related statistics. It will only be emitted when the qps quota is set. If 10 mins is the granularity for a system to track qps, then I don't think they need to set qps quota for their tables.\r\n> > > The time interval could be close to a certain period, but can fluctuate by some small percentage either way. So, if the poll comes in 65 seconds, and our first second had a burst, we will lose it (as per your implementation).\r\n> > \r\n> > \r\n> > This is a rare case. In fact, what we are trying to solve is to find a way to detect the burst of queries which last for a while. They may be ignored, but will never be ignored all the time. Plus, if it happens quite often, then I think there is some issue on polling instead of adjusting our stateless metric system. The callback function never knows when it will be called in advance; when the callback function gets called, it should return the exact max qps within a minute based on the requirement.\r\n> \r\n> I am not sure how rare a case this is.\r\n\r\nThe case I mentioned here is that the it always neglects the burst of queries in the first second; the burst is so smart that it always happens at the time when the hit counter couldn't detect.\r\nIn another case, if the callback gets invoked 2 consecutive times which gap is small (maybe caused by GC). The stateful won't give you the correct number, as the value has already been reset by the first call.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681033126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681059064","html_url":"https://github.com/apache/pinot/pull/5917#issuecomment-681059064","issue_url":"https://api.github.com/repos/apache/pinot/issues/5917","id":681059064,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTA1OTA2NA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T18:49:31Z","updated_at":"2020-08-26T18:49:31Z","author_association":"CONTRIBUTOR","body":"I think this is good for now.\r\nI will take a look how to let service manager to connect to helix and decide if it's required to start controller first or it can start everything at once.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681059064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681089584","html_url":"https://github.com/apache/pinot/pull/5910#issuecomment-681089584","issue_url":"https://api.github.com/repos/apache/pinot/issues/5910","id":681089584,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTA4OTU4NA==","user":{"login":"renato2099","id":1325916,"node_id":"MDQ6VXNlcjEzMjU5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/1325916?v=4","gravatar_id":"","url":"https://api.github.com/users/renato2099","html_url":"https://github.com/renato2099","followers_url":"https://api.github.com/users/renato2099/followers","following_url":"https://api.github.com/users/renato2099/following{/other_user}","gists_url":"https://api.github.com/users/renato2099/gists{/gist_id}","starred_url":"https://api.github.com/users/renato2099/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renato2099/subscriptions","organizations_url":"https://api.github.com/users/renato2099/orgs","repos_url":"https://api.github.com/users/renato2099/repos","events_url":"https://api.github.com/users/renato2099/events{/privacy}","received_events_url":"https://api.github.com/users/renato2099/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T19:52:08Z","updated_at":"2020-08-26T19:52:50Z","author_association":"CONTRIBUTOR","body":"I was not sure which were the code paths that could use the json parsing, that is why I added it where it actually takes place.\r\nI moved it now to the createSegmentCommand as per your suggestion @Jackie-Jiang  I decided to keep the test as I think it is good that we add tests for these commands, let me know what you think.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681089584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681105197","html_url":"https://github.com/apache/pinot/pull/5927#issuecomment-681105197","issue_url":"https://api.github.com/repos/apache/pinot/issues/5927","id":681105197,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTEwNTE5Nw==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T20:25:46Z","updated_at":"2020-08-26T20:25:46Z","author_association":"CONTRIBUTOR","body":"Can you also update the PR description of why we need to do this, e.g. multiple input files per day and you want to refresh data on same day ?\r\nAnd give an example of input data directory structure and expected segments directory structure.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681105197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681121098","html_url":"https://github.com/apache/pinot/issues/5928#issuecomment-681121098","issue_url":"https://api.github.com/repos/apache/pinot/issues/5928","id":681121098,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTEyMTA5OA==","user":{"login":"fpj","id":572920,"node_id":"MDQ6VXNlcjU3MjkyMA==","avatar_url":"https://avatars.githubusercontent.com/u/572920?v=4","gravatar_id":"","url":"https://api.github.com/users/fpj","html_url":"https://github.com/fpj","followers_url":"https://api.github.com/users/fpj/followers","following_url":"https://api.github.com/users/fpj/following{/other_user}","gists_url":"https://api.github.com/users/fpj/gists{/gist_id}","starred_url":"https://api.github.com/users/fpj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fpj/subscriptions","organizations_url":"https://api.github.com/users/fpj/orgs","repos_url":"https://api.github.com/users/fpj/repos","events_url":"https://api.github.com/users/fpj/events{/privacy}","received_events_url":"https://api.github.com/users/fpj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T21:00:15Z","updated_at":"2020-08-26T21:00:15Z","author_association":"NONE","body":"Thanks for starting this issue, @kishoreg. I'm wondering what would be the best way to approach the implementation of a connector. I started by looking at the spi interfaces, and in particular at the `StreamLevelConsumer`. Here is the reason.\r\n\r\nPravega has as a few different APIs, the main one being the event stream API. it also has a batch API that enables unordered reads for parallelism, but let's focus on the event stream API for now. A Pravega stream comprises a set of parallel segments, and that set can change over time according to a scaling policy. We do not expose the complexity of dealing with the set of segments changing, and let the readers in a group coordinate internally the assignment of segments, respecting order. \r\n\r\nGiven that segments aren't clearly exposed in the event stream API, the `StreamLevelConsumer` interface seems to provide the right level of abstraction, except for the commit call. We don't really provide the ability to commit per reader, like Kafka provides the ability to commit per consumer. Pravega reader groups instead produce checkpoints, which are consistent collections of offsets for segments currently being read. The application sees checkpoints.\r\n\r\nOur approach to recording positions of one or more streams is consequently more coarse-grained and coordinated across the group. I wanted to understand how I can introduce checkpoints given that the interface expects a commit implementation.\r\n\r\nI'd love to get some input and hopefully some ideas. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681121098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681180908","html_url":"https://github.com/apache/pinot/pull/5917#issuecomment-681180908","issue_url":"https://api.github.com/repos/apache/pinot/issues/5917","id":681180908,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTE4MDkwOA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T23:49:16Z","updated_at":"2020-08-26T23:49:16Z","author_association":"CONTRIBUTOR","body":"Thanks @fx19880617 and @kishoreg I will make one last sweep here to make sure if a role crashes the process does. then ask to merge (and ideally cut a snapshot)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681180908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681183127","html_url":"https://github.com/apache/pinot/pull/5922#issuecomment-681183127","issue_url":"https://api.github.com/repos/apache/pinot/issues/5922","id":681183127,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTE4MzEyNw==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T23:57:48Z","updated_at":"2020-08-26T23:57:48Z","author_association":"CONTRIBUTOR","body":"Discussed offline. The \"clearing\" of values is logical. Implementation can be that we maintain a from/to handle on the circular buffer and count only those buckets populated since the last call.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681183127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681185598","html_url":"https://github.com/apache/pinot/pull/5873#issuecomment-681185598","issue_url":"https://api.github.com/repos/apache/pinot/issues/5873","id":681185598,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTE4NTU5OA==","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T00:06:15Z","updated_at":"2020-08-27T00:06:15Z","author_association":"MEMBER","body":"> Most of these are already tracked in transformers. Invalid columns etc\r\n\r\nPlus, the transformers are applied on each of the records. We don't have to do the schema validation at every record. All we need to do is to validate the schemas only once when a segment is about to be built.\r\n@kishoreg let me know if you have any other concern.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681185598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681200903","html_url":"https://github.com/apache/pinot/pull/5917#issuecomment-681200903","issue_url":"https://api.github.com/repos/apache/pinot/issues/5917","id":681200903,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTIwMDkwMw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T01:01:19Z","updated_at":"2020-08-27T01:01:19Z","author_association":"CONTRIBUTOR","body":"ok PTAL I finished polishing the exit status work and updated Javadoc","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681200903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681321552","html_url":"https://github.com/apache/pinot/pull/5846#issuecomment-681321552","issue_url":"https://api.github.com/repos/apache/pinot/issues/5846","id":681321552,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTMyMTU1Mg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T03:26:26Z","updated_at":"2020-08-27T03:26:26Z","author_association":"CONTRIBUTOR","body":"mentioned on slack, but can we get a composite variant of this for ServiceManager?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681321552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681329302","html_url":"https://github.com/apache/pinot/pull/5718#issuecomment-681329302","issue_url":"https://api.github.com/repos/apache/pinot/issues/5718","id":681329302,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTMyOTMwMg==","user":{"login":"guruguha","id":9054682,"node_id":"MDQ6VXNlcjkwNTQ2ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9054682?v=4","gravatar_id":"","url":"https://api.github.com/users/guruguha","html_url":"https://github.com/guruguha","followers_url":"https://api.github.com/users/guruguha/followers","following_url":"https://api.github.com/users/guruguha/following{/other_user}","gists_url":"https://api.github.com/users/guruguha/gists{/gist_id}","starred_url":"https://api.github.com/users/guruguha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guruguha/subscriptions","organizations_url":"https://api.github.com/users/guruguha/orgs","repos_url":"https://api.github.com/users/guruguha/repos","events_url":"https://api.github.com/users/guruguha/events{/privacy}","received_events_url":"https://api.github.com/users/guruguha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T03:43:22Z","updated_at":"2020-08-27T03:43:22Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu  can you please review again?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681329302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681770066","html_url":"https://github.com/apache/pinot/pull/5923#issuecomment-681770066","issue_url":"https://api.github.com/repos/apache/pinot/issues/5923","id":681770066,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTc3MDA2Ng==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T08:23:13Z","updated_at":"2020-08-27T08:23:13Z","author_association":"MEMBER","body":"While this provides a good error message, the right fix would be to add this validation to table config and throw exception when a user updates table config with invalid column names","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681770066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681771749","html_url":"https://github.com/apache/pinot/pull/5927#issuecomment-681771749","issue_url":"https://api.github.com/repos/apache/pinot/issues/5927","id":681771749,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTc3MTc0OQ==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T08:24:16Z","updated_at":"2020-08-27T08:24:16Z","author_association":"MEMBER","body":"please update the docs as well","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/681771749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/682022340","html_url":"https://github.com/apache/pinot/issues/5751#issuecomment-682022340","issue_url":"https://api.github.com/repos/apache/pinot/issues/5751","id":682022340,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjAyMjM0MA==","user":{"login":"ianvkoeppe","id":13874383,"node_id":"MDQ6VXNlcjEzODc0Mzgz","avatar_url":"https://avatars.githubusercontent.com/u/13874383?v=4","gravatar_id":"","url":"https://api.github.com/users/ianvkoeppe","html_url":"https://github.com/ianvkoeppe","followers_url":"https://api.github.com/users/ianvkoeppe/followers","following_url":"https://api.github.com/users/ianvkoeppe/following{/other_user}","gists_url":"https://api.github.com/users/ianvkoeppe/gists{/gist_id}","starred_url":"https://api.github.com/users/ianvkoeppe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ianvkoeppe/subscriptions","organizations_url":"https://api.github.com/users/ianvkoeppe/orgs","repos_url":"https://api.github.com/users/ianvkoeppe/repos","events_url":"https://api.github.com/users/ianvkoeppe/events{/privacy}","received_events_url":"https://api.github.com/users/ianvkoeppe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T15:29:51Z","updated_at":"2020-08-27T15:29:51Z","author_association":"CONTRIBUTOR","body":"Thanks all! I appreciate the rapid iteration on the design. @sajjad-moradi I'm happy to iterate on that PR and make necessary changes. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/682022340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/682078679","html_url":"https://github.com/apache/pinot/pull/5923#issuecomment-682078679","issue_url":"https://api.github.com/repos/apache/pinot/issues/5923","id":682078679,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjA3ODY3OQ==","user":{"login":"icefury71","id":728023,"node_id":"MDQ6VXNlcjcyODAyMw==","avatar_url":"https://avatars.githubusercontent.com/u/728023?v=4","gravatar_id":"","url":"https://api.github.com/users/icefury71","html_url":"https://github.com/icefury71","followers_url":"https://api.github.com/users/icefury71/followers","following_url":"https://api.github.com/users/icefury71/following{/other_user}","gists_url":"https://api.github.com/users/icefury71/gists{/gist_id}","starred_url":"https://api.github.com/users/icefury71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icefury71/subscriptions","organizations_url":"https://api.github.com/users/icefury71/orgs","repos_url":"https://api.github.com/users/icefury71/repos","events_url":"https://api.github.com/users/icefury71/events{/privacy}","received_events_url":"https://api.github.com/users/icefury71/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T17:10:26Z","updated_at":"2020-08-27T17:10:26Z","author_association":"CONTRIBUTOR","body":"> While this provides a good error message, the right fix would be to add this validation to table config and throw exception when a user updates table config with invalid column names\r\n\r\nAgreed, this is not attempting to provide a complete fix - simply adding a required null check. The complete fix as you mention should be a complete validation of table and schema config. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/682078679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/682099489","html_url":"https://github.com/apache/pinot/issues/5704#issuecomment-682099489","issue_url":"https://api.github.com/repos/apache/pinot/issues/5704","id":682099489,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjA5OTQ4OQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T17:52:12Z","updated_at":"2020-08-27T17:52:12Z","author_association":"CONTRIBUTOR","body":"@deemoliu can you verify that your needs is satisfied with #5438 ?\r\nWe can then working on presto side to do query rewrite for this.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/682099489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/682155281","html_url":"https://github.com/apache/pinot/issues/5800#issuecomment-682155281","issue_url":"https://api.github.com/repos/apache/pinot/issues/5800","id":682155281,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjE1NTI4MQ==","user":{"login":"MarceloNunesAlves","id":35287700,"node_id":"MDQ6VXNlcjM1Mjg3NzAw","avatar_url":"https://avatars.githubusercontent.com/u/35287700?v=4","gravatar_id":"","url":"https://api.github.com/users/MarceloNunesAlves","html_url":"https://github.com/MarceloNunesAlves","followers_url":"https://api.github.com/users/MarceloNunesAlves/followers","following_url":"https://api.github.com/users/MarceloNunesAlves/following{/other_user}","gists_url":"https://api.github.com/users/MarceloNunesAlves/gists{/gist_id}","starred_url":"https://api.github.com/users/MarceloNunesAlves/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarceloNunesAlves/subscriptions","organizations_url":"https://api.github.com/users/MarceloNunesAlves/orgs","repos_url":"https://api.github.com/users/MarceloNunesAlves/repos","events_url":"https://api.github.com/users/MarceloNunesAlves/events{/privacy}","received_events_url":"https://api.github.com/users/MarceloNunesAlves/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T19:47:19Z","updated_at":"2020-08-27T19:47:19Z","author_association":"NONE","body":"@kishoreg, I haven't tried yet. tks","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/682155281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/682186064","html_url":"https://github.com/apache/pinot/pull/5927#issuecomment-682186064","issue_url":"https://api.github.com/repos/apache/pinot/issues/5927","id":682186064,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjE4NjA2NA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T20:55:40Z","updated_at":"2020-08-27T20:55:40Z","author_association":"CONTRIBUTOR","body":"Please remember to update the doc here: https://docs.pinot.apache.org/basics/components/segment#load-data-in-batch\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/682186064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/682229196","html_url":"https://github.com/apache/pinot/issues/5753#issuecomment-682229196","issue_url":"https://api.github.com/repos/apache/pinot/issues/5753","id":682229196,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjIyOTE5Ng==","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T22:49:26Z","updated_at":"2020-08-27T22:49:26Z","author_association":"CONTRIBUTOR","body":"Design doc for this: https://docs.google.com/document/d/1-e_9aHQB4HXS38ONtofdxNvMsGmAoYfSnc2LP88MbIc/edit#\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/682229196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]